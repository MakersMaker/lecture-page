/*
 * GoJS v1.8.24 JavaScript Library for HTML Diagrams
 * Northwoods Software, https://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2018 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: https://gojs.net/1.8.24/doc/license.html.
 */
(function (window)
{
    var g, ca = {};
    if (!window.document || void 0 === window.document.createElement("canvas").getContext) throw window.console && window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."), Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");
    if (!Object.defineProperty) throw Error("GoJS requires a newer version of JavaScript");
    Function.prototype.bind || (Function.prototype.bind = function (a)
    {
        function b()
        {
            return f.apply(a, e.concat(d.call(arguments)))
        }

        function c()
        {}
        var d = Array.prototype.slice,
            e = d.call(arguments, 1),
            f = this;
        c.prototype = this.prototype;
        b.prototype = new c;
        return b
    });
    (function ()
    {
        for (var a = 0, b = ["ms", "moz", "webkit", "o"], c = 0; c < b.length && !window.requestAnimationFrame; ++c) window.requestAnimationFrame = window[b[c] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[b[c] + "CancelAnimationFrame"] || window[b[c] + "CancelRequestAnimationFrame"];
        window.requestAnimationFrame || (window.requestAnimationFrame = function (b)
        {
            var c = (new Date).getTime(),
                f = Math.max(8, 16 - (c - a)),
                h = window.setTimeout(function ()
                {
                    b(c + f)
                }, f);
            a = c + f;
            return h
        });
        window.cancelAnimationFrame || (window.cancelAnimationFrame =
            function (a)
            {
                window.clearTimeout(a)
            })
    })();
    ca.Debug = null;
    var w = {
        od: 1,
        Tc: 2,
        fd: 4,
        ed: 8,
        Gn: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("534.30") && 0 < window.navigator.userAgent.indexOf("Android"),
        uu: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("MSIE 9.0"),
        cq: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("MSIE 10.0"),
        dq: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("Trident/7"),
        TA: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("Edge/"),
        yh: void 0 !== window.navigator && void 0 !==
        window.navigator.platform && 0 <= window.navigator.platform.toUpperCase().indexOf("MAC"),
        CF: void 0 !== window.navigator && void 0 !== window.navigator.platform && null !== window.navigator.platform.match(/(iPhone|iPod|iPad)/i),
        OE: function (a, b, c)
        {
            var d = -1;
            return function ()
            {
                var e = this,
                    f = arguments; - 1 !== d && w.clearTimeout(d);
                d = w.setTimeout(function ()
                {
                    d = -1;
                    c || a.apply(e, f)
                }, b);
                c && !d && a.apply(e, f)
            }
        },
        setTimeout: function (a, b)
        {
            return window.setTimeout(a, b)
        },
        clearTimeout: function (a)
        {
            window.clearTimeout(a)
        },
        createElement: function (a)
        {
            return window.document.createElement(a)
        },
        k: function (a)
        {
            throw Error(a);
        },
        ma: function (a, b)
        {
            var c = "The object is frozen, so its properties cannot be set: " + a.toString();
            void 0 !== b && (c += "  to value: " + b);
            w.k(c)
        },
        G: function (a, b, c, d)
        {
            a instanceof b || (c = w.getTypeName(c), void 0 !== d && (c += "." + d), w.Fd(a, b, c))
        },
        j: function (a, b, c, d)
        {
            typeof a !== b && (c = w.getTypeName(c), void 0 !== d && (c += "." + d), w.Fd(a, b, c))
        },
        Ad: function (a, b, c)
        {
            "number" === typeof a && isFinite(a) || (b = w.getTypeName(b), void 0 !== c && (b += "." + c), w.k(b + " must be a real number type, and not NaN or Infinity: " +
                a))
        },
        ob: function (a, b, c, d)
        {
            a instanceof da && a.Je === b || (c = w.getTypeName(c), void 0 !== d && (c += "." + d), w.Fd(a, "a constant of class " + w.pf(b), c))
        },
        GK: function (a, b)
        {
            "string" === typeof a ? fa(a) || w.k('Color "' + a + '" is not a valid color string for ' + b) : a instanceof ga || w.k("Value for " + b + " must be a color string or a Brush, not " + a)
        },
        Fd: function (a, b, c, d)
        {
            b = w.getTypeName(b);
            c = w.getTypeName(c);
            void 0 !== d && (c += "." + d);
            "string" === typeof a ? w.k(c + " value is not an instance of " + b + ': "' + a + '"') : w.k(c + " value is not an instance of " +
                b + ": " + a)
        },
        Fa: function (a, b, c, d)
        {
            c = w.getTypeName(c);
            void 0 !== d && (c += "." + d);
            w.k(c + " is not in the range " + b + ": " + a)
        },
        nd: function (a)
        {
            w.k(w.pf(a) + " constructor cannot take any arguments.")
        },
        Na: function (a)
        {
            w.k("Collection was modified during iteration: " + a.toString() + "\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")
        },
        Mj: function (a, b)
        {
            w.k("No property to set for this enum value: " + b + " on " + a.toString())
        },
        trace: function (a)
        {
            window.console && window.console.log(a)
        },
        tx:
            {},
        Ut: function (a, b)
        {
            !0 !== w.tx[a] && (w.tx[a] = !0, window.console && window.console.log(a + " is deprecated in " + b + ", see the GoJS change log for more information."))
        },
        Pa: function (a)
        {
            return "object" === typeof a && null !== a
        },
        isArray: function (a)
        {
            return Array.isArray(a) || a instanceof NodeList || a instanceof HTMLCollection
        },
        zI: function (a)
        {
            return Array.isArray(a)
        },
        lA: function (a, b, c)
        {
            w.isArray(a) || w.Fd(a, "Array or NodeList or HTMLCollection", b, c)
        },
        bb: function (a)
        {
            return a.length
        },
        Tl: function (a)
        {
            return Array.prototype.slice.call(a)
        },
        Ba: function (a, b)
        {
            Array.isArray(a);
            return a[b]
        },
        EE: function (a, b, c)
        {
            Array.isArray(a) ? a[b] = c : w.k("Cannot replace an object in an HTMLCollection or NodeList at " + b)
        },
        Ql: function (a, b)
        {
            if (Array.isArray(a)) return a.indexOf(b);
            for (var c = a.length, d = 0; d < c; d++)
                if (a[d] === b) return d;
            return -1
        },
        qh: function (a, b, c)
        {
            Array.isArray(a) ? b >= a.length ? a.push(c) : a.splice(b, 0, c) : w.k("Cannot insert an object into an HTMLCollection or NodeList: " + c + " at " + b)
        },
        Ig: function (a,
                      b)
        {
            Array.isArray(a) ? b >= a.length ? a.pop() : a.splice(b, 1) : w.k("Cannot remove an object from an HTMLCollection or NodeList at " + b)
        },
        My: [],
        K: function ()
        {
            var a = w.My.pop();
            return void 0 === a ? new y : a
        },
        xb: function (a, b)
        {
            var c = w.My.pop();
            if (void 0 === c) return new y(a, b);
            c.x = a;
            c.y = b;
            return c
        },
        v: function (a)
        {
            w.My.push(a)
        },
        cC: [],
        rm: function ()
        {
            var a = w.cC.pop();
            return void 0 === a ? new ia : a
        },
        Lk: function (a)
        {
            w.cC.push(a)
        },
        Ny: [],
        Kf: function ()
        {
            var a = w.Ny.pop();
            return void 0 === a ? new B : a
        },
        kg: function (a, b, c, d)
        {
            var e = w.Ny.pop();
            if (void 0 === e) return new B(a, b, c, d);
            e.x = a;
            e.y = b;
            e.width = c;
            e.height = d;
            return e
        },
        Hb: function (a)
        {
            w.Ny.push(a)
        },
        dC: [],
        Vg: function ()
        {
            var a = w.dC.pop();
            return void 0 === a ? new ka : a
        },
        bf: function (a)
        {
            w.dC.push(a)
        },
        Oy: null,
        s: function ()
        {
            var a = w.Oy;
            return null !== a ? (w.Oy = null, a) : new la
        },
        q: function (a)
        {
            a.reset();
            w.Oy = a
        },
        Ly: [],
        gb: function ()
        {
            var a = w.Ly.pop();
            return void 0 === a ? [] : a
        },
        ta: function (a)
        {
            a.length = 0;
            w.Ly.push(a)
        },
        jo: Object.freeze([]),
        um: 1,
        nc: function (a)
        {
            a.__gohashid = w.um++
        },
        Yp: function (a)
        {
            var b = a.__gohashid;
            void 0 === b && (b = w.um++, a.__gohashid = b);
            return b
        },
        Pd: function (a)
        {
            return a.__gohashid
        },
        ga: function (a, b)
        {
            b.Yy = a;
            ca[a] = b
        },
        La: function (a, b)
        {
            function c()
            {}
            c.prototype = b.prototype;
            a.prototype = new c;
            a.prototype.constructor = a
        },
        ni: function (a)
        {
            a.cH = !0
        },
        defineProperty: function (a, b, c, d, e)
        {
            w.j(a, "function", "Util.defineProperty:classfunc");
            w.j(b, "object", "Util.defineProperty:propobj");
            w.j(c, "function", "Util.defineProperty:getter");
            w.j(d, "function", "Util.defineProperty:setter");
            for (var f in b)
            {
                b = b[f];
                c = {
                    get: c,
                    set: d,
                    enumerable: !0
                };
                if (void 0 !== e)
                    for (var h in e) c[h] = e[h];
                Object.defineProperty(a.prototype, f, c);
                e = Object.getOwnPropertyDescriptor(a.prototype, f);
                b && e && Object.defineProperty(a.prototype, b, e);
                break
            }
        },
        dK: !1,
        u: function (a, b, c, d)
        {
            w.j(a, "function", "Util.defineReadOnlyProperty:classfunc");
            w.j(b, "object", "Util.defineReadOnlyProperty:propobj");
            w.j(c, "function", "Util.defineReadOnlyProperty:getter");
            for (var e in b)
            {
                var f = b[e];
                b = {
                    get: c,
                    set: function (a)
                    {
                        w.k('The property "' + f + '" is read-only and cannot be set to ' +
                            a)
                    },
                    enumerable: !0
                };
                if (void 0 !== d)
                    for (var h in d) b[h] = d[h];
                Object.defineProperty(a.prototype, e, b);
                d = Object.getOwnPropertyDescriptor(a.prototype, e);
                f && d && Object.defineProperty(a.prototype, f, d);
                break
            }
        },
        ae: function (a, b)
        {
            for (var c in b) b[c] = !0;
            a.prototype.ZG = b
        },
        getTypeName: function (a)
        {
            return void 0 === a ? "" : "string" === typeof a ? a : "function" === typeof a ? w.pf(a) : null === a ? "*" : ""
        },
        pf: function (a)
        {
            if ("function" === typeof a)
            {
                if (a.Yy) return a.Yy;
                if (a.name) return a.name;
                var b = a.toString(),
                    c = b.indexOf("("),
                    b = b.substring(9,
                        c).trim();
                if ("" !== b) return a.Yy = b
            }
            else if (w.Pa(a) && a.constructor) return w.pf(a.constructor);
            return typeof a
        },
        p: function (a, b, c)
        {
            w.j(a, "function", "Util.defineEnumValue:classfunc");
            w.j(b, "string", "Util.defineEnumValue:name");
            w.j(c, "number", "Util.defineEnumValue:num");
            c = new da(a, b, c);
            Object.freeze(c);
            a[b] = c;
            var d = a.hv;
            d instanceof ma || (d = new ma("string", da), a.hv = d);
            d.add(b, c);
            return c
        },
        vb: function (a, b)
        {
            if (!a || !b) return null;
            var c = void 0;
            try
            {
                "function" === typeof b ? c = b(a) : "function" === typeof a.getAttribute ?
                    (c = a.getAttribute(b), null === c && (c = void 0)) : c = a[b]
            }
            catch (d)
            {}
            return c
        },
        Ma: function (a, b, c)
        {
            if (a && b) try
            {
                "function" === typeof b ? b(a, c) : "function" === typeof a.setAttribute ? a.setAttribute(b, c) : a[b] = c
            }
            catch (d)
            {}
        },
        Xu: function (a, b)
        {
            w.j(a, "object", "Setting properties requires Objects as arguments");
            w.j(b, "object", "Setting properties requires Objects as arguments");
            var c = a instanceof C,
                d = a instanceof D,
                e;
            for (e in b)
            {
                "" === e && w.k("Setting properties requires non-empty property names");
                var f = a,
                    h = e;
                if (c || d)
                {
                    var k =
                        e.indexOf(".");
                    if (0 < k)
                    {
                        var l = e.substring(0, k);
                        if (c) f = a.Cd(l);
                        else if (f = a[l], void 0 === f || null === f) f = a.Va[l];
                        w.Pa(f) ? h = e.substr(k + 1) : w.k("Unable to find object named: " + l + " in " + a.toString() + " when trying to set property: " + e)
                    }
                }
                if ("_" !== h[0] && !w.sF(f, h))
                    if (d && "ModelChanged" === h)
                    {
                        a.mH(b[h]);
                        continue
                    }
                    else if (d && "Changed" === h)
                    {
                        a.kn(b[h]);
                        continue
                    }
                    else if (d && w.sF(a.Va, h)) f = a.Va;
                    else if (d && oa(a, h))
                    {
                        a.Zw(h, b[h]);
                        continue
                    }
                    else if (a instanceof F && "Changed" === h)
                    {
                        a.kn(b[h]);
                        continue
                    }
                    else w.k('Trying to set undefined property "' +
                            h + '" on object: ' + f.toString());
                f[h] = b[e];
                "_" === h[0] && f instanceof G && f.jH(h)
            }
        },
        sF: function (a, b)
        {
            if (a.hasOwnProperty(b)) return !0;
            for (var c = Object.getPrototypeOf(a); c && c !== Function;)
            {
                if (c.hasOwnProperty(b)) return !0;
                var d = c.ZG;
                if (d && d[b]) return !0;
                c = Object.getPrototypeOf(c)
            }
            return !1
        },
        mJ: function (a)
        {
            for (var b = [], c = 0; 256 > c; c++) b[c] = c;
            for (var d = 0, e = 0, c = 0; 256 > c; c++) d = (d + b[c] + 119) % 256, e = b[c], b[c] = b[d], b[d] = e;
            for (var d = c = 0, f = "", h = 0; h < a.length; h++) c = (c + 1) % 256, d = (d + b[c]) % 256, e = b[c], b[c] = b[d], b[d] = e, f += String.fromCharCode(a.charCodeAt(h) ^
                b[(b[c] + b[d]) % 256]);
            return f
        },
        nI: function (a)
        {
            for (var b = {}, c = 0; 256 > c; c++) b["0123456789abcdef".charAt(c >> 4) + "0123456789abcdef".charAt(c & 15)] = String.fromCharCode(c);
            a.length % 2 && (a = "0" + a);
            for (var d = [], e = 0, c = 0; c < a.length; c += 2) d[e++] = b[a.substr(c, 2)];
            a = d.join("");
            return "" === a ? "0" : a
        },
        Jg: function (a)
        {
            return w.mJ(w.nI(a))
        },
        tm: null,
        adym: "7da71ca0ad381e90",
        vfo: "2be64efdb162",
        IK: "@COLOR1",
        JK: "@COLOR2",
        PE: !1,
        Rt: null,
        St: null
    };
    w.tm = function ()
    {
        var a = window.document.createElement("canvas"),
            b = a.getContext("2d");
        b[w.Jg("7ca11abfd022028846")] = w.Jg("398c3597c01238");
        for (var c = ["5da73c80a36755dc038e4972187c3cae51fd22", "32ab5ff3b26f42dc0ed90f224c2913b54ae6247590da4bb21c324ba3a84e385776", "54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387", "74bf19bce72555874c86"], d = 1; 5 > d; d++) b[w.Jg("7ca11abfd7330390")](w.Jg(c[d - 1]), 10, 15 * d + 0);
        b[w.Jg("7ca11abfd022028846")] = w.Jg("39f046ebb36e4b");
        for (d = 1; 5 > d; d++) b[w.Jg("7ca11abfd7330390")](w.Jg(c[d -
        1]), 10, 15 * d + 0);
        if (4 !== c.length || "5" !== c[0][0] || "7" !== c[3][0]) w.p = function (a, b)
        {
            var c = new da(a, b, 2);
            Object.freeze(c);
            a[b] = c;
            var d = a.hv;
            d instanceof ma || (d = new ma("string", da), a.hv = d);
            d.add(b, c);
            return c
        };
        return a
    }();

    function da(a, b, c)
    {
        w.nc(this);
        this.rC = a;
        this.Sb = b;
        this.gH = c
    }
    w.ga("EnumValue", da);
    da.prototype.toString = function ()
    {
        return w.pf(this.rC) + "." + this.Sb
    };
    w.u(da,
        {
            Je: "classType"
        }, function ()
        {
            return this.rC
        });
    w.u(da,
        {
            name: "name"
        }, function ()
        {
            return this.Sb
        });
    w.u(da,
        {
            value: "value"
        }, function ()
        {
            return this.gH
        });
    var pa;
    da.findName = pa = function (a, b)
    {
        if (void 0 === b || null === b || "" === b) return null;
        w.j(a, "function", "findName:classfunc");
        w.j(b, "string", "EnumValue.findName:name");
        var c = a.hv;
        return c instanceof ma ? c.ka(b) : null
    };

    function qa()
    {
        this.pC = []
    }
    qa.prototype.toString = function ()
    {
        return this.pC.join("")
    };
    qa.prototype.add = function (a)
    {
        "" !== a && this.pC.push(a)
    };

    function ra()
    {}

    function sa(a)
    {
        void 0 === a && (a = 42);
        this.seed = a;
        this.Hy = 48271;
        this.gv = 2147483647;
        this.bC = this.gv / this.Hy;
        this.OG = this.gv % this.Hy;
        this.NG = 1 / this.gv;
        this.random()
    }
    sa.prototype.random = function ()
    {
        var a = this.seed % this.bC * this.Hy - this.seed / this.bC * this.OG;
        this.seed = 0 < a ? a : a + this.gv;
        return this.seed * this.NG
    };

    function ta()
    {}
    w.u(ta,
        {
            i: "iterator"
        }, function ()
        {
            return this
        });
    ta.prototype.reset = ta.prototype.reset = function () {};
    ta.prototype.next = ta.prototype.next = function ()
    {
        return !1
    };
    ta.prototype.hasNext = function ()
    {
        return !1
    };
    ta.prototype.first = ta.prototype.first = function ()
    {
        return null
    };
    ta.prototype.any = function ()
    {
        return !1
    };
    ta.prototype.all = function ()
    {
        return !0
    };
    ta.prototype.each = function ()
    {
        return this
    };
    ta.prototype.map = function ()
    {
        return this
    };
    ta.prototype.filter = function ()
    {
        return this
    };
    ta.prototype.concat = function (a)
    {
        return a.i
    };
    w.u(ta,
        {
            count: "count"
        }, function ()
        {
            return 0
        });
    ta.prototype.Nf = function () {};
    ta.prototype.toString = function ()
    {
        return "EmptyIterator"
    };
    var ua = new ta;

    function wa(a)
    {
        this.key = -1;
        this.value = a
    }
    w.ae(wa,
        {
            key: !0,
            value: !0
        });
    w.u(wa,
        {
            i: "iterator"
        }, function ()
        {
            return this
        });
    wa.prototype.reset = wa.prototype.reset = function ()
    {
        this.key = -1
    };
    wa.prototype.next = wa.prototype.next = function ()
    {
        return -1 === this.key ? (this.key = 0, !0) : !1
    };
    wa.prototype.hasNext = function ()
    {
        return this.next()
    };
    wa.prototype.first = wa.prototype.first = function ()
    {
        this.key = 0;
        return this.value
    };
    wa.prototype.any = function (a)
    {
        this.key = -1;
        return a(this.value)
    };
    wa.prototype.all = function (a)
    {
        this.key = -1;
        return a(this.value)
    };
    wa.prototype.each = function (a)
    {
        this.key = -1;
        a(this.value);
        return this
    };
    wa.prototype.map = function (a)
    {
        return new wa(a(this.value))
    };
    wa.prototype.filter = function (a)
    {
        return a(this.value) ? new wa(this.value) : ua
    };
    wa.prototype.concat = function (a)
    {
        return new xa(this, a.i)
    };
    w.u(wa,
        {
            count: "count"
        }, function ()
        {
            return 1
        });
    wa.prototype.Nf = function ()
    {
        this.value = null
    };
    wa.prototype.toString = function ()
    {
        return "SingletonIterator(" + this.value + ")"
    };

    function xa(a, b)
    {
        this.vl = a;
        this.wl = b;
        this.iv = !1
    }
    w.ae(xa,
        {
            key: !0,
            value: !0
        });
    w.u(xa,
        {
            i: "iterator"
        }, function ()
        {
            return this
        });
    xa.prototype.reset = xa.prototype.reset = function ()
    {
        this.vl.reset();
        this.wl.reset();
        this.iv = !1
    };
    xa.prototype.next = xa.prototype.next = function ()
    {
        if (!this.iv)
        {
            var a = this.vl;
            if (a.next()) return this.key = a.key, this.value = a.value, !0;
            this.iv = !0
        }
        return this.iv && (a = this.wl, a.next()) ? (this.key = a.key, this.value = a.value, !0) : !1
    };
    xa.prototype.hasNext = function ()
    {
        return this.next()
    };
    xa.prototype.first = xa.prototype.first = function ()
    {
        this.reset();
        return this.next() ? this.value : null
    };
    xa.prototype.any = function (a)
    {
        return this.vl.any(a) || this.wl.any(a) ? !0 : !1
    };
    xa.prototype.all = function (a)
    {
        return this.vl.all(a) && this.wl.all(a) ? !0 : !1
    };
    xa.prototype.each = function (a)
    {
        this.vl.each(a);
        this.wl.each(a);
        return this
    };
    xa.prototype.map = function (a)
    {
        return new xa(this.vl.map(a), this.wl.map(a))
    };
    xa.prototype.filter = function (a)
    {
        return new xa(this.vl.filter(a), this.wl.filter(a))
    };
    xa.prototype.concat = function (a)
    {
        return new xa(this, a.i)
    };
    w.u(xa,
        {
            count: "count"
        }, function ()
        {
            return this.vl.count + this.wl.count
        });
    xa.prototype.Nf = function ()
    {
        this.value = this.key = null
    };
    xa.prototype.toString = function ()
    {
        return "ConcatIterator()"
    };

    function za(a)
    {
        this.Ac = a;
        this.$h = null;
        a.Fb = null;
        this.Ta = a.F;
        this.zc = -1
    }
    w.ae(za,
        {
            key: !0,
            value: !0
        });
    w.u(za,
        {
            i: "iterator"
        }, function ()
        {
            return this
        });
    w.defineProperty(za,
        {
            rq: "predicate"
        }, function ()
        {
            return this.$h
        }, function (a)
        {
            this.$h = a
        });
    za.prototype.reset = za.prototype.reset = function ()
    {
        var a = this.Ac;
        a.Fb = null;
        this.Ta = a.F;
        this.zc = -1
    };
    za.prototype.next = za.prototype.next = function ()
    {
        var a = this.Ac;
        if (a.F !== this.Ta)
        {
            if (0 > this.key) return !1;
            w.Na(a)
        }
        var a = a.n,
            b = a.length,
            c = ++this.zc,
            d = this.$h;
        if (null !== d)
            for (; c < b;)
            {
                var e = a[c];
                if (d(e)) return this.key = this.zc = c, this.value = e, !0;
                c++
            }
        else
        {
            if (c < b) return this.key = c, this.value = a[c], !0;
            this.Nf()
        }
        return !1
    };
    za.prototype.hasNext = function ()
    {
        return this.next()
    };
    za.prototype.first = za.prototype.first = function ()
    {
        var a = this.Ac;
        this.Ta = a.F;
        this.zc = 0;
        var a = a.n,
            b = a.length,
            c = this.$h;
        if (null !== c)
        {
            for (var d = 0; d < b;)
            {
                var e = a[d];
                if (c(e)) return this.key = this.zc = d, this.value = e;
                d++
            }
            return null
        }
        return 0 < b ? (e = a[0], this.key = 0, this.value = e) : null
    };
    za.prototype.any = function (a)
    {
        var b = this.Ac;
        b.Fb = null;
        var c = b.F;
        this.zc = -1;
        for (var d = b.n, e = d.length, f = this.$h, h = 0; h < e; h++)
        {
            var k = d[h];
            if (null === f || f(k))
            {
                if (a(k)) return !0;
                b.F !== c && w.Na(b)
            }
        }
        return !1
    };
    za.prototype.all = function (a)
    {
        var b = this.Ac;
        b.Fb = null;
        var c = b.F;
        this.zc = -1;
        for (var d = b.n, e = d.length, f = this.$h, h = 0; h < e; h++)
        {
            var k = d[h];
            if (null === f || f(k))
            {
                if (!a(k)) return !1;
                b.F !== c && w.Na(b)
            }
        }
        return !0
    };
    za.prototype.each = function (a)
    {
        var b = this.Ac;
        b.Fb = null;
        var c = b.F;
        this.zc = -1;
        for (var d = b.n, e = d.length, f = this.$h, h = 0; h < e; h++)
        {
            var k = d[h];
            if (null === f || f(k)) a(k), b.F !== c && w.Na(b)
        }
        return this
    };
    za.prototype.map = function (a)
    {
        var b = this.Ac;
        b.Fb = null;
        var c = b.F;
        this.zc = -1;
        for (var d = [], e = b.n, f = e.length, h = this.$h, k = 0; k < f; k++)
        {
            var l = e[k];
            if (null === h || h(l)) d.push(a(l)), b.F !== c && w.Na(b)
        }
        a = new H;
        a.n = d;
        a.Lc();
        return a.i
    };
    za.prototype.filter = function (a)
    {
        var b = this.Ac;
        b.Fb = null;
        var c = b.F;
        this.zc = -1;
        for (var d = [], e = b.n, f = e.length, h = this.$h, k = 0; k < f; k++)
        {
            var l = e[k];
            if (null === h || h(l)) a(l) && d.push(l), b.F !== c && w.Na(b)
        }
        a = new H(b.na);
        a.n = d;
        a.Lc();
        return a.i
    };
    za.prototype.concat = function (a)
    {
        this.Ac.Fb = null;
        return new xa(this, a.i)
    };
    w.u(za,
        {
            count: "count"
        }, function ()
        {
            var a = this.$h;
            if (null !== a)
            {
                for (var b = 0, c = this.Ac.n, d = c.length, e = 0; e < d; e++) a(c[e]) && b++;
                return b
            }
            return this.Ac.n.length
        });
    za.prototype.Nf = function ()
    {
        this.key = -1;
        this.value = null;
        this.Ta = -1;
        this.$h = null;
        this.Ac.Fb = this
    };
    za.prototype.toString = function ()
    {
        return "ListIterator@" + this.zc + "/" + this.Ac.count
    };

    function Aa(a)
    {
        this.Ac = a;
        a.Ti = null;
        this.Ta = a.F;
        this.zc = a.n.length
    }
    w.ae(Aa,
        {
            key: !0,
            value: !0
        });
    w.u(Aa,
        {
            i: "iterator"
        }, function ()
        {
            return this
        });
    Aa.prototype.reset = Aa.prototype.reset = function ()
    {
        var a = this.Ac;
        a.Ti = null;
        this.Ta = a.F;
        this.zc = a.n.length
    };
    Aa.prototype.next = Aa.prototype.next = function ()
    {
        var a = this.Ac;
        if (a.F !== this.Ta)
        {
            if (0 > this.key) return !1;
            w.Na(a)
        }
        var b = --this.zc;
        if (0 <= b) return this.key = b, this.value = a.n[b], !0;
        this.Nf();
        return !1
    };
    Aa.prototype.hasNext = function ()
    {
        return this.next()
    };
    Aa.prototype.first = Aa.prototype.first = function ()
    {
        var a = this.Ac;
        this.Ta = a.F;
        var b = a.n;
        this.zc = a = b.length - 1;
        return 0 <= a ? (b = b[a], this.key = a, this.value = b) : null
    };
    Aa.prototype.any = function (a)
    {
        var b = this.Ac;
        b.Ti = null;
        var c = b.F,
            d = b.n,
            e = d.length;
        this.zc = e;
        for (e -= 1; 0 <= e; e--)
        {
            if (a(d[e])) return !0;
            b.F !== c && w.Na(b)
        }
        return !1
    };
    Aa.prototype.all = function (a)
    {
        var b = this.Ac;
        b.Ti = null;
        var c = b.F,
            d = b.n,
            e = d.length;
        this.zc = e;
        for (e -= 1; 0 <= e; e--)
        {
            if (!a(d[e])) return !1;
            b.F !== c && w.Na(b)
        }
        return !0
    };
    Aa.prototype.each = function (a)
    {
        var b = this.Ac;
        b.Ti = null;
        var c = b.F,
            d = b.n,
            e = d.length;
        this.zc = e;
        for (e -= 1; 0 <= e; e--) a(d[e]), b.F !== c && w.Na(b);
        return this
    };
    Aa.prototype.map = function (a)
    {
        var b = this.Ac;
        b.Ti = null;
        var c = b.F,
            d = [],
            e = b.n,
            f = e.length;
        this.zc = f;
        for (f -= 1; 0 <= f; f--) d.push(a(e[f])), b.F !== c && w.Na(b);
        a = new H;
        a.n = d;
        a.Lc();
        return a.i
    };
    Aa.prototype.filter = function (a)
    {
        var b = this.Ac;
        b.Ti = null;
        var c = b.F,
            d = [],
            e = b.n,
            f = e.length;
        this.zc = f;
        for (f -= 1; 0 <= f; f--)
        {
            var h = e[f];
            a(h) && d.push(h);
            b.F !== c && w.Na(b)
        }
        a = new H(b.na);
        a.n = d;
        a.Lc();
        return a.i
    };
    Aa.prototype.concat = function (a)
    {
        this.Ac.Ti = null;
        return new xa(this, a.i)
    };
    w.u(Aa,
        {
            count: "count"
        }, function ()
        {
            return this.Ac.n.length
        });
    Aa.prototype.Nf = function ()
    {
        this.key = -1;
        this.value = null;
        this.Ta = -1;
        this.Ac.Ti = this
    };
    Aa.prototype.toString = function ()
    {
        return "ListIteratorBackwards(" + this.zc + "/" + this.Ac.count + ")"
    };

    function H(a)
    {
        w.nc(this);
        this.P = !1;
        this.n = [];
        this.F = 0;
        this.Ti = this.Fb = null;
        void 0 === a || null === a ? this.na = null : "string" === typeof a ? "object" === a || "string" === a || "number" === a || "boolean" === a || "function" === a ? this.na = a : w.Fa(a, "the string 'object', 'number', 'string', 'boolean', or 'function'", "List constructor: type") : "function" === typeof a ? this.na = a === Object ? "object" : a === String ? "string" : a === Number ? "number" : a === Boolean ? "boolean" : a === Function ? "function" : a : w.Fa(a, "null, a primitive type name, or a class type",
            "List constructor: type")
    }
    w.ga("List", H);
    H.prototype.Lc = function ()
    {
        var a = this.F;
        a++;
        999999999 < a && (a = 0);
        this.F = a
    };
    H.prototype.freeze = H.prototype.freeze = function ()
    {
        this.P = !0;
        return this
    };
    H.prototype.thaw = H.prototype.Qa = function ()
    {
        this.P = !1;
        return this
    };
    H.prototype.toString = function ()
    {
        return "List(" + w.getTypeName(this.na) + ")#" + w.Pd(this)
    };
    H.prototype.add = H.prototype.add = function (a)
    {
        null !== a && (this.P && w.ma(this, a), this.n.push(a), this.Lc())
    };
    H.prototype.push = H.prototype.push = function (a)
    {
        this.add(a)
    };
    H.prototype.addAll = H.prototype.Nc = function (a)
    {
        if (null === a) return this;
        this.P && w.ma(this);
        var b = this.n;
        if (w.isArray(a))
            for (var c = w.bb(a), d = 0; d < c; d++)
            {
                var e = w.Ba(a, d);
                b.push(e)
            }
        else
            for (a = a.i; a.next();) e = a.value, b.push(e);
        this.Lc();
        return this
    };
    H.prototype.clear = H.prototype.clear = function ()
    {
        this.P && w.ma(this);
        this.n.length = 0;
        this.Lc()
    };
    H.prototype.contains = H.prototype.contains = function (a)
    {
        return null === a ? !1 : -1 !== this.n.indexOf(a)
    };
    H.prototype.has = H.prototype.has = function (a)
    {
        return this.contains(a)
    };
    H.prototype.indexOf = H.prototype.indexOf = function (a)
    {
        return null === a ? -1 : this.n.indexOf(a)
    };
    H.prototype.elt = H.prototype.ea = function (a)
    {
        var b = this.n;
        (0 > a || a >= b.length) && w.Fa(a, "0 <= i < length", H, "elt:i");
        return b[a]
    };
    H.prototype.get = H.prototype.get = function (a)
    {
        return this.ea(a)
    };
    H.prototype.setElt = H.prototype.jg = function (a, b)
    {
        var c = this.n;
        (0 > a || a >= c.length) && w.Fa(a, "0 <= i < length", H, "setElt:i");
        this.P && w.ma(this, a);
        c[a] = b
    };
    H.prototype.set = H.prototype.set = function (a, b)
    {
        this.jg(a, b)
    };
    H.prototype.first = H.prototype.first = function ()
    {
        var a = this.n;
        return 0 === a.length ? null : a[0]
    };
    H.prototype.last = H.prototype.ie = function ()
    {
        var a = this.n,
            b = a.length;
        return 0 < b ? a[b - 1] : null
    };
    H.prototype.pop = H.prototype.pop = function ()
    {
        this.P && w.ma(this);
        var a = this.n;
        return 0 < a.length ? a.pop() : null
    };
    H.prototype.any = function (a)
    {
        for (var b = this.n, c = this.F, d = b.length, e = 0; e < d; e++)
        {
            if (a(b[e])) return !0;
            this.F !== c && w.Na(this)
        }
        return !1
    };
    H.prototype.all = function (a)
    {
        for (var b = this.n, c = this.F, d = b.length, e = 0; e < d; e++)
        {
            if (!a(b[e])) return !1;
            this.F !== c && w.Na(this)
        }
        return !0
    };
    H.prototype.each = function (a)
    {
        for (var b = this.n, c = this.F, d = b.length, e = 0; e < d; e++) a(b[e]), this.F !== c && w.Na(this);
        return this
    };
    H.prototype.map = function (a)
    {
        for (var b = new H, c = [], d = this.n, e = this.F, f = d.length, h = 0; h < f; h++) c.push(a(d[h])), this.F !== e && w.Na(this);
        b.n = c;
        b.Lc();
        return b
    };
    H.prototype.filter = function (a)
    {
        for (var b = new H(this.na), c = [], d = this.n, e = this.F, f = d.length, h = 0; h < f; h++)
        {
            var k = d[h];
            a(k) && c.push(k);
            this.F !== e && w.Na(this)
        }
        b.n = c;
        b.Lc();
        return b
    };
    H.prototype.concat = function (a)
    {
        return this.copy().Nc(a)
    };
    H.prototype.insertAt = H.prototype.Rd = function (a, b)
    {
        0 > a && w.Fa(a, ">= 0", H, "insertAt:i");
        this.P && w.ma(this, a);
        var c = this.n;
        a >= c.length ? c.push(b) : c.splice(a, 0, b);
        this.Lc();
        return !0
    };
    H.prototype.remove = H.prototype["delete"] = H.prototype.remove = function (a)
    {
        if (null === a) return !1;
        this.P && w.ma(this, a);
        var b = this.n;
        a = b.indexOf(a);
        if (-1 === a) return !1;
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.Lc();
        return !0
    };
    H.prototype.removeAt = H.prototype.dd = function (a)
    {
        var b = this.n;
        (0 > a || a >= b.length) && w.Fa(a, "0 <= i < length", H, "removeAt:i");
        this.P && w.ma(this, a);
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.Lc()
    };
    H.prototype.removeRange = H.prototype.removeRange = function (a, b)
    {
        var c = this.n,
            d = c.length;
        if (0 > a) a = 0;
        else if (a >= d) return this;
        if (0 > b) return this;
        b >= d && (b = d - 1);
        if (a > b) return this;
        this.P && w.ma(this);
        for (var e = a, f = b + 1; f < d;) c[e++] = c[f++];
        c.length = d - (b - a + 1);
        this.Lc();
        return this
    };
    H.prototype.copy = function ()
    {
        var a = new H(this.na),
            b = this.n;
        0 < b.length && (a.n = Array.prototype.slice.call(b));
        return a
    };
    H.prototype.toArray = H.prototype.xc = function ()
    {
        for (var a = this.n, b = this.count, c = Array(b), d = 0; d < b; d++) c[d] = a[d];
        return c
    };
    H.prototype.toSet = H.prototype.DG = function ()
    {
        for (var a = new I(this.na), b = this.n, c = this.count, d = 0; d < c; d++) a.add(b[d]);
        return a
    };
    H.prototype.sort = H.prototype.sort = function (a)
    {
        this.P && w.ma(this);
        this.n.sort(a);
        this.Lc();
        return this
    };
    H.prototype.sortRange = H.prototype.Eq = function (a, b, c)
    {
        var d = this.n,
            e = d.length;
        void 0 === b && (b = 0);
        void 0 === c && (c = e);
        this.P && w.ma(this);
        var f = c - b;
        if (1 >= f) return this;
        (0 > b || b >= e - 1) && w.Fa(b, "0 <= from < length", H, "sortRange:from");
        if (2 === f) return c = d[b], e = d[b + 1], 0 < a(c, e) && (d[b] = e, d[b + 1] = c, this.Lc()), this;
        if (0 === b)
            if (c >= e) d.sort(a);
            else
                for (f = d.slice(0, c), f.sort(a), a = 0; a < c; a++) d[a] = f[a];
        else if (c >= e)
            for (f = d.slice(b), f.sort(a), a = b; a < e; a++) d[a] = f[a - b];
        else
            for (f = d.slice(b, c), f.sort(a), a = b; a < c; a++) d[a] = f[a -
            b];
        this.Lc();
        return this
    };
    H.prototype.reverse = H.prototype.reverse = function ()
    {
        this.P && w.ma(this);
        this.n.reverse();
        this.Lc();
        return this
    };
    w.u(H,
        {
            count: "count"
        }, function ()
        {
            return this.n.length
        });
    w.u(H,
        {
            size: "size"
        }, function ()
        {
            return this.n.length
        });
    w.u(H,
        {
            length: "length"
        }, function ()
        {
            return this.n.length
        });
    w.u(H,
        {
            i: "iterator"
        }, function ()
        {
            if (0 >= this.n.length) return ua;
            var a = this.Fb;
            return null !== a ? (a.reset(), a) : new za(this)
        });
    w.u(H,
        {
            Jn: "iteratorBackwards"
        }, function ()
        {
            if (0 >= this.n.length) return ua;
            var a = this.Ti;
            return null !== a ? (a.reset(), a) : new Aa(this)
        });

    function Ba(a)
    {
        this.bi = a;
        a.Fb = null;
        this.Ta = a.F;
        this.Wa = null
    }
    w.ae(Ba,
        {
            key: !0,
            value: !0
        });
    w.u(Ba,
        {
            i: "iterator"
        }, function ()
        {
            return this
        });
    Ba.prototype.reset = Ba.prototype.reset = function ()
    {
        var a = this.bi;
        a.Fb = null;
        this.Ta = a.F;
        this.Wa = null
    };
    Ba.prototype.next = Ba.prototype.next = function ()
    {
        var a = this.bi;
        if (a.F !== this.Ta)
        {
            if (null === this.key) return !1;
            w.Na(a)
        }
        var b = this.Wa,
            b = null === b ? a.Ea : b.Za;
        if (null !== b) return this.Wa = b, this.value = b.value, this.key = b.key, !0;
        this.Nf();
        return !1
    };
    Ba.prototype.hasNext = function ()
    {
        return this.next()
    };
    Ba.prototype.first = Ba.prototype.first = function ()
    {
        var a = this.bi;
        this.Ta = a.F;
        a = a.Ea;
        if (null !== a)
        {
            this.Wa = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return null
    };
    Ba.prototype.any = function (a)
    {
        var b = this.bi;
        b.Fb = null;
        var c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;)
        {
            if (a(d.value)) return !0;
            b.F !== c && w.Na(b);
            d = d.Za
        }
        return !1
    };
    Ba.prototype.all = function (a)
    {
        var b = this.bi;
        b.Fb = null;
        var c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;)
        {
            if (!a(d.value)) return !1;
            b.F !== c && w.Na(b);
            d = d.Za
        }
        return !0
    };
    Ba.prototype.each = function (a)
    {
        var b = this.bi;
        b.Fb = null;
        var c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;) a(d.value), b.F !== c && w.Na(b), d = d.Za;
        return this
    };
    Ba.prototype.map = function (a)
    {
        var b = this.bi;
        b.Fb = null;
        for (var c = new H, d = b.F, e = b.Ea; null !== e;) c.add(a(e.value)), b.F !== d && w.Na(b), e = e.Za;
        return c.i
    };
    Ba.prototype.filter = function (a)
    {
        var b = this.bi;
        b.Fb = null;
        for (var c = new H(b.na), d = b.F, e = b.Ea; null !== e;)
        {
            var f = e.value;
            a(f) && c.add(f);
            b.F !== d && w.Na(b);
            e = e.Za
        }
        return c.i
    };
    Ba.prototype.concat = function (a)
    {
        this.bi.Fb = null;
        return new xa(this, a.i)
    };
    w.u(Ba,
        {
            count: "count"
        }, function ()
        {
            return this.bi.rd
        });
    Ba.prototype.Nf = function ()
    {
        this.value = this.key = null;
        this.Ta = -1;
        this.bi.Fb = this
    };
    Ba.prototype.toString = function ()
    {
        return null !== this.Wa ? "SetIterator@" + this.Wa.value : "SetIterator"
    };

    function I(a)
    {
        w.nc(this);
        this.P = !1;
        void 0 === a || null === a ? this.na = null : "string" === typeof a ? "object" === a || "string" === a || "number" === a ? this.na = a : w.Fa(a, "the string 'object', 'number' or 'string'", "Set constructor: type") : "function" === typeof a ? this.na = a === Object ? "object" : a === String ? "string" : a === Number ? "number" : a : w.Fa(a, "null, a primitive type name, or a class type", "Set constructor: type");
        this.sd = {};
        this.rd = 0;
        this.Fb = null;
        this.F = 0;
        this.Uh = this.Ea = null
    }
    w.ga("Set", I);
    I.prototype.Lc = function ()
    {
        var a = this.F;
        a++;
        999999999 < a && (a = 0);
        this.F = a
    };
    I.prototype.freeze = I.prototype.freeze = function ()
    {
        this.P = !0;
        return this
    };
    I.prototype.thaw = I.prototype.Qa = function ()
    {
        this.P = !1;
        return this
    };
    I.prototype.toString = function ()
    {
        return "Set(" + w.getTypeName(this.na) + ")#" + w.Pd(this)
    };
    I.prototype.add = I.prototype.add = function (a)
    {
        if (null === a) return !1;
        this.P && w.ma(this, a);
        var b = a;
        w.Pa(a) && (b = w.Yp(a));
        return void 0 === this.sd[b] ? (this.rd++, a = new Ca(a, a), this.sd[b] = a, b = this.Uh, null === b ? this.Ea = a : (a.hp = b, b.Za = a), this.Uh = a, this.Lc(), !0) : !1
    };
    I.prototype.addAll = I.prototype.Nc = function (a)
    {
        if (null === a) return this;
        this.P && w.ma(this);
        if (w.isArray(a))
            for (var b = w.bb(a), c = 0; c < b; c++) this.add(w.Ba(a, c));
        else
            for (a = a.i; a.next();) this.add(a.value);
        return this
    };
    I.prototype.contains = I.prototype.contains = function (a)
    {
        if (null === a) return !1;
        var b = a;
        return w.Pa(a) && (b = w.Pd(a), void 0 === b) ? !1 : void 0 !== this.sd[b]
    };
    I.prototype.has = I.prototype.has = function (a)
    {
        return this.contains(a)
    };
    I.prototype.containsAll = function (a)
    {
        if (null === a) return !0;
        for (a = a.i; a.next();)
            if (!this.contains(a.value)) return !1;
        return !0
    };
    I.prototype.containsAny = function (a)
    {
        if (null === a) return !0;
        for (a = a.i; a.next();)
            if (this.contains(a.value)) return !0;
        return !1
    };
    I.prototype.first = I.prototype.first = function ()
    {
        var a = this.Ea;
        return null === a ? null : a.value
    };
    I.prototype.any = function (a)
    {
        for (var b = this.F, c = this.Ea; null !== c;)
        {
            if (a(c.value)) return !0;
            this.F !== b && w.Na(this);
            c = c.Za
        }
        return !1
    };
    I.prototype.all = function (a)
    {
        for (var b = this.F, c = this.Ea; null !== c;)
        {
            if (!a(c.value)) return !1;
            this.F !== b && w.Na(this);
            c = c.Za
        }
        return !0
    };
    I.prototype.each = function (a)
    {
        for (var b = this.F, c = this.Ea; null !== c;) a(c.value), this.F !== b && w.Na(this), c = c.Za;
        return this
    };
    I.prototype.map = function (a)
    {
        for (var b = new I, c = this.F, d = this.Ea; null !== d;) b.add(a(d.value)), this.F !== c && w.Na(this), d = d.Za;
        return b
    };
    I.prototype.filter = function (a)
    {
        for (var b = new I(this.na), c = this.F, d = this.Ea; null !== d;)
        {
            var e = d.value;
            a(e) && b.add(e);
            this.F !== c && w.Na(this);
            d = d.Za
        }
        return b
    };
    I.prototype.concat = function (a)
    {
        return this.copy().Nc(a)
    };
    I.prototype.remove = I.prototype["delete"] = I.prototype.remove = function (a)
    {
        if (null === a) return !1;
        this.P && w.ma(this, a);
        var b = a;
        if (w.Pa(a) && (b = w.Pd(a), void 0 === b)) return !1;
        a = this.sd[b];
        if (void 0 === a) return !1;
        var c = a.Za,
            d = a.hp;
        null !== c && (c.hp = d);
        null !== d && (d.Za = c);
        this.Ea === a && (this.Ea = c);
        this.Uh === a && (this.Uh = d);
        delete this.sd[b];
        this.rd--;
        this.Lc();
        return !0
    };
    I.prototype.removeAll = I.prototype.my = function (a)
    {
        if (null === a) return this;
        this.P && w.ma(this);
        if (w.isArray(a))
            for (var b = w.bb(a), c = 0; c < b; c++) this.remove(w.Ba(a, c));
        else
            for (a = a.i; a.next();) this.remove(a.value);
        return this
    };
    I.prototype.retainAll = function (a)
    {
        if (null === a || 0 === this.count) return this;
        this.P && w.ma(this);
        var b = new I(this.na);
        b.Nc(a);
        a = [];
        for (var c = this.i; c.next();)
        {
            var d = c.value;
            b.contains(d) || a.push(d)
        }
        this.my(a);
        return this
    };
    I.prototype.clear = I.prototype.clear = function ()
    {
        this.P && w.ma(this);
        this.sd = {};
        this.rd = 0;
        null !== this.Fb && this.Fb.reset();
        this.Uh = this.Ea = null;
        this.Lc()
    };
    I.prototype.copy = function ()
    {
        var a = new I(this.na),
            b = this.sd,
            c;
        for (c in b) a.add(b[c].value);
        return a
    };
    I.prototype.toArray = I.prototype.xc = function ()
    {
        var a = Array(this.rd),
            b = this.sd,
            c = 0,
            d;
        for (d in b) a[c] = b[d].value, c++;
        return a
    };
    I.prototype.toList = function ()
    {
        var a = new H(this.na),
            b = this.sd,
            c;
        for (c in b) a.add(b[c].value);
        return a
    };
    w.u(I,
        {
            count: "count"
        }, function ()
        {
            return this.rd
        });
    w.u(I,
        {
            size: "size"
        }, function ()
        {
            return this.rd
        });
    w.u(I,
        {
            i: "iterator"
        }, function ()
        {
            if (0 >= this.rd) return ua;
            var a = this.Fb;
            return null !== a ? (a.reset(), a) : new Ba(this)
        });

    function Da(a)
    {
        this.Ga = a;
        this.Ta = a.F;
        this.Wa = null
    }
    w.ae(Da,
        {
            key: !0,
            value: !0
        });
    w.u(Da,
        {
            i: "iterator"
        }, function ()
        {
            return this
        });
    Da.prototype.reset = Da.prototype.reset = function ()
    {
        this.Ta = this.Ga.F;
        this.Wa = null
    };
    Da.prototype.next = Da.prototype.next = function ()
    {
        var a = this.Ga;
        if (a.F !== this.Ta)
        {
            if (null === this.key) return !1;
            w.Na(a)
        }
        var b = this.Wa,
            b = null === b ? a.Ea : b.Za;
        if (null !== b) return this.Wa = b, this.value = this.key = a = b.key, !0;
        this.Nf();
        return !1
    };
    Da.prototype.hasNext = function ()
    {
        return this.next()
    };
    Da.prototype.first = Da.prototype.first = function ()
    {
        var a = this.Ga;
        this.Ta = a.F;
        a = a.Ea;
        return null !== a ? (this.Wa = a, this.value = this.key = a = a.key) : null
    };
    Da.prototype.any = function (a)
    {
        var b = this.Ga,
            c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;)
        {
            if (a(d.key)) return !0;
            b.F !== c && w.Na(b);
            d = d.Za
        }
        return !1
    };
    Da.prototype.all = function (a)
    {
        var b = this.Ga,
            c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;)
        {
            if (!a(d.key)) return !1;
            b.F !== c && w.Na(b);
            d = d.Za
        }
        return !0
    };
    Da.prototype.each = function (a)
    {
        var b = this.Ga,
            c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;) a(d.key), b.F !== c && w.Na(b), d = d.Za;
        return this
    };
    Da.prototype.map = function (a)
    {
        var b = this.Ga,
            c = b.F;
        this.Wa = null;
        for (var d = new H, e = b.Ea; null !== e;) d.add(a(e.key)), b.F !== c && w.Na(b), e = e.Za;
        return d.i
    };
    Da.prototype.filter = function (a)
    {
        var b = this.Ga,
            c = b.F;
        this.Wa = null;
        for (var d = new H(b.Th), e = b.Ea; null !== e;)
        {
            var f = e.key;
            a(f) && d.add(f);
            b.F !== c && w.Na(b);
            e = e.Za
        }
        return d.i
    };
    Da.prototype.concat = function (a)
    {
        return new xa(this, a.i)
    };
    w.u(Da,
        {
            count: "count"
        }, function ()
        {
            return this.Ga.rd
        });
    Da.prototype.Nf = function ()
    {
        this.value = this.key = null;
        this.Ta = -1
    };
    Da.prototype.toString = function ()
    {
        return null !== this.Wa ? "MapKeySetIterator@" + this.Wa.value : "MapKeySetIterator"
    };

    function Ea(a)
    {
        w.nc(this);
        this.P = !0;
        this.Ga = a
    }
    w.La(Ea, I);
    Ea.prototype.freeze = function ()
    {
        return this
    };
    Ea.prototype.Qa = function ()
    {
        return this
    };
    Ea.prototype.toString = function ()
    {
        return "MapKeySet(" + this.Ga.toString() + ")"
    };
    Ea.prototype.add = Ea.prototype.add = function ()
    {
        w.k("This Set is read-only: " + this.toString());
        return !1
    };
    Ea.prototype.set = Ea.prototype.set = function ()
    {
        w.k("This Set is read-only: " + this.toString());
        return !1
    };
    Ea.prototype.contains = Ea.prototype.contains = function (a)
    {
        return this.Ga.contains(a)
    };
    Ea.prototype.has = Ea.prototype.has = function (a)
    {
        return this.contains(a)
    };
    Ea.prototype.remove = Ea.prototype["delete"] = Ea.prototype.remove = function ()
    {
        w.k("This Set is read-only: " + this.toString());
        return !1
    };
    Ea.prototype.clear = Ea.prototype.clear = function ()
    {
        w.k("This Set is read-only: " + this.toString())
    };
    Ea.prototype.first = Ea.prototype.first = function ()
    {
        var a = this.Ga.Ea;
        return null !== a ? a.key : null
    };
    Ea.prototype.any = function (a)
    {
        for (var b = this.Ga.Ea; null !== b;)
        {
            if (a(b.key)) return !0;
            b = b.Za
        }
        return !1
    };
    Ea.prototype.all = function (a)
    {
        for (var b = this.Ga.Ea; null !== b;)
        {
            if (!a(b.key)) return !1;
            b = b.Za
        }
        return !0
    };
    Ea.prototype.each = function (a)
    {
        for (var b = this.Ga.Ea; null !== b;) a(b.key), b = b.Za;
        return this
    };
    Ea.prototype.map = function (a)
    {
        for (var b = new I, c = this.Ga.Ea; null !== c;) b.add(a(c.key)), c = c.Za;
        return b
    };
    Ea.prototype.filter = function (a)
    {
        for (var b = new I(this.Ga.Th), c = this.Ga.Ea; null !== c;)
        {
            var d = c.key;
            a(d) && b.add(d);
            c = c.Za
        }
        return b
    };
    Ea.prototype.concat = function (a)
    {
        return this.DG().Nc(a)
    };
    Ea.prototype.copy = function ()
    {
        return new Ea(this.Ga)
    };
    Ea.prototype.toSet = Ea.prototype.DG = function ()
    {
        var a = new I(this.Ga.Th),
            b = this.Ga.sd,
            c;
        for (c in b) a.add(b[c].key);
        return a
    };
    Ea.prototype.toArray = Ea.prototype.xc = function ()
    {
        var a = this.Ga.sd,
            b = Array(this.Ga.rd),
            c = 0,
            d;
        for (d in a) b[c] = a[d].key, c++;
        return b
    };
    Ea.prototype.toList = function ()
    {
        var a = new H(this.Ga.Th),
            b = this.Ga.sd,
            c;
        for (c in b) a.add(b[c].key);
        return a
    };
    w.u(Ea,
        {
            count: "count"
        }, function ()
        {
            return this.Ga.rd
        });
    w.u(Ea,
        {
            size: "size"
        }, function ()
        {
            return this.Ga.rd
        });
    w.u(Ea,
        {
            i: "iterator"
        }, function ()
        {
            return 0 >= this.Ga.rd ? ua : new Da(this.Ga)
        });

    function Fa(a)
    {
        this.Ga = a;
        a.fh = null;
        this.Ta = a.F;
        this.Wa = null
    }
    w.ae(Fa,
        {
            key: !0,
            value: !0
        });
    w.u(Fa,
        {
            i: "iterator"
        }, function ()
        {
            return this
        });
    Fa.prototype.reset = Fa.prototype.reset = function ()
    {
        var a = this.Ga;
        a.fh = null;
        this.Ta = a.F;
        this.Wa = null
    };
    Fa.prototype.next = Fa.prototype.next = function ()
    {
        var a = this.Ga;
        if (a.F !== this.Ta)
        {
            if (null === this.key) return !1;
            w.Na(a)
        }
        var b = this.Wa,
            b = null === b ? a.Ea : b.Za;
        if (null !== b) return this.Wa = b, this.value = b.value, this.key = b.key, !0;
        this.Nf();
        return !1
    };
    Fa.prototype.hasNext = function ()
    {
        return this.next()
    };
    Fa.prototype.first = Fa.prototype.first = function ()
    {
        var a = this.Ga;
        this.Ta = a.F;
        a = a.Ea;
        if (null !== a)
        {
            this.Wa = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return null
    };
    Fa.prototype.any = function (a)
    {
        var b = this.Ga;
        b.fh = null;
        var c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;)
        {
            if (a(d.value)) return !0;
            b.F !== c && w.Na(b);
            d = d.Za
        }
        return !1
    };
    Fa.prototype.all = function (a)
    {
        var b = this.Ga;
        b.fh = null;
        var c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;)
        {
            if (!a(d.value)) return !1;
            b.F !== c && w.Na(b);
            d = d.Za
        }
        return !0
    };
    Fa.prototype.each = function (a)
    {
        var b = this.Ga;
        b.fh = null;
        var c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;) a(d.value), b.F !== c && w.Na(b), d = d.Za;
        return this
    };
    Fa.prototype.map = function (a)
    {
        var b = this.Ga;
        b.fh = null;
        var c = b.F;
        this.Wa = null;
        for (var d = new H, e = b.Ea; null !== e;) d.add(a(e.value)), b.F !== c && w.Na(b), e = e.Za;
        return d.i
    };
    Fa.prototype.filter = function (a)
    {
        var b = this.Ga;
        b.fh = null;
        var c = b.F;
        this.Wa = null;
        for (var d = new H(b.Th), e = b.Ea; null !== e;)
        {
            var f = e.value;
            a(f) && d.add(f);
            b.F !== c && w.Na(b);
            e = e.Za
        }
        return d.i
    };
    Fa.prototype.concat = function (a)
    {
        this.Ga.fh = null;
        return new xa(this, a.i)
    };
    w.u(Fa,
        {
            count: "count"
        }, function ()
        {
            return this.Ga.rd
        });
    Fa.prototype.Nf = function ()
    {
        this.value = this.key = null;
        this.Ta = -1;
        this.Ga.fh = this
    };
    Fa.prototype.toString = function ()
    {
        return null !== this.Wa ? "MapValueSetIterator@" + this.Wa.value : "MapValueSetIterator"
    };

    function Ca(a, b)
    {
        this.key = a;
        this.value = b;
        this.hp = this.Za = null
    }
    w.ae(Ca,
        {
            key: !0,
            value: !0
        });
    Ca.prototype.toString = function ()
    {
        return "{" + this.key + ":" + this.value + "}"
    };

    function Ha(a)
    {
        this.Ga = a;
        a.Fb = null;
        this.Ta = a.F;
        this.Wa = null
    }
    w.ae(Ha,
        {
            key: !0,
            value: !0
        });
    w.u(Ha,
        {
            i: "iterator"
        }, function ()
        {
            return this
        });
    Ha.prototype.reset = Ha.prototype.reset = function ()
    {
        var a = this.Ga;
        a.Fb = null;
        this.Ta = a.F;
        this.Wa = null
    };
    Ha.prototype.next = Ha.prototype.next = function ()
    {
        var a = this.Ga;
        if (a.F !== this.Ta)
        {
            if (null === this.key) return !1;
            w.Na(a)
        }
        var b = this.Wa,
            b = null === b ? a.Ea : b.Za;
        if (null !== b) return this.Wa = b, this.key = b.key, this.value = b.value, !0;
        this.Nf();
        return !1
    };
    Ha.prototype.hasNext = function ()
    {
        return this.next()
    };
    Ha.prototype.first = Ha.prototype.first = function ()
    {
        var a = this.Ga;
        this.Ta = a.F;
        a = a.Ea;
        return null !== a ? (this.Wa = a, this.key = a.key, this.value = a.value, a) : null
    };
    Ha.prototype.any = function (a)
    {
        var b = this.Ga;
        b.Fb = null;
        var c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;)
        {
            if (a(d)) return !0;
            b.F !== c && w.Na(b);
            d = d.Za
        }
        return !1
    };
    Ha.prototype.all = function (a)
    {
        var b = this.Ga;
        b.Fb = null;
        var c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;)
        {
            if (!a(d)) return !1;
            b.F !== c && w.Na(b);
            d = d.Za
        }
        return !0
    };
    Ha.prototype.each = function (a)
    {
        var b = this.Ga;
        b.Fb = null;
        var c = b.F;
        this.Wa = null;
        for (var d = b.Ea; null !== d;) a(d), b.F !== c && w.Na(b), d = d.Za;
        return this
    };
    Ha.prototype.map = function (a)
    {
        var b = this.Ga;
        b.Fb = null;
        var c = b.F;
        this.Wa = null;
        for (var d = new H, e = b.Ea; null !== e;) d.add(a(e)), b.F !== c && w.Na(b), e = e.Za;
        return d.i
    };
    Ha.prototype.filter = function (a)
    {
        var b = this.Ga;
        b.Fb = null;
        var c = b.F;
        this.Wa = null;
        for (var d = new H, e = b.Ea; null !== e;) a(e) && d.add(e), b.F !== c && w.Na(b), e = e.Za;
        return d.i
    };
    Ha.prototype.concat = function (a)
    {
        this.Ga.Fb = null;
        return new xa(this, a.i)
    };
    w.u(Ha,
        {
            count: "count"
        }, function ()
        {
            return this.Ga.rd
        });
    Ha.prototype.Nf = function ()
    {
        this.value = this.key = null;
        this.Ta = -1;
        this.Ga.Fb = this
    };
    Ha.prototype.toString = function ()
    {
        return null !== this.Wa ? "MapIterator@" + this.Wa : "MapIterator"
    };

    function ma(a, b)
    {
        w.nc(this);
        this.P = !1;
        void 0 === a || null === a ? this.Th = null : "string" === typeof a ? "object" === a || "string" === a || "number" === a ? this.Th = a : w.Fa(a, "the string 'object', 'number' or 'string'", "Map constructor: keytype") : "function" === typeof a ? this.Th = a === Object ? "object" : a === String ? "string" : a === Number ? "number" : a : w.Fa(a, "null, a primitive type name, or a class type", "Map constructor: keytype");
        void 0 === b || null === b ? this.Ft = null : "string" === typeof b ? "object" === b || "string" === b || "boolean" === b || "number" ===
        b || "function" === b ? this.Ft = b : w.Fa(b, "the string 'object', 'number', 'string', 'boolean', or 'function'", "Map constructor: valtype") : "function" === typeof b ? this.Ft = b === Object ? "object" : b === String ? "string" : b === Number ? "number" : b === Boolean ? "boolean" : b === Function ? "function" : b : w.Fa(b, "null, a primitive type name, or a class type", "Map constructor: valtype");
        this.sd = {};
        this.rd = 0;
        this.fh = this.Fb = null;
        this.F = 0;
        this.Uh = this.Ea = null
    }
    w.ga("Map", ma);
    ma.prototype.Lc = function ()
    {
        var a = this.F;
        a++;
        999999999 < a && (a = 0);
        this.F = a
    };
    ma.prototype.freeze = ma.prototype.freeze = function ()
    {
        this.P = !0;
        return this
    };
    ma.prototype.thaw = ma.prototype.Qa = function ()
    {
        this.P = !1;
        return this
    };
    ma.prototype.toString = function ()
    {
        return "Map(" + w.getTypeName(this.Th) + "," + w.getTypeName(this.Ft) + ")#" + w.Pd(this)
    };
    ma.prototype.add = ma.prototype.add = function (a, b)
    {
        this.P && w.ma(this, a);
        var c = a;
        w.Pa(a) && (c = w.Yp(a));
        var d = this.sd[c];
        if (void 0 === d) return this.rd++, d = new Ca(a, b), this.sd[c] = d, c = this.Uh, null === c ? this.Ea = d : (d.hp = c, c.Za = d), this.Uh = d, this.Lc(), !0;
        d.value = b;
        return !1
    };
    ma.prototype.set = ma.prototype.set = function (a, b)
    {
        return this.add(a, b)
    };
    ma.prototype.addAll = ma.prototype.Nc = function (a)
    {
        if (null === a) return this;
        if (w.isArray(a))
            for (var b = w.bb(a), c = 0; c < b; c++)
            {
                var d = w.Ba(a, c);
                this.add(d.key, d.value)
            }
        else
            for (a = a.i; a.next();) this.add(a.key, a.value);
        return this
    };
    ma.prototype.first = ma.prototype.first = function ()
    {
        return this.Ea
    };
    ma.prototype.any = function (a)
    {
        for (var b = this.F, c = this.Ea; null !== c;)
        {
            if (a(c)) return !0;
            this.F !== b && w.Na(this);
            c = c.Za
        }
        return !1
    };
    ma.prototype.all = function (a)
    {
        for (var b = this.F, c = this.Ea; null !== c;)
        {
            if (!a(c)) return !1;
            this.F !== b && w.Na(this);
            c = c.Za
        }
        return !0
    };
    ma.prototype.each = function (a)
    {
        for (var b = this.F, c = this.Ea; null !== c;) a(c), this.F !== b && w.Na(this), c = c.Za;
        return this
    };
    ma.prototype.map = function (a)
    {
        for (var b = new ma(this.Th), c = this.F, d = this.Ea; null !== d;) b.add(d.key, a(d)), this.F !== c && w.Na(this), d = d.Za;
        return b
    };
    ma.prototype.filter = function (a)
    {
        for (var b = new ma(this.Th, this.Ft), c = this.F, d = this.Ea; null !== d;) a(d) && b.add(d.key, d.value), this.F !== c && w.Na(this), d = d.Za;
        return b
    };
    ma.prototype.concat = function (a)
    {
        return this.copy().Nc(a)
    };
    ma.prototype.contains = ma.prototype.contains = function (a)
    {
        var b = a;
        return w.Pa(a) && (b = w.Pd(a), void 0 === b) ? !1 : void 0 !== this.sd[b]
    };
    ma.prototype.has = ma.prototype.has = function (a)
    {
        return this.contains(a)
    };
    ma.prototype.getValue = ma.prototype.ka = function (a)
    {
        var b = a;
        if (w.Pa(a) && (b = w.Pd(a), void 0 === b)) return null;
        a = this.sd[b];
        return void 0 === a ? null : a.value
    };
    ma.prototype.get = ma.prototype.get = function (a)
    {
        return this.ka(a)
    };
    ma.prototype.remove = ma.prototype["delete"] = ma.prototype.remove = function (a)
    {
        if (null === a) return !1;
        this.P && w.ma(this, a);
        var b = a;
        if (w.Pa(a) && (b = w.Pd(a), void 0 === b)) return !1;
        a = this.sd[b];
        if (void 0 === a) return !1;
        var c = a.Za,
            d = a.hp;
        null !== c && (c.hp = d);
        null !== d && (d.Za = c);
        this.Ea === a && (this.Ea = c);
        this.Uh === a && (this.Uh = d);
        delete this.sd[b];
        this.rd--;
        this.Lc();
        return !0
    };
    ma.prototype.clear = ma.prototype.clear = function ()
    {
        this.P && w.ma(this);
        this.sd = {};
        this.rd = 0;
        null !== this.Fb && this.Fb.reset();
        null !== this.fh && this.fh.reset();
        this.Uh = this.Ea = null;
        this.Lc()
    };
    ma.prototype.copy = function ()
    {
        var a = new ma(this.Th, this.Ft),
            b = this.sd,
            c;
        for (c in b)
        {
            var d = b[c];
            a.add(d.key, d.value)
        }
        return a
    };
    ma.prototype.toArray = ma.prototype.xc = function ()
    {
        var a = this.sd,
            b = Array(this.rd),
            c = 0,
            d;
        for (d in a)
        {
            var e = a[d];
            b[c] = new Ca(e.key, e.value);
            c++
        }
        return b
    };
    ma.prototype.toKeySet = ma.prototype.Nj = function ()
    {
        return new Ea(this)
    };
    w.u(ma,
        {
            count: "count"
        }, function ()
        {
            return this.rd
        });
    w.u(ma,
        {
            size: "size"
        }, function ()
        {
            return this.rd
        });
    w.u(ma,
        {
            i: "iterator"
        }, function ()
        {
            if (0 >= this.count) return ua;
            var a = this.Fb;
            return null !== a ? (a.reset(), a) : new Ha(this)
        });
    w.u(ma,
        {
            JF: "iteratorKeys"
        }, function ()
        {
            return 0 >= this.count ? ua : new Da(this)
        });
    w.u(ma,
        {
            KF: "iteratorValues"
        }, function ()
        {
            if (0 >= this.count) return ua;
            var a = this.fh;
            return null !== a ? (a.reset(), a) : new Fa(this)
        });

    function y(a, b)
    {
        void 0 === a ? this.y = this.x = 0 : (this.x = a, this.y = b)
    }
    w.ga("Point", y);
    w.ni(y);
    w.ae(y,
        {
            x: !0,
            y: !0
        });
    y.prototype.assign = function (a)
    {
        this.x = a.x;
        this.y = a.y
    };
    y.prototype.setTo = y.prototype.m = function (a, b)
    {
        this.x = a;
        this.y = b;
        return this
    };
    y.prototype.set = y.prototype.set = function (a)
    {
        this.x = a.x;
        this.y = a.y;
        return this
    };
    y.prototype.copy = function ()
    {
        var a = new y;
        a.x = this.x;
        a.y = this.y;
        return a
    };
    y.prototype.Ha = function ()
    {
        Object.freeze(this);
        return this
    };
    y.prototype.S = function ()
    {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    y.prototype.freeze = function ()
    {
        return this
    };
    y.prototype.Qa = function ()
    {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };
    y.parse = function (a)
    {
        if ("string" === typeof a)
        {
            a = a.split(" ");
            for (var b = 0, c = 0;
                 "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
                 "" === a[b];) b++;
            (d = a[b++]) && (e = parseFloat(d));
            return new y(c, e)
        }
        return new y
    };
    y.stringify = function (a)
    {
        return a.x.toString() + " " + a.y.toString()
    };
    y.prototype.toString = function ()
    {
        return "Point(" + this.x + "," + this.y + ")"
    };
    y.prototype.equals = y.prototype.L = function (a)
    {
        return a instanceof y ? this.x === a.x && this.y === a.y : !1
    };
    y.prototype.equalTo = y.prototype.zx = function (a, b)
    {
        return this.x === a && this.y === b
    };
    y.prototype.equalsApprox = y.prototype.Oc = function (a)
    {
        return J(this.x, a.x) && J(this.y, a.y)
    };
    y.prototype.add = y.prototype.add = function (a)
    {
        this.x += a.x;
        this.y += a.y;
        return this
    };
    y.prototype.subtract = y.prototype.ui = function (a)
    {
        this.x -= a.x;
        this.y -= a.y;
        return this
    };
    y.prototype.offset = y.prototype.offset = function (a, b)
    {
        this.x += a;
        this.y += b;
        return this
    };
    y.prototype.rotate = y.prototype.rotate = function (a)
    {
        if (0 === a) return this;
        var b = this.x,
            c = this.y;
        if (0 === b && 0 === c) return this;
        var d = 0,
            e = 0;
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        90 === a ? (d = 0, e = 1) : 180 === a ? (d = -1, e = 0) : 270 === a ? (d = 0, e = -1) : (a = a * Math.PI / 180, d = Math.cos(a), e = Math.sin(a));
        this.x = d * b - e * c;
        this.y = e * b + d * c;
        return this
    };
    y.prototype.scale = y.prototype.scale = function (a, b)
    {
        this.x *= a;
        this.y *= b;
        return this
    };
    y.prototype.distanceSquaredPoint = y.prototype.Bf = function (a)
    {
        var b = a.x - this.x;
        a = a.y - this.y;
        return b * b + a * a
    };
    y.prototype.distanceSquared = y.prototype.Tp = function (a, b)
    {
        var c = a - this.x,
            d = b - this.y;
        return c * c + d * d
    };
    y.prototype.normalize = y.prototype.normalize = function ()
    {
        var a = this.x,
            b = this.y,
            c = Math.sqrt(a * a + b * b);
        0 < c && (this.x = a / c, this.y = b / c);
        return this
    };
    y.prototype.directionPoint = y.prototype.Qb = function (a)
    {
        return Ka(a.x - this.x, a.y - this.y)
    };
    y.prototype.direction = y.prototype.direction = function (a, b)
    {
        return Ka(a - this.x, b - this.y)
    };

    function Ka(a, b)
    {
        if (0 === a) return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b) return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b)) return 0;
        var c = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? c = 0 > b ? c + 180 : 180 - c : 0 > b && (c = 360 - c);
        return c
    }
    y.prototype.projectOntoLineSegment = function (a, b, c, d)
    {
        La(a, b, c, d, this.x, this.y, this);
        return this
    };
    y.prototype.projectOntoLineSegmentPoint = function (a, b)
    {
        La(a.x, a.y, b.x, b.y, this.x, this.y, this);
        return this
    };
    y.prototype.snapToGrid = function (a, b, c, d)
    {
        Na(this.x, this.y, a, b, c, d, this);
        return this
    };
    y.prototype.snapToGridPoint = function (a, b)
    {
        Na(this.x, this.y, a.x, a.y, b.width, b.height, this);
        return this
    };
    y.prototype.setRectSpot = y.prototype.Zn = function (a, b)
    {
        this.x = a.x + b.x * a.width + b.offsetX;
        this.y = a.y + b.y * a.height + b.offsetY;
        return this
    };
    y.prototype.setSpot = y.prototype.Zu = function (a, b, c, d, e)
    {
        this.x = a + e.x * c + e.offsetX;
        this.y = b + e.y * d + e.offsetY;
        return this
    };
    y.prototype.transform = function (a)
    {
        a.nb(this);
        return this
    };

    function Pa(a, b)
    {
        b.wh(a);
        return a
    }
    var Ra;
    y.distanceLineSegmentSquared = Ra = function (a, b, c, d, e, f)
    {
        var h = e - c,
            k = f - d,
            l = h * h + k * k;
        c -= a;
        d -= b;
        var m = -c * h - d * k;
        if (0 >= m || m >= l) return h = e - a, k = f - b, Math.min(c * c + d * d, h * h + k * k);
        a = h * d - k * c;
        return a * a / l
    };
    var Sa;
    y.distanceSquared = Sa = function (a, b, c, d)
    {
        a = c - a;
        b = d - b;
        return a * a + b * b
    };
    var Ta;
    y.direction = Ta = function (a, b, c, d)
    {
        a = c - a;
        b = d - b;
        if (0 === a) return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b) return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b)) return 0;
        d = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? d = 0 > b ? d + 180 : 180 - d : 0 > b && (d = 360 - d);
        return d
    };
    y.prototype.isReal = y.prototype.I = function ()
    {
        return isFinite(this.x) && isFinite(this.y)
    };

    function ia(a, b)
    {
        void 0 === a ? this.height = this.width = 0 : (this.width = a, this.height = b)
    }
    w.ga("Size", ia);
    w.ni(ia);
    w.ae(ia,
        {
            width: !0,
            height: !0
        });
    ia.prototype.assign = function (a)
    {
        this.width = a.width;
        this.height = a.height
    };
    ia.prototype.setTo = ia.prototype.m = function (a, b)
    {
        this.width = a;
        this.height = b;
        return this
    };
    ia.prototype.set = ia.prototype.set = function (a)
    {
        this.width = a.width;
        this.height = a.height;
        return this
    };
    ia.prototype.copy = function ()
    {
        var a = new ia;
        a.width = this.width;
        a.height = this.height;
        return a
    };
    ia.prototype.Ha = function ()
    {
        Object.freeze(this);
        return this
    };
    ia.prototype.S = function ()
    {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    ia.prototype.freeze = function ()
    {
        return this
    };
    ia.prototype.Qa = function ()
    {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };
    ia.parse = function (a)
    {
        if ("string" === typeof a)
        {
            a = a.split(" ");
            for (var b = 0, c = 0;
                 "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
                 "" === a[b];) b++;
            (d = a[b++]) && (e = parseFloat(d));
            return new ia(c, e)
        }
        return new ia
    };
    ia.stringify = function (a)
    {
        return a.width.toString() + " " + a.height.toString()
    };
    ia.prototype.toString = function ()
    {
        return "Size(" + this.width + "," + this.height + ")"
    };
    ia.prototype.equals = ia.prototype.L = function (a)
    {
        return a instanceof ia ? this.width === a.width && this.height === a.height : !1
    };
    ia.prototype.equalTo = ia.prototype.zx = function (a, b)
    {
        return this.width === a && this.height === b
    };
    ia.prototype.equalsApprox = ia.prototype.Oc = function (a)
    {
        return J(this.width, a.width) && J(this.height, a.height)
    };
    ia.prototype.isReal = ia.prototype.I = function ()
    {
        return isFinite(this.width) && isFinite(this.height)
    };

    function B(a, b, c, d)
    {
        void 0 === a ? this.height = this.width = this.y = this.x = 0 : a instanceof y ? b instanceof y ? (this.x = Math.min(a.x, b.x), this.y = Math.min(a.y, b.y), this.width = Math.abs(a.x - b.x), this.height = Math.abs(a.y - b.y)) : b instanceof ia ? (this.x = a.x, this.y = a.y, this.width = b.width, this.height = b.height) : w.k("Incorrect arguments supplied to Rect constructor") : (this.x = a, this.y = b, this.width = c, this.height = d)
    }
    w.ga("Rect", B);
    w.ni(B);
    w.ae(B,
        {
            x: !0,
            y: !0,
            width: !0,
            height: !0
        });
    B.prototype.assign = function (a)
    {
        this.x = a.x;
        this.y = a.y;
        this.width = a.width;
        this.height = a.height
    };

    function Ua(a, b, c)
    {
        a.width = b;
        a.height = c
    }
    B.prototype.setTo = B.prototype.m = function (a, b, c, d)
    {
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
        return this
    };
    B.prototype.set = B.prototype.set = function (a)
    {
        this.x = a.x;
        this.y = a.y;
        this.width = a.width;
        this.height = a.height;
        return this
    };
    B.prototype.setPoint = B.prototype.Ug = function (a)
    {
        this.x = a.x;
        this.y = a.y;
        return this
    };
    B.prototype.setSize = function (a)
    {
        this.width = a.width;
        this.height = a.height;
        return this
    };
    B.prototype.copy = function ()
    {
        var a = new B;
        a.x = this.x;
        a.y = this.y;
        a.width = this.width;
        a.height = this.height;
        return a
    };
    B.prototype.Ha = function ()
    {
        Object.freeze(this);
        return this
    };
    B.prototype.S = function ()
    {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    B.prototype.freeze = function ()
    {
        return this
    };
    B.prototype.Qa = function ()
    {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };
    B.parse = function (a)
    {
        if ("string" === typeof a)
        {
            a = a.split(" ");
            for (var b = 0, c = 0;
                 "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0;
                 "" === a[b];) b++;
            (d = a[b++]) && (e = parseFloat(d));
            for (var f = 0;
                 "" === a[b];) b++;
            (d = a[b++]) && (f = parseFloat(d));
            for (var h = 0;
                 "" === a[b];) b++;
            (d = a[b++]) && (h = parseFloat(d));
            return new B(c, e, f, h)
        }
        return new B
    };
    B.stringify = function (a)
    {
        return a.x.toString() + " " + a.y.toString() + " " + a.width.toString() + " " + a.height.toString()
    };
    B.prototype.toString = function ()
    {
        return "Rect(" + this.x + "," + this.y + "," + this.width + "," + this.height + ")"
    };
    B.prototype.equals = B.prototype.L = function (a)
    {
        return a instanceof B ? this.x === a.x && this.y === a.y && this.width === a.width && this.height === a.height : !1
    };
    B.prototype.equalTo = B.prototype.zx = function (a, b, c, d)
    {
        return this.x === a && this.y === b && this.width === c && this.height === d
    };
    B.prototype.equalsApprox = B.prototype.Oc = function (a)
    {
        return J(this.x, a.x) && J(this.y, a.y) && J(this.width, a.width) && J(this.height, a.height)
    };

    function Va(a, b)
    {
        return Wa(a.x, b.x) && Wa(a.y, b.y) && Wa(a.width, b.width) && Wa(a.height, b.height)
    }
    B.prototype.containsPoint = B.prototype.Ia = function (a)
    {
        return this.x <= a.x && this.x + this.width >= a.x && this.y <= a.y && this.y + this.height >= a.y
    };
    B.prototype.containsRect = B.prototype.Fk = function (a)
    {
        return this.x <= a.x && a.x + a.width <= this.x + this.width && this.y <= a.y && a.y + a.height <= this.y + this.height
    };
    B.prototype.contains = B.prototype.contains = function (a, b, c, d)
    {
        void 0 === c && (c = 0);
        void 0 === d && (d = 0);
        return this.x <= a && a + c <= this.x + this.width && this.y <= b && b + d <= this.y + this.height
    };
    B.prototype.reset = function ()
    {
        this.height = this.width = this.y = this.x = 0
    };
    B.prototype.offset = B.prototype.offset = function (a, b)
    {
        this.x += a;
        this.y += b;
        return this
    };
    B.prototype.inflate = B.prototype.Yf = function (a, b)
    {
        return Xa(this, b, a, b, a)
    };
    B.prototype.addMargin = B.prototype.$w = function (a)
    {
        return Xa(this, a.top, a.right, a.bottom, a.left)
    };
    B.prototype.subtractMargin = B.prototype.PJ = function (a)
    {
        return Xa(this, -a.top, -a.right, -a.bottom, -a.left)
    };
    B.prototype.grow = function (a, b, c, d)
    {
        return Xa(this, a, b, c, d)
    };

    function Xa(a, b, c, d, e)
    {
        var f = a.width;
        c + e <= -f ? (a.x += f / 2, a.width = 0) : (a.x -= e, a.width += c + e);
        c = a.height;
        b + d <= -c ? (a.y += c / 2, a.height = 0) : (a.y -= b, a.height += b + d);
        return a
    }
    B.prototype.intersectRect = function (a)
    {
        return Ya(this, a.x, a.y, a.width, a.height)
    };
    B.prototype.intersect = B.prototype.uF = function (a, b, c, d)
    {
        return Ya(this, a, b, c, d)
    };

    function Ya(a, b, c, d, e)
    {
        var f = Math.max(a.x, b),
            h = Math.max(a.y, c);
        b = Math.min(a.x + a.width, b + d);
        c = Math.min(a.y + a.height, c + e);
        a.x = f;
        a.y = h;
        a.width = Math.max(0, b - f);
        a.height = Math.max(0, c - h);
        return a
    }
    B.prototype.intersectsRect = B.prototype.Zf = function (a)
    {
        return this.vF(a.x, a.y, a.width, a.height)
    };
    B.prototype.intersects = B.prototype.vF = function (a, b, c, d)
    {
        var e = this.width,
            f = this.x;
        if (Infinity !== e && Infinity !== c && (e += f, c += a, isNaN(c) || isNaN(e) || f > c || a > e)) return !1;
        a = this.height;
        c = this.y;
        return Infinity !== a && Infinity !== d && (a += c, d += b, isNaN(d) || isNaN(a) || c > d || b > a) ? !1 : !0
    };

    function $a(a, b)
    {
        var c = a.width,
            d = b.width + 10 + 10,
            e = a.x,
            f = b.x - 10;
        if (e > d + f || f > c + e) return !1;
        c = a.height;
        d = b.height + 10 + 10;
        e = a.y;
        f = b.y - 10;
        return e > d + f || f > c + e ? !1 : !0
    }
    B.prototype.unionPoint = B.prototype.yi = function (a)
    {
        return ab(this, a.x, a.y, 0, 0)
    };
    B.prototype.unionRect = B.prototype.Jh = function (a)
    {
        return ab(this, a.x, a.y, a.width, a.height)
    };
    B.prototype.union = B.prototype.HG = function (a, b, c, d)
    {
        void 0 === c && (c = 0);
        void 0 === d && (d = 0);
        return ab(this, a, b, c, d)
    };

    function ab(a, b, c, d, e)
    {
        var f = Math.min(a.x, b),
            h = Math.min(a.y, c);
        b = Math.max(a.x + a.width, b + d);
        c = Math.max(a.y + a.height, c + e);
        a.x = f;
        a.y = h;
        a.width = b - f;
        a.height = c - h;
        return a
    }
    B.prototype.setSpot = B.prototype.Zu = function (a, b, c)
    {
        this.x = a - c.offsetX - c.x * this.width;
        this.y = b - c.offsetY - c.y * this.height;
        return this
    };
    var db;
    B.contains = db = function (a, b, c, d, e, f, h, k)
    {
        void 0 === h && (h = 0);
        void 0 === k && (k = 0);
        return a <= e && e + h <= a + c && b <= f && f + k <= b + d
    };
    B.intersects = function (a, b, c, d, e, f, h, k)
    {
        c += a;
        h += e;
        if (a > h || e > c) return !1;
        a = d + b;
        k += f;
        return b > k || f > a ? !1 : !0
    };
    w.defineProperty(B,
        {
            left: "left"
        }, function ()
        {
            return this.x
        }, function (a)
        {
            this.x = a
        });
    w.defineProperty(B,
        {
            top: "top"
        }, function ()
        {
            return this.y
        }, function (a)
        {
            this.y = a
        });
    w.defineProperty(B,
        {
            right: "right"
        }, function ()
        {
            return this.x + this.width
        }, function (a)
        {
            this.x += a - (this.x + this.width)
        });
    w.defineProperty(B,
        {
            bottom: "bottom"
        }, function ()
        {
            return this.y + this.height
        }, function (a)
        {
            this.y += a - (this.y + this.height)
        });
    w.defineProperty(B,
        {
            position: "position"
        }, function ()
        {
            return new y(this.x, this.y)
        }, function (a)
        {
            this.x = a.x;
            this.y = a.y
        });
    w.defineProperty(B,
        {
            size: "size"
        }, function ()
        {
            return new ia(this.width, this.height)
        }, function (a)
        {
            this.width = a.width;
            this.height = a.height
        });
    w.defineProperty(B,
        {
            Sl: "center"
        }, function ()
        {
            return new y(this.x + this.width / 2, this.y + this.height / 2)
        }, function (a)
        {
            this.x = a.x - this.width / 2;
            this.y = a.y - this.height / 2
        });
    w.defineProperty(B,
        {
            la: "centerX"
        }, function ()
        {
            return this.x + this.width / 2
        }, function (a)
        {
            this.x = a - this.width / 2
        });
    w.defineProperty(B,
        {
            ra: "centerY"
        }, function ()
        {
            return this.y + this.height / 2
        }, function (a)
        {
            this.y = a - this.height / 2
        });
    B.prototype.isReal = B.prototype.I = function ()
    {
        return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height)
    };
    B.prototype.isEmpty = function ()
    {
        return 0 === this.width && 0 === this.height
    };

    function hb(a, b, c, d)
    {
        void 0 === a ? this.left = this.bottom = this.right = this.top = 0 : void 0 === b ? this.left = this.bottom = this.right = this.top = a : void 0 === c ? (d = b, this.top = a, this.right = b, this.bottom = a, this.left = d) : void 0 !== d ? (this.top = a, this.right = b, this.bottom = c, this.left = d) : w.k("Invalid arguments to Margin constructor")
    }
    w.ga("Margin", hb);
    w.ni(hb);
    w.ae(hb,
        {
            top: !0,
            right: !0,
            bottom: !0,
            left: !0
        });
    hb.prototype.assign = function (a)
    {
        this.top = a.top;
        this.right = a.right;
        this.bottom = a.bottom;
        this.left = a.left
    };
    hb.prototype.setTo = hb.prototype.m = function (a, b, c, d)
    {
        this.top = a;
        this.right = b;
        this.bottom = c;
        this.left = d;
        return this
    };
    hb.prototype.set = hb.prototype.set = function (a)
    {
        this.top = a.top;
        this.right = a.right;
        this.bottom = a.bottom;
        this.left = a.left;
        return this
    };
    hb.prototype.copy = function ()
    {
        var a = new hb;
        a.top = this.top;
        a.right = this.right;
        a.bottom = this.bottom;
        a.left = this.left;
        return a
    };
    hb.prototype.Ha = function ()
    {
        Object.freeze(this);
        return this
    };
    hb.prototype.S = function ()
    {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    hb.prototype.freeze = function ()
    {
        return this
    };
    hb.prototype.Qa = function ()
    {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };
    hb.parse = function (a)
    {
        if ("string" === typeof a)
        {
            a = a.split(" ");
            for (var b = 0, c = NaN;
                 "" === a[b];) b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            if (isNaN(c)) return new hb;
            for (var e = NaN;
                 "" === a[b];) b++;
            (d = a[b++]) && (e = parseFloat(d));
            if (isNaN(e)) return new hb(c);
            for (var f = NaN;
                 "" === a[b];) b++;
            (d = a[b++]) && (f = parseFloat(d));
            if (isNaN(f)) return new hb(c, e);
            for (var h = NaN;
                 "" === a[b];) b++;
            (d = a[b++]) && (h = parseFloat(d));
            return isNaN(h) ? new hb(c, e) : new hb(c, e, f, h)
        }
        return new hb
    };
    hb.stringify = function (a)
    {
        return a.top.toString() + " " + a.right.toString() + " " + a.bottom.toString() + " " + a.left.toString()
    };
    hb.prototype.toString = function ()
    {
        return "Margin(" + this.top + "," + this.right + "," + this.bottom + "," + this.left + ")"
    };
    hb.prototype.equals = hb.prototype.L = function (a)
    {
        return a instanceof hb ? this.top === a.top && this.right === a.right && this.bottom === a.bottom && this.left === a.left : !1
    };
    hb.prototype.equalTo = hb.prototype.zx = function (a, b, c, d)
    {
        return this.top === a && this.right === b && this.bottom === c && this.left === d
    };
    hb.prototype.equalsApprox = hb.prototype.Oc = function (a)
    {
        return J(this.top, a.top) && J(this.right, a.right) && J(this.bottom, a.bottom) && J(this.left, a.left)
    };
    hb.prototype.isReal = hb.prototype.I = function ()
    {
        return isFinite(this.top) && isFinite(this.right) && isFinite(this.bottom) && isFinite(this.left)
    };

    function ka()
    {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.dy = this.dx = 0
    }
    w.ni(ka);
    w.ae(ka,
        {
            m11: !0,
            m12: !0,
            m21: !0,
            m22: !0,
            dx: !0,
            dy: !0
        });
    ka.prototype.set = ka.prototype.set = function (a)
    {
        this.m11 = a.m11;
        this.m12 = a.m12;
        this.m21 = a.m21;
        this.m22 = a.m22;
        this.dx = a.dx;
        this.dy = a.dy;
        return this
    };
    ka.prototype.copy = function ()
    {
        var a = new ka;
        a.m11 = this.m11;
        a.m12 = this.m12;
        a.m21 = this.m21;
        a.m22 = this.m22;
        a.dx = this.dx;
        a.dy = this.dy;
        return a
    };
    ka.prototype.toString = function ()
    {
        return "Transform(" + this.m11 + "," + this.m12 + "," + this.m21 + "," + this.m22 + "," + this.dx + "," + this.dy + ")"
    };
    ka.prototype.equals = ka.prototype.L = function (a)
    {
        return a instanceof ka ? this.m11 === a.m11 && this.m12 === a.m12 && this.m21 === a.m21 && this.m22 === a.m22 && this.dx === a.dx && this.dy === a.dy : !1
    };
    ka.prototype.isIdentity = ka.prototype.vu = function ()
    {
        return 1 === this.m11 && 0 === this.m12 && 0 === this.m21 && 1 === this.m22 && 0 === this.dx && 0 === this.dy
    };
    ka.prototype.reset = ka.prototype.reset = function ()
    {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.dy = this.dx = 0;
        return this
    };
    ka.prototype.multiply = ka.prototype.multiply = function (a)
    {
        var b = this.m12 * a.m11 + this.m22 * a.m12,
            c = this.m11 * a.m21 + this.m21 * a.m22,
            d = this.m12 * a.m21 + this.m22 * a.m22,
            e = this.m11 * a.dx + this.m21 * a.dy + this.dx,
            f = this.m12 * a.dx + this.m22 * a.dy + this.dy;
        this.m11 = this.m11 * a.m11 + this.m21 * a.m12;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.dx = e;
        this.dy = f;
        return this
    };
    ka.prototype.multiplyInverted = ka.prototype.SF = function (a)
    {
        var b = 1 / (a.m11 * a.m22 - a.m12 * a.m21),
            c = a.m22 * b,
            d = -a.m12 * b,
            e = -a.m21 * b,
            f = a.m11 * b,
            h = b * (a.m21 * a.dy - a.m22 * a.dx),
            k = b * (a.m12 * a.dx - a.m11 * a.dy);
        a = this.m12 * c + this.m22 * d;
        b = this.m11 * e + this.m21 * f;
        e = this.m12 * e + this.m22 * f;
        f = this.m11 * h + this.m21 * k + this.dx;
        h = this.m12 * h + this.m22 * k + this.dy;
        this.m11 = this.m11 * c + this.m21 * d;
        this.m12 = a;
        this.m21 = b;
        this.m22 = e;
        this.dx = f;
        this.dy = h;
        return this
    };
    ka.prototype.invert = ka.prototype.RA = function ()
    {
        var a = 1 / (this.m11 * this.m22 - this.m12 * this.m21),
            b = -this.m12 * a,
            c = -this.m21 * a,
            d = this.m11 * a,
            e = a * (this.m21 * this.dy - this.m22 * this.dx),
            f = a * (this.m12 * this.dx - this.m11 * this.dy);
        this.m11 = this.m22 * a;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.dx = e;
        this.dy = f;
        return this
    };
    ka.prototype.rotate = ka.prototype.rotate = function (a, b, c)
    {
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        if (0 === a) return this;
        this.translate(b, c);
        var d = 0,
            e = 0;
        90 === a ? (d = 0, e = 1) : 180 === a ? (d = -1, e = 0) : 270 === a ? (d = 0, e = -1) : (e = a * Math.PI / 180, d = Math.cos(e), e = Math.sin(e));
        a = this.m12 * d + this.m22 * e;
        var f = this.m11 * -e + this.m21 * d,
            h = this.m12 * -e + this.m22 * d;
        this.m11 = this.m11 * d + this.m21 * e;
        this.m12 = a;
        this.m21 = f;
        this.m22 = h;
        this.translate(-b, -c);
        return this
    };
    ka.prototype.translate = ka.prototype.translate = function (a, b)
    {
        this.dx += this.m11 * a + this.m21 * b;
        this.dy += this.m12 * a + this.m22 * b;
        return this
    };
    ka.prototype.scale = ka.prototype.scale = function (a, b)
    {
        void 0 === b && (b = a);
        this.m11 *= a;
        this.m12 *= a;
        this.m21 *= b;
        this.m22 *= b;
        return this
    };
    ka.prototype.transformPoint = ka.prototype.nb = function (a)
    {
        var b = a.x,
            c = a.y;
        a.x = b * this.m11 + c * this.m21 + this.dx;
        a.y = b * this.m12 + c * this.m22 + this.dy;
        return a
    };
    ka.prototype.invertedTransformPoint = ka.prototype.wh = function (a)
    {
        var b = 1 / (this.m11 * this.m22 - this.m12 * this.m21),
            c = -this.m12 * b,
            d = this.m11 * b,
            e = b * (this.m12 * this.dx - this.m11 * this.dy),
            f = a.x,
            h = a.y;
        a.x = f * this.m22 * b + h * -this.m21 * b + b * (this.m21 * this.dy - this.m22 * this.dx);
        a.y = f * c + h * d + e;
        return a
    };
    ka.prototype.transformRect = ka.prototype.GG = function (a)
    {
        var b = a.x,
            c = a.y,
            d = b + a.width,
            e = c + a.height,
            f = this.m11,
            h = this.m12,
            k = this.m21,
            l = this.m22,
            m = this.dx,
            n = this.dy,
            p = b * f + c * k + m,
            q = b * h + c * l + n,
            r = d * f + c * k + m,
            c = d * h + c * l + n,
            s = b * f + e * k + m,
            b = b * h + e * l + n,
            f = d * f + e * k + m,
            d = d * h + e * l + n,
            e = p,
            h = q,
            p = Math.min(p, r),
            e = Math.max(e, r),
            h = Math.min(h, c),
            q = Math.max(q, c),
            p = Math.min(p, s),
            e = Math.max(e, s),
            h = Math.min(h, b),
            q = Math.max(q, b),
            p = Math.min(p, f),
            e = Math.max(e, f),
            h = Math.min(h, d),
            q = Math.max(q, d);
        a.x = p;
        a.y = h;
        a.width = e - p;
        a.height = q - h;
        return a
    };

    function K(a, b, c, d)
    {
        void 0 === a ? this.offsetY = this.offsetX = this.y = this.x = 0 : (void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = 0), this.x = a, this.y = b, this.offsetX = c, this.offsetY = d)
    }
    w.ga("Spot", K);
    w.ni(K);
    w.ae(K,
        {
            x: !0,
            y: !0,
            offsetX: !0,
            offsetY: !0
        });
    K.prototype.assign = function (a)
    {
        this.x = a.x;
        this.y = a.y;
        this.offsetX = a.offsetX;
        this.offsetY = a.offsetY
    };
    K.prototype.setTo = K.prototype.m = function (a, b, c, d)
    {
        this.x = a;
        this.y = b;
        this.offsetX = c;
        this.offsetY = d;
        return this
    };
    K.prototype.set = K.prototype.set = function (a)
    {
        this.x = a.x;
        this.y = a.y;
        this.offsetX = a.offsetX;
        this.offsetY = a.offsetY;
        return this
    };
    K.prototype.copy = function ()
    {
        var a = new K;
        a.x = this.x;
        a.y = this.y;
        a.offsetX = this.offsetX;
        a.offsetY = this.offsetY;
        return a
    };
    K.prototype.Ha = function ()
    {
        Object.freeze(this);
        return this
    };
    K.prototype.S = function ()
    {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    K.prototype.freeze = function ()
    {
        return this
    };
    K.prototype.Qa = function ()
    {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        return this
    };

    function ib(a, b)
    {
        a.x = NaN;
        a.y = NaN;
        a.offsetX = b;
        return a
    }
    var xb;
    K.parse = xb = function (a)
    {
        if ("string" === typeof a)
        {
            a = a.trim();
            if ("None" === a) return yb;
            if ("TopLeft" === a) return zb;
            if ("Top" === a || "TopCenter" === a || "MiddleTop" === a) return Bb;
            if ("TopRight" === a) return Cb;
            if ("Left" === a || "LeftCenter" === a || "MiddleLeft" === a) return Hb;
            if ("Center" === a) return Jb;
            if ("Right" === a || "RightCenter" === a || "MiddleRight" === a) return Kb;
            if ("BottomLeft" === a) return Qb;
            if ("Bottom" === a || "BottomCenter" === a || "MiddleBottom" === a) return Rb;
            if ("BottomRight" === a) return Sb;
            if ("TopSide" === a) return Xb;
            if ("LeftSide" ===
                a) return Yb;
            if ("RightSide" === a) return Zb;
            if ("BottomSide" === a) return $b;
            if ("TopBottomSides" === a) return ac;
            if ("LeftRightSides" === a) return bc;
            if ("TopLeftSides" === a) return ec;
            if ("TopRightSides" === a) return fc;
            if ("BottomLeftSides" === a) return gc;
            if ("BottomRightSides" === a) return hc;
            if ("NotTopSide" === a) return ic;
            if ("NotLeftSide" === a) return jc;
            if ("NotRightSide" === a) return nc;
            if ("NotBottomSide" === a) return oc;
            if ("AllSides" === a) return pc;
            if ("Default" === a) return qc;
            a = a.split(" ");
            for (var b = 0, c = 0;
                 "" === a[b];) b++;
            var d = a[b++];
            void 0 !== d && 0 < d.length && (c = parseFloat(d));
            for (var e = 0;
                 "" === a[b];) b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (e = parseFloat(d));
            for (var f = 0;
                 "" === a[b];) b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (f = parseFloat(d));
            for (var h = 0;
                 "" === a[b];) b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (h = parseFloat(d));
            return new K(c, e, f, h)
        }
        return new K
    };
    K.stringify = function (a)
    {
        return a.$c() ? a.x.toString() + " " + a.y.toString() + " " + a.offsetX.toString() + " " + a.offsetY.toString() : a.toString()
    };
    K.prototype.toString = function ()
    {
        return this.$c() ? 0 === this.offsetX && 0 === this.offsetY ? "Spot(" + this.x + "," + this.y + ")" : "Spot(" + this.x + "," + this.y + "," + this.offsetX + "," + this.offsetY + ")" : this.L(yb) ? "None" : this.L(zb) ? "TopLeft" : this.L(Bb) ? "Top" : this.L(Cb) ? "TopRight" : this.L(Hb) ? "Left" : this.L(Jb) ? "Center" : this.L(Kb) ? "Right" : this.L(Qb) ? "BottomLeft" : this.L(Rb) ? "Bottom" : this.L(Sb) ? "BottomRight" : this.L(Xb) ? "TopSide" : this.L(Yb) ? "LeftSide" : this.L(Zb) ? "RightSide" : this.L($b) ? "BottomSide" : this.L(ac) ? "TopBottomSides" : this.L(bc) ?
            "LeftRightSides" : this.L(ec) ? "TopLeftSides" : this.L(fc) ? "TopRightSides" : this.L(gc) ? "BottomLeftSides" : this.L(hc) ? "BottomRightSides" : this.L(ic) ? "NotTopSide" : this.L(jc) ? "NotLeftSide" : this.L(nc) ? "NotRightSide" : this.L(oc) ? "NotBottomSide" : this.L(pc) ? "AllSides" : this.L(qc) ? "Default" : "None"
    };
    K.prototype.equals = K.prototype.L = function (a)
    {
        return a instanceof K ? (this.x === a.x || isNaN(this.x) && isNaN(a.x)) && (this.y === a.y || isNaN(this.y) && isNaN(a.y)) && this.offsetX === a.offsetX && this.offsetY === a.offsetY : !1
    };
    K.prototype.opposite = K.prototype.WF = function ()
    {
        return new K(.5 - (this.x - .5), .5 - (this.y - .5), -this.offsetX, -this.offsetY)
    };
    K.prototype.includesSide = K.prototype.yj = function (a)
    {
        if (!this.Aj()) return !1;
        if (!a.Aj())
            if (a.L(rc)) a = Yb;
            else if (a.L(sc)) a = Zb;
            else if (a.L(yc)) a = Xb;
            else if (a.L(zc)) a = $b;
            else return !1;
        a = a.offsetY;
        return (this.offsetY & a) === a
    };
    K.prototype.isSpot = K.prototype.$c = function ()
    {
        return !isNaN(this.x) && !isNaN(this.y)
    };
    K.prototype.isNoSpot = K.prototype.Td = function ()
    {
        return isNaN(this.x) || isNaN(this.y)
    };
    K.prototype.isSide = K.prototype.Aj = function ()
    {
        return isNaN(this.x) && isNaN(this.y) && 1 === this.offsetX && 0 !== this.offsetY
    };
    K.prototype.isNone = K.prototype.BI = function ()
    {
        return isNaN(this.x) && isNaN(this.y) && 0 === this.offsetX && 0 === this.offsetY
    };
    K.prototype.isDefault = K.prototype.Zc = function ()
    {
        return isNaN(this.x) && isNaN(this.y) && -1 === this.offsetX && 0 === this.offsetY
    };
    var yb;
    K.None = yb = ib(new K(0, 0, 0, 0), 0).Ha();
    var qc;
    K.Default = qc = ib(new K(0, 0, -1, 0), -1).Ha();
    var zb;
    K.TopLeft = zb = (new K(0, 0, 0, 0)).Ha();
    var Bb;
    K.TopCenter = Bb = (new K(.5, 0, 0, 0)).Ha();
    var Cb;
    K.TopRight = Cb = (new K(1, 0, 0, 0)).Ha();
    var Hb;
    K.LeftCenter = Hb = (new K(0, .5, 0, 0)).Ha();
    var Jb;
    K.Center = Jb = (new K(.5, .5, 0, 0)).Ha();
    var Kb;
    K.RightCenter = Kb = (new K(1, .5, 0, 0)).Ha();
    var Qb;
    K.BottomLeft = Qb = (new K(0, 1, 0, 0)).Ha();
    var Rb;
    K.BottomCenter = Rb = (new K(.5, 1, 0, 0)).Ha();
    var Sb;
    K.BottomRight = Sb = (new K(1, 1, 0, 0)).Ha();
    var Gc;
    K.MiddleTop = Gc = Bb;
    var Hc;
    K.MiddleLeft = Hc = Hb;
    var Ic;
    K.MiddleRight = Ic = Kb;
    var Jc;
    K.MiddleBottom = Jc = Rb;
    var yc;
    K.Top = yc = Bb;
    var rc;
    K.Left = rc = Hb;
    var sc;
    K.Right = sc = Kb;
    var zc;
    K.Bottom = zc = Rb;
    var Xb;
    K.TopSide = Xb = ib(new K(0, 0, 1, w.od), 1).Ha();
    var Yb;
    K.LeftSide = Yb = ib(new K(0, 0, 1, w.Tc), 1).Ha();
    var Zb;
    K.RightSide = Zb = ib(new K(0, 0, 1, w.fd), 1).Ha();
    var $b;
    K.BottomSide = $b = ib(new K(0, 0, 1, w.ed), 1).Ha();
    var ac;
    K.TopBottomSides = ac = ib(new K(0, 0, 1, w.od | w.ed), 1).Ha();
    var bc;
    K.LeftRightSides = bc = ib(new K(0, 0, 1, w.Tc | w.fd), 1).Ha();
    var ec;
    K.TopLeftSides = ec = ib(new K(0, 0, 1, w.od | w.Tc), 1).Ha();
    var fc;
    K.TopRightSides = fc = ib(new K(0, 0, 1, w.od | w.fd), 1).Ha();
    var gc;
    K.BottomLeftSides = gc = ib(new K(0, 0, 1, w.ed | w.Tc), 1).Ha();
    var hc;
    K.BottomRightSides = hc = ib(new K(0, 0, 1, w.ed | w.fd), 1).Ha();
    var ic;
    K.NotTopSide = ic = ib(new K(0, 0, 1, w.Tc | w.fd | w.ed), 1).Ha();
    var jc;
    K.NotLeftSide = jc = ib(new K(0, 0, 1, w.od | w.fd | w.ed), 1).Ha();
    var nc;
    K.NotRightSide = nc = ib(new K(0, 0, 1, w.od | w.Tc | w.ed), 1).Ha();
    var oc;
    K.NotBottomSide = oc = ib(new K(0, 0, 1, w.od | w.Tc | w.fd), 1).Ha();
    var pc;
    K.AllSides = pc = ib(new K(0, 0, 1, w.od | w.Tc | w.fd | w.ed), 1).Ha();

    function Kc()
    {
        this.Ub = [1, 0, 0, 1, 0, 0]
    }
    Kc.prototype.copy = function ()
    {
        var a = new Kc;
        a.Ub[0] = this.Ub[0];
        a.Ub[1] = this.Ub[1];
        a.Ub[2] = this.Ub[2];
        a.Ub[3] = this.Ub[3];
        a.Ub[4] = this.Ub[4];
        a.Ub[5] = this.Ub[5];
        return a
    };
    Kc.prototype.translate = function (a, b)
    {
        this.Ub[4] += this.Ub[0] * a + this.Ub[2] * b;
        this.Ub[5] += this.Ub[1] * a + this.Ub[3] * b
    };
    Kc.prototype.scale = function (a, b)
    {
        this.Ub[0] *= a;
        this.Ub[1] *= a;
        this.Ub[2] *= b;
        this.Ub[3] *= b
    };

    function Nc(a)
    {
        this.type = a;
        this.r2 = this.y2 = this.x2 = this.r1 = this.y1 = this.x1 = 0;
        this.IE = [];
        this.pattern = null
    }
    Nc.prototype.addColorStop = function (a, b)
    {
        this.IE.push(
            {
                offset: a,
                color: b
            })
    };

    function Oc(a, b, c)
    {
        this.fillStyle = "#000000";
        this.font = "10px sans-serif";
        this.globalAlpha = 1;
        this.lineCap = "butt";
        this.Kn = 0;
        this.lineJoin = "miter";
        this.lineWidth = 1;
        this.miterLimit = 10;
        this.shadowBlur = 0;
        this.shadowColor = "rgba(0, 0, 0, 0)";
        this.shadowOffsetY = this.shadowOffsetX = 0;
        this.strokeStyle = "#000000";
        this.textAlign = "start";
        this.Lp = !1;
        this.Dg = this.ot = this.nt = 0;
        this.document = b || document;
        this.VE = c;
        this.Px = null;
        this.path = [];
        this.uh = new Kc;
        this.stack = [];
        this.qf = [];
        this.wx = a;
        this.hJ = "http://www.w3.org/2000/svg";
        this.width = this.wx.width;
        this.height = this.wx.height;
        this.pm = Pc(this, "svg",
            {
                width: this.width + "px",
                height: this.height + "px",
                viewBox: "0 0 " + this.wx.width + " " + this.wx.height
            });
        this.pm.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns", "http://www.w3.org/2000/svg");
        this.pm.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
        Qc(this, 1, 0, 0, 1, 0, 0);
        a = w.um++;
        b = Pc(this, "clipPath",
            {
                id: "mainClip" + a
            });
        b.appendChild(Pc(this, "rect",
            {
                x: 0,
                y: 0,
                width: this.width,
                height: this.height
            }));
        this.pm.appendChild(b);
        this.qf[0].setAttributeNS(null, "clip-path", "url(#mainClip" + a + ")")
    }
    g = Oc.prototype;
    g.arc = function (a, b, c, d, e, f)
    {
        var h = 2 * Math.PI,
            k = c * Math.cos(d),
            l = c * Math.sin(d),
            m = a + k,
            n = b + l,
            p = f ? 0 : 1;
        d = f ? d - e : e - d;
        0 > d && (d = d % h + h);
        d > h - 1E-6 ? (this.path.push(["A", c, c, 0, 1, p, a - k, b - l]), this.path.push(["A", c, c, 0, 1, p, m, n])) : 1E-6 < d && this.path.push(["A", c, c, 0, +(d >= Math.PI), p, a + c * Math.cos(e), b + c * Math.sin(e)])
    };
    g.beginPath = function ()
    {
        this.path = []
    };
    g.bezierCurveTo = function (a, b, c, d, e, f)
    {
        this.path.push(["C", a, b, c, d, e, f])
    };
    g.clearRect = function () {};
    g.clip = function ()
    {
        Rc(this, "clipPath", this.path, new Kc)
    };
    g.closePath = function ()
    {
        this.path.push(["z"])
    };
    g.createLinearGradient = function (a, b, c, d)
    {
        var e = new Nc("linear");
        e.x1 = a;
        e.y1 = b;
        e.x2 = c;
        e.y2 = d;
        return e
    };
    g.createPattern = function ()
    {
        return null
    };
    g.createRadialGradient = function (a, b, c, d, e, f)
    {
        var h = new Nc("radial");
        h.x1 = a;
        h.y1 = b;
        h.r1 = c;
        h.x2 = d;
        h.y2 = e;
        h.r2 = f;
        return h
    };
    g.drawImage = function (a, b, c, d, e, f, h, k, l)
    {
        var m = "";
        a instanceof HTMLCanvasElement && (m = a.toDataURL());
        a instanceof HTMLImageElement && (m = a.src);
        void 0 === d && (f = b, h = c, k = d = a.naturalWidth, l = e = a.naturalHeight);
        d = d || 0;
        e = e || 0;
        f = f || 0;
        h = h || 0;
        k = k || 0;
        l = l || 0;
        m = {
            x: 0,
            y: 0,
            width: a.naturalWidth,
            height: a.naturalHeight,
            href: m,
            preserveAspectRatio: "xMidYMid slice"
        };
        Wa(d, k) && Wa(e, l) || (m.preserveAspectRatio = "none");
        var n = "";
        k /= d;
        l /= e;
        if (0 !== f || 0 !== h) n += " translate(" + f + ", " + h + ")";
        if (1 !== k || 1 !== l) n += " scale(" + k + ", " + l + ")";
        if (0 !==
            b || 0 !== c) n += " translate(" + -b + ", " + -c + ")";
        if (0 !== b || 0 !== c || d !== a.naturalWidth || e !== a.naturalHeight) a = "CLIP" + w.um++, f = Pc(this, "clipPath",
            {
                id: a
            }), f.appendChild(Pc(this, "rect",
            {
                x: b,
                y: c,
                width: d,
                height: e
            })), this.pm.appendChild(f), m["clip-path"] = "url(#" + a + ")";
        Sc(this, "image", m, this.uh, n);
        this.addElement("image", m)
    };
    g.fill = function ()
    {
        Rc(this, "fill", this.path, this.uh)
    };
    g.Kg = function ()
    {
        this.Lp ? this.clip() : this.fill()
    };
    g.fillRect = function (a, b, c, d)
    {
        Tc(this, "fill", [a, b, c, d], this.uh)
    };
    g.fillText = function (a, b, c)
    {
        a = [a, b, c];
        b = this.textAlign;
        "left" === b ? b = "start" : "right" === b ? b = "end" : "center" === b && (b = "middle");
        b = {
            x: a[1],
            y: a[2],
            style: "font: " + this.font,
            "text-anchor": b
        };
        Sc(this, "fill", b, this.uh);
        this.addElement("text", b, a[0])
    };
    g.lineTo = function (a, b)
    {
        this.path.push(["L", a, b])
    };
    g.moveTo = function (a, b)
    {
        this.path.push(["M", a, b])
    };
    g.quadraticCurveTo = function (a, b, c, d)
    {
        this.path.push(["Q", a, b, c, d])
    };
    g.rect = function (a, b, c, d)
    {
        this.path.push(["M", a, b], ["L", a + c, b], ["L", a + c, b + d], ["L", a, b + d], ["z"])
    };
    g.restore = function ()
    {
        this.uh = this.stack.pop();
        this.path = this.stack.pop();
        var a = this.stack.pop();
        this.fillStyle = a.fillStyle;
        this.font = a.font;
        this.globalAlpha = a.globalAlpha;
        this.lineCap = a.lineCap;
        this.Kn = a.Kn;
        this.lineJoin = a.lineJoin;
        this.lineWidth = a.lineWidth;
        this.miterLimit = a.miterLimit;
        this.shadowBlur = a.shadowBlur;
        this.shadowColor = a.shadowColor;
        this.shadowOffsetX = a.shadowOffsetX;
        this.shadowOffsetY = a.shadowOffsetY;
        this.strokeStyle = a.strokeStyle;
        this.textAlign = a.textAlign
    };
    g.save = function ()
    {
        this.stack.push(
            {
                fillStyle: this.fillStyle,
                font: this.font,
                globalAlpha: this.globalAlpha,
                lineCap: this.lineCap,
                Kn: this.Kn,
                lineJoin: this.lineJoin,
                lineWidth: this.lineWidth,
                miterLimit: this.miterLimit,
                shadowBlur: this.shadowBlur,
                shadowColor: this.shadowColor,
                shadowOffsetX: this.shadowOffsetX,
                shadowOffsetY: this.shadowOffsetY,
                strokeStyle: this.strokeStyle,
                textAlign: this.textAlign
            });
        for (var a = [], b = 0; b < this.path.length; b++) a.push(this.path[b]);
        this.stack.push(a);
        this.stack.push(this.uh.copy())
    };
    g.setTransform = function (a, b, c, d, e, f)
    {
        1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === f || Qc(this, a, b, c, d, e, f)
    };
    g.scale = function (a, b)
    {
        this.uh.scale(a, b)
    };
    g.translate = function (a, b)
    {
        this.uh.translate(a, b)
    };
    g.transform = function () {};
    g.stroke = function ()
    {
        Rc(this, "stroke", this.path, this.uh)
    };
    g.Lj = function ()
    {
        this.Lp || this.stroke()
    };
    g.strokeRect = function (a, b, c, d)
    {
        Tc(this, "stroke", [a, b, c, d], this.uh)
    };

    function Pc(a, b, c, d)
    {
        a = a.document.createElementNS(a.hJ, b);
        if (w.Pa(c))
            for (var e in c) a.setAttributeNS("href" === e ? "http://www.w3.org/1999/xlink" : "", e, c[e]);
        void 0 !== d && (a.textContent = d);
        return a
    }
    g.addElement = function (a, b, c)
    {
        a = Pc(this, a, b, c);
        0 < this.qf.length ? this.qf[this.qf.length - 1].appendChild(a) : this.pm.appendChild(a);
        return this.Px = a
    };

    function Sc(a, b, c, d, e)
    {
        1 !== a.globalAlpha && (c.opacity = a.globalAlpha);
        "fill" === b ? (a.fillStyle instanceof Nc ? c.fill = Uc(a, a.fillStyle) : (/^rgba\(/.test(a.fillStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle), c.fill = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["fill-opacity"] = b[4]), c.fill = a.fillStyle), c.stroke = "none") : "stroke" === b && (c.fill = "none", a.strokeStyle instanceof Nc ? c.stroke = Uc(a, a.strokeStyle) : (/^rgba\(/.test(a.strokeStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
            c.stroke = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["stroke-opacity"] = b[4]), c.stroke = a.strokeStyle), c["stroke-width"] = a.lineWidth, c["stroke-linecap"] = a.lineCap, c["stroke-linejoin"] = a.lineJoin, c["stroke-miterlimit"] = a.miterLimit);
        a = d.Ub;
        a = "matrix(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ")";
        void 0 !== e && (a += e);
        c.transform = a
    }

    function Uc(a, b)
    {
        var c = "GRAD" + w.um++,
            d;
        if ("linear" === b.type) d = Pc(a, "linearGradient",
            {
                x1: b.x1,
                x2: b.x2,
                y1: b.y1,
                y2: b.y2,
                id: c,
                gradientUnits: "userSpaceOnUse"
            });
        else if ("radial" === b.type) d = Pc(a, "radialGradient",
            {
                x1: b.x1,
                x2: b.x2,
                y1: b.y1,
                y2: b.y2,
                r1: b.r1,
                r2: b.r2,
                id: c
            });
        else if ("pattern" === b.type)
        {
            var e = b.pattern;
            d = {
                width: e.width,
                height: e.height,
                id: c,
                patternUnits: "userSpaceOnUse"
            };
            var f = "";
            e instanceof HTMLCanvasElement && (f = e.toDataURL());
            e instanceof HTMLImageElement && (f = e.src);
            e = {
                x: 0,
                y: 0,
                width: e.width,
                height: e.height,
                href: f
            };
            d = Pc(a, "pattern", d);
            d.appendChild(Pc(a, "image", e))
        }
        else throw Error("invalid gradient");
        for (var e = b.IE, f = e.length, h = [], k = 0; k < f; k++)
        {
            var l = e[k],
                m = l.color,
                l = {
                    offset: l.offset,
                    "stop-color": m
                };
            /^rgba\(/.test(m) && (m = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(m), l["stop-color"] = "rgb(" + m[1] + "," + m[2] + "," + m[3] + ")", l["stop-opacity"] = m[4]);
            h.push(l)
        }
        h.sort(function (a, b)
        {
            return a.offset > b.offset ? 1 : -1
        });
        for (k = 0; k < f; k++) d.appendChild(Pc(a, "stop", h[k]));
        a.pm.appendChild(d);
        return "url(#" + c + ")"
    }

    function Tc(a, b, c, d)
    {
        c = {
            x: c[0],
            y: c[1],
            width: c[2],
            height: c[3]
        };
        Sc(a, b, c, d);
        a.addElement("rect", c)
    }

    function Rc(a, b, c, d)
    {
        for (var e = [], f = 0; f < c.length; f++)
        {
            var h = w.Tl(c[f]),
                k = [h.shift()];
            if ("A" === k[0]) k.push(h.shift() + "," + h.shift(), h.shift(), h.shift() + "," + h.shift(), h.shift() + "," + h.shift());
            else
                for (; h.length;) k.push(h.shift() + "," + h.shift());
            e.push(k.join(" "))
        }
        c = {
            d: e.join(" ")
        };
        Sc(a, b, c, d);
        "clipPath" === b ? (b = "CLIP" + w.um++, d = Pc(a, "clipPath",
            {
                id: b
            }), d.appendChild(Pc(a, "path", c)), a.pm.appendChild(d), 0 < a.qf.length && a.qf[a.qf.length - 1].setAttributeNS(null, "clip-path", "url(#" + b + ")")) : a.addElement("path",
            c)
    }

    function Qc(a, b, c, d, e, f, h)
    {
        var k = new Kc;
        k.Ub = [b, c, d, e, f, h];
        b = {};
        Sc(a, "g", b, k);
        k = a.addElement("g", b);
        a.qf.push(k)
    }
    g.eb = function ()
    {
        if (0 !== this.shadowOffsetX || 0 !== this.shadowOffsetY || 0 !== this.shadowBlur)
        {
            var a = "SHADOW" + w.um++,
                b = this.addElement("filter",
                    {
                        id: a,
                        x: "-100%",
                        y: "-100%",
                        width: "300%",
                        height: "300%"
                    }, null),
                c, d, e, f, h;
            c = Pc(this, "feGaussianBlur",
                {
                    "in": "SourceAlpha",
                    result: "blur",
                    SL: this.shadowBlur / 2
                });
            d = Pc(this, "feFlood",
                {
                    "in": "blur",
                    result: "flood",
                    "flood-color": this.shadowColor
                });
            e = Pc(this, "feComposite",
                {
                    "in": "flood",
                    in2: "blur",
                    operator: "in",
                    result: "comp"
                });
            f = Pc(this, "feOffset",
                {
                    "in": "comp",
                    result: "offsetBlur",
                    dx: this.shadowOffsetX,
                    dy: this.shadowOffsetY
                });
            h = Pc(this, "feMerge",
                {});
            h.appendChild(Pc(this, "feMergeNode",
                {
                    "in": "offsetBlur"
                }));
            h.appendChild(Pc(this, "feMergeNode",
                {
                    "in": "SourceGraphic"
                }));
            b.appendChild(c);
            b.appendChild(d);
            b.appendChild(e);
            b.appendChild(f);
            b.appendChild(h);
            0 < this.qf.length && this.qf[this.qf.length - 1].setAttributeNS(null, "filter", "url(#" + a + ")")
        }
    };
    g.HB = function (a, b, c)
    {
        this.nt = a;
        this.ot = b;
        this.Dg = c
    };
    g.nm = function ()
    {
        this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0
    };
    g.ao = function ()
    {
        this.shadowOffsetX = this.nt;
        this.shadowOffsetY = this.ot;
        this.shadowBlur = this.Dg
    };
    g.xx = function ()
    {
        return !1
    };
    g.ux = function () {};
    g.Ke = function () {};
    g.xy = function () {};
    Oc.prototype.rotate = function () {};

    function Vc(a, b)
    {
        this.ownerDocument = void 0 === b ? document : b;
        var c = this.ownerDocument.createElement("canvas");
        c.tabIndex = 0;
        this.Od = c;
        this.Gk = new Wc(c);
        c.aa = a;
        Object.seal(this)
    }
    g = Vc.prototype;
    g.toDataURL = function (a, b)
    {
        return this.Od.toDataURL(a, b)
    };
    g.getBoundingClientRect = function ()
    {
        return this.Od.getBoundingClientRect()
    };
    g.focus = function ()
    {
        return this.Od.focus()
    };
    g.addEventListener = function (a, b, c)
    {
        this.Od.addEventListener(a, b, c)
    };
    g.removeEventListener = function (a, b, c)
    {
        this.Od.removeEventListener(a, b, c)
    };
    w.defineProperty(Vc,
        {
            width: "width"
        }, function ()
        {
            return this.Od.width
        }, function (a)
        {
            this.Od.width = a
        });
    w.defineProperty(Vc,
        {
            height: "height"
        }, function ()
        {
            return this.Od.height
        }, function (a)
        {
            this.Od.height = a
        });
    w.u(Vc,
        {
            style: "style"
        }, function ()
        {
            return this.Od.style
        });

    function Wc(a)
    {
        a.getContext && a.getContext("2d") || w.k("Browser does not support HTML Canvas Element");
        this.ua = a.getContext("2d");
        this.Vy = this.Xy = this.Wy = "";
        this.ar = !1;
        this.Dg = this.ot = this.nt = 0;
        Object.seal(this)
    }
    Wc.prototype.xy = function (a)
    {
        this.ua.NA = a
    };
    w.defineProperty(Wc,
        {
            fillStyle: "fillStyle"
        }, function ()
        {
            return this.ua.fillStyle
        }, function (a)
        {
            this.Vy !== a && (this.Vy = this.ua.fillStyle = a)
        });
    w.defineProperty(Wc,
        {
            font: "font"
        }, function ()
        {
            return this.ua.font
        }, function (a)
        {
            this.Wy !== a && (this.Wy = this.ua.font = a)
        });
    w.defineProperty(Wc,
        {
            globalAlpha: "globalAlpha"
        }, function ()
        {
            return this.ua.globalAlpha
        }, function (a)
        {
            this.ua.globalAlpha = a
        });
    w.defineProperty(Wc,
        {
            lineCap: "lineCap"
        }, function ()
        {
            return this.ua.lineCap
        }, function (a)
        {
            this.ua.lineCap = a
        });
    w.defineProperty(Wc,
        {
            Kn: "lineDashOffset"
        }, function ()
        {
            return this.ua.Kn
        }, function (a)
        {
            this.ua.Kn = a
        });
    w.defineProperty(Wc,
        {
            lineJoin: "lineJoin"
        }, function ()
        {
            return this.ua.lineJoin
        }, function (a)
        {
            this.ua.lineJoin = a
        });
    w.defineProperty(Wc,
        {
            lineWidth: "lineWidth"
        }, function ()
        {
            return this.ua.lineWidth
        }, function (a)
        {
            this.ua.lineWidth = a
        });
    w.defineProperty(Wc,
        {
            miterLimit: "miterLimit"
        }, function ()
        {
            return this.ua.miterLimit
        }, function (a)
        {
            this.ua.miterLimit = a
        });
    w.defineProperty(Wc,
        {
            shadowBlur: "shadowBlur"
        }, function ()
        {
            return this.ua.shadowBlur
        }, function (a)
        {
            this.ua.shadowBlur = a
        });
    w.defineProperty(Wc,
        {
            shadowColor: "shadowColor"
        }, function ()
        {
            return this.ua.shadowColor
        }, function (a)
        {
            this.ua.shadowColor = a
        });
    w.defineProperty(Wc,
        {
            shadowOffsetX: "shadowOffsetX"
        }, function ()
        {
            return this.ua.shadowOffsetX
        }, function (a)
        {
            this.ua.shadowOffsetX = a
        });
    w.defineProperty(Wc,
        {
            shadowOffsetY: "shadowOffsetY"
        }, function ()
        {
            return this.ua.shadowOffsetY
        }, function (a)
        {
            this.ua.shadowOffsetY = a
        });
    w.defineProperty(Wc,
        {
            strokeStyle: "strokeStyle"
        }, function ()
        {
            return this.ua.strokeStyle
        }, function (a)
        {
            this.Xy !== a && (this.Xy = this.ua.strokeStyle = a)
        });
    w.defineProperty(Wc,
        {
            textAlign: "textAlign"
        }, function ()
        {
            return this.ua.textAlign
        }, function (a)
        {
            this.ua.textAlign = a
        });
    w.defineProperty(Wc,
        {
            NA: "imageSmoothingEnabled"
        }, function ()
        {
            return this.ua.NA
        }, function (a)
        {
            this.ua.NA = a
        });
    g = Wc.prototype;
    g.arc = function (a, b, c, d, e, f)
    {
        this.ua.arc(a, b, c, d, e, f)
    };
    g.beginPath = function ()
    {
        this.ua.beginPath()
    };
    g.bezierCurveTo = function (a, b, c, d, e, f)
    {
        this.ua.bezierCurveTo(a, b, c, d, e, f)
    };
    g.clearRect = function (a, b, c, d)
    {
        this.ua.clearRect(a, b, c, d)
    };
    g.clip = function ()
    {
        this.ua.clip()
    };
    g.closePath = function ()
    {
        this.ua.closePath()
    };
    g.createLinearGradient = function (a, b, c, d)
    {
        return this.ua.createLinearGradient(a, b, c, d)
    };
    g.createPattern = function (a, b)
    {
        return this.ua.createPattern(a, b)
    };
    g.createRadialGradient = function (a, b, c, d, e, f)
    {
        return this.ua.createRadialGradient(a, b, c, d, e, f)
    };
    g.drawImage = function (a, b, c, d, e, f, h, k, l)
    {
        void 0 === d ? this.ua.drawImage(a, b, c) : this.ua.drawImage(a, b, c, d, e, f, h, k, l)
    };
    g.fill = function ()
    {
        this.ua.fill()
    };
    g.fillRect = function (a, b, c, d)
    {
        this.ua.fillRect(a, b, c, d)
    };
    g.fillText = function (a, b, c)
    {
        this.ua.fillText(a, b, c)
    };
    g.getImageData = function (a, b, c, d)
    {
        return this.ua.getImageData(a, b, c, d)
    };
    g.lineTo = function (a, b)
    {
        this.ua.lineTo(a, b)
    };
    g.measureText = function (a)
    {
        return this.ua.measureText(a)
    };
    g.moveTo = function (a, b)
    {
        this.ua.moveTo(a, b)
    };
    g.quadraticCurveTo = function (a, b, c, d)
    {
        this.ua.quadraticCurveTo(a, b, c, d)
    };
    g.rect = function (a, b, c, d)
    {
        this.ua.rect(a, b, c, d)
    };
    g.restore = function ()
    {
        this.ua.restore()
    };
    Wc.prototype.rotate = function (a)
    {
        this.ua.rotate(a)
    };
    g = Wc.prototype;
    g.save = function ()
    {
        this.ua.save()
    };
    g.setTransform = function (a, b, c, d, e, f)
    {
        this.ua.setTransform(a, b, c, d, e, f)
    };
    g.scale = function (a, b)
    {
        this.ua.scale(a, b)
    };
    g.stroke = function ()
    {
        this.ua.stroke()
    };
    g.transform = function (a, b, c, d, e, f)
    {
        1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === f || this.ua.transform(a, b, c, d, e, f)
    };
    g.translate = function (a, b)
    {
        this.ua.translate(a, b)
    };
    g.Kg = function (a)
    {
        if (a instanceof ga && a.type === Xc)
        {
            var b = a.so;
            a = a.$y;
            a > b ? (this.scale(b / a, 1), this.translate((a - b) / 2, 0)) : b > a && (this.scale(1, a / b), this.translate(0, (b - a) / 2));
            this.ar ? this.clip() : this.fill();
            a > b ? (this.translate(-(a - b) / 2, 0), this.scale(1 / (b / a), 1)) : b > a && (this.translate(0, -(b - a) / 2), this.scale(1, 1 / (a / b)))
        }
        else this.ar ? this.clip() : this.fill()
    };
    g.Lj = function ()
    {
        this.ar || this.stroke()
    };
    w.defineProperty(Wc,
        {
            Lp: "clipInsteadOfFill"
        }, function ()
        {
            return this.ar
        }, function (a)
        {
            this.ar = a
        });
    g = Wc.prototype;
    g.HB = function (a, b, c)
    {
        this.nt = a;
        this.ot = b;
        this.Dg = c
    };
    g.nm = function ()
    {
        this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0
    };
    g.ao = function ()
    {
        this.shadowOffsetX = this.nt;
        this.shadowOffsetY = this.ot;
        this.shadowBlur = this.Dg
    };
    g.xx = function (a, b)
    {
        var c = this.ua;
        if (void 0 !== c.setLineDash) c.setLineDash(a), c.lineDashOffset = b;
        else if (void 0 !== c.webkitLineDash) c.webkitLineDash = a, c.webkitLineDashOffset = b;
        else return !1;
        return !0
    };
    g.ux = function ()
    {
        var a = this.ua;
        void 0 !== a.setLineDash ? (a.setLineDash(w.jo), a.lineDashOffset = 0) : void 0 !== a.webkitLineDash && (a.webkitLineDash = w.jo, a.webkitLineDashOffset = 0)
    };
    g.Ke = function (a)
    {
        a && (this.Wy = "");
        this.Vy = this.Xy = ""
    };
    var bd = (Math.sqrt(2) - 1) / 3 * 4,
        cd = (new y(0, 0)).Ha(),
        dd = (new B(0, 0, 0, 0)).Ha(),
        ed = (new hb(0, 0, 0, 0)).Ha(),
        fd = (new hb(2, 2, 2, 2)).Ha(),
        nd = (new y(6, 6)).Ha(),
        od = (new y(-Infinity, -Infinity)).Ha(),
        pd = (new y(Infinity, Infinity)).Ha(),
        qd = (new ia(0, 0)).Ha(),
        rd = (new ia(1, 1)).Ha(),
        sd = (new ia(6, 6)).Ha(),
        Bd = (new ia(8, 8)).Ha(),
        Cd = (new ia(10, 10)).Ha(),
        Dd = (new ia(Infinity, Infinity)).Ha(),
        Ed = (new y(NaN, NaN)).Ha(),
        Fd = (new ia(NaN, NaN)).Ha(),
        Gd = (new B(NaN, NaN, NaN, NaN)).Ha(),
        Nd = (new K(.156, .156)).Ha(),
        Od = (new K(.844, .844)).Ha(),
        Pd = new ra,
        Qd = new ra,
        Rd = null;

    function Sd(a)
    {
        if (0 >= a) return 0;
        var b = Rd;
        if (null === b)
        {
            for (var b = [], c = 0; 2E3 >= c; c++) b[c] = Math.sqrt(c);
            Rd = b
        }
        return 1 > a ? (c = 1 / a, 2E3 >= c ? 1 / b[c | 0] : Math.sqrt(a)) : 2E3 >= a ? b[a | 0] : Math.sqrt(a)
    }

    function J(a, b)
    {
        var c = a - b;
        return .5 > c && -.5 < c
    }

    function Wa(a, b)
    {
        var c = a - b;
        return 5E-8 > c && -5E-8 < c
    }

    function Td(a, b, c, d, e, f, h)
    {
        0 >= e && (e = 1E-6);
        var k = 0,
            l = 0,
            m = 0,
            n = 0;
        a < c ? (l = a, k = c) : (l = c, k = a);
        b < d ? (n = b, m = d) : (n = d, m = b);
        if (a === c) return n <= h && h <= m && a - e <= f && f <= a + e;
        if (b === d) return l <= f && f <= k && b - e <= h && h <= b + e;
        k += e;
        l -= e;
        if (l <= f && f <= k && (m += e, n -= e, n <= h && h <= m))
            if (k - l > m - n)
                if (a - c > e || c - a > e)
                {
                    if (f = (d - b) / (c - a) * (f - a) + b, f - e <= h && h <= f + e) return !0
                }
                else return !0;
            else if (b - d > e || d - b > e)
            {
                if (h = (c - a) / (d - b) * (h - b) + a, h - e <= f && f <= h + e) return !0
            }
            else return !0;
        return !1
    }

    function Ud(a, b, c, d, e, f, h, k, l, m, n, p)
    {
        if (Td(a, b, h, k, p, c, d) && Td(a, b, h, k, p, e, f)) return Td(a, b, h, k, p, m, n);
        var q = (a + c) / 2,
            r = (b + d) / 2,
            s = (c + e) / 2,
            u = (d + f) / 2;
        e = (e + h) / 2;
        f = (f + k) / 2;
        d = (q + s) / 2;
        c = (r + u) / 2;
        var s = (s + e) / 2,
            u = (u + f) / 2,
            t = (d + s) / 2,
            x = (c + u) / 2;
        return Ud(a, b, q, r, d, c, t, x, l, m, n, p) || Ud(t, x, s, u, e, f, h, k, l, m, n, p)
    }

    function Vd(a, b, c, d, e, f, h, k, l, m)
    {
        if (Td(a, b, h, k, l, c, d) && Td(a, b, h, k, l, e, f)) ab(m, a, b, 0, 0), ab(m, h, k, 0, 0);
        else
        {
            var n = (a + c) / 2,
                p = (b + d) / 2,
                q = (c + e) / 2,
                r = (d + f) / 2;
            e = (e + h) / 2;
            f = (f + k) / 2;
            d = (n + q) / 2;
            c = (p + r) / 2;
            var q = (q + e) / 2,
                r = (r + f) / 2,
                s = (d + q) / 2,
                u = (c + r) / 2;
            Vd(a, b, n, p, d, c, s, u, l, m);
            Vd(s, u, q, r, e, f, h, k, l, m)
        }
    }

    function Wd(a, b, c, d, e, f, h, k, l, m)
    {
        if (Td(a, b, h, k, l, c, d) && Td(a, b, h, k, l, e, f)) 0 === m.length && (m.push(a), m.push(b)), m.push(h), m.push(k);
        else
        {
            var n = (a + c) / 2,
                p = (b + d) / 2,
                q = (c + e) / 2,
                r = (d + f) / 2;
            e = (e + h) / 2;
            f = (f + k) / 2;
            d = (n + q) / 2;
            c = (p + r) / 2;
            var q = (q + e) / 2,
                r = (r + f) / 2,
                s = (d + q) / 2,
                u = (c + r) / 2;
            Wd(a, b, n, p, d, c, s, u, l, m);
            Wd(s, u, q, r, e, f, h, k, l, m)
        }
    }

    function Xd(a, b, c, d, e, f, h, k, l, m, n, p, q, r)
    {
        var s = 1 - l;
        a = a * s + c * l;
        b = b * s + d * l;
        c = c * s + e * l;
        d = d * s + f * l;
        e = e * s + h * l;
        f = f * s + k * l;
        k = a * s + c * l;
        h = b * s + d * l;
        c = c * s + e * l;
        d = d * s + f * l;
        m.x = a;
        m.y = b;
        n.x = k;
        n.y = h;
        p.x = k * s + c * l;
        p.y = h * s + d * l;
        q.x = c;
        q.y = d;
        r.x = e;
        r.y = f
    }

    function ee(a, b, c, d, e, f, h, k, l, m)
    {
        if (Td(a, b, e, f, m, c, d)) return Td(a, b, e, f, m, k, l);
        var n = (a + c) / 2,
            p = (b + d) / 2;
        c = (c + e) / 2;
        d = (d + f) / 2;
        var q = (n + c) / 2,
            r = (p + d) / 2;
        return ee(a, b, n, p, q, r, h, k, l, m) || ee(q, r, c, d, e, f, h, k, l, m)
    }

    function fe(a, b, c, d, e, f, h, k)
    {
        if (Td(a, b, e, f, h, c, d)) ab(k, a, b, 0, 0), ab(k, e, f, 0, 0);
        else
        {
            var l = (a + c) / 2,
                m = (b + d) / 2;
            c = (c + e) / 2;
            d = (d + f) / 2;
            var n = (l + c) / 2,
                p = (m + d) / 2;
            fe(a, b, l, m, n, p, h, k);
            fe(n, p, c, d, e, f, h, k)
        }
    }

    function ge(a, b, c, d, e, f, h, k)
    {
        if (Td(a, b, e, f, h, c, d)) 0 === k.length && (k.push(a), k.push(b)), k.push(e), k.push(f);
        else
        {
            var l = (a + c) / 2,
                m = (b + d) / 2;
            c = (c + e) / 2;
            d = (d + f) / 2;
            var n = (l + c) / 2,
                p = (m + d) / 2;
            ge(a, b, l, m, n, p, h, k);
            ge(n, p, c, d, e, f, h, k)
        }
    }

    function he(a, b, c, d, e, f, h, k, l, m, n, p, q, r)
    {
        0 >= q && (q = 1E-6);
        if (Td(a, b, h, k, q, c, d) && Td(a, b, h, k, q, e, f))
        {
            var s = (a - h) * (m - p) - (b - k) * (l - n);
            if (0 === s) return !1;
            q = ((a * k - b * h) * (l - n) - (a - h) * (l * p - m * n)) / s;
            s = ((a * k - b * h) * (m - p) - (b - k) * (l * p - m * n)) / s;
            if ((l > n ? l - n : n - l) < (m > p ? m - p : p - m))
            {
                if (h = l = 0, b < k ? (l = b, h = k) : (l = k, h = b), s < l || s > h) return !1
            }
            else if (a < h ? l = a : (l = h, h = a), q < l || q > h) return !1;
            r.x = q;
            r.y = s;
            return !0
        }
        var s = (a + c) / 2,
            u = (b + d) / 2;
        c = (c + e) / 2;
        d = (d + f) / 2;
        e = (e + h) / 2;
        f = (f + k) / 2;
        var t = (s + c) / 2,
            x = (u + d) / 2;
        c = (c + e) / 2;
        d = (d + f) / 2;
        var v = (t + c) / 2,
            z = (x + d) / 2,
            A = (n - l) * (n - l) + (p - m) * (p - m),
            L = !1;
        he(a, b, s, u, t, x, v, z, l, m, n, p, q, r) && (b = (r.x - l) * (r.x - l) + (r.y - m) * (r.y - m), b < A && (A = b, L = !0));
        a = r.x;
        s = r.y;
        he(v, z, c, d, e, f, h, k, l, m, n, p, q, r) && (b = (r.x - l) * (r.x - l) + (r.y - m) * (r.y - m), b < A ? L = !0 : (r.x = a, r.y = s));
        return L
    }

    function ie(a, b, c, d, e, f, h, k, l, m, n, p, q)
    {
        var r = 0;
        0 >= q && (q = 1E-6);
        if (Td(a, b, h, k, q, c, d) && Td(a, b, h, k, q, e, f))
        {
            q = (a - h) * (m - p) - (b - k) * (l - n);
            if (0 === q) return r;
            var s = ((a * k - b * h) * (l - n) - (a - h) * (l * p - m * n)) / q,
                u = ((a * k - b * h) * (m - p) - (b - k) * (l * p - m * n)) / q;
            if (s >= n) return r;
            if ((l > n ? l - n : n - l) < (m > p ? m - p : p - m))
            {
                if (a = l = 0, b < k ? (l = b, a = k) : (l = k, a = b), u < l || u > a) return r
            }
            else if (a < h ? (l = a, a = h) : l = h, s < l || s > a) return r;
            0 < q ? r++ : 0 > q && r--
        }
        else
        {
            var s = (a + c) / 2,
                u = (b + d) / 2,
                t = (c + e) / 2,
                x = (d + f) / 2;
            e = (e + h) / 2;
            f = (f + k) / 2;
            d = (s + t) / 2;
            c = (u + x) / 2;
            var t = (t + e) / 2,
                x = (x + f) / 2,
                v = (d + t) / 2,
                z = (c + x) / 2,
                r = r + ie(a, b, s, u, d, c, v, z, l, m, n, p, q),
                r = r + ie(v, z, t, x, e, f, h, k, l, m, n, p, q)
        }
        return r
    }

    function La(a, b, c, d, e, f, h)
    {
        if (Wa(a, c))
        {
            var k = 0;
            c = 0;
            b < d ? (k = b, c = d) : (k = d, c = b);
            d = f;
            if (d < k) return h.x = a, h.y = k, !1;
            if (d > c) return h.x = a, h.y = c, !1;
            h.x = a;
            h.y = d;
            return !0
        }
        if (Wa(b, d))
        {
            a < c ? k = a : (k = c, c = a);
            d = e;
            if (d < k) return h.x = k, h.y = b, !1;
            if (d > c) return h.x = c, h.y = b, !1;
            h.x = d;
            h.y = b;
            return !0
        }
        k = ((a - e) * (a - c) + (b - f) * (b - d)) / ((c - a) * (c - a) + (d - b) * (d - b));
        if (-5E-6 > k) return h.x = a, h.y = b, !1;
        if (1.000005 < k) return h.x = c, h.y = d, !1;
        h.x = a + k * (c - a);
        h.y = b + k * (d - b);
        return !0
    }

    function je(a, b, c, d, e, f, h, k, l)
    {
        if (J(a, c) && J(b, d)) return l.x = a, l.y = b, !1;
        if (Wa(e, h))
        {
            if (Wa(a, c)) return La(a, b, c, d, e, f, l), !1;
            f = (d - b) / (c - a) * (e - a) + b;
            return La(a, b, c, d, e, f, l)
        }
        k = (k - f) / (h - e);
        if (Wa(a, c))
        {
            f = k * (a - e) + f;
            c = h = 0;
            b < d ? (h = b, c = d) : (h = d, c = b);
            if (f < h) return l.x = a, l.y = h, !1;
            if (f > c) return l.x = a, l.y = c, !1;
            l.x = a;
            l.y = f;
            return !0
        }
        h = (d - b) / (c - a);
        if (Wa(k, h)) return La(a, b, c, d, e, f, l), !1;
        e = (h * a - k * e + f - b) / (h - k);
        if (Wa(h, 0))
        {
            a < c ? h = a : (h = c, c = a);
            if (e < h) return l.x = h, l.y = b, !1;
            if (e > c) return l.x = c, l.y = b, !1;
            l.x = e;
            l.y = b;
            return !0
        }
        f =
            h * (e - a) + b;
        return La(a, b, c, d, e, f, l)
    }

    function ke(a, b, c, d, e, f, h, k, l)
    {
        var m = 1E21,
            n = a,
            p = b;
        if (je(a, b, a, d, e, f, h, k, l))
        {
            var q = (l.x - e) * (l.x - e) + (l.y - f) * (l.y - f);
            q < m && (m = q, n = l.x, p = l.y)
        }
        je(c, b, c, d, e, f, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - f) * (l.y - f), q < m && (m = q, n = l.x, p = l.y));
        je(a, b, c, b, e, f, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - f) * (l.y - f), q < m && (m = q, n = l.x, p = l.y));
        je(a, d, c, d, e, f, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - f) * (l.y - f), q < m && (m = q, n = l.x, p = l.y));
        l.x = n;
        l.y = p;
        return 1E21 > m
    }

    function le(a, b, c, d, e, f, h, k, l)
    {
        c = a - c;
        var m = e - h,
            n = h = 0;
        0 === c || 0 === m ? 0 === c ? (k = (f - k) / m, h = a, n = k * h + (f - k * e)) : (d = (b - d) / c, h = e, n = d * h + (b - d * a)) : (d = (b - d) / c, k = (f - k) / m, a = b - d * a, h = (f - k * e - a) / (d - k), n = d * h + a);
        l.m(h, n);
        return l
    }

    function me(a, b, c)
    {
        var d = b.x,
            e = b.y,
            f = c.x,
            h = c.y,
            k = a.left,
            l = a.right,
            m = a.top,
            n = a.bottom;
        return d === f ? (f = a = 0, e < h ? (a = e, f = h) : (a = h, f = e), k <= d && d <= l && a <= n && f >= m) : e === h ? (d < f ? a = d : (a = f, f = d), m <= e && e <= n && a <= l && f >= k) : a.Ia(b) || a.Ia(c) || ne(k, m, l, m, d, e, f, h) || ne(l, m, l, n, d, e, f, h) || ne(l, n, k, n, d, e, f, h) || ne(k, n, k, m, d, e, f, h) ? !0 : !1
    }

    function ne(a, b, c, d, e, f, h, k)
    {
        return 0 >= oe(a, b, c, d, e, f) * oe(a, b, c, d, h, k) && 0 >= oe(e, f, h, k, a, b) * oe(e, f, h, k, c, d)
    }

    function oe(a, b, c, d, e, f)
    {
        c -= a;
        d -= b;
        a = e - a;
        b = f - b;
        f = a * d - b * c;
        0 === f && (f = a * c + b * d, 0 < f && (f = (a - c) * c + (b - d) * d, 0 > f && (f = 0)));
        return 0 > f ? -1 : 0 < f ? 1 : 0
    }

    function pe(a)
    {
        0 > a && (a += 360);
        360 <= a && (a -= 360);
        return a
    }

    function ye(a, b, c, d)
    {
        var e = Math.PI;
        d || (b *= e / 180, c *= e / 180);
        var f = b > c ? -1 : 1;
        d = [];
        var h = e / 2,
            k = b;
        c = Math.min(2 * e, Math.abs(c - b));
        if (1E-5 > c) return b = k + f * Math.min(c, h), f = 0 + a * Math.cos(k), k = 0 + a * Math.sin(k), h = 0 + a * Math.cos(b), a = 0 + a * Math.sin(b), b = (f + h) / 2, c = (k + a) / 2, d.push([f, k, b, c, b, c, h, a]), d;
        for (; 1E-5 < c;)
        {
            b = k + f * Math.min(c, h);
            var e = (b - k) / 2,
                l = a * Math.cos(e),
                m = a * Math.sin(e),
                n = -m,
                p = l * l + n * n,
                q = p + l * l + n * m,
                p = 4 / 3 * (Math.sqrt(2 * p * q) - q) / (l * m - n * l),
                m = l - p * n,
                l = n + p * l,
                n = -l,
                p = e + k,
                e = Math.cos(p),
                p = Math.sin(p);
            d.push([0 + a * Math.cos(k),
                0 + a * Math.sin(k), 0 + m * e - l * p, 0 + m * p + l * e, 0 + m * e - n * p, 0 + m * p + n * e, 0 + a * Math.cos(b), 0 + a * Math.sin(b)
            ]);
            c -= Math.abs(b - k);
            k = b
        }
        return d
    }

    function Na(a, b, c, d, e, f, h)
    {
        c = Math.floor((a - c) / e) * e + c;
        d = Math.floor((b - d) / f) * f + d;
        var k = c;
        c + e - a < e / 2 && (k = c + e);
        a = d;
        d + f - b < f / 2 && (a = d + f);
        h.m(k, a)
    }

    function ze(a, b)
    {
        var c = Math.max(a, b),
            d = Math.min(a, b),
            e = 1,
            f = 1;
        do e = c % d, c = f = d, d = e; while (0 < e);
        return f
    }

    function Ae(a, b, c, d)
    {
        var e = 0 > c,
            f = 0 > d,
            h = 0,
            k = h = 0;
        a < b ? (h = 1, k = 0) : (h = 0, k = 1);
        var l = 0,
            m = 0,
            n = 0,
            p = 0,
            l = 0 === h ? a : b,
            n = 0 === h ? c : d;
        if (0 === h ? e : f) n = -n;
        h = k;
        m = 0 === h ? a : b;
        p = 0 === h ? c : d;
        if (0 === h ? e : f) p = -p;
        a = a = 0;
        if (0 < p)
            if (0 < n)
            {
                b = l * l;
                a = m * m;
                l *= n;
                c = m * p;
                d = -a + c;
                e = -a + Math.sqrt(l * l + c * c);
                m = d;
                for (f = 0; 9999999999 > f; ++f)
                {
                    m = .5 * (d + e);
                    if (m === d || m === e) break;
                    k = l / (m + b);
                    h = c / (m + a);
                    k = k * k + h * h - 1;
                    if (0 < k) d = m;
                    else if (0 > k) e = m;
                    else break
                }
                n = b * n / (m + b) - n;
                p = a * p / (m + a) - p;
                a = Math.sqrt(n * n + p * p)
            }
            else a = Math.abs(p - m);
        else p = l * l - m * m, a = l * n, a < p ? (p = a / p, a = m * Math.sqrt(Math.abs(1 -
            p * p)), n = l * p - n, a = Math.sqrt(n * n + a * a)) : a = Math.abs(n - l);
        return a
    }

    function Be(a)
    {
        1 < arguments.length && w.k("Geometry constructor can take at most one optional argument, the Geometry type.");
        w.nc(this);
        this.P = !1;
        void 0 === a && (a = Ce);
        this.na = a;
        this.Jb = this.zb = this.Mc = this.Cc = 0;
        this.Wj = new H(De);
        this.Mv = this.Wj.F;
        this.xv = (new B).freeze();
        this.hb = !0;
        this.Qq = this.mo = null;
        this.Rq = NaN;
        this.hi = zb;
        this.ii = Sb;
        this.No = this.Po = NaN;
        this.Ki = Ee
    }
    w.ga("Geometry", Be);
    w.ni(Be);
    Be.prototype.copy = function ()
    {
        var a = new Be;
        a.na = this.na;
        a.Cc = this.Cc;
        a.Mc = this.Mc;
        a.zb = this.zb;
        a.Jb = this.Jb;
        for (var b = this.Wj.n, c = b.length, d = a.Wj, e = 0; e < c; e++)
        {
            var f = b[e].copy();
            d.add(f)
        }
        a.Mv = this.Mv;
        a.xv.assign(this.xv);
        a.hb = this.hb;
        a.mo = this.mo;
        a.Qq = this.Qq;
        a.Rq = this.Rq;
        a.hi = this.hi.S();
        a.ii = this.ii.S();
        a.Po = this.Po;
        a.No = this.No;
        a.Ki = this.Ki;
        return a
    };
    var Fe;
    Be.Line = Fe = w.p(Be, "Line", 0);
    var Ge;
    Be.Rectangle = Ge = w.p(Be, "Rectangle", 1);
    var He;
    Be.Ellipse = He = w.p(Be, "Ellipse", 2);
    var Ce;
    Be.Path = Ce = w.p(Be, "Path", 3);
    Be.prototype.Ha = function ()
    {
        this.freeze();
        Object.freeze(this);
        return this
    };
    Be.prototype.freeze = function ()
    {
        this.P = !0;
        var a = this.fc;
        a.freeze();
        for (var a = a.n, b = a.length, c = 0; c < b; c++) a[c].freeze();
        return this
    };
    Be.prototype.Qa = function ()
    {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        this.P = !1;
        var a = this.fc;
        a.Qa();
        for (var a = a.n, b = a.length, c = 0; c < b; c++) a[c].Qa();
        return this
    };
    Be.prototype.equalsApprox = Be.prototype.Oc = function (a)
    {
        if (!(a instanceof Be)) return !1;
        if (this.type !== a.type) return this.type === Fe && a.type === Ce ? Ie(this, a) : a.type === Fe && this.type === Ce ? Ie(a, this) : !1;
        if (this.type === Ce)
        {
            var b = this.fc.n;
            a = a.fc.n;
            var c = b.length;
            if (c !== a.length) return !1;
            for (var d = 0; d < c; d++)
                if (!b[d].Oc(a[d])) return !1;
            return !0
        }
        return J(this.ha, a.ha) && J(this.fa, a.fa) && J(this.C, a.C) && J(this.D, a.D)
    };

    function Ie(a, b)
    {
        if (a.type !== Fe || b.type !== Ce) return !1;
        if (1 === b.fc.count)
        {
            var c = b.fc.ea(0);
            if (1 === c.wb.count && J(a.ha, c.ha) && J(a.fa, c.fa) && (c = c.wb.ea(0), c.type === Je && J(a.C, c.C) && J(a.D, c.D))) return !0
        }
        return !1
    }
    var Ne;
    Be.stringify = Ne = function (a)
    {
        return a.toString()
    };
    Be.prototype.gc = function (a)
    {
        a.Je === Be ? this.type = a : w.Mj(this, a)
    };
    Be.prototype.toString = function (a)
    {
        void 0 === a && (a = -1);
        switch (this.type)
        {
            case Fe:
                return 0 > a ? "M" + this.ha.toString() + " " + this.fa.toString() + "L" + this.C.toString() + " " + this.D.toString() : "M" + this.ha.toFixed(a) + " " + this.fa.toFixed(a) + "L" + this.C.toFixed(a) + " " + this.D.toFixed(a);
            case Ge:
                var b = new B(this.ha, this.fa, 0, 0);
                b.HG(this.C, this.D, 0, 0);
                return 0 > a ? "M" + b.x.toString() + " " + b.y.toString() + "H" + b.right.toString() + "V" + b.bottom.toString() + "H" + b.left.toString() + "z" : "M" + b.x.toFixed(a) + " " + b.y.toFixed(a) + "H" + b.right.toFixed(a) +
                    "V" + b.bottom.toFixed(a) + "H" + b.left.toFixed(a) + "z";
            case He:
                b = new B(this.ha, this.fa, 0, 0);
                b.HG(this.C, this.D, 0, 0);
                if (0 > a)
                {
                    var c = b.left.toString() + " " + (b.y + b.height / 2).toString(),
                        d = b.right.toString() + " " + (b.y + b.height / 2).toString();
                    return "M" + c + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + d + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + c
                }
                c = b.left.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
                d = b.right.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
                return "M" + c + "A" + (b.width /
                    2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + d + "A" + (b.width / 2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + c;
            case Ce:
                for (var b = "", c = this.fc.n, d = c.length, e = 0; e < d; e++)
                {
                    var f = c[e];
                    0 < e && (b += " x ");
                    f.tu && (b += "F ");
                    b += f.toString(a)
                }
                return b;
            default:
                return this.type.toString()
        }
    };
    Be.fillPath = function (a)
    {
        "string" !== typeof a && w.Fd(a, "string", Be, "fillPath:str");
        a = a.split(/[Xx]/);
        for (var b = a.length, c = "", d = 0; d < b; d++) var e = a[d],
            c = null !== e.match(/[Ff]/) ? 0 === d ? c + e : c + ("X" + (" " === e[0] ? "" : " ") + e) : c + ((0 === d ? "" : "X ") + "F" + (" " === e[0] ? "" : " ") + e);
        return c
    };
    var Oe;
    Be.parse = Oe = function (a, b)
    {
        function c()
        {
            return t >= L - 1 ? !0 : null !== l[t + 1].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)
        }

        function d()
        {
            t++;
            return l[t]
        }

        function e()
        {
            var a = new y(parseFloat(d()), parseFloat(d()));
            x === x.toLowerCase() && (a.x = A.x + a.x, a.y = A.y + a.y);
            return a
        }

        function f()
        {
            return A = e()
        }

        function h()
        {
            return z = e()
        }

        function k()
        {
            return "c" !== v.toLowerCase() && "s" !== v.toLowerCase() ? A : new y(2 * A.x - z.x, 2 * A.y - z.y)
        }
        void 0 === b && (b = !1);
        "string" !== typeof a && w.Fd(a, "string", Be, "parse:str");
        a = a.replace(/,/gm, " ");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm,
            "$1 $2");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm, "$1 $2");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])([^\s])/gm, "$1 $2");
        a = a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFfXx])/gm, "$1 $2");
        a = a.replace(/([0-9])([+\-])/gm, "$1 $2");
        a = a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm, "$1 $3 $4 ");
        a = a.replace(/[\s\r\t\n]+/gm, " ");
        a = a.replace(/^\s+|\s+$/g, "");
        for (var l = a.split(" "), m = 0; m < l.length; m++)
        {
            var n = l[m];
            if (null !== n.match(/(\.[0-9]*)(\.)/gm))
            {
                for (var p = [], q = "", r = !1, s = 0; s < n.length; s++)
                {
                    var u = n[s];
                    "." !== u || r ? "." === u ? (p.push(q), q = ".") : q += u : (r = !0, q += u)
                }
                p.push(q);
                l.splice(m, 1);
                for (n = 0; n < p.length; n++) l.splice(m + n, 0, p[n]);
                m += p.length - 1
            }
        }
        for (var t = -1, x = "", v = "", n = new y(0, 0), z = new y(0, 0), A = new y(0, 0), L = l.length, p = w.s(), r = q = !1, s = !0, m = null; !(t >= L - 1);)
            if (v = x, x = d(), "" !== x) switch (x.toUpperCase())
            {
                case "X":
                    s = !0;
                    r = q = !1;
                    break;
                case "M":
                    m = f();
                    null === p.Yb || !0 === s ? (M(p, m.x, m.y, q, !1, !r), s = !1) : p.moveTo(m.x, m.y);
                    for (n = A; !c();) m = f(), p.lineTo(m.x, m.y);
                    break;
                case "L":
                    for (; !c();) m =
                        f(), p.lineTo(m.x, m.y);
                    break;
                case "H":
                    for (; !c();) A = m = new y((x === x.toLowerCase() ? A.x : 0) + parseFloat(d()), A.y), p.lineTo(A.x, A.y);
                    break;
                case "V":
                    for (; !c();) A = m = new y(A.x, (x === x.toLowerCase() ? A.y : 0) + parseFloat(d())), p.lineTo(A.x, A.y);
                    break;
                case "C":
                    for (; !c();)
                    {
                        var u = e(),
                            E = h(),
                            m = f();
                        N(p, u.x, u.y, E.x, E.y, m.x, m.y)
                    }
                    break;
                case "S":
                    for (; !c();) u = k(), E = h(), m = f(), N(p, u.x, u.y, E.x, E.y, m.x, m.y);
                    break;
                case "Q":
                    for (; !c();) E = h(), m = f(), Pe(p, E.x, E.y, m.x, m.y);
                    break;
                case "T":
                    for (; !c();) z = E = k(), m = f(), Pe(p, E.x, E.y, m.x, m.y);
                    break;
                case "B":
                    for (; !c();)
                    {
                        var m = parseFloat(d()),
                            u = parseFloat(d()),
                            E = parseFloat(d()),
                            P = parseFloat(d()),
                            $ = parseFloat(d()),
                            S = $,
                            ba = !1;
                        c() || (S = parseFloat(d()), c() || (ba = 0 !== parseFloat(d())));
                        x === x.toLowerCase() && (E += A.x, P += A.y);
                        p.arcTo(m, u, E, P, $, S, ba)
                    }
                    break;
                case "A":
                    for (; !c();) u = Math.abs(parseFloat(d())), E = Math.abs(parseFloat(d())), P = parseFloat(d()), $ = !!parseFloat(d()), S = !!parseFloat(d()), m = f(), Qe(p, u, E, P, $, S, m.x, m.y);
                    break;
                case "Z":
                    m = p.o.fc.n[p.o.fc.length - 1];
                    O(p);
                    A = n;
                    break;
                case "F":
                    u = "";
                    for (m = 1; l[t +
                    m];)
                        if (null !== l[t + m].match(/[Uu]/)) m++;
                        else if (null === l[t + m].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)) m++;
                        else
                        {
                            u = l[t + m];
                            break
                        }
                    u.match(/[Mm]/) ? q = !0 : Re(p);
                    break;
                case "U":
                    u = "";
                    for (m = 1; l[t + m];)
                        if (null !== l[t + m].match(/[Ff]/)) m++;
                        else if (null === l[t + m].match(/[UuBbMmZzLlHhVvCcSsQqTtAaFfXx]/)) m++;
                        else
                        {
                            u = l[t + m];
                            break
                        }
                    u.match(/[Mm]/) ? r = !0 : p.eb(!1)
            }
        n = p.o;
        w.q(p);
        if (b)
            for (p = n.fc.i; p.next();) m = p.value, m.tu = !0;
        return n
    };

    function Se(a, b)
    {
        for (var c = a.length, d = w.K(), e = 0; e < c; e++)
        {
            var f = a[e];
            d.x = f[0];
            d.y = f[1];
            b.nb(d);
            f[0] = d.x;
            f[1] = d.y;
            d.x = f[2];
            d.y = f[3];
            b.nb(d);
            f[2] = d.x;
            f[3] = d.y;
            d.x = f[4];
            d.y = f[5];
            b.nb(d);
            f[4] = d.x;
            f[5] = d.y;
            d.x = f[6];
            d.y = f[7];
            b.nb(d);
            f[6] = d.x;
            f[7] = d.y
        }
        w.v(d)
    }
    Be.prototype.WA = function ()
    {
        if (this.hb || this.Mv !== this.fc.F) return !0;
        for (var a = this.fc.n, b = a.length, c = 0; c < b; c++)
            if (a[c].WA()) return !0;
        return !1
    };
    Be.prototype.sh = function ()
    {
        this.hb = !1;
        this.Qq = this.mo = null;
        this.Rq = NaN;
        this.Mv = this.fc.F;
        for (var a = this.fc.n, b = a.length, c = 0; c < b; c++)
        {
            var d = a[c];
            d.hb = !1;
            var e = d.wb;
            d.Kw = e.F;
            for (var d = e.n, e = d.length, f = 0; f < e; f++)
            {
                var h = d[f];
                h.hb = !1;
                h.Kh = null
            }
        }
        a = this.xv;
        a.Qa();
        isNaN(this.Po) || isNaN(this.No) ? a.m(0, 0, 0, 0) : a.m(0, 0, this.Po, this.No);
        Te(this, a, !1);
        ab(a, 0, 0, 0, 0);
        a.freeze()
    };
    Be.prototype.computeBoundsWithoutOrigin = Be.prototype.AH = function ()
    {
        var a = new B;
        Te(this, a, !0);
        return a
    };

    function Te(a, b, c)
    {
        switch (a.type)
        {
            case Fe:
            case Ge:
            case He:
                c ? b.m(a.Cc, a.Mc, 0, 0) : ab(b, a.Cc, a.Mc, 0, 0);
                ab(b, a.zb, a.Jb, 0, 0);
                break;
            case Ce:
                var d = a.fc;
                a = d.n;
                for (var d = d.length, e = 0; e < d; e++)
                {
                    var f = a[e];
                    c && 0 === e ? b.m(f.ha, f.fa, 0, 0) : ab(b, f.ha, f.fa, 0, 0);
                    for (var h = f.wb.n, k = h.length, l = f.ha, m = f.fa, n = 0; n < k; n++)
                    {
                        var p = h[n];
                        switch (p.type)
                        {
                            case Je:
                            case Ue:
                                l = p.C;
                                m = p.D;
                                ab(b, l, m, 0, 0);
                                break;
                            case Ve:
                                Vd(l, m, p.wc, p.Rc, p.Dh, p.Eh, p.C, p.D, .5, b);
                                l = p.C;
                                m = p.D;
                                break;
                            case We:
                                fe(l, m, p.wc, p.Rc, p.C, p.D, .5, b);
                                l = p.C;
                                m = p.D;
                                break;
                            case pf:
                            case qf:
                                var q =
                                        p.type === pf ? rf(p, f) : sf(p, f, l, m),
                                    r = q.length;
                                if (0 === r)
                                {
                                    l = p.la;
                                    m = p.ra;
                                    ab(b, l, m, 0, 0);
                                    break
                                }
                                for (var p = null, s = 0; s < r; s++) p = q[s], Vd(p[0], p[1], p[2], p[3], p[4], p[5], p[6], p[7], .5, b);
                                null !== p && (l = p[6], m = p[7]);
                                break;
                            default:
                                w.k("Unknown Segment type: " + p.type)
                        }
                    }
                }
                break;
            default:
                w.k("Unknown Geometry type: " + a.type)
        }
    }
    Be.prototype.normalize = Be.prototype.normalize = function ()
    {
        this.P && w.ma(this);
        var a = this.AH();
        this.offset(-a.x, -a.y);
        return new y(-a.x, -a.y)
    };
    Be.prototype.offset = Be.prototype.offset = function (a, b)
    {
        this.P && w.ma(this);
        this.transform(1, 0, 0, 1, a, b);
        return this
    };
    Be.prototype.scale = Be.prototype.scale = function (a, b)
    {
        this.P && w.ma(this);
        this.transform(a, 0, 0, b, 0, 0);
        return this
    };
    Be.prototype.rotate = Be.prototype.rotate = function (a, b, c)
    {
        this.P && w.ma(this);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        var d = w.Vg();
        d.reset();
        d.rotate(a, b, c);
        this.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
        w.bf(d);
        return this
    };
    Be.prototype.transform = Be.prototype.transform = function (a, b, c, d, e, f)
    {
        var h = 0,
            k = 0;
        switch (this.type)
        {
            case Fe:
            case Ge:
            case He:
                h = this.Cc;
                k = this.Mc;
                this.Cc = h * a + k * c + e;
                this.Mc = h * b + k * d + f;
                h = this.zb;
                k = this.Jb;
                this.zb = h * a + k * c + e;
                this.Jb = h * b + k * d + f;
                break;
            case Ce:
                for (var l = this.fc.n, m = l.length, n = 0; n < m; n++)
                {
                    var p = l[n],
                        h = p.ha,
                        k = p.fa;
                    p.ha = h * a + k * c + e;
                    p.fa = h * b + k * d + f;
                    for (var p = p.wb.n, q = p.length, r = 0; r < q; r++)
                    {
                        var s = p[r];
                        switch (s.type)
                        {
                            case Je:
                            case Ue:
                                h = s.C;
                                k = s.D;
                                s.C = h * a + k * c + e;
                                s.D = h * b + k * d + f;
                                break;
                            case Ve:
                                h = s.wc;
                                k = s.Rc;
                                s.wc =
                                    h * a + k * c + e;
                                s.Rc = h * b + k * d + f;
                                h = s.Dh;
                                k = s.Eh;
                                s.Dh = h * a + k * c + e;
                                s.Eh = h * b + k * d + f;
                                h = s.C;
                                k = s.D;
                                s.C = h * a + k * c + e;
                                s.D = h * b + k * d + f;
                                break;
                            case We:
                                h = s.wc;
                                k = s.Rc;
                                s.wc = h * a + k * c + e;
                                s.Rc = h * b + k * d + f;
                                h = s.C;
                                k = s.D;
                                s.C = h * a + k * c + e;
                                s.D = h * b + k * d + f;
                                break;
                            case pf:
                                h = s.la;
                                k = s.ra;
                                s.la = h * a + k * c + e;
                                s.ra = h * b + k * d + f;
                                0 !== b && (h = 180 * Math.atan2(b, a) / Math.PI, 0 > h && (h += 360), s.Ae += h);
                                0 > a && (s.Ae = 180 - s.Ae, s.uf = -s.uf);
                                0 > d && (s.Ae = -s.Ae, s.uf = -s.uf);
                                s.radiusX *= Math.sqrt(a * a + c * c);
                                void 0 !== s.radiusY && (s.radiusY *= Math.sqrt(b * b + d * d));
                                break;
                            case qf:
                                h = s.C;
                                k = s.D;
                                s.C = h *
                                    a + k * c + e;
                                s.D = h * b + k * d + f;
                                0 !== b && (h = 180 * Math.atan2(b, a) / Math.PI, 0 > h && (h += 360), s.Oj += h);
                                0 > a && (s.Oj = 180 - s.Oj, s.em = !s.em);
                                0 > d && (s.Oj = -s.Oj, s.em = !s.em);
                                s.radiusX *= Math.sqrt(a * a + c * c);
                                s.radiusY *= Math.sqrt(b * b + d * d);
                                break;
                            default:
                                w.k("Unknown Segment type: " + s.type)
                        }
                    }
                }
        }
        this.hb = !0;
        return this
    };
    Be.prototype.Ia = function (a, b, c, d)
    {
        var e = a.x,
            f = a.y,
            h = this.cb.x - 20;
        a = a.y;
        for (var k = 0, l = 0, m = 0, n = 0, p = 0, q = 0, r = this.fc.n, s = r.length, u = 0; u < s; u++)
        {
            var t = r[u];
            if (t.tu)
            {
                if (c && t.Ia(e, f, b)) return !0;
                for (var x = t.wb, l = t.ha, m = t.fa, v = l, z = m, A = x.n, L = 0; L <= x.length; L++)
                {
                    var E, P;
                    L !== x.length ? (E = A[L], P = E.type, p = E.C, q = E.D) : (P = Je, p = v, q = z);
                    switch (P)
                    {
                        case Ue:
                            n = tf(e, f, h, a, l, m, v, z);
                            if (isNaN(n)) return !0;
                            k += n;
                            v = p;
                            z = q;
                            break;
                        case Je:
                            n = tf(e, f, h, a, l, m, p, q);
                            if (isNaN(n)) return !0;
                            k += n;
                            break;
                        case Ve:
                            n = ie(l, m, E.wc, E.Rc, E.Dh, E.Eh, p, q, h,
                                a, e, f, .5);
                            k += n;
                            break;
                        case We:
                            n = ie(l, m, (l + 2 * E.wc) / 3, (m + 2 * E.Rc) / 3, (2 * E.wc + p) / 3, (2 * E.Rc + q) / 3, p, q, h, a, e, f, .5);
                            k += n;
                            break;
                        case pf:
                        case qf:
                            P = E.type === pf ? rf(E, t) : sf(E, t, l, m);
                            var $ = P.length;
                            if (0 === $)
                            {
                                n = tf(e, f, h, a, l, m, E.la, E.ra);
                                if (isNaN(n)) return !0;
                                k += n;
                                break
                            }
                            for (var S = null, ba = 0; ba < $; ba++)
                            {
                                S = P[ba];
                                if (0 === ba)
                                {
                                    n = tf(e, f, h, a, l, m, S[0], S[1]);
                                    if (isNaN(n)) return !0;
                                    k += n
                                }
                                n = ie(S[0], S[1], S[2], S[3], S[4], S[5], S[6], S[7], h, a, e, f, .5);
                                k += n
                            }
                            null !== S && (p = S[6], q = S[7]);
                            break;
                        default:
                            w.k("Unknown Segment type: " + E.type)
                    }
                    l = p;
                    m =
                        q
                }
                if (0 !== k) return !0;
                k = 0
            }
            else if (t.Ia(e, f, d ? b : b + 2)) return !0
        }
        return 0 !== k
    };

    function tf(a, b, c, d, e, f, h, k)
    {
        if (Td(e, f, h, k, .05, a, b)) return NaN;
        var l = (a - c) * (f - k);
        if (0 === l) return 0;
        var m = ((a * d - b * c) * (e - h) - (a - c) * (e * k - f * h)) / l;
        b = (a * d - b * c) * (f - k) / l;
        if (m >= a) return 0;
        if ((e > h ? e - h : h - e) < (f > k ? f - k : k - f))
        {
            if (e = a = 0, f < k ? (a = f, e = k) : (a = k, e = f), b < a || b > e) return 0
        }
        else if (e < h ? (a = e, e = h) : a = h, m < a || m > e) return 0;
        return 0 < l ? 1 : -1
    }

    function uf(a, b, c, d)
    {
        a = a.fc.n;
        for (var e = a.length, f = 0; f < e; f++)
            if (a[f].Ia(b, c, d)) return !0;
        return !1
    }
    Be.prototype.getPointAlongPath = Be.prototype.fI = function (a, b)
    {
        0 > a ? a = 0 : 1 < a && (a = 1);
        void 0 === b && (b = new y);
        if (this.type === Fe) return b.m(this.ha + a * (this.C - this.ha), this.fa + a * (this.D - this.fa)), b;
        for (var c = this.Fx, d = this.cu, e = c.length, f = this.du * a, h = 0, k = 0; k < e; k++)
            for (var l = d[k], m = l.length, n = 0; n < m; n++)
            {
                var p = l[n];
                if (h + p >= f) return d = (f - h) / p, c = c[k], k = c[2 * n], e = c[2 * n + 1], b.m(k + (c[2 * n + 2] - k) * d, e + (c[2 * n + 3] - e) * d), b;
                h += p
            }
        b.m(NaN, NaN);
        return b
    };
    Be.prototype.getAngleAlongPath = Be.prototype.hF = function (a)
    {
        0 > a ? a = 0 : 1 < a && (a = 1);
        var b = 0;
        if (this.type === Fe) return b = 180 * Math.atan2(this.D - this.fa, this.C - this.ha) / Math.PI;
        for (var b = this.Fx, c = this.cu, d = b.length, e = this.du * a, f = 0, h = 0; h < d; h++)
        {
            var k = c[h],
                l = k.length;
            for (a = 0; a < l; a++)
            {
                var m = k[a];
                if (f + m >= e) return b = b[h], b = 180 * Math.atan2(b[2 * a + 3] - b[2 * a + 1], b[2 * a + 2] - b[2 * a]) / Math.PI;
                f += m
            }
        }
        return NaN
    };
    Be.prototype.getFractionForPoint = Be.prototype.bI = function (a)
    {
        if (this.type === Fe)
        {
            var b = this.ha,
                c = this.fa,
                d = this.C,
                e = this.D;
            if (b !== d || c !== e)
            {
                var f = a.x;
                a = a.y;
                var h = 0,
                    k = 0;
                return b === d ? (c < e ? (h = c, k = e) : (h = e, k = c), a <= h ? h === c ? 0 : 1 : a >= k ? k === c ? 0 : 1 : Math.abs(a - c) / (k - h)) : c === e ? (b < d ? (h = b, k = d) : (h = d, k = b), f <= h ? h === b ? 0 : 1 : f >= k ? k === b ? 0 : 1 : Math.abs(f - b) / (k - h)) : ((f - b) * (f - b) + (a - c) * (a - c)) / ((d - b) * (d - b) + (e - c) * (e - c))
            }
        }
        else if (this.type === Ge)
        {
            if (b = this.ha, c = this.fa, d = this.C, e = this.D, b !== d || c !== e)
            {
                var h = d - b,
                    k = e - c,
                    l = 2 * h + 2 * k,
                    f = a.x;
                a = a.y;
                f = Math.min(Math.max(f, b), d);
                a = Math.min(Math.max(a, c), e);
                var b = Math.abs(f - b),
                    d = Math.abs(f - d),
                    c = Math.abs(a - c),
                    e = Math.abs(a - e),
                    m = Math.min(b, d, c, e);
                if (m === c) return f / l;
                if (m === d) return (h + a) / l;
                if (m === e) return (2 * h + k - f) / l;
                if (m === b) return (2 * h + 2 * k - a) / l
            }
        }
        else
        {
            for (var e = this.Fx, h = this.cu, k = this.du, l = w.K(), c = Infinity, b = d = 0, f = e.length, n = m = 0, p = 0; p < f; p++)
                for (var q = e[p], r = h[p], s = q.length, u = 0; u < s; u += 2)
                {
                    var t = q[u],
                        x = q[u + 1];
                    if (0 !== u)
                    {
                        La(m, n, t, x, a.x, a.y, l);
                        var v = (l.x - a.x) * (l.x - a.x) + (l.y - a.y) * (l.y - a.y);
                        v < c && (c = v,
                            d = b, d += Math.sqrt((l.x - m) * (l.x - m) + (l.y - n) * (l.y - n)));
                        b += r[(u - 2) / 2]
                    }
                    m = t;
                    n = x
                }
            w.v(l);
            a = d / k;
            return 0 > a ? 0 : 1 < a ? 1 : a
        }
        return 0
    };
    w.u(Be,
        {
            Fx: "flattenedSegments"
        }, function ()
        {
            vf(this);
            return this.mo
        });

    function vf(a)
    {
        if (null === a.mo)
        {
            var b = a.mo = [],
                c = a.Qq = [],
                d = [],
                e = [];
            if (a.type === Fe) d.push(a.ha), d.push(a.fa), d.push(a.C), d.push(a.D), b.push(d), e.push(Math.sqrt((a.ha - a.C) * (a.ha - a.C) + (a.fa - a.D) * (a.fa - a.D))), c.push(e);
            else if (a.type === Ge) d.push(a.ha), d.push(a.fa), d.push(a.C), d.push(a.fa), d.push(a.C), d.push(a.D), d.push(a.ha), d.push(a.D), d.push(a.ha), d.push(a.fa), b.push(d), e.push(Math.abs(a.ha - a.C)), e.push(Math.abs(a.fa - a.D)), e.push(Math.abs(a.ha - a.C)), e.push(Math.abs(a.fa - a.D)), c.push(e);
            else if (a.type ===
                He)
            {
                var f = new De;
                f.ha = a.C;
                f.fa = (a.fa + a.D) / 2;
                var h = new wf(pf);
                h.Ae = 0;
                h.uf = 360;
                h.la = (a.ha + a.C) / 2;
                h.ra = (a.fa + a.D) / 2;
                h.radiusX = Math.abs(a.ha - a.C) / 2;
                h.radiusY = Math.abs(a.fa - a.D) / 2;
                f.add(h);
                a = rf(h, f);
                e = a.length;
                if (0 === e) d.push(h.la), d.push(h.ra);
                else
                    for (var h = f.ha, f = f.fa, k = 0; k < e; k++)
                    {
                        var l = a[k];
                        Wd(h, f, l[2], l[3], l[4], l[5], l[6], l[7], .5, d);
                        h = l[6];
                        f = l[7]
                    }
                b.push(d);
                c.push(xf(d))
            }
            else
                for (var m = a.fc.i; m.next();)
                {
                    var n = m.value,
                        d = [];
                    d.push(n.ha);
                    d.push(n.fa);
                    for (var h = n.ha, f = n.fa, p = h, q = f, r = n.wb.n, s = r.length, u =
                        0; u < s; u++)
                    {
                        var t = r[u];
                        switch (t.na)
                        {
                            case Ue:
                                4 <= d.length && (b.push(d), c.push(xf(d)));
                                d = [];
                                d.push(t.C);
                                d.push(t.D);
                                h = t.C;
                                f = t.D;
                                p = h;
                                q = f;
                                break;
                            case Je:
                                d.push(t.C);
                                d.push(t.D);
                                h = t.C;
                                f = t.D;
                                break;
                            case Ve:
                                Wd(h, f, t.Kd, t.Xe, t.mh, t.Cg, t.zb, t.Jb, .5, d);
                                h = t.C;
                                f = t.D;
                                break;
                            case We:
                                ge(h, f, t.Kd, t.Xe, t.zb, t.Jb, .5, d);
                                h = t.C;
                                f = t.D;
                                break;
                            case pf:
                                a = rf(t, n);
                                e = a.length;
                                if (0 === e)
                                {
                                    d.push(t.la);
                                    d.push(t.ra);
                                    h = t.la;
                                    f = t.ra;
                                    break
                                }
                                for (k = 0; k < e; k++) l = a[k], Wd(h, f, l[2], l[3], l[4], l[5], l[6], l[7], .5, d), h = l[6], f = l[7];
                                break;
                            case qf:
                                a = sf(t,
                                    n, h, f);
                                e = a.length;
                                if (0 === e)
                                {
                                    d.push(t.la);
                                    d.push(t.ra);
                                    h = t.la;
                                    f = t.ra;
                                    break
                                }
                                for (k = 0; k < e; k++) l = a[k], Wd(h, f, l[2], l[3], l[4], l[5], l[6], l[7], .5, d), h = l[6], f = l[7];
                                break;
                            default:
                                w.k("Segment not of valid type: " + t.na)
                        }
                        t.Sh && (d.push(p), d.push(q))
                    }
                    4 <= d.length && (b.push(d), c.push(xf(d)))
                }
        }
    }
    w.u(Be,
        {
            cu: "flattenedLengths"
        }, function ()
        {
            vf(this);
            return this.Qq
        });
    w.u(Be,
        {
            du: "flattenedTotalLength"
        }, function ()
        {
            var a = this.Rq;
            if (isNaN(a))
            {
                if (this.type === Fe) var a = Math.abs(this.C - this.ha),
                    b = Math.abs(this.D - this.fa),
                    a = Math.sqrt(a * a + b * b);
                else if (this.type === Ge) a = Math.abs(this.C - this.ha), b = Math.abs(this.D - this.fa), a = 2 * a + 2 * b;
                else
                    for (var b = this.cu, c = b.length, d = a = 0; d < c; d++)
                        for (var e = b[d], f = e.length, h = 0; h < f; h++) a += e[h];
                this.Rq = a
            }
            return a
        });

    function xf(a)
    {
        for (var b = [], c = 0, d = 0, e = a.length, f = 0; f < e; f += 2)
        {
            var h = a[f],
                k = a[f + 1];
            0 !== f && (c = Math.sqrt(Sa(c, d, h, k)), b.push(c));
            c = h;
            d = k
        }
        return b
    }
    w.defineProperty(Be,
        {
            type: "type"
        }, function ()
        {
            return this.na
        }, function (a)
        {
            this.na !== a && (this.P && w.ma(this, a), this.na = a, this.hb = !0)
        });
    w.defineProperty(Be,
        {
            ha: "startX"
        }, function ()
        {
            return this.Cc
        }, function (a)
        {
            this.Cc !== a && (this.P && w.ma(this, a), this.Cc = a, this.hb = !0)
        });
    w.defineProperty(Be,
        {
            fa: "startY"
        }, function ()
        {
            return this.Mc
        }, function (a)
        {
            this.Mc !== a && (this.P && w.ma(this, a), this.Mc = a, this.hb = !0)
        });
    w.defineProperty(Be,
        {
            C: "endX"
        }, function ()
        {
            return this.zb
        }, function (a)
        {
            this.zb !== a && (this.P && w.ma(this, a), this.zb = a, this.hb = !0)
        });
    w.defineProperty(Be,
        {
            D: "endY"
        }, function ()
        {
            return this.Jb
        }, function (a)
        {
            this.Jb !== a && (this.P && w.ma(this, a), this.Jb = a, this.hb = !0)
        });
    w.defineProperty(Be,
        {
            fc: "figures"
        }, function ()
        {
            return this.Wj
        }, function (a)
        {
            this.Wj !== a && (this.P && w.ma(this, a), this.Wj = a, this.hb = !0)
        });
    Be.prototype.add = Be.prototype.add = function (a)
    {
        this.Wj.add(a);
        return this
    };
    Be.prototype.setSpots = function (a, b, c, d, e, f, h, k)
    {
        this.P && w.ma(this);
        this.hi = (new K(a, b, e, f)).freeze();
        this.ii = (new K(c, d, h, k)).freeze();
        return this
    };
    w.defineProperty(Be,
        {
            A: "spot1"
        }, function ()
        {
            return this.hi
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.hi = a.S()
        });
    w.defineProperty(Be,
        {
            B: "spot2"
        }, function ()
        {
            return this.ii
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.ii = a.S()
        });
    w.defineProperty(Be,
        {
            $d: "defaultStretch"
        }, function ()
        {
            return this.Ki
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Ki = a
        });
    w.u(Be,
        {
            cb: "bounds"
        }, function ()
        {
            this.WA() && this.sh();
            return this.xv
        });

    function De(a, b, c, d)
    {
        w.nc(this);
        this.P = !1;
        void 0 === c && (c = !0);
        this.Im = c;
        void 0 === d && (d = !0);
        this.Qo = d;
        this.Cc = void 0 !== a ? a : 0;
        this.Mc = void 0 !== b ? b : 0;
        this.lp = new H(wf);
        this.Kw = this.lp.F;
        this.hb = !0
    }
    w.ga("PathFigure", De);
    w.ni(De);
    De.prototype.copy = function ()
    {
        var a = new De;
        a.Im = this.Im;
        a.Qo = this.Qo;
        a.Cc = this.Cc;
        a.Mc = this.Mc;
        for (var b = this.lp.n, c = b.length, d = a.lp, e = 0; e < c; e++)
        {
            var f = b[e].copy();
            d.add(f)
        }
        a.Kw = this.Kw;
        a.hb = this.hb;
        return a
    };
    De.prototype.equalsApprox = De.prototype.Oc = function (a)
    {
        if (!(a instanceof De && J(this.ha, a.ha) && J(this.fa, a.fa))) return !1;
        var b = this.wb.n;
        a = a.wb.n;
        var c = b.length;
        if (c !== a.length) return !1;
        for (var d = 0; d < c; d++)
            if (!b[d].Oc(a[d])) return !1;
        return !0
    };
    De.prototype.toString = function (a)
    {
        void 0 === a && (a = -1);
        for (var b = 0 > a ? "M" + this.ha.toString() + " " + this.fa.toString() : "M" + this.ha.toFixed(a) + " " + this.fa.toFixed(a), c = this.wb.n, d = c.length, e = 0; e < d; e++) b += " " + c[e].toString(a);
        return b
    };
    De.prototype.freeze = function ()
    {
        this.P = !0;
        var a = this.wb;
        a.freeze();
        for (var b = a.n, a = a.length, c = 0; c < a; c++) b[c].freeze();
        return this
    };
    De.prototype.Qa = function ()
    {
        this.P = !1;
        var a = this.wb;
        a.Qa();
        for (var a = a.n, b = a.length, c = 0; c < b; c++) a[c].Qa();
        return this
    };
    De.prototype.WA = function ()
    {
        if (this.hb) return !0;
        var a = this.wb;
        if (this.Kw !== a.F) return !0;
        for (var a = a.n, b = a.length, c = 0; c < b; c++)
            if (a[c].hb) return !0;
        return !1
    };
    w.defineProperty(De,
        {
            tu: "isFilled"
        }, function ()
        {
            return this.Im
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Im = a
        });
    w.defineProperty(De,
        {
            hm: "isShadowed"
        }, function ()
        {
            return this.Qo
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Qo = a
        });
    w.defineProperty(De,
        {
            ha: "startX"
        }, function ()
        {
            return this.Cc
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Cc = a;
            this.hb = !0
        });
    w.defineProperty(De,
        {
            fa: "startY"
        }, function ()
        {
            return this.Mc
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Mc = a;
            this.hb = !0
        });
    w.defineProperty(De,
        {
            wb: "segments"
        }, function ()
        {
            return this.lp
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.lp = a;
            this.hb = !0
        });
    De.prototype.add = De.prototype.add = function (a)
    {
        this.lp.add(a);
        return this
    };
    De.prototype.Ia = function (a, b, c)
    {
        for (var d = this.ha, e = this.fa, f = d, h = e, k = this.wb.n, l = k.length, m = 0; m < l; m++)
        {
            var n = k[m];
            switch (n.type)
            {
                case Ue:
                    f = n.C;
                    h = n.D;
                    d = n.C;
                    e = n.D;
                    break;
                case Je:
                    if (Td(d, e, n.C, n.D, c, a, b)) return !0;
                    d = n.C;
                    e = n.D;
                    break;
                case Ve:
                    if (Ud(d, e, n.wc, n.Rc, n.Dh, n.Eh, n.C, n.D, .5, a, b, c)) return !0;
                    d = n.C;
                    e = n.D;
                    break;
                case We:
                    if (ee(d, e, n.wc, n.Rc, n.C, n.D, .5, a, b, c)) return !0;
                    d = n.C;
                    e = n.D;
                    break;
                case pf:
                case qf:
                    var p = n.type === pf ? rf(n, this) : sf(n, this, d, e),
                        q = p.length;
                    if (0 === q)
                    {
                        if (Td(d, e, n.la, n.ra, c, a, b)) return !0;
                        d = n.la;
                        e = n.ra;
                        break
                    }
                    for (var r = null, s = 0; s < q; s++)
                        if (r = p[s], 0 === s && Td(d, e, r[0], r[1], c, a, b) || Ud(r[0], r[1], r[2], r[3], r[4], r[5], r[6], r[7], .5, a, b, c)) return !0;
                    null !== r && (d = r[6], e = r[7]);
                    break;
                default:
                    w.k("Unknown Segment type: " + n.type)
            }
            if (n.Jx && (d !== f || e !== h) && Td(d, e, f, h, c, a, b)) return !0
        }
        return !1
    };

    function wf(a, b, c, d, e, f, h, k)
    {
        w.nc(this);
        this.P = !1;
        void 0 === a && (a = Je);
        this.na = a;
        this.zb = void 0 !== b ? b : 0;
        this.Jb = void 0 !== c ? c : 0;
        void 0 === d && (d = 0);
        void 0 === e && (e = 0);
        void 0 === f && (f = 0);
        void 0 === h && (h = 0);
        a === qf ? (a = f % 360, 0 > a && (a += 360), this.Kd = a, this.Xe = 0, this.mh = Math.max(d, 0), this.Cg = Math.max(e, 0), this.Uo = "boolean" === typeof h ? !!h : !1, this.qo = !!k) : (this.Kd = d, this.Xe = e, a === pf && (f = Math.max(f, 0)), this.mh = f, "number" === typeof h ? (a === pf && (h = Math.max(h, 0)), this.Cg = h) : this.Cg = 0, this.qo = this.Uo = !1);
        this.Sh = !1;
        this.hb = !0;
        this.Kh = null
    }
    w.ga("PathSegment", wf);
    w.ni(wf);
    wf.prototype.copy = function ()
    {
        var a = new wf;
        a.na = this.na;
        a.zb = this.zb;
        a.Jb = this.Jb;
        a.Kd = this.Kd;
        a.Xe = this.Xe;
        a.mh = this.mh;
        a.Cg = this.Cg;
        a.Uo = this.Uo;
        a.qo = this.qo;
        a.Sh = this.Sh;
        a.hb = this.hb;
        return a
    };
    wf.prototype.equalsApprox = wf.prototype.Oc = function (a)
    {
        if (!(a instanceof wf) || this.type !== a.type || this.Jx !== a.Jx) return !1;
        switch (this.type)
        {
            case Ue:
            case Je:
                return J(this.C, a.C) && J(this.D, a.D);
            case Ve:
                return J(this.C, a.C) && J(this.D, a.D) && J(this.wc, a.wc) && J(this.Rc, a.Rc) && J(this.Dh, a.Dh) && J(this.Eh, a.Eh);
            case We:
                return J(this.C, a.C) && J(this.D, a.D) && J(this.wc, a.wc) && J(this.Rc, a.Rc);
            case pf:
                return J(this.Ae, a.Ae) && J(this.uf, a.uf) && J(this.la, a.la) && J(this.ra, a.ra) && J(this.radiusX, a.radiusX) && J(this.radiusY,
                    a.radiusY);
            case qf:
                return this.em === a.em && this.Lx === a.Lx && J(this.Oj, a.Oj) && J(this.C, a.C) && J(this.D, a.D) && J(this.radiusX, a.radiusX) && J(this.radiusY, a.radiusY);
            default:
                return !1
        }
    };
    wf.prototype.gc = function (a)
    {
        a.Je === wf ? this.type = a : w.Mj(this, a)
    };
    wf.prototype.toString = function (a)
    {
        void 0 === a && (a = -1);
        var b = "";
        switch (this.type)
        {
            case Ue:
                b = 0 > a ? "M" + this.C.toString() + " " + this.D.toString() : "M" + this.C.toFixed(a) + " " + this.D.toFixed(a);
                break;
            case Je:
                b = 0 > a ? "L" + this.C.toString() + " " + this.D.toString() : "L" + this.C.toFixed(a) + " " + this.D.toFixed(a);
                break;
            case Ve:
                b = 0 > a ? "C" + this.wc.toString() + " " + this.Rc.toString() + " " + this.Dh.toString() + " " + this.Eh.toString() + " " + this.C.toString() + " " + this.D.toString() : "C" + this.wc.toFixed(a) + " " + this.Rc.toFixed(a) + " " + this.Dh.toFixed(a) +
                    " " + this.Eh.toFixed(a) + " " + this.C.toFixed(a) + " " + this.D.toFixed(a);
                break;
            case We:
                b = 0 > a ? "Q" + this.wc.toString() + " " + this.Rc.toString() + " " + this.C.toString() + " " + this.D.toString() : "Q" + this.wc.toFixed(a) + " " + this.Rc.toFixed(a) + " " + this.C.toFixed(a) + " " + this.D.toFixed(a);
                break;
            case pf:
                b = 0 > a ? "B" + this.Ae.toString() + " " + this.uf.toString() + " " + this.la.toString() + " " + this.ra.toString() + " " + this.radiusX : "B" + this.Ae.toFixed(a) + " " + this.uf.toFixed(a) + " " + this.la.toFixed(a) + " " + this.ra.toFixed(a) + " " + this.radiusX;
                break;
            case qf:
                b = 0 > a ? "A" + this.radiusX.toString() + " " + this.radiusY.toString() + " " + this.Oj.toString() + " " + (this.Lx ? 1 : 0) + " " + (this.em ? 1 : 0) + " " + this.C.toString() + " " + this.D.toString() : "A" + this.radiusX.toFixed(a) + " " + this.radiusY.toFixed(a) + " " + this.Oj.toFixed(a) + " " + (this.Lx ? 1 : 0) + " " + (this.em ? 1 : 0) + " " + this.C.toFixed(a) + " " + this.D.toFixed(a);
                break;
            default:
                b = this.type.toString()
        }
        return b + (this.Sh ? "z" : "")
    };
    var Ue;
    wf.Move = Ue = w.p(wf, "Move", 0);
    var Je;
    wf.Line = Je = w.p(wf, "Line", 1);
    var Ve;
    wf.Bezier = Ve = w.p(wf, "Bezier", 2);
    var We;
    wf.QuadraticBezier = We = w.p(wf, "QuadraticBezier", 3);
    var pf;
    wf.Arc = pf = w.p(wf, "Arc", 4);
    var qf;
    wf.SvgArc = qf = w.p(wf, "SvgArc", 4);
    wf.prototype.freeze = function ()
    {
        this.P = !0;
        return this
    };
    wf.prototype.Qa = function ()
    {
        this.P = !1;
        return this
    };
    wf.prototype.close = wf.prototype.close = function ()
    {
        this.Sh = !0;
        return this
    };

    function rf(a, b)
    {
        if (null !== a.Kh && !1 === b.hb) return a.Kh;
        var c = a.radiusX,
            d = a.radiusY;
        void 0 === d && (d = c);
        if (0 === c || 0 === d) return a.Kh = [], a.Kh;
        var e = a.Kd,
            f = a.Xe,
            h = ye(c < d ? c : d, a.Ae, a.Ae + a.uf, !1);
        if (c !== d)
        {
            var k = w.Vg();
            k.reset();
            c < d ? k.scale(1, d / c) : k.scale(c / d, 1);
            Se(h, k);
            w.bf(k)
        }
        c = h.length;
        for (d = 0; d < c; d++) k = h[d], k[0] += e, k[1] += f, k[2] += e, k[3] += f, k[4] += e, k[5] += f, k[6] += e, k[7] += f;
        a.Kh = h;
        return a.Kh
    }

    function sf(a, b, c, d)
    {
        function e(a, b, c, d)
        {
            return (a * d < b * c ? -1 : 1) * Math.acos((a * c + b * d) / (Math.sqrt(a * a + b * b) * Math.sqrt(c * c + d * d)))
        }
        if (null !== a.Kh && !1 === b.hb) return a.Kh;
        b = a.mh;
        var f = a.Cg;
        0 === b && (b = 1E-4);
        0 === f && (f = 1E-4);
        var h = Math.PI / 180 * a.Kd,
            k = a.Uo,
            l = a.qo,
            m = a.zb,
            n = a.Jb,
            p = Math.cos(h),
            q = Math.sin(h),
            r = p * (c - m) / 2 + q * (d - n) / 2,
            h = -q * (c - m) / 2 + p * (d - n) / 2,
            s = r * r / (b * b) + h * h / (f * f);
        1 < s && (b *= Math.sqrt(s), f *= Math.sqrt(s));
        s = (k === l ? -1 : 1) * Math.sqrt((b * b * f * f - b * b * h * h - f * f * r * r) / (b * b * h * h + f * f * r * r));
        isNaN(s) && (s = 0);
        k = s * b * h / f;
        s = s * -f * r /
            b;
        isNaN(k) && (k = 0);
        isNaN(s) && (s = 0);
        c = (c + m) / 2 + p * k - q * s;
        d = (d + n) / 2 + q * k + p * s;
        n = e(1, 0, (r - k) / b, (h - s) / f);
        p = (r - k) / b;
        m = (h - s) / f;
        r = (-r - k) / b;
        k = (-h - s) / f;
        h = e(p, m, r, k);
        r = (p * r + m * k) / (Math.sqrt(p * p + m * m) * Math.sqrt(r * r + k * k)); - 1 >= r ? h = Math.PI : 1 <= r && (h = 0);
        !l && 0 < h && (h -= 2 * Math.PI);
        l && 0 > h && (h += 2 * Math.PI);
        l = b > f ? 1 : b / f;
        r = b > f ? f / b : 1;
        b = ye(b > f ? b : f, n, n + h, !0);
        f = w.Vg();
        f.reset();
        f.translate(c, d);
        f.rotate(a.Kd, 0, 0);
        f.scale(l, r);
        Se(b, f);
        w.bf(f);
        a.Kh = b;
        return a.Kh
    }
    w.defineProperty(wf,
        {
            Jx: "isClosed"
        }, function ()
        {
            return this.Sh
        }, function (a)
        {
            this.Sh !== a && (this.Sh = a, this.hb = !0)
        });
    w.defineProperty(wf,
        {
            type: "type"
        }, function ()
        {
            return this.na
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.na = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            C: "endX"
        }, function ()
        {
            return this.zb
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.zb = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            D: "endY"
        }, function ()
        {
            return this.Jb
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Jb = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            wc: "point1X"
        }, function ()
        {
            return this.Kd
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Kd = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            Rc: "point1Y"
        }, function ()
        {
            return this.Xe
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Xe = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            Dh: "point2X"
        }, function ()
        {
            return this.mh
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.mh = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            Eh: "point2Y"
        }, function ()
        {
            return this.Cg
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Cg = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            la: "centerX"
        }, function ()
        {
            return this.Kd
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Kd = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            ra: "centerY"
        }, function ()
        {
            return this.Xe
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Xe = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            radiusX: "radiusX"
        }, function ()
        {
            return this.mh
        }, function (a)
        {
            0 > a && w.Fa(a, ">= zero", wf, "radiusX");
            this.P && w.ma(this, a);
            this.mh = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            radiusY: "radiusY"
        }, function ()
        {
            return this.Cg
        }, function (a)
        {
            0 > a && w.Fa(a, ">= zero", wf, "radiusY");
            this.P && w.ma(this, a);
            this.Cg = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            Ae: "startAngle"
        }, function ()
        {
            return this.zb
        }, function (a)
        {
            this.zb !== a && (this.P && w.ma(this, a), a %= 360, 0 > a && (a += 360), this.zb = a, this.hb = !0)
        });
    w.defineProperty(wf,
        {
            uf: "sweepAngle"
        }, function ()
        {
            return this.Jb
        }, function (a)
        {
            this.P && w.ma(this, a);
            360 < a && (a = 360); - 360 > a && (a = -360);
            this.Jb = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            em: "isClockwiseArc"
        }, function ()
        {
            return this.qo
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.qo = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            Lx: "isLargeArc"
        }, function ()
        {
            return this.Uo
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Uo = a;
            this.hb = !0
        });
    w.defineProperty(wf,
        {
            Oj: "xAxisRotation"
        }, function ()
        {
            return this.Kd
        }, function (a)
        {
            a %= 360;
            0 > a && (a += 360);
            this.P && w.ma(this, a);
            this.Kd = a;
            this.hb = !0
        });

    function yf()
    {
        this.aa = null;
        this.dA = (new y(0, 0)).freeze();
        this.iz = (new y(0, 0)).freeze();
        this.uv = this.qw = 0;
        this.vv = 1;
        this.ew = "";
        this.Uw = this.Iv = !1;
        this.Gv = this.wv = 0;
        this.Rj = this.Rv = this.aw = !1;
        this.Er = null;
        this.Sw = 0;
        this.Fg = this.Rw = null
    }
    w.ga("InputEvent", yf);
    yf.prototype.copy = function ()
    {
        var a = new yf;
        a.aa = this.aa;
        a.dA.assign(this.Ce);
        a.iz.assign(this.da);
        a.qw = this.qw;
        a.uv = this.uv;
        a.vv = this.vv;
        a.ew = this.ew;
        a.Iv = this.Iv;
        a.Uw = this.Uw;
        a.wv = this.wv;
        a.Gv = this.Gv;
        a.aw = this.aw;
        a.Rv = this.Rv;
        a.Rj = this.Rj;
        a.Er = this.Er;
        a.Sw = this.Sw;
        a.Rw = this.Rw;
        a.Fg = this.Fg;
        return a
    };
    yf.prototype.toString = function ()
    {
        var a = "^";
        0 !== this.md && (a += "M:" + this.md);
        0 !== this.button && (a += "B:" + this.button);
        "" !== this.key && (a += "K:" + this.key);
        0 !== this.te && (a += "C:" + this.te);
        0 !== this.oi && (a += "D:" + this.oi);
        this.tc && (a += "h");
        this.bubbles && (a += "b");
        null !== this.da && (a += "@" + this.da.toString());
        return a
    };
    w.defineProperty(yf,
        {
            g: "diagram"
        }, function ()
        {
            return this.aa
        }, function (a)
        {
            this.aa = a
        });
    w.defineProperty(yf,
        {
            Ce: "viewPoint"
        }, function ()
        {
            return this.dA
        }, function (a)
        {
            w.G(a, y, yf, "viewPoint");
            this.dA.assign(a)
        });
    w.defineProperty(yf,
        {
            da: "documentPoint"
        }, function ()
        {
            return this.iz
        }, function (a)
        {
            w.G(a, y, yf, "documentPoint");
            this.iz.assign(a)
        });
    yf.prototype.getMultiTouchViewPoint = yf.prototype.Gx = function (a, b)
    {
        var c = this.g;
        if (null === c) return b;
        zf(c, this.event, a, b);
        return b
    };
    yf.prototype.getMultiTouchDocumentPoint = function (a, b)
    {
        var c = this.g;
        if (null === c) return b;
        zf(c, this.event, a, b);
        b.assign(c.RB(b));
        return b
    };
    w.defineProperty(yf,
        {
            md: "modifiers"
        }, function ()
        {
            return this.qw
        }, function (a)
        {
            this.qw = a
        });
    w.defineProperty(yf,
        {
            button: "button"
        }, function ()
        {
            return this.uv
        }, function (a)
        {
            this.uv = a;
            if (null === this.event) switch (a)
            {
                case 0:
                    this.buttons = 1;
                    break;
                case 1:
                    this.buttons = 4;
                    break;
                case 2:
                    this.buttons = 2
            }
        });
    w.defineProperty(yf,
        {
            buttons: "buttons"
        }, function ()
        {
            return this.vv
        }, function (a)
        {
            this.vv = a
        });
    w.defineProperty(yf,
        {
            key: "key"
        }, function ()
        {
            return this.ew
        }, function (a)
        {
            this.ew = a
        });
    w.defineProperty(yf,
        {
            Hk: "down"
        }, function ()
        {
            return this.Iv
        }, function (a)
        {
            this.Iv = a
        });
    w.defineProperty(yf,
        {
            up: "up"
        }, function ()
        {
            return this.Uw
        }, function (a)
        {
            this.Uw = a
        });
    w.defineProperty(yf,
        {
            te: "clickCount"
        }, function ()
        {
            return this.wv
        }, function (a)
        {
            this.wv = a
        });
    w.defineProperty(yf,
        {
            oi: "delta"
        }, function ()
        {
            return this.Gv
        }, function (a)
        {
            this.Gv = a
        });
    w.defineProperty(yf,
        {
            wu: "isMultiTouch"
        }, function ()
        {
            return this.aw
        }, function (a)
        {
            this.aw = a
        });
    w.defineProperty(yf,
        {
            tc: "handled"
        }, function ()
        {
            return this.Rv
        }, function (a)
        {
            this.Rv = a
        });
    w.defineProperty(yf,
        {
            bubbles: "bubbles"
        }, function ()
        {
            return this.Rj
        }, function (a)
        {
            this.Rj = a
        });
    w.defineProperty(yf,
        {
            event: "event"
        }, function ()
        {
            return this.Er
        }, function (a)
        {
            this.Er = a
        });
    w.u(yf,
        {
            Bj: "isTouchEvent"
        }, function ()
        {
            var a = window.TouchEvent,
                b = this.event;
            return a && b instanceof a ? !0 : (a = window.PointerEvent) && b instanceof a && ("touch" === b.pointerType || "pen" === b.pointerType)
        });
    w.u(yf,
        {
            yh: "isMac"
        }, function ()
        {
            return w.yh
        });
    w.defineProperty(yf,
        {
            timestamp: "timestamp"
        }, function ()
        {
            return this.Sw
        }, function (a)
        {
            this.Sw = a
        });
    w.defineProperty(yf,
        {
            If: "targetDiagram"
        }, function ()
        {
            return this.Rw
        }, function (a)
        {
            this.Rw = a
        });
    w.defineProperty(yf,
        {
            Be: "targetObject"
        }, function ()
        {
            return this.Fg
        }, function (a)
        {
            this.Fg = a
        });
    w.defineProperty(yf,
        {
            control: "control"
        }, function ()
        {
            return 0 !== (this.md & 1)
        }, function (a)
        {
            this.md = a ? this.md | 1 : this.md & -2
        });
    w.defineProperty(yf,
        {
            shift: "shift"
        }, function ()
        {
            return 0 !== (this.md & 4)
        }, function (a)
        {
            this.md = a ? this.md | 4 : this.md & -5
        });
    w.defineProperty(yf,
        {
            alt: "alt"
        }, function ()
        {
            return 0 !== (this.md & 2)
        }, function (a)
        {
            this.md = a ? this.md | 2 : this.md & -3
        });
    w.defineProperty(yf,
        {
            Fu: "meta"
        }, function ()
        {
            return 0 !== (this.md & 8)
        }, function (a)
        {
            this.md = a ? this.md | 8 : this.md & -9
        });
    w.defineProperty(yf,
        {
            left: "left"
        }, function ()
        {
            var a = this.event;
            return null === a || "mousedown" !== a.type && "mouseup" !== a.type && "pointerdown" !== a.type && "pointerup" !== a.type ? 0 !== (this.buttons & 1) : 0 === this.button
        }, function (a)
        {
            this.buttons = a ? this.buttons | 1 : this.buttons & -2
        });
    w.defineProperty(yf,
        {
            right: "right"
        }, function ()
        {
            var a = this.event;
            return null === a || "mousedown" !== a.type && "mouseup" !== a.type && "pointerdown" !== a.type && "pointerup" !== a.type ? 0 !== (this.buttons & 2) : 2 === this.button
        }, function (a)
        {
            this.buttons = a ? this.buttons | 2 : this.buttons & -3
        });
    w.defineProperty(yf,
        {
            xL: "middle"
        }, function ()
        {
            var a = this.event;
            return null === a || "mousedown" !== a.type && "mouseup" !== a.type && "pointerdown" !== a.type && "pointerup" !== a.type ? 0 !== (this.buttons & 4) : 1 === this.button
        }, function (a)
        {
            this.buttons = a ? this.buttons | 4 : this.buttons & -5
        });

    function Af()
    {
        this.aa = null;
        this.Sb = "";
        this.yw = this.Pw = null;
        this.Yq = !1
    }
    w.ga("DiagramEvent", Af);
    Af.prototype.copy = function ()
    {
        var a = new Af;
        a.aa = this.aa;
        a.Sb = this.Sb;
        a.Pw = this.Pw;
        a.yw = this.yw;
        a.Yq = this.Yq;
        return a
    };
    Af.prototype.toString = function ()
    {
        var a = "*" + this.name;
        null !== this.JB && (a += ":" + this.JB.toString());
        null !== this.mB && (a += "(" + this.mB.toString() + ")");
        return a
    };
    w.defineProperty(Af,
        {
            g: "diagram"
        }, function ()
        {
            return this.aa
        }, function (a)
        {
            this.aa = a
        });
    w.defineProperty(Af,
        {
            name: "name"
        }, function ()
        {
            return this.Sb
        }, function (a)
        {
            this.Sb = a
        });
    w.defineProperty(Af,
        {
            JB: "subject"
        }, function ()
        {
            return this.Pw
        }, function (a)
        {
            this.Pw = a
        });
    w.defineProperty(Af,
        {
            mB: "parameter"
        }, function ()
        {
            return this.yw
        }, function (a)
        {
            this.yw = a
        });
    w.defineProperty(Af,
        {
            cancel: "cancel"
        }, function ()
        {
            return this.Yq
        }, function (a)
        {
            this.Yq !== a && w.Ut("DiagramEvent.cancel", "2.0");
            this.Yq = a
        });

    function Bf()
    {
        this.Zq = Cf;
        this.Ym = this.pw = "";
        this.Ds = this.Es = this.Js = this.Ks = this.Hs = this.aa = this.qe = null
    }
    w.ga("ChangedEvent", Bf);
    var Df;
    Bf.Transaction = Df = w.p(Bf, "Transaction", -1);
    var Cf;
    Bf.Property = Cf = w.p(Bf, "Property", 0);
    var Ef;
    Bf.Insert = Ef = w.p(Bf, "Insert", 1);
    var Ff;
    Bf.Remove = Ff = w.p(Bf, "Remove", 2);
    Bf.prototype.clear = Bf.prototype.clear = function ()
    {
        this.Ds = this.Es = this.Js = this.Ks = this.Hs = this.aa = this.qe = null
    };
    Bf.prototype.copy = function ()
    {
        var a = new Bf;
        a.Zq = this.Zq;
        a.pw = this.pw;
        a.Ym = this.Ym;
        a.qe = this.qe;
        a.aa = this.aa;
        a.Hs = this.Hs;
        var b = this.Ks;
        a.Ks = w.Pa(b) && "function" === typeof b.S ? b.S() : b;
        b = this.Js;
        a.Js = w.Pa(b) && "function" === typeof b.S ? b.S() : b;
        b = this.Es;
        a.Es = w.Pa(b) && "function" === typeof b.S ? b.S() : b;
        b = this.Ds;
        a.Ds = w.Pa(b) && "function" === typeof b.S ? b.S() : b;
        return a
    };
    Bf.prototype.gc = function (a)
    {
        a.Je === Bf ? this.Dc = a : w.Mj(this, a)
    };
    Bf.prototype.toString = function ()
    {
        var a = "",
            a = this.Dc === Df ? a + "* " : this.Dc === Cf ? a + (null !== this.$ ? "!m" : "!d") : a + ((null !== this.$ ? "!m" : "!d") + this.Dc);
        this.propertyName && "string" === typeof this.propertyName && (a += " " + this.propertyName);
        this.tf && this.tf !== this.propertyName && (a += " " + this.tf);
        a += ": ";
        this.Dc === Df ? null !== this.oldValue && (a += " " + this.oldValue) : (null !== this.object && (a += Qf(this.object)), null !== this.oldValue && (a += "  old: " + Qf(this.oldValue)), null !== this.Hj && (a += " " + this.Hj), null !== this.newValue && (a +=
            "  new: " + Qf(this.newValue)), null !== this.Gj && (a += " " + this.Gj));
        return a
    };
    Bf.prototype.getValue = Bf.prototype.ka = function (a)
    {
        return a ? this.oldValue : this.newValue
    };
    Bf.prototype.getParam = function (a)
    {
        return a ? this.Hj : this.Gj
    };
    Bf.prototype.canUndo = Bf.prototype.canUndo = function ()
    {
        return null !== this.$ || null !== this.g ? !0 : !1
    };
    Bf.prototype.undo = Bf.prototype.undo = function ()
    {
        this.canUndo() && (null !== this.$ ? this.$.pn(this, !0) : null !== this.g && this.g.pn(this, !0))
    };
    Bf.prototype.canRedo = Bf.prototype.canRedo = function ()
    {
        return null !== this.$ || null !== this.g ? !0 : !1
    };
    Bf.prototype.redo = Bf.prototype.redo = function ()
    {
        this.canRedo() && (null !== this.$ ? this.$.pn(this, !1) : null !== this.g && this.g.pn(this, !1))
    };
    w.defineProperty(Bf,
        {
            $: "model"
        }, function ()
        {
            return this.qe
        }, function (a)
        {
            this.qe = a
        });
    w.defineProperty(Bf,
        {
            g: "diagram"
        }, function ()
        {
            return this.aa
        }, function (a)
        {
            this.aa = a
        });
    w.defineProperty(Bf,
        {
            Dc: "change"
        }, function ()
        {
            return this.Zq
        }, function (a)
        {
            this.Zq = a
        });
    w.defineProperty(Bf,
        {
            tf: "modelChange"
        }, function ()
        {
            return this.pw
        }, function (a)
        {
            this.pw = a
        });
    w.defineProperty(Bf,
        {
            propertyName: "propertyName"
        }, function ()
        {
            return this.Ym
        }, function (a)
        {
            this.Ym = a
        });
    w.u(Bf,
        {
            IF: "isTransactionFinished"
        }, function ()
        {
            return this.Zq === Df && ("CommittedTransaction" === this.Ym || "FinishedUndo" === this.Ym || "FinishedRedo" === this.Ym)
        });
    w.defineProperty(Bf,
        {
            object: "object"
        }, function ()
        {
            return this.Hs
        }, function (a)
        {
            this.Hs = a
        });
    w.defineProperty(Bf,
        {
            oldValue: "oldValue"
        }, function ()
        {
            return this.Ks
        }, function (a)
        {
            this.Ks = a
        });
    w.defineProperty(Bf,
        {
            Hj: "oldParam"
        }, function ()
        {
            return this.Js
        }, function (a)
        {
            this.Js = a
        });
    w.defineProperty(Bf,
        {
            newValue: "newValue"
        }, function ()
        {
            return this.Es
        }, function (a)
        {
            this.Es = a
        });
    w.defineProperty(Bf,
        {
            Gj: "newParam"
        }, function ()
        {
            return this.Ds
        }, function (a)
        {
            this.Ds = a
        });

    function F(a)
    {
        1 < arguments.length && w.k("Model constructor can only take one optional argument, the Array of node data.");
        w.nc(this);
        this.nr = this.Sb = "";
        this.Si = !1;
        this.Hz = {};
        this.He = [];
        this.Kc = new ma(null, Object);
        this.pk = "key";
        this.uo = this.Yo = null;
        this.er = this.fr = !1;
        this.Pq = null;
        this.Tm = "category";
        this.Li = new ma(null, I);
        this.lk = null;
        this.ij = !1;
        this.cA = null;
        this.ja = new Rf;
        void 0 !== a && (this.Og = a)
    }
    w.ga("Model", F);
    F.prototype.cloneProtected = function (a)
    {
        a.Sb = this.Sb;
        a.nr = this.nr;
        a.Si = this.Si;
        a.pk = this.pk;
        a.Yo = this.Yo;
        a.uo = this.uo;
        a.fr = this.fr;
        a.er = this.er;
        a.Pq = this.Pq;
        a.Tm = this.Tm
    };
    F.prototype.copy = function ()
    {
        var a = new this.constructor;
        this.cloneProtected(a);
        return a
    };
    F.prototype.clear = F.prototype.clear = function ()
    {
        this.He = [];
        this.Kc.clear();
        this.Li.clear();
        this.ja.clear()
    };
    g = F.prototype;
    g.toString = function (a)
    {
        void 0 === a && (a = 0);
        if (1 < a) return this.MB();
        var b = ("" !== this.name ? this.name : "") + " Model";
        if (0 < a)
        {
            b += "\n node data:";
            a = this.Og;
            for (var c = w.bb(a), d = 0; d < c; d++) var e = w.Ba(a, d),
                b = b + (" " + this.rb(e) + ":" + Qf(e))
        }
        return b
    };
    g.fo = function ()
    {
        var a = "";
        "" !== this.name && (a += ',\n  "name": ' + this.quote(this.name));
        "" !== this.Wl && (a += ',\n  "dataFormat": ' + this.quote(this.Wl));
        this.ib && (a += ',\n  "isReadOnly": ' + this.ib);
        "key" !== this.im && "string" === typeof this.im && (a += ',\n  "nodeKeyProperty": ' + this.quote(this.im));
        this.uA && (a += ',\n  "copiesArrays": true');
        this.tA && (a += ',\n  "copiesArrayObjects": true');
        "category" !== this.Vn && "string" === typeof this.Vn && (a += ',\n  "nodeCategoryProperty": ' + this.quote(this.Vn));
        return a
    };
    g.Ou = function (a)
    {
        a.name && (this.name = a.name);
        a.dataFormat && (this.Wl = a.dataFormat);
        a.isReadOnly && (this.ib = a.isReadOnly);
        a.nodeKeyProperty && (this.im = a.nodeKeyProperty);
        a.copiesArrays && (this.uA = a.copiesArrays);
        a.copiesArrayObjects && (this.tA = a.copiesArrayObjects);
        a.nodeCategoryProperty && (this.Vn = a.nodeCategoryProperty)
    };

    function Sf(a)
    {
        return ',\n  "modelData": ' + Tf(a, a.Sk)
    }

    function Uf(a, b)
    {
        var c = b.modelData;
        w.Pa(c) && (a.Su(c), a.Sk = c)
    }
    g.YB = function ()
    {
        var a = this.Sk,
            b = !1,
            c;
        for (c in a)
            if (!Vf(c, a[c]))
            {
                b = !0;
                break
            }
        a = "";
        b && (a = Sf(this));
        return a + ',\n  "nodeDataArray": ' + Wf(this, this.Og, !0)
    };
    g.pB = function (a)
    {
        Uf(this, a);
        a = a.nodeDataArray;
        w.isArray(a) && (this.Su(a), this.Og = a)
    };

    function Xf(a, b, c, d)
    {
        if (b === c) return !0;
        if (typeof b !== typeof c || "function" === typeof b || "function" === typeof c) return !1;
        if (Array.isArray(b) && Array.isArray(c))
        {
            if (d.ka(b) === c) return !0;
            d.add(b, c);
            if (b.length !== c.length) return !1;
            for (var e = 0; e < b.length; e++)
                if (!Xf(a, b[e], c[e], d)) return !1;
            return !0
        }
        if (w.Pa(b) && w.Pa(c))
        {
            if (d.ka(b) === c) return !0;
            d.add(b, c);
            for (e in b)
            {
                var f = b[e];
                if (!Vf(e, f))
                {
                    var h = c[e];
                    if (void 0 === h || !Xf(a, f, h, d)) return !1
                }
            }
            for (var k in c)
                if (h = c[k], !Vf(k, h) && (f = b[k], void 0 === f || !Xf(a, f, h, d))) return !1;
            return !0
        }
        return !1
    }

    function Yf(a, b, c)
    {
        a[c] !== b[c] && w.k("Model.computeJsonDifference: Model." + c + ' is not the same in both models: "' + a[c] + '" and "' + b[c] + '"')
    }
    g.ZB = function (a)
    {
        Yf(this, a, "nodeKeyProperty");
        this instanceof Zf && Yf(this, a, "nodeParentKeyProperty");
        for (var b = new I, c = new I, d = (new I).Nc(this.Kc.JF), e = new ma, f = a.Og, h = 0; h < f.length; h++)
        {
            var k = f[h],
                l = a.rb(k);
            if (void 0 !== l)
            {
                d.remove(l);
                var m = this.we(l);
                null === m ? (b.add(l), c.add(k)) : Xf(this, m, k, e) || c.add(k)
            }
            else this.bB(k), l = this.rb(k), b.add(l), c.add(k)
        }
        f = "";
        Xf(this, this.Sk, a.Sk, e) || (f += Sf(this));
        0 < b.count && (f += this.Qy + Wf(this, b.xc(), !0));
        0 < c.count && (f += this.fC + Wf(this, c.xc(), !0));
        0 < d.count && (f += this.Sy +
            Wf(this, d.xc(), !0));
        return f
    };
    F.prototype.computeJsonDifference = F.prototype.computeJSONDifference = function (a, b)
    {
        w.G(a, F, F, "computeJsonDifference:newmodel");
        void 0 === b && (b = this.constructor === F ? "go.Model" : this.constructor === Q ? "go.GraphLinksModel" : this.constructor === Zf ? "go.TreeModel" : w.pf(this));
        return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.fo() + this.ZB(a) + "}"
    };
    g = F.prototype;
    g.Qy = ',\n  "insertedNodeKeys": ';
    g.fC = ',\n  "modifiedNodeData": ';
    g.Sy = ',\n  "removedNodeKeys": ';
    g.XB = function (a, b)
    {
        var c = this,
            d = !1,
            e = new I,
            f = new I,
            h = new I;
        a.Wf.each(function (a)
        {
            a.$ === c && ("nodeDataArray" === a.tf ? a.Dc === Ef ? e.add(a.newValue) : a.Dc === Ff && h.add(a.oldValue) : c.Le(a.object) ? f.add(a.object) : c.Sk === a.object && a.Dc === Cf && (d = !0))
        });
        var k = new I;
        e.each(function (a)
        {
            k.add(c.rb(a));
            b || f.add(a)
        });
        var l = new I;
        h.each(function (a)
        {
            l.add(c.rb(a));
            b && f.add(a)
        });
        var m = "";
        d && (m += Sf(this));
        0 < k.count && (m += (b ? this.Sy : this.Qy) + Wf(this, k.xc(), !0));
        0 < f.count && (m += this.fC + Wf(this, f.xc(), !0));
        0 < l.count && (m += (b ?
            this.Qy : this.Sy) + Wf(this, l.xc(), !0));
        return m
    };
    g.oB = function (a)
    {
        Uf(this, a);
        var b = a.insertedNodeKeys,
            c = a.modifiedNodeData,
            d = new ma;
        if (w.isArray(c))
            for (var e = 0; e < c.length; e++)
            {
                var f = w.Ba(c, e),
                    h = this.rb(f);
                void 0 !== h && null !== h && d.set(h, f)
            }
        if (w.isArray(b))
            for (var e = w.bb(b), k = 0; k < e; k++) f = w.Ba(b, k), h = this.we(f), null === h && (h = (h = d.get(f)) ? h : this.copyNodeData(
                {}), this.yy(h, f), this.Nl(h));
        if (w.isArray(c))
            for (e = w.bb(c), k = 0; k < e; k++)
                if (f = w.Ba(c, k), h = this.rb(f), h = this.we(h), null !== h)
                    for (var l in f) "__gohashid" !== l && l !== this.im && l !== this.mq && this.setDataProperty(h,
                        l, f[l]);
        a = a.removedNodeKeys;
        if (w.isArray(a))
            for (e = w.bb(a), k = 0; k < e; k++) f = w.Ba(a, k), h = this.we(f), null !== h && this.oy(h)
    };
    F.prototype.toIncrementalJson = F.prototype.toIncrementalJSON = function (a, b)
    {
        w.G(a, Bf, F, "toIncrementalJson:e");
        a.Dc !== Df && w.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:" + a.toString());
        var c = a.object;
        if (!(a.IF && c instanceof $f)) return '{ "incremental": 0 }';
        void 0 === b && (b = this.constructor === F ? "go.Model" : this.constructor === Q ? "go.GraphLinksModel" : this.constructor === Zf ? "go.TreeModel" : w.pf(this));
        return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.fo() + this.XB(c, "FinishedUndo" ===
            a.propertyName) + "}"
    };
    F.prototype.toJson = F.prototype.toJSON = F.prototype.MB = function (a)
    {
        void 0 === a && (a = this.constructor === F ? "go.Model" : this.constructor === Q ? "go.GraphLinksModel" : this.constructor === Zf ? "go.TreeModel" : w.pf(this));
        return '{ "class": ' + this.quote(a) + this.fo() + this.YB() + "}"
    };
    F.prototype.applyIncrementalJson = F.prototype.applyIncrementalJSON = function (a)
    {
        var b = null;
        if ("string" === typeof a)
            if (window.JSON && window.JSON.parse) try
            {
                b = window.JSON.parse(a)
            }
            catch (c)
            {}
            else w.trace("WARNING: no JSON.parse available");
        else "object" === typeof a ? b = a : w.k("Unable to modify a Model from: " + a);
        var d = b.incremental;
        "number" !== typeof d && w.k("Unable to apply non-incremental changes to Model: " + a);
        0 !== d && (this.Kb("applyIncrementalJson"), this.oB(b), this.Yc("applyIncrementalJson"))
    };
    F.fromJson = F.fromJSON = function (a, b)
    {
        void 0 === b && (b = null);
        null !== b && w.G(b, F, F, "fromJson:model");
        var c = null;
        if ("string" === typeof a)
            if (window.JSON && window.JSON.parse) try
            {
                c = window.JSON.parse(a)
            }
            catch (d)
            {}
            else w.trace("WARNING: no JSON.parse available");
        else "object" === typeof a ? c = a : w.k("Unable to construct a Model from: " + a);
        if (null === b)
        {
            var e;
            e = null;
            var f = c["class"];
            if ("string" === typeof f) try
            {
                var h = null;
                0 === f.indexOf("go.") ? (f = f.substr(3), h = ca[f]) : (h = ca[f], void 0 === h && (h = window[f]));
                "function" === typeof h &&
                (e = new h)
            }
            catch (k)
            {}
            null === e || e instanceof F ? b = e : w.k("Unable to construct a Model of declared class: " + c["class"])
        }
        null === b && (b = new Q);
        b.Ou(c);
        b.pB(c);
        return b
    };
    F.prototype.replaceJsonObjects = F.prototype.Su = function (a)
    {
        if (w.isArray(a))
            for (var b = w.bb(a), c = 0; c < b; c++)
            {
                var d = w.Ba(a, c);
                w.Pa(d) && w.EE(a, c, this.Su(d))
            }
        else if (w.Pa(a))
        {
            for (c in a)
                if (d = a[c], w.Pa(d) && (d = this.Su(d), a[c] = d, "points" === c && Array.isArray(d)))
                {
                    for (var e = 0 === d.length % 2, f = 0; f < d.length; f++)
                        if ("number" !== typeof d[f])
                        {
                            e = !1;
                            break
                        }
                    if (e)
                    {
                        e = new H(y);
                        for (f = 0; f < d.length / 2; f++) e.add(new y(d[2 * f], d[2 * f + 1]));
                        e.freeze();
                        a[c] = e
                    }
                }
            if ("object" === typeof a)
            {
                c = a;
                d = a["class"];
                if ("NaN" === d) c = NaN;
                else if ("Date" ===
                    d) c = new Date(a.value);
                else if ("go.Point" === d) c = new y(ag(a.x), ag(a.y));
                else if ("go.Size" === d) c = new ia(ag(a.width), ag(a.height));
                else if ("go.Rect" === d) c = new B(ag(a.x), ag(a.y), ag(a.width), ag(a.height));
                else if ("go.Margin" === d) c = new hb(ag(a.top), ag(a.right), ag(a.bottom), ag(a.left));
                else if ("go.Spot" === d) c = "string" === typeof a["enum"] ? xb(a["enum"]) : new K(ag(a.x), ag(a.y), ag(a.offsetX), ag(a.offsetY));
                else if ("go.Brush" === d)
                {
                    if (c = new ga, c.type = pa(ga, a.type), "string" === typeof a.color && (c.color = a.color), a.start instanceof K && (c.start = a.start), a.end instanceof K && (c.end = a.end), "number" === typeof a.startRadius && (c.bv = ag(a.startRadius)), "number" === typeof a.endRadius && (c.Wt = ag(a.endRadius)), a = a.colorStops, w.Pa(a))
                        for (b in a) c.addColorStop(parseFloat(b), a[b])
                }
                else "go.Geometry" === d ? (b = null, b = "string" === typeof a.path ? Oe(a.path) : new Be, b.type = pa(Be, a.type), "number" === typeof a.startX && (b.ha = ag(a.startX)), "number" === typeof a.startY && (b.fa = ag(a.startY)), "number" === typeof a.endX && (b.C = ag(a.endX)), "number" === typeof a.endY && (b.D =
                        ag(a.endY)), a.spot1 instanceof K && (b.A = a.spot1), a.spot2 instanceof K && (b.B = a.spot2), c = b) : "go.EnumValue" === d && (b = a.classType, 0 === b.indexOf("go.") && (b = b.substr(3)), c = pa(ca[b], a.name));
                a = c
            }
        }
        return a
    };
    F.prototype.quote = function (a)
    {
        for (var b = "", c = a.length, d = 0; d < c; d++)
        {
            var e = a[d];
            if ('"' === e || "\\" === e) b += "\\" + e;
            else if ("\b" === e) b += "\\b";
            else if ("\f" === e) b += "\\f";
            else if ("\n" === e) b += "\\n";
            else if ("\r" === e) b += "\\r";
            else if ("\t" === e) b += "\\t";
            else var f = a.charCodeAt(d),
                    b = 16 > f ? b + ("\\u000" + a.charCodeAt(d).toString(16)) : 32 > f ? b + ("\\u00" + a.charCodeAt(d).toString(16)) : 8232 === f ? b + "\\u2028" : 8233 === f ? b + "\\u2029" : b + e
        }
        return '"' + b + '"'
    };
    F.prototype.writeJsonValue = F.prototype.fv = function (a)
    {
        return void 0 === a ? "undefined" : null === a ? "null" : !0 === a ? "true" : !1 === a ? "false" : "string" === typeof a ? this.quote(a) : "number" === typeof a ? Infinity === a ? "9e9999" : -Infinity === a ? "-9e9999" : isNaN(a) ? '{"class":"NaN"}' : a.toString() : a instanceof Date ? '{"class":"Date", "value":"' + a.toJSON() + '"}' : a instanceof Number ? this.fv(a.valueOf()) : w.isArray(a) ? Wf(this, a) : w.Pa(a) ? Tf(this, a) : "function" === typeof a ? "null" : a.toString()
    };

    function Wf(a, b, c)
    {
        void 0 === c && (c = !1);
        var d = w.bb(b);
        if (0 >= d) return "[]";
        var e = new qa;
        e.add("[ ");
        c && 1 < d && e.add("\n");
        for (var f = 0; f < d; f++)
        {
            var h = w.Ba(b, f);
            void 0 !== h && (0 < f && (e.add(","), c && e.add("\n")), e.add(a.fv(h)))
        }
        c && 1 < d && e.add("\n");
        e.add(" ]");
        return e.toString()
    }

    function Vf(a, b)
    {
        return void 0 === b || "__gohashid" === a || "_" === a[0] || "function" === typeof b ? !0 : !1
    }

    function bg(a)
    {
        return isNaN(a) ? "NaN" : Infinity === a ? "9e9999" : -Infinity === a ? "-9e9999" : a
    }

    function Tf(a, b)
    {
        var c = b;
        if (c instanceof y) b = {
            "class": "go.Point",
            x: bg(c.x),
            y: bg(c.y)
        };
        else if (c instanceof ia) b = {
            "class": "go.Size",
            width: bg(c.width),
            height: bg(c.height)
        };
        else if (c instanceof B) b = {
            "class": "go.Rect",
            x: bg(c.x),
            y: bg(c.y),
            width: bg(c.width),
            height: bg(c.height)
        };
        else if (c instanceof hb) b = {
            "class": "go.Margin",
            top: bg(c.top),
            right: bg(c.right),
            bottom: bg(c.bottom),
            left: bg(c.left)
        };
        else if (c instanceof K) b = c.$c() ?
            {
                "class": "go.Spot",
                x: bg(c.x),
                y: bg(c.y),
                offsetX: bg(c.offsetX),
                offsetY: bg(c.offsetY)
            } :
            {
                "class": "go.Spot",
                "enum": c.toString()
            };
        else if (c instanceof ga)
        {
            b = {
                "class": "go.Brush",
                type: c.type.name
            };
            if (c.type === cg) b.color = c.color;
            else if (c.type === og || c.type === Xc) b.start = c.start, b.end = c.end, c.type === Xc && (0 !== c.bv && (b.startRadius = bg(c.bv)), isNaN(c.Wt) || (b.endRadius = bg(c.Wt)));
            if (null !== c.Dk)
            {
                for (var d = {}, c = c.Dk.i; c.next();) d[c.key] = c.value;
                b.colorStops = d
            }
        }
        else if (c instanceof Be) b = {
            "class": "go.Geometry",
            type: c.type.name
        }, 0 !== c.ha && (b.startX = bg(c.ha)), 0 !== c.fa && (b.startY = bg(c.fa)), 0 !== c.C && (b.endX =
            bg(c.C)), 0 !== c.D && (b.endY = bg(c.D)), c.A.L(zb) || (b.spot1 = c.A), c.B.L(Sb) || (b.spot2 = c.B), c.type === Ce && (b.path = Ne(c));
        else if (c instanceof da) b = {
            "class": "go.EnumValue",
            classType: w.pf(c.Je),
            name: c.name
        };
        else if (c instanceof G || c instanceof D || c instanceof pg || c instanceof F || c instanceof qg || c instanceof rg || c instanceof sg || c instanceof tg || c instanceof Rf || c instanceof $f) return w.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: " + c.toString()),
            "{}";
        var d = "{",
            c = !0,
            e;
        for (e in b)
        {
            var f = w.vb(b, e);
            if (!Vf(e, f))
                if (c ? c = !1 : d += ", ", d += '"' + e + '":', "points" === e && f instanceof H && f.na === y)
                {
                    for (var h = "[", f = f.i; f.next();)
                    {
                        var k = f.value;
                        1 < h.length && (h += ",");
                        h += a.fv(k.x);
                        h += ",";
                        h += a.fv(k.y)
                    }
                    h += "]";
                    d += h
                }
                else d += a.fv(f)
        }
        return d + "}"
    }

    function ag(a)
    {
        return "number" === typeof a ? a : "NaN" === a ? NaN : "9e9999" === a ? Infinity : "-9e9999" === a ? -Infinity : parseFloat(a)
    }
    w.defineProperty(F,
        {
            name: "name"
        }, function ()
        {
            return this.Sb
        }, function (a)
        {
            var b = this.Sb;
            b !== a && (w.j(a, "string", F, "name"), this.Sb = a, this.h("name", b, a))
        });
    w.defineProperty(F,
        {
            Wl: "dataFormat"
        }, function ()
        {
            return this.nr
        }, function (a)
        {
            var b = this.nr;
            b !== a && (w.j(a, "string", F, "dataFormat"), this.nr = a, this.h("dataFormat", b, a))
        });
    w.defineProperty(F,
        {
            ib: "isReadOnly"
        }, function ()
        {
            return this.Si
        }, function (a)
        {
            var b = this.Si;
            b !== a && (w.j(a, "boolean", F, "isReadOnly"), this.Si = a, this.h("isReadOnly", b, a))
        });
    w.defineProperty(F,
        {
            Sk: "modelData"
        }, function ()
        {
            return this.Hz
        }, function (a)
        {
            var b = this.Hz;
            b !== a && (w.j(a, "object", F, "modelData"), this.Hz = a, this.h("modelData", b, a), this.Lb(a))
        });
    F.prototype.addChangedListener = F.prototype.kn = function (a)
    {
        w.j(a, "function", F, "addChangedListener:listener");
        null === this.lk && (this.lk = new H("function"));
        this.lk.add(a)
    };
    F.prototype.removeChangedListener = F.prototype.Qu = function (a)
    {
        w.j(a, "function", F, "removeChangedListener:listener");
        null !== this.lk && (this.lk.remove(a), 0 === this.lk.count && (this.lk = null))
    };
    F.prototype.kx = function (a)
    {
        this.fb || this.ja.rF(a);
        if (null !== this.lk)
            for (var b = this.lk, c = b.length, d = 0; d < c; d++) b.ea(d)(a)
    };
    F.prototype.raiseChangedEvent = F.prototype.cd = function (a, b, c, d, e, f, h)
    {
        ug(this, "", a, b, c, d, e, f, h)
    };
    F.prototype.raiseChanged = F.prototype.h = function (a, b, c, d, e)
    {
        ug(this, "", Cf, a, this, b, c, d, e)
    };
    F.prototype.raiseDataChanged = F.prototype.nB = function (a, b, c, d, e, f)
    {
        ug(this, "", Cf, b, a, c, d, e, f)
    };

    function ug(a, b, c, d, e, f, h, k, l)
    {
        void 0 === k && (k = null);
        void 0 === l && (l = null);
        var m = new Bf;
        m.$ = a;
        m.Dc = c;
        m.tf = b;
        m.propertyName = d;
        m.object = e;
        m.oldValue = f;
        m.Hj = k;
        m.newValue = h;
        m.Gj = l;
        a.kx(m)
    }
    w.defineProperty(F,
        {
            ja: "undoManager"
        }, function ()
        {
            return this.cA
        }, function (a)
        {
            var b = this.cA;
            b !== a && (w.G(a, Rf, F, "undoManager"), null !== b && b.qJ(this), this.cA = a, null !== a && a.lH(this))
        });
    w.defineProperty(F,
        {
            fb: "skipsUndoManager"
        }, function ()
        {
            return this.ij
        }, function (a)
        {
            w.j(a, "boolean", F, "skipsUndoManager");
            this.ij = a
        });
    F.prototype.pn = function (a, b)
    {
        if (null !== a && a.$ === this)
            if (a.Dc === Cf)
            {
                var c = a.object,
                    d = a.propertyName,
                    e = a.ka(b);
                w.Ma(c, d, e)
            }
            else a.Dc === Ef ? (c = a.Gj, "nodeDataArray" === a.tf ? (d = a.newValue, w.Pa(d) && "number" === typeof c && (e = this.rb(d), b ? (w.Ba(this.He, c) === d && w.Ig(this.He, c), void 0 !== e && this.Kc.remove(e)) : (w.Ba(this.He, c) !== d && w.qh(this.He, c, d), void 0 !== e && this.Kc.add(e, d)))) : "" === a.tf ? (d = a.object, !w.isArray(d) && a.propertyName && (d = w.vb(a.object, a.propertyName)), w.isArray(d) && "number" === typeof c && (e = a.newValue,
                b ? w.Ig(d, c) : w.qh(d, c, e))) : w.k("unknown ChangedEvent.Insert modelChange: " + a.toString())) : a.Dc === Ff ? (c = a.Hj, "nodeDataArray" === a.tf ? (d = a.oldValue, w.Pa(d) && "number" === typeof c && (e = this.rb(d), b ? (w.Ba(this.He, c) !== d && w.qh(this.He, c, d), void 0 !== e && this.Kc.add(e, d)) : (w.Ba(this.He, c) === d && w.Ig(this.He, c), void 0 !== e && this.Kc.remove(e)))) : "" === a.tf ? (d = a.object, !w.isArray(d) && a.propertyName && (d = w.vb(a.object, a.propertyName)), w.isArray(d) && "number" === typeof c && (e = a.oldValue, b ? w.qh(d, c, e) : w.Ig(d, c))) : w.k("unknown ChangedEvent.Remove modelChange: " +
                a.toString())) : a.Dc !== Df && w.k("unknown ChangedEvent: " + a.toString())
    };
    F.prototype.startTransaction = F.prototype.Kb = function (a)
    {
        return this.ja.Kb(a)
    };
    F.prototype.commitTransaction = F.prototype.Yc = function (a)
    {
        return this.ja.Yc(a)
    };
    F.prototype.rollbackTransaction = F.prototype.km = function ()
    {
        return this.ja.km()
    };
    F.prototype.commit = F.prototype.commit = function (a, b)
    {
        var c = b;
        void 0 === c && (c = "");
        var d = this.fb;
        null === c && (this.fb = !0, c = "");
        this.ja.Kb(c);
        var e = !1;
        try
        {
            a(this), e = !0
        }
        finally
        {
            e ? this.ja.Yc(c) : this.ja.km(), this.fb = d
        }
    };
    F.prototype.updateTargetBindings = F.prototype.Lb = function (a, b)
    {
        void 0 === b && (b = "");
        ug(this, "SourceChanged", Df, b, a, null, null)
    };
    w.defineProperty(F,
        {
            im: "nodeKeyProperty"
        }, function ()
        {
            return this.pk
        }, function (a)
        {
            var b = this.pk;
            b !== a && (vg(a, F, "nodeKeyProperty"), "" === a && w.k("Model.nodeKeyProperty may not be the empty string"), 0 < this.Kc.count && w.k("Cannot set Model.nodeKeyProperty when there is existing node data"), this.pk = a, this.h("nodeKeyProperty", b, a))
        });

    function vg(a, b, c)
    {
        "string" !== typeof a && "function" !== typeof a && w.Fd(a, "string or function", b, c)
    }
    F.prototype.getKeyForNodeData = F.prototype.rb = function (a)
    {
        if (null !== a)
        {
            var b = this.pk;
            if ("" !== b && (b = w.vb(a, b), void 0 !== b))
            {
                if (wg(b)) return b;
                w.k("Key value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    F.prototype.setKeyForNodeData = F.prototype.yy = function (a, b)
    {
        void 0 !== b && null !== b && wg(b) || w.Fd(b, "number or string", F, "setKeyForNodeData:key");
        if (null !== a)
        {
            var c = this.pk;
            if ("" !== c)
                if (this.Le(a))
                {
                    var d = w.vb(a, c);
                    d !== b && null === this.we(b) && (w.Ma(a, c, b), this.Kc.remove(d), this.Kc.add(b, a), ug(this, "nodeKey", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c), this.Ru(d, b))
                }
                else w.Ma(a, c, b)
        }
    };
    w.defineProperty(F,
        {
            qL: "makeUniqueKeyFunction"
        }, function ()
        {
            return this.Yo
        }, function (a)
        {
            var b = this.Yo;
            b !== a && (null !== a && w.j(a, "function", F, "makeUniqueKeyFunction"), this.Yo = a, this.h("makeUniqueKeyFunction", b, a))
        });

    function wg(a)
    {
        return "number" === typeof a || "string" === typeof a
    }
    F.prototype.containsNodeData = F.prototype.Le = function (a)
    {
        var b = this.rb(a);
        return void 0 === b ? !1 : this.Kc.ka(b) === a
    };
    F.prototype.findNodeDataForKey = F.prototype.we = function (a)
    {
        null === a && w.k("Model.findNodeDataForKey:key must not be null");
        return void 0 !== a && wg(a) ? this.Kc.ka(a) : null
    };
    w.defineProperty(F,
        {
            Og: "nodeDataArray"
        }, function ()
        {
            return this.He
        }, function (a)
        {
            var b = this.He;
            if (b !== a)
            {
                w.lA(a, F, "nodeDataArray");
                this.Kc.clear();
                this.TB();
                for (var c = w.bb(a), d = 0; d < c; d++)
                {
                    var e = w.Ba(a, d);
                    if (!w.Pa(e))
                    {
                        w.k("Model.nodeDataArray must only contain Objects, not: " + e);
                        return
                    }
                    w.Yp(e)
                }
                this.He = a;
                for (var f = new H(Object), d = 0; d < c; d++)
                {
                    var e = w.Ba(a, d),
                        h = this.rb(e);
                    void 0 === h ? f.add(e) : null !== this.Kc.ka(h) ? f.add(e) : this.Kc.add(h, e)
                }
                for (d = f.i; d.next();) e = d.value, this.bB(e), f = this.rb(e), void 0 !== f &&
                this.Kc.add(f, e);
                ug(this, "nodeDataArray", Cf, "nodeDataArray", this, b, a);
                for (d = 0; d < c; d++) e = w.Ba(a, d), this.uq(e), this.tq(e);
                this.HE();
                w.zI(a) || (this.ib = !0)
            }
        });
    F.prototype.makeNodeDataKeyUnique = F.prototype.bB = function (a)
    {
        if (null !== a)
        {
            var b = this.pk;
            if ("" !== b)
            {
                var c = this.rb(a);
                if (void 0 === c || this.Kc.contains(c))
                {
                    var d = this.Yo;
                    if (null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.Kc.contains(c)))
                    {
                        w.Ma(a, b, c);
                        return
                    }
                    if ("string" === typeof c)
                    {
                        for (d = 2; this.Kc.contains(c + d);) d++;
                        w.Ma(a, b, c + d)
                    }
                    else if (void 0 === c || "number" === typeof c)
                    {
                        for (d = -this.Kc.count - 1; this.Kc.contains(d);) d--;
                        w.Ma(a, b, d)
                    }
                    else w.k("Model.getKeyForNodeData returned something other than a string or a number: " +
                            c)
                }
            }
        }
    };
    F.prototype.addNodeData = F.prototype.Nl = function (a)
    {
        null !== a && (w.Yp(a), this.Le(a) || xg(this, a, !0))
    };

    function xg(a, b, c)
    {
        var d = a.rb(b);
        if (void 0 === d || a.Kc.ka(d) !== b) a.bB(b), d = a.rb(b), void 0 === d ? w.k("Model.makeNodeDataKeyUnique failed on " + b + ".  Data not added to Model.") : (a.Kc.add(d, b), d = null, c && (d = w.bb(a.He), w.qh(a.He, d, b)), ug(a, "nodeDataArray", Ef, "nodeDataArray", a, null, b, null, d), a.uq(b), a.tq(b))
    }
    F.prototype.addNodeDataCollection = function (a)
    {
        if (w.isArray(a))
            for (var b = w.bb(a), c = 0; c < b; c++) this.Nl(w.Ba(a, c));
        else
            for (a = a.i; a.next();) this.Nl(a.value)
    };
    F.prototype.removeNodeData = F.prototype.oy = function (a)
    {
        null !== a && yg(this, a, !0)
    };

    function yg(a, b, c)
    {
        var d = a.rb(b);
        void 0 !== d && a.Kc.remove(d);
        d = null;
        if (c)
        {
            d = w.Ql(a.He, b);
            if (0 > d) return;
            w.Ig(a.He, d)
        }
        ug(a, "nodeDataArray", Ff, "nodeDataArray", a, b, null, d, null);
        a.ev(b)
    }
    F.prototype.removeNodeDataCollection = function (a)
    {
        if (w.isArray(a))
            for (var b = w.bb(a), c = 0; c < b; c++) this.oy(w.Ba(a, c));
        else
            for (a = a.i; a.next();) this.oy(a.value)
    };
    g = F.prototype;
    g.Ru = function (a, b)
    {
        var c = zg(this, a);
        c instanceof I && this.Li.add(b, c)
    };
    g.TB = function () {};
    g.uq = function () {};
    g.tq = function () {};
    g.ev = function () {};

    function Ag(a, b, c)
    {
        if (void 0 !== b)
        {
            var d = a.Li.ka(b);
            null === d && (d = new I(Object), a.Li.add(b, d));
            d.add(c)
        }
    }

    function Bg(a, b, c)
    {
        if (void 0 !== b)
        {
            var d = a.Li.ka(b);
            d instanceof I && (void 0 === c || null === c ? a.Li.remove(b) : (d.remove(c), 0 === d.count && a.Li.remove(b)))
        }
    }

    function zg(a, b)
    {
        if (void 0 === b) return null;
        var c = a.Li.ka(b);
        return c instanceof I ? c : null
    }
    F.prototype.clearUnresolvedReferences = F.prototype.HE = function (a)
    {
        void 0 === a ? this.Li.clear() : this.Li.remove(a)
    };
    w.defineProperty(F,
        {
            MK: "copyNodeDataFunction"
        }, function ()
        {
            return this.uo
        }, function (a)
        {
            var b = this.uo;
            b !== a && (null !== a && w.j(a, "function", F, "copyNodeDataFunction"), this.uo = a, this.h("copyNodeDataFunction", b, a))
        });
    w.defineProperty(F,
        {
            uA: "copiesArrays"
        }, function ()
        {
            return this.fr
        }, function (a)
        {
            var b = this.fr;
            b !== a && (null !== a && w.j(a, "boolean", F, "copiesArrays"), this.fr = a, this.h("copiesArrays", b, a))
        });
    w.defineProperty(F,
        {
            tA: "copiesArrayObjects"
        }, function ()
        {
            return this.er
        }, function (a)
        {
            var b = this.er;
            b !== a && (null !== a && w.j(a, "boolean", F, "copiesArrayObjects"), this.er = a, this.h("copiesArrayObjects", b, a))
        });
    F.prototype.copyNodeData = function (a)
    {
        if (null === a) return null;
        var b = null,
            b = this.uo,
            b = null !== b ? b(a, this) : Cg(this, a, !0);
        w.Pa(b) && w.nc(b);
        return b
    };

    function Cg(a, b, c)
    {
        if (a.uA && Array.isArray(b))
        {
            var d = [];
            for (c = 0; c < b.length; c++)
            {
                var e = Cg(a, b[c], a.tA);
                d.push(e)
            }
            w.nc(d);
            return d
        }
        if (c && w.Pa(b))
        {
            c = (c = b.constructor) ? new c :
                {};
            for (d in b)
                if ("__gohashid" !== d)
                {
                    var e = w.vb(b, d),
                        f;
                    f = e;
                    f instanceof G || f instanceof D || f instanceof pg || f instanceof Vg || f instanceof Wg || f instanceof qg || f instanceof rg || f instanceof sg || f instanceof yf || f instanceof Af ? ("_" !== d[0] && w.trace('Warning: found GraphObject or Diagram reference when copying model data on property "' +
                        d + '" of data object: ' + b.toString() + "  \nModel data should not have any references to a Diagram or any part of a diagram, such as: " + f.toString()), f = !0) : f = f instanceof F || f instanceof Rf || f instanceof $f || f instanceof Bf ? !0 : !1;
                    f || (e = Cg(a, e, !1));
                    w.Ma(c, d, e)
                }
            w.nc(c);
            return c
        }
        return b instanceof y ? b.copy() : b instanceof ia ? b.copy() : b instanceof B ? b.copy() : b instanceof K ? b.copy() : b instanceof hb ? b.copy() : b
    }
    w.defineProperty(F,
        {
            nH: "afterCopyFunction"
        }, function ()
        {
            return this.Pq
        }, function (a)
        {
            var b = this.Pq;
            b !== a && (null !== a && w.j(a, "function", F, "afterCopyFunction"), this.Pq = a, this.h("afterCopyFunction", b, a))
        });
    var Xg = !1;
    F.prototype.set = function (a, b, c)
    {
        this.setDataProperty(a, b, c)
    };
    F.prototype.set = F.prototype.setDataProperty = function (a, b, c)
    {
        if (this.Le(a))
            if (b === this.im) this.yy(a, c);
            else
            {
                if (b === this.Vn)
                {
                    this.wy(a, c);
                    return
                }
            }
        else !Xg && a instanceof G && (Xg = !0, w.trace('Model.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), w.trace("  Is that really your intent?"));
        var d = w.vb(a, b);
        d !== c && (w.Ma(a, b, c), this.nB(a, b, d, c))
    };
    F.prototype.addArrayItem = function (a, b)
    {
        this.OA(a, -1, b)
    };
    F.prototype.insertArrayItem = F.prototype.OA = function (a, b, c)
    {
        a === this.He && w.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");
        0 > b && (b = w.bb(a));
        w.qh(a, b, c);
        ug(this, "", Ef, "", a, null, c, null, b)
    };
    F.prototype.removeArrayItem = F.prototype.aG = function (a, b)
    {
        void 0 === b && (b = -1);
        a === this.He && w.k("Model.removeArrayItem should not be called on the Model.nodeDataArray"); - 1 === b && (b = w.bb(a) - 1);
        var c = w.Ba(a, b);
        w.Ig(a, b);
        ug(this, "", Ff, "", a, c, null, b, null)
    };
    w.defineProperty(F,
        {
            Vn: "nodeCategoryProperty"
        }, function ()
        {
            return this.Tm
        }, function (a)
        {
            var b = this.Tm;
            b !== a && (vg(a, F, "nodeCategoryProperty"), this.Tm = a, this.h("nodeCategoryProperty", b, a))
        });
    F.prototype.getCategoryForNodeData = F.prototype.GA = function (a)
    {
        if (null === a) return "";
        var b = this.Tm;
        if ("" === b) return "";
        b = w.vb(a, b);
        if (void 0 === b) return "";
        if ("string" === typeof b) return b;
        w.k("getCategoryForNodeData found a non-string category for " + a + ": " + b);
        return ""
    };
    F.prototype.setCategoryForNodeData = F.prototype.wy = function (a, b)
    {
        w.j(b, "string", F, "setCategoryForNodeData:cat");
        if (null !== a)
        {
            var c = this.Tm;
            if ("" !== c)
                if (this.Le(a))
                {
                    var d = w.vb(a, c);
                    void 0 === d && (d = "");
                    d !== b && (w.Ma(a, c, b), ug(this, "nodeCategory", Cf, c, a, d, b))
                }
                else w.Ma(a, c, b)
        }
    };

    function Q(a, b)
    {
        F.call(this);
        2 < arguments.length && w.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");
        this.kf = [];
        this.Vi = new I(Object);
        this.gd = new ma(null, Object);
        this.yl = "";
        this.ym = this.to = this.Zo = null;
        this.Wh = "from";
        this.Xh = "to";
        this.Pm = this.Om = "";
        this.Nm = "category";
        this.yg = "";
        this.cp = "isGroup";
        this.kh = "group";
        this.gr = !1;
        void 0 !== a && (this.Og = a);
        void 0 !== b && (this.zh = b)
    }
    w.La(Q, F);
    w.ga("GraphLinksModel", Q);
    Q.prototype.cloneProtected = function (a)
    {
        F.prototype.cloneProtected.call(this, a);
        a.yl = this.yl;
        a.Zo = this.Zo;
        a.to = this.to;
        a.Wh = this.Wh;
        a.Xh = this.Xh;
        a.Om = this.Om;
        a.Pm = this.Pm;
        a.Nm = this.Nm;
        a.yg = this.yg;
        a.cp = this.cp;
        a.kh = this.kh;
        a.gr = this.gr
    };
    Q.prototype.clear = Q.prototype.clear = function ()
    {
        F.prototype.clear.call(this);
        this.kf = [];
        this.gd.clear();
        this.Vi.clear()
    };
    g = Q.prototype;
    g.toString = function (a)
    {
        void 0 === a && (a = 0);
        if (2 <= a) return this.MB();
        var b = ("" !== this.name ? this.name : "") + " GraphLinksModel";
        if (0 < a)
        {
            b += "\n node data:";
            a = this.Og;
            for (var c = w.bb(a), d = 0, d = 0; d < c; d++) var e = w.Ba(a, d),
                b = b + (" " + this.rb(e) + ":" + Qf(e));
            b += "\n link data:";
            a = this.zh;
            c = w.bb(a);
            for (d = 0; d < c; d++) e = w.Ba(a, d), b += " " + this.am(e) + "--\x3e" + this.bm(e)
        }
        return b
    };
    g.fo = function ()
    {
        var a = F.prototype.fo.call(this),
            b = "";
        "category" !== this.Au && "string" === typeof this.Au && (b += ',\n  "linkCategoryProperty": ' + this.quote(this.Au));
        "" !== this.Ej && "string" === typeof this.Ej && (b += ',\n  "linkKeyProperty": ' + this.quote(this.Ej));
        "from" !== this.Ln && "string" === typeof this.Ln && (b += ',\n  "linkFromKeyProperty": ' + this.quote(this.Ln));
        "to" !== this.Mn && "string" === typeof this.Mn && (b += ',\n  "linkToKeyProperty": ' + this.quote(this.Mn));
        "" !== this.Bu && "string" === typeof this.Bu && (b += ',\n  "linkFromPortIdProperty": ' +
            this.quote(this.Bu));
        "" !== this.Du && "string" === typeof this.Du && (b += ',\n  "linkToPortIdProperty": ' + this.quote(this.Du));
        "" !== this.Cu && "string" === typeof this.Cu && (b += ',\n  "linkLabelKeysProperty": ' + this.quote(this.Cu));
        "isGroup" !== this.mq && "string" === typeof this.mq && (b += ',\n  "nodeIsGroupProperty": ' + this.quote(this.mq));
        "group" !== this.Ku && "string" === typeof this.Ku && (b += ',\n  "nodeGroupKeyProperty": ' + this.quote(this.Ku));
        return a + b
    };
    g.Ou = function (a)
    {
        F.prototype.Ou.call(this, a);
        a.linkKeyProperty && (this.Ej = a.linkKeyProperty);
        a.linkFromKeyProperty && (this.Ln = a.linkFromKeyProperty);
        a.linkToKeyProperty && (this.Mn = a.linkToKeyProperty);
        a.linkFromPortIdProperty && (this.Bu = a.linkFromPortIdProperty);
        a.linkToPortIdProperty && (this.Du = a.linkToPortIdProperty);
        a.linkCategoryProperty && (this.Au = a.linkCategoryProperty);
        a.linkLabelKeysProperty && (this.Cu = a.linkLabelKeysProperty);
        a.nodeIsGroupProperty && (this.mq = a.nodeIsGroupProperty);
        a.nodeGroupKeyProperty &&
        (this.Ku = a.nodeGroupKeyProperty)
    };
    g.YB = function ()
    {
        var a = F.prototype.YB.call(this),
            b = ',\n  "linkDataArray": ' + Wf(this, this.zh, !0);
        return a + b
    };
    g.pB = function (a)
    {
        F.prototype.pB.call(this, a);
        a = a.linkDataArray;
        w.isArray(a) && (this.Su(a), this.zh = a)
    };
    g.ZB = function (a)
    {
        if (!(a instanceof Q)) return w.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"), "";
        "" === this.Ej && w.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");
        var b = F.prototype.ZB.call(this, a);
        Yf(this, a, "linkKeyProperty");
        Yf(this, a, "linkFromKeyProperty");
        Yf(this, a, "linkToKeyProperty");
        Yf(this, a, "linkLabelKeysProperty");
        Yf(this, a, "nodeIsGroupProperty");
        Yf(this, a, "nodeGroupKeyProperty");
        for (var c = new I, d = new I, e = (new I).Nc(this.gd.JF),
                 f = new ma, h = a.zh, k = 0; k < h.length; k++)
        {
            var l = h[k],
                m = a.cf(l);
            if (void 0 !== m)
            {
                e.remove(m);
                var n = this.Vp(m);
                null === n ? (c.add(m), d.add(l)) : Xf(this, n, l, f) || d.add(l)
            }
            else this.Xx(l), m = this.cf(l), c.add(m), d.add(l)
        }
        a = b;
        0 < c.count && (a += this.Py + Wf(this, c.xc(), !0));
        0 < d.count && (a += this.eC + Wf(this, d.xc(), !0));
        0 < e.count && (a += this.Ry + Wf(this, e.xc(), !0));
        return a
    };
    g.Py = ',\n  "insertedLinkKeys": ';
    g.eC = ',\n  "modifiedLinkData": ';
    g.Ry = ',\n  "removedLinkKeys": ';
    g.XB = function (a, b)
    {
        "" === this.Ej && w.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");
        var c = F.prototype.XB.call(this, a, b),
            d = this,
            e = new I,
            f = new I,
            h = new I;
        a.Wf.each(function (a)
        {
            a.$ === d && ("linkDataArray" === a.tf ? a.Dc === Ef ? e.add(a.newValue) : a.Dc === Ff && h.add(a.oldValue) : d.th(a.object) && f.add(a.object))
        });
        var k = new I;
        e.each(function (a)
        {
            k.add(d.cf(a));
            b || f.add(a)
        });
        var l = new I;
        h.each(function (a)
        {
            l.add(d.cf(a));
            b && f.add(a)
        });
        0 < k.count && (c += (b ? this.Ry : this.Py) +
            Wf(this, k.xc(), !0));
        0 < f.count && (c += this.eC + Wf(this, f.xc(), !0));
        0 < l.count && (c += (b ? this.Py : this.Ry) + Wf(this, l.xc(), !0));
        return c
    };
    g.oB = function (a)
    {
        F.prototype.oB.call(this, a);
        var b = a.insertedLinkKeys,
            c = a.modifiedLinkData,
            d = new ma;
        if (w.isArray(c))
            for (var e = 0; e < c.length; e++)
            {
                var f = w.Ba(c, e),
                    h = this.cf(f);
                void 0 !== h && null !== h && d.set(h, f)
            }
        if (w.isArray(b))
            for (var e = w.bb(b), k = 0; k < e; k++) f = w.Ba(b, k), h = this.Vp(f), null === h && (h = (h = d.get(f)) ? h : this.mx(
                {}), this.rG(h, f), this.Kt(h));
        if (w.isArray(c))
            for (e = w.bb(c), k = 0; k < e; k++)
                if (f = w.Ba(c, k), h = this.cf(f), h = this.Vp(h), null !== h)
                    for (var l in f) "__gohashid" !== l && l !== this.Ej && this.setDataProperty(h,
                        l, f[l]);
        a = a.removedLinkKeys;
        if (w.isArray(a))
            for (e = w.bb(a), k = 0; k < e; k++) f = w.Ba(a, k), h = this.Vp(f), null !== h && this.ny(h)
    };
    g.pn = function (a, b)
    {
        if (a.Dc === Ef)
        {
            var c = a.Gj;
            if ("linkDataArray" === a.tf)
            {
                var d = a.newValue;
                if (w.Pa(d) && "number" === typeof c)
                {
                    var e = this.cf(d);
                    b ? (this.Vi.remove(d), w.Ba(this.kf, c) === d && w.Ig(this.kf, c), void 0 !== e && this.gd.remove(e)) : (this.Vi.add(d), w.Ba(this.kf, c) !== d && w.qh(this.kf, c, d), void 0 !== e && this.gd.add(e, d))
                }
                return
            }
            if ("linkLabelKeys" === a.tf)
            {
                d = this.Nk(a.object);
                w.isArray(d) && "number" === typeof c && (b ? (c = w.Ql(d, a.newValue), 0 <= c && w.Ig(d, c)) : 0 > w.Ql(d, a.newValue) && w.qh(d, c, a.newValue));
                return
            }
        }
        else if (a.Dc ===
            Ff)
        {
            c = a.Hj;
            if ("linkDataArray" === a.tf)
            {
                d = a.oldValue;
                w.Pa(d) && "number" === typeof c && (e = this.cf(d), b ? (this.Vi.add(d), w.Ba(this.kf, c) !== d && w.qh(this.kf, c, d), void 0 !== e && this.gd.add(e, d)) : (this.Vi.remove(d), w.Ba(this.kf, c) === d && w.Ig(this.kf, c), void 0 !== e && this.gd.remove(e)));
                return
            }
            if ("linkLabelKeys" === a.tf)
            {
                d = this.Nk(a.object);
                w.isArray(d) && "number" === typeof c && (b ? 0 > w.Ql(d, a.newValue) && w.qh(d, c, a.newValue) : (c = w.Ql(d, a.newValue), 0 <= c && w.Ig(d, c)));
                return
            }
        }
        F.prototype.pn.call(this, a, b)
    };
    w.defineProperty(Q,
        {
            jA: "archetypeNodeData"
        }, function ()
        {
            return this.ym
        }, function (a)
        {
            var b = this.ym;
            b !== a && (null !== a && w.G(a, Object, Q, "archetypeNodeData"), this.ym = a, this.h("archetypeNodeData", b, a))
        });
    Q.prototype.Nn = function (a)
    {
        if (void 0 !== a)
        {
            var b = this.ym;
            if (null !== b)
            {
                var c = this.we(a);
                null === c && (c = this.copyNodeData(b), w.Ma(c, this.pk, a), this.Nl(c))
            }
            return a
        }
    };
    w.defineProperty(Q,
        {
            Ln: "linkFromKeyProperty"
        }, function ()
        {
            return this.Wh
        }, function (a)
        {
            var b = this.Wh;
            b !== a && (vg(a, Q, "linkFromKeyProperty"), this.Wh = a, this.h("linkFromKeyProperty", b, a))
        });
    Q.prototype.getFromKeyForLinkData = Q.prototype.am = function (a)
    {
        if (null !== a)
        {
            var b = this.Wh;
            if ("" !== b && (b = w.vb(a, b), void 0 !== b))
            {
                if (wg(b)) return b;
                w.k("FromKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Q.prototype.setFromKeyForLinkData = Q.prototype.zB = function (a, b)
    {
        null === b && (b = void 0);
        void 0 === b || wg(b) || w.Fd(b, "number or string", Q, "setFromKeyForLinkData:key");
        if (null !== a)
        {
            var c = this.Wh;
            if ("" !== c)
                if (b = this.Nn(b), this.th(a))
                {
                    var d = w.vb(a, c);
                    d !== b && (Bg(this, d, a), w.Ma(a, c, b), null === this.we(b) && Ag(this, b, a), ug(this, "linkFromKey", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c))
                }
                else w.Ma(a, c, b)
        }
    };
    w.defineProperty(Q,
        {
            Mn: "linkToKeyProperty"
        }, function ()
        {
            return this.Xh
        }, function (a)
        {
            var b = this.Xh;
            b !== a && (vg(a, Q, "linkToKeyProperty"), this.Xh = a, this.h("linkToKeyProperty", b, a))
        });
    Q.prototype.getToKeyForLinkData = Q.prototype.bm = function (a)
    {
        if (null !== a)
        {
            var b = this.Xh;
            if ("" !== b && (b = w.vb(a, b), void 0 !== b))
            {
                if (wg(b)) return b;
                w.k("ToKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Q.prototype.setToKeyForLinkData = Q.prototype.FB = function (a, b)
    {
        null === b && (b = void 0);
        void 0 === b || wg(b) || w.Fd(b, "number or string", Q, "setToKeyForLinkData:key");
        if (null !== a)
        {
            var c = this.Xh;
            if ("" !== c)
                if (b = this.Nn(b), this.th(a))
                {
                    var d = w.vb(a, c);
                    d !== b && (Bg(this, d, a), w.Ma(a, c, b), null === this.we(b) && Ag(this, b, a), ug(this, "linkToKey", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c))
                }
                else w.Ma(a, c, b)
        }
    };
    w.defineProperty(Q,
        {
            Bu: "linkFromPortIdProperty"
        }, function ()
        {
            return this.Om
        }, function (a)
        {
            var b = this.Om;
            b !== a && (vg(a, Q, "linkFromPortIdProperty"), a !== this.Ln && a !== this.Mn || w.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: " + a), this.Om = a, this.h("linkFromPortIdProperty", b, a))
        });
    Q.prototype.getFromPortIdForLinkData = Q.prototype.cI = function (a)
    {
        if (null === a) return "";
        var b = this.Om;
        if ("" === b) return "";
        a = w.vb(a, b);
        return void 0 === a ? "" : a
    };
    Q.prototype.setFromPortIdForLinkData = Q.prototype.AB = function (a, b)
    {
        w.j(b, "string", Q, "setFromPortIdForLinkData:portname");
        if (null !== a)
        {
            var c = this.Om;
            if ("" !== c)
                if (this.th(a))
                {
                    var d = w.vb(a, c);
                    void 0 === d && (d = "");
                    d !== b && (w.Ma(a, c, b), ug(this, "linkFromPortId", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c))
                }
                else w.Ma(a, c, b)
        }
    };
    w.defineProperty(Q,
        {
            Du: "linkToPortIdProperty"
        }, function ()
        {
            return this.Pm
        }, function (a)
        {
            var b = this.Pm;
            b !== a && (vg(a, Q, "linkToPortIdProperty"), a !== this.Ln && a !== this.Mn || w.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: " + a), this.Pm = a, this.h("linkToPortIdProperty", b, a))
        });
    Q.prototype.getToPortIdForLinkData = Q.prototype.gI = function (a)
    {
        if (null === a) return "";
        var b = this.Pm;
        if ("" === b) return "";
        a = w.vb(a, b);
        return void 0 === a ? "" : a
    };
    Q.prototype.setToPortIdForLinkData = Q.prototype.GB = function (a, b)
    {
        w.j(b, "string", Q, "setToPortIdForLinkData:portname");
        if (null !== a)
        {
            var c = this.Pm;
            if ("" !== c)
                if (this.th(a))
                {
                    var d = w.vb(a, c);
                    void 0 === d && (d = "");
                    d !== b && (w.Ma(a, c, b), ug(this, "linkToPortId", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c))
                }
                else w.Ma(a, c, b)
        }
    };
    w.defineProperty(Q,
        {
            Cu: "linkLabelKeysProperty"
        }, function ()
        {
            return this.yg
        }, function (a)
        {
            var b = this.yg;
            b !== a && (vg(a, Q, "linkLabelKeysProperty"), this.yg = a, this.h("linkLabelKeysProperty", b, a))
        });
    Q.prototype.getLabelKeysForLinkData = Q.prototype.Nk = function (a)
    {
        if (null === a) return w.jo;
        var b = this.yg;
        if ("" === b) return w.jo;
        a = w.vb(a, b);
        return void 0 === a ? w.jo : a
    };
    Q.prototype.setLabelKeysForLinkData = Q.prototype.sG = function (a, b)
    {
        w.lA(b, Q, "setLabelKeysForLinkData:arr");
        if (null !== a)
        {
            var c = this.yg;
            if ("" !== c)
                if (this.th(a))
                {
                    var d = w.vb(a, c);
                    void 0 === d && (d = w.jo);
                    if (d !== b)
                    {
                        for (var e = w.bb(d), f = 0; f < e; f++)
                        {
                            var h = w.Ba(d, f);
                            Bg(this, h, a)
                        }
                        w.Ma(a, c, b);
                        e = w.bb(b);
                        for (f = 0; f < e; f++) h = w.Ba(b, f), null === this.we(h) && Ag(this, h, a);
                        ug(this, "linkLabelKeys", Cf, c, a, d, b);
                        "string" === typeof c && this.Lb(a, c)
                    }
                }
                else w.Ma(a, c, b)
        }
    };
    Q.prototype.addLabelKeyForLinkData = Q.prototype.wE = function (a, b)
    {
        if (null !== b && void 0 !== b && (wg(b) || w.Fd(b, "number or string", Q, "addLabelKeyForLinkData:key"), null !== a))
        {
            var c = this.yg;
            if ("" !== c)
            {
                var d = w.vb(a, c);
                if (void 0 === d) c = [], c.push(b), this.sG(a, c);
                else if (w.isArray(d))
                {
                    var e = w.Ql(d, b);
                    0 <= e || (e = w.bb(d), w.qh(d, Infinity, b), this.th(a) && (null === this.we(b) && Ag(this, b, a), ug(this, "linkLabelKeys", Ef, c, a, null, b, null, e)))
                }
                else w.k(c + " property is not an Array; cannot addLabelKeyForLinkData: " + a)
            }
        }
    };
    Q.prototype.removeLabelKeyForLinkData = Q.prototype.pJ = function (a, b)
    {
        if (null !== b && void 0 !== b && (wg(b) || w.Fd(b, "number or string", Q, "removeLabelKeyForLinkData:key"), null !== a))
        {
            var c = this.yg;
            if ("" !== c)
            {
                var d = w.vb(a, c);
                if (w.isArray(d))
                {
                    var e = w.Ql(d, b);
                    0 > e || (w.Ig(d, e), this.th(a) && (Bg(this, b, a), ug(this, "linkLabelKeys", Ff, c, a, b, null, e, null)))
                }
                else void 0 !== d && w.k(c + " property is not an Array; cannot removeLabelKeyforLinkData: " + a)
            }
        }
    };
    w.defineProperty(Q,
        {
            zh: "linkDataArray"
        }, function ()
        {
            return this.kf
        }, function (a)
        {
            var b = this.kf;
            if (b !== a)
            {
                w.lA(a, Q, "linkDataArray");
                this.gd.clear();
                for (var c = w.bb(a), d = 0; d < c; d++)
                {
                    var e = w.Ba(a, d);
                    if (!w.Pa(e))
                    {
                        w.k("GraphLinksModel.linkDataArray must only contain Objects, not: " + e);
                        return
                    }
                    w.Yp(e)
                }
                this.kf = a;
                if ("" !== this.Ej)
                {
                    for (var f = new H(Object), d = 0; d < c; d++)
                    {
                        var e = w.Ba(a, d),
                            h = this.cf(e);
                        void 0 === h ? f.add(e) : null !== this.gd.ka(h) ? f.add(e) : this.gd.add(h, e)
                    }
                    for (d = f.i; d.next();) e = d.value, this.Xx(e), f = this.cf(e),
                    void 0 !== f && this.gd.add(f, e)
                }
                f = new I(Object);
                for (d = 0; d < c; d++) e = w.Ba(a, d), f.add(e);
                this.Vi = f;
                ug(this, "linkDataArray", Cf, "linkDataArray", this, b, a);
                for (d = 0; d < c; d++) e = w.Ba(a, d), Yg(this, e)
            }
        });
    w.defineProperty(Q,
        {
            Ej: "linkKeyProperty"
        }, function ()
        {
            return this.yl
        }, function (a)
        {
            var b = this.yl;
            if (b !== a)
            {
                vg(a, Q, "linkKeyProperty");
                this.yl = a;
                this.gd.clear();
                for (var c = w.bb(this.zh), d = 0; d < c; d++)
                {
                    var e = w.Ba(this.zh, d),
                        f = this.cf(e);
                    void 0 === f && (this.Xx(e), f = this.cf(e));
                    void 0 !== f && this.gd.add(f, e)
                }
                this.h("linkKeyProperty", b, a)
            }
        });
    Q.prototype.getKeyForLinkData = Q.prototype.cf = function (a)
    {
        if (null !== a)
        {
            var b = this.yl;
            if ("" !== b && (b = w.vb(a, b), void 0 !== b))
            {
                if (wg(b)) return b;
                w.k("Key value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Q.prototype.setKeyForLinkData = Q.prototype.rG = function (a, b)
    {
        void 0 !== b && null !== b && wg(b) || w.Fd(b, "number or string", Q, "setKeyForLinkData:key");
        if (null !== a)
        {
            var c = this.yl;
            if ("" !== c)
                if (this.th(a))
                {
                    var d = w.vb(a, c);
                    d !== b && null === this.Vp(b) && (w.Ma(a, c, b), this.gd.remove(d), this.gd.add(b, a), ug(this, "linkKey", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c))
                }
                else w.Ma(a, c, b)
        }
    };
    w.defineProperty(Q,
        {
            rL: "makeUniqueLinkKeyFunction"
        }, function ()
        {
            return this.Zo
        }, function (a)
        {
            var b = this.Zo;
            b !== a && (null !== a && w.j(a, "function", Q, "makeUniqueLinkKeyFunction"), this.Zo = a, this.h("makeUniqueLinkKeyFunction", b, a))
        });
    Q.prototype.findLinkDataForKey = Q.prototype.Vp = function (a)
    {
        null === a && w.k("GraphLinksModel.findLinkDataForKey:key must not be null");
        return void 0 !== a && wg(a) ? this.gd.ka(a) : null
    };
    Q.prototype.makeLinkDataKeyUnique = Q.prototype.Xx = function (a)
    {
        if (null !== a)
        {
            var b = this.yl;
            if ("" !== b)
            {
                var c = this.cf(a);
                if (void 0 === c || this.gd.contains(c))
                {
                    var d = this.Zo;
                    if (null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.gd.contains(c)))
                    {
                        w.Ma(a, b, c);
                        return
                    }
                    if ("string" === typeof c)
                    {
                        for (d = 2; this.gd.contains(c + d);) d++;
                        w.Ma(a, b, c + d)
                    }
                    else if (void 0 === c || "number" === typeof c)
                    {
                        for (d = -this.gd.count - 1; this.gd.contains(d);) d--;
                        w.Ma(a, b, d)
                    }
                    else w.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: " +
                            c)
                }
            }
        }
    };
    Q.prototype.containsLinkData = Q.prototype.th = function (a)
    {
        return null === a ? !1 : this.Vi.contains(a)
    };
    Q.prototype.addLinkData = Q.prototype.Kt = function (a)
    {
        null !== a && (w.Yp(a), this.th(a) || Zg(this, a, !0))
    };

    function Zg(a, b, c)
    {
        if ("" !== a.Ej)
        {
            var d = a.cf(b);
            if (void 0 !== d && a.gd.ka(d) === b) return;
            a.Xx(b);
            d = a.cf(b);
            if (void 0 === d)
            {
                w.k("GraphLinksModel.makeLinkDataKeyUnique failed on " + b + ". Data not added to model.");
                return
            }
            a.gd.add(d, b)
        }
        a.Vi.add(b);
        d = null;
        c && (d = w.bb(a.kf), w.qh(a.kf, d, b));
        ug(a, "linkDataArray", Ef, "linkDataArray", a, null, b, null, d);
        Yg(a, b)
    }
    Q.prototype.addLinkDataCollection = function (a)
    {
        if (w.isArray(a))
            for (var b = w.bb(a), c = 0; c < b; c++) this.Kt(w.Ba(a, c));
        else
            for (a = a.i; a.next();) this.Kt(a.value)
    };
    Q.prototype.removeLinkData = Q.prototype.ny = function (a)
    {
        null !== a && $g(this, a, !0)
    };

    function $g(a, b, c)
    {
        a.Vi.remove(b);
        var d = a.cf(b);
        void 0 !== d && a.gd.remove(d);
        d = null;
        if (c)
        {
            d = w.Ql(a.kf, b);
            if (0 > d) return;
            w.Ig(a.kf, d)
        }
        ug(a, "linkDataArray", Ff, "linkDataArray", a, b, null, d, null);
        c = a.am(b);
        Bg(a, c, b);
        c = a.bm(b);
        Bg(a, c, b);
        d = a.Nk(b);
        if (w.isArray(d))
            for (var e = w.bb(d), f = 0; f < e; f++) c = w.Ba(d, f), Bg(a, c, b)
    }
    Q.prototype.removeLinkDataCollection = function (a)
    {
        if (w.isArray(a))
            for (var b = w.bb(a), c = 0; c < b; c++) this.ny(w.Ba(a, c));
        else
            for (a = a.i; a.next();) this.ny(a.value)
    };

    function Yg(a, b)
    {
        var c = a.am(b),
            c = a.Nn(c);
        null === a.we(c) && Ag(a, c, b);
        c = a.bm(b);
        c = a.Nn(c);
        null === a.we(c) && Ag(a, c, b);
        var d = a.Nk(b);
        if (w.isArray(d))
            for (var e = w.bb(d), f = 0; f < e; f++) c = w.Ba(d, f), null === a.we(c) && Ag(a, c, b)
    }
    w.defineProperty(Q,
        {
            LK: "copyLinkDataFunction"
        }, function ()
        {
            return this.to
        }, function (a)
        {
            var b = this.to;
            b !== a && (null !== a && w.j(a, "function", Q, "copyLinkDataFunction"), this.to = a, this.h("copyLinkDataFunction", b, a))
        });
    Q.prototype.copyLinkData = Q.prototype.mx = function (a)
    {
        if (null === a) return null;
        var b = null,
            b = this.to,
            b = null !== b ? b(a, this) : Cg(this, a, !0);
        w.Pa(b) && (w.nc(b), "" !== this.Wh && w.Ma(b, this.Wh, void 0), "" !== this.Xh && w.Ma(b, this.Xh, void 0), "" !== this.yg && w.Ma(b, this.yg, []));
        return b
    };
    w.defineProperty(Q,
        {
            mq: "nodeIsGroupProperty"
        }, function ()
        {
            return this.cp
        }, function (a)
        {
            var b = this.cp;
            b !== a && (vg(a, Q, "nodeIsGroupProperty"), this.cp = a, this.h("nodeIsGroupProperty", b, a))
        });
    Q.prototype.isGroupForNodeData = Q.prototype.UA = function (a)
    {
        if (null === a) return !1;
        var b = this.cp;
        return "" === b ? !1 : w.vb(a, b) ? !0 : !1
    };
    w.defineProperty(Q,
        {
            Ku: "nodeGroupKeyProperty"
        }, function ()
        {
            return this.kh
        }, function (a)
        {
            var b = this.kh;
            b !== a && (vg(a, Q, "nodeGroupKeyProperty"), this.kh = a, this.h("nodeGroupKeyProperty", b, a))
        });
    w.defineProperty(Q,
        {
            tn: "copiesGroupKeyOfNodeData"
        }, function ()
        {
            return this.gr
        }, function (a)
        {
            this.gr !== a && (w.j(a, "boolean", Q, "copiesGroupKeyOfNodeData"), this.gr = a)
        });
    Q.prototype.getGroupKeyForNodeData = Q.prototype.Bn = function (a)
    {
        if (null !== a)
        {
            var b = this.kh;
            if ("" !== b && (b = w.vb(a, b), void 0 !== b))
            {
                if (wg(b)) return b;
                w.k("GroupKey value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Q.prototype.setGroupKeyForNodeData = Q.prototype.BB = function (a, b)
    {
        null === b && (b = void 0);
        void 0 === b || wg(b) || w.Fd(b, "number or string", Q, "setGroupKeyForNodeData:key");
        if (null !== a)
        {
            var c = this.kh;
            if ("" !== c)
                if (this.Le(a))
                {
                    var d = w.vb(a, c);
                    d !== b && (Bg(this, d, a), w.Ma(a, c, b), null === this.we(b) && Ag(this, b, a), ug(this, "nodeGroupKey", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c))
                }
                else w.Ma(a, c, b)
        }
    };
    Q.prototype.copyNodeData = function (a)
    {
        if (null === a) return null;
        a = F.prototype.copyNodeData.call(this, a);
        this.tn || "" === this.kh || void 0 === w.vb(a, this.kh) || w.Ma(a, this.kh, void 0);
        return a
    };
    Q.prototype.setDataProperty = function (a, b, c)
    {
        if (this.Le(a))
            if (b === this.im) this.yy(a, c);
            else
            {
                if (b === this.Vn)
                {
                    this.wy(a, c);
                    return
                }
                if (b === this.Ku)
                {
                    this.BB(a, c);
                    return
                }
                b === this.mq && w.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: " + b)
            }
        else if (this.th(a))
        {
            if (b === this.Ln)
            {
                this.zB(a, c);
                return
            }
            if (b === this.Mn)
            {
                this.FB(a, c);
                return
            }
            if (b === this.Bu)
            {
                this.AB(a, c);
                return
            }
            if (b === this.Du)
            {
                this.GB(a, c);
                return
            }
            if (b === this.Ej)
            {
                this.rG(a, c);
                return
            }
            if (b === this.Au)
            {
                this.qG(a, c);
                return
            }
            if (b ===
                this.Cu)
            {
                this.sG(a, c);
                return
            }
        }
        else !Xg && a instanceof G && (Xg = !0, w.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), w.trace("  Is that really your intent?"));
        var d = w.vb(a, b);
        d !== c && (w.Ma(a, b, c), this.nB(a, b, d, c))
    };
    g = Q.prototype;
    g.Ru = function (a, b)
    {
        F.prototype.Ru.call(this, a, b);
        for (var c = this.Kc.i; c.next();) this.tB(c.value, a, b);
        for (c = this.Vi.i; c.next();)
        {
            var d = c.value,
                e = a,
                f = b;
            if (this.am(d) === e)
            {
                var h = this.Wh;
                w.Ma(d, h, f);
                ug(this, "linkFromKey", Cf, h, d, e, f);
                "string" === typeof h && this.Lb(d, h)
            }
            this.bm(d) === e && (h = this.Xh, w.Ma(d, h, f), ug(this, "linkToKey", Cf, h, d, e, f), "string" === typeof h && this.Lb(d, h));
            h = this.Nk(d);
            if (w.isArray(h))
                for (var k = w.bb(h), l = this.yg, m = 0; m < k; m++) w.Ba(h, m) === e && (w.EE(h, m, f), ug(this, "linkLabelKeys", Ef, l, d, e, f, m,
                    m))
        }
    };
    g.tB = function (a, b, c)
    {
        if (this.Bn(a) === b)
        {
            var d = this.kh;
            w.Ma(a, d, c);
            ug(this, "nodeGroupKey", Cf, d, a, b, c);
            "string" === typeof d && this.Lb(a, d)
        }
    };
    g.TB = function ()
    {
        F.prototype.TB.call(this);
        for (var a = this.zh, b = w.bb(a), c = 0; c < b; c++)
        {
            var d = w.Ba(a, c);
            Yg(this, d)
        }
    };
    g.uq = function (a)
    {
        F.prototype.uq.call(this, a);
        a = this.rb(a);
        var b = zg(this, a);
        if (null !== b)
        {
            for (var c = new H(Object), b = b.i; b.next();)
            {
                var d = b.value;
                if (this.Le(d))
                {
                    if (this.Bn(d) === a)
                    {
                        var e = this.kh;
                        ug(this, "nodeGroupKey", Cf, e, d, a, a);
                        "string" === typeof e && this.Lb(d, e);
                        c.add(d)
                    }
                }
                else if (this.am(d) === a && (e = this.Wh, ug(this, "linkFromKey", Cf, e, d, a, a), "string" === typeof e && this.Lb(d, e), c.add(d)), this.bm(d) === a && (e = this.Xh, ug(this, "linkToKey", Cf, e, d, a, a), "string" === typeof e && this.Lb(d, e), c.add(d)), e = this.Nk(d), w.isArray(e))
                    for (var f =
                        w.bb(e), h = this.yg, k = 0; k < f; k++) w.Ba(e, k) === a && (ug(this, "linkLabelKeys", Ef, h, d, a, a, k, k), c.add(d))
            }
            for (c = c.i; c.next();) Bg(this, a, c.value)
        }
    };
    g.tq = function (a)
    {
        F.prototype.tq.call(this, a);
        var b = this.Bn(a);
        null === this.we(b) && Ag(this, b, a)
    };
    g.ev = function (a)
    {
        F.prototype.ev.call(this, a);
        var b = this.Bn(a);
        Bg(this, b, a)
    };
    w.defineProperty(Q,
        {
            Au: "linkCategoryProperty"
        }, function ()
        {
            return this.Nm
        }, function (a)
        {
            var b = this.Nm;
            b !== a && (vg(a, Q, "linkCategoryProperty"), this.Nm = a, this.h("linkCategoryProperty", b, a))
        });
    Q.prototype.getCategoryForLinkData = Q.prototype.ju = function (a)
    {
        if (null === a) return "";
        var b = this.Nm;
        if ("" === b) return "";
        b = w.vb(a, b);
        if (void 0 === b) return "";
        if ("string" === typeof b) return b;
        w.k("getCategoryForLinkData found a non-string category for " + a + ": " + b);
        return ""
    };
    Q.prototype.setCategoryForLinkData = Q.prototype.qG = function (a, b)
    {
        w.j(b, "string", Q, "setCategoryForLinkData:cat");
        if (null !== a)
        {
            var c = this.Nm;
            if ("" !== c)
                if (this.th(a))
                {
                    var d = w.vb(a, c);
                    void 0 === d && (d = "");
                    d !== b && (w.Ma(a, c, b), ug(this, "linkCategory", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c))
                }
                else w.Ma(a, c, b)
        }
    };

    function Zf(a)
    {
        1 < arguments.length && w.k("TreeModel constructor can only take one optional argument, the Array of node data.");
        F.call(this);
        this.lh = "parent";
        this.hr = !1;
        this.Wm = "parentLinkCategory";
        void 0 !== a && (this.Og = a)
    }
    w.La(Zf, F);
    w.ga("TreeModel", Zf);
    Zf.prototype.cloneProtected = function (a)
    {
        F.prototype.cloneProtected.call(this, a);
        a.lh = this.lh;
        a.hr = this.hr;
        a.Wm = this.Wm
    };
    Zf.prototype.toString = function (a)
    {
        void 0 === a && (a = 0);
        if (2 <= a) return this.MB();
        var b = ("" !== this.name ? this.name : "") + " TreeModel";
        if (0 < a)
        {
            b += "\n node data:";
            a = this.Og;
            for (var c = w.bb(a), d = 0; d < c; d++) var e = w.Ba(a, d),
                b = b + (" " + this.rb(e) + ":" + Qf(e))
        }
        return b
    };
    Zf.prototype.fo = function ()
    {
        var a = F.prototype.fo.call(this),
            b = "";
        "parent" !== this.Lu && "string" === typeof this.Lu && (b += ',\n  "nodeParentKeyProperty": ' + this.quote(this.Lu));
        return a + b
    };
    Zf.prototype.Ou = function (a)
    {
        F.prototype.Ou.call(this, a);
        a.nodeParentKeyProperty && (this.Lu = a.nodeParentKeyProperty)
    };
    Zf.prototype.Nn = function (a)
    {
        return a
    };
    w.defineProperty(Zf,
        {
            Lu: "nodeParentKeyProperty"
        }, function ()
        {
            return this.lh
        }, function (a)
        {
            var b = this.lh;
            b !== a && (vg(a, Zf, "nodeParentKeyProperty"), this.lh = a, this.h("nodeParentKeyProperty", b, a))
        });
    w.defineProperty(Zf,
        {
            un: "copiesParentKeyOfNodeData"
        }, function ()
        {
            return this.hr
        }, function (a)
        {
            this.hr !== a && (w.j(a, "boolean", Zf, "copiesParentKeyOfNodeData"), this.hr = a)
        });
    Zf.prototype.getParentKeyForNodeData = Zf.prototype.Dn = function (a)
    {
        if (null !== a)
        {
            var b = this.lh;
            if ("" !== b && (b = w.vb(a, b), void 0 !== b))
            {
                if (wg(b)) return b;
                w.k("ParentKey value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    Zf.prototype.setParentKeyForNodeData = Zf.prototype.ti = function (a, b)
    {
        null === b && (b = void 0);
        void 0 === b || wg(b) || w.Fd(b, "number or string", Zf, "setParentKeyForNodeData:key");
        if (null !== a)
        {
            var c = this.lh;
            if ("" !== c)
                if (b = this.Nn(b), this.Le(a))
                {
                    var d = w.vb(a, c);
                    d !== b && (Bg(this, d, a), w.Ma(a, c, b), null === this.we(b) && Ag(this, b, a), ug(this, "nodeParentKey", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c))
                }
                else w.Ma(a, c, b)
        }
    };
    w.defineProperty(Zf,
        {
            IL: "parentLinkCategoryProperty"
        }, function ()
        {
            return this.Wm
        }, function (a)
        {
            var b = this.Wm;
            b !== a && (vg(a, Zf, "parentLinkCategoryProperty"), this.Wm = a, this.h("parentLinkCategoryProperty", b, a))
        });
    Zf.prototype.getParentLinkCategoryForNodeData = Zf.prototype.eI = function (a)
    {
        if (null === a) return "";
        var b = this.Wm;
        if ("" === b) return "";
        b = w.vb(a, b);
        if (void 0 === b) return "";
        if ("string" === typeof b) return b;
        w.k("getParentLinkCategoryForNodeData found a non-string category for " + a + ": " + b);
        return ""
    };
    Zf.prototype.setParentLinkCategoryForNodeData = Zf.prototype.HJ = function (a, b)
    {
        w.j(b, "string", Zf, "setParentLinkCategoryForNodeData:cat");
        if (null !== a)
        {
            var c = this.Wm;
            if ("" !== c)
                if (this.Le(a))
                {
                    var d = w.vb(a, c);
                    void 0 === d && (d = "");
                    d !== b && (w.Ma(a, c, b), ug(this, "parentLinkCategory", Cf, c, a, d, b), "string" === typeof c && this.Lb(a, c))
                }
                else w.Ma(a, c, b)
        }
    };
    Zf.prototype.copyNodeData = function (a)
    {
        if (null === a) return null;
        a = F.prototype.copyNodeData.call(this, a);
        this.un || "" === this.lh || void 0 === w.vb(a, this.lh) || w.Ma(a, this.lh, void 0);
        return a
    };
    Zf.prototype.setDataProperty = function (a, b, c)
    {
        if (this.Le(a))
            if (b === this.im) this.yy(a, c);
            else
            {
                if (b === this.Vn)
                {
                    this.wy(a, c);
                    return
                }
                if (b === this.Lu)
                {
                    this.ti(a, c);
                    return
                }
            }
        else !Xg && a instanceof G && (Xg = !0, w.trace('TreeModel.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), w.trace("  Is that really your intent?"));
        var d = w.vb(a, b);
        d !== c && (w.Ma(a, b, c), this.nB(a, b, d, c))
    };
    g = Zf.prototype;
    g.Ru = function (a, b)
    {
        F.prototype.Ru.call(this, a, b);
        for (var c = this.Kc.i; c.next();) this.tB(c.value, a, b)
    };
    g.tB = function (a, b, c)
    {
        if (this.Dn(a) === b)
        {
            var d = this.lh;
            w.Ma(a, d, c);
            ug(this, "nodeParentKey", Cf, d, a, b, c);
            "string" === typeof d && this.Lb(a, d)
        }
    };
    g.uq = function (a)
    {
        F.prototype.uq.call(this, a);
        a = this.rb(a);
        var b = zg(this, a);
        if (null !== b)
        {
            for (var c = new H(Object), b = b.i; b.next();)
            {
                var d = b.value;
                if (this.Le(d) && this.Dn(d) === a)
                {
                    var e = this.lh;
                    ug(this, "nodeParentKey", Cf, e, d, a, a);
                    "string" === typeof e && this.Lb(d, e);
                    c.add(d)
                }
            }
            for (c = c.i; c.next();) Bg(this, a, c.value)
        }
    };
    g.tq = function (a)
    {
        F.prototype.tq.call(this, a);
        var b = this.Dn(a),
            b = this.Nn(b);
        null === this.we(b) && Ag(this, b, a)
    };
    g.ev = function (a)
    {
        F.prototype.ev.call(this, a);
        var b = this.Dn(a);
        Bg(this, b, a)
    };

    function ah(a, b, c)
    {
        w.nc(this);
        this.P = !1;
        void 0 === a ? a = "" : w.j(a, "string", ah, "constructor:targetprop");
        void 0 === b ? b = a : w.j(b, "string", ah, "constructor:sourceprop");
        void 0 === c ? c = null : null !== c && w.j(c, "function", ah, "constructor:conv");
        this.ZD = -1;
        this.Fg = null;
        this.yp = a;
        this.xp = this.xt = 0;
        this.Mw = null;
        this.$r = !1;
        this.np = b;
        this.dr = c;
        this.us = bh;
        this.Xq = null;
        this.rz = new I
    }
    w.ga("Binding", ah);
    ah.prototype.copy = function ()
    {
        var a = new ah;
        a.yp = this.yp;
        a.xt = this.xt;
        a.xp = this.xp;
        a.Mw = this.Mw;
        a.$r = this.$r;
        a.np = this.np;
        a.dr = this.dr;
        a.us = this.us;
        a.Xq = this.Xq;
        return a
    };
    var bh;
    ah.OneWay = bh = w.p(ah, "OneWay", 1);
    var ch;
    ah.TwoWay = ch = w.p(ah, "TwoWay", 2);
    ah.parseEnum = function (a, b)
    {
        w.j(a, "function", ah, "parseEnum:ctor");
        w.ob(b, a, ah, "parseEnum:defval");
        return function (c)
        {
            c = pa(a, c);
            return null === c ? b : c
        }
    };
    ah.prototype.gc = function (a)
    {
        a.Je === ah ? this.mode = a : w.Mj(this, a)
    };
    var Qf;
    ah.toString = Qf = function (a)
    {
        var b = a;
        w.Pa(a) && (a.text ? b = a.text : a.name ? b = a.name : void 0 !== a.key ? b = a.key : void 0 !== a.id ? b = a.id : a.constructor === Object && (a.Text ? b = a.Text : a.Name ? b = a.Name : void 0 !== a.Key ? b = a.Key : void 0 !== a.Id ? b = a.Id : void 0 !== a.ID && (b = a.ID)));
        return void 0 === b ? "undefined" : null === b ? "null" : b.toString()
    };
    ah.prototype.toString = function ()
    {
        return "Binding(" + this.By + ":" + this.vG + (-1 !== this.qm ? " " + this.qm : "") + " " + this.mode.name + ")"
    };
    ah.prototype.freeze = function ()
    {
        this.P = !0;
        return this
    };
    ah.prototype.Qa = function ()
    {
        this.P = !1;
        return this
    };
    w.defineProperty(ah,
        {
            qm: null
        }, function ()
        {
            return this.ZD
        }, function (a)
        {
            this.P && w.ma(this);
            w.j(a, "number", ah, "targetId");
            this.ZD = a
        });
    w.defineProperty(ah,
        {
            By: "targetProperty"
        }, function ()
        {
            return this.yp
        }, function (a)
        {
            this.P && w.ma(this);
            w.j(a, "string", ah, "targetProperty");
            this.yp = a
        });
    w.defineProperty(ah,
        {
            Fq: "sourceName"
        }, function ()
        {
            return this.Mw
        }, function (a)
        {
            this.P && w.ma(this);
            null !== a && w.j(a, "string", ah, "sourceName");
            this.Mw = a;
            null !== a && (this.$r = !1)
        });
    w.defineProperty(ah,
        {
            Nx: "isToModel"
        }, function ()
        {
            return this.$r
        }, function (a)
        {
            this.P && w.ma(this);
            w.j(a, "boolean", ah, "isToModel");
            this.$r = a
        });
    w.defineProperty(ah,
        {
            vG: "sourceProperty"
        }, function ()
        {
            return this.np
        }, function (a)
        {
            this.P && w.ma(this);
            w.j(a, "string", ah, "sourceProperty");
            this.np = a
        });
    w.defineProperty(ah,
        {
            DH: "converter"
        }, function ()
        {
            return this.dr
        }, function (a)
        {
            this.P && w.ma(this);
            null !== a && w.j(a, "function", ah, "converter");
            this.dr = a
        });
    w.defineProperty(ah,
        {
            sH: "backConverter"
        }, function ()
        {
            return this.Xq
        }, function (a)
        {
            this.P && w.ma(this);
            null !== a && w.j(a, "function", ah, "backConverter");
            this.Xq = a
        });
    w.defineProperty(ah,
        {
            mode: "mode"
        }, function ()
        {
            return this.us
        }, function (a)
        {
            this.P && w.ma(this);
            w.ob(a, ah, ah, "mode");
            this.us = a
        });
    ah.prototype.makeTwoWay = ah.prototype.QI = function (a)
    {
        void 0 === a && (a = null);
        null !== a && w.j(a, "function", ah, "makeTwoWay");
        this.mode = ch;
        this.sH = a;
        return this
    };
    ah.prototype.ofObject = ah.prototype.$x = function (a)
    {
        void 0 === a && (a = "");
        this.Fq = a;
        this.Nx = !1;
        return this
    };
    ah.prototype.ofModel = function ()
    {
        this.Fq = null;
        this.Nx = !0;
        return this
    };

    function dh(a, b, c)
    {
        a = a.Fq;
        var d = null;
        return d = null === a || "" === a ? b : "/" === a ? c.V : "." === a ? c : ".." === a ? c.R : b.Cd(a)
    }
    ah.prototype.updateTarget = ah.prototype.JG = function (a, b, c)
    {
        var d = this.np;
        if (void 0 === c || "" === d || d === c)
        {
            c = this.yp;
            var e = this.dr;
            if (null === e && "" === c) w.trace("Binding error: target property is the empty string: " + this.toString());
            else
            {
                var f = b;
                "" !== d && (f = w.vb(b, d));
                if (void 0 !== f)
                    if (null === e) "" !== c && w.Ma(a, c, f);
                    else try
                    {
                        if ("" !== c)
                        {
                            var h = e(f, a);
                            w.Ma(a, c, h)
                        }
                        else e(f, a)
                    }
                    catch (k)
                    {}
            }
        }
    };
    ah.prototype.updateSource = ah.prototype.Dy = function (a, b, c, d)
    {
        if (this.us === ch)
        {
            var e = this.yp;
            if (void 0 === c || e === c)
            {
                c = this.np;
                var f = this.Xq,
                    h = a;
                "" !== e && (h = w.vb(a, e));
                if (void 0 !== h && !this.rz.contains(a)) try
                {
                    this.rz.add(a);
                    var k = null !== d ? d.g : null,
                        l = null !== k ? k.$ : null;
                    if (null === f)
                        if ("" !== c) null !== l ? l.setDataProperty(b, c, h) : w.Ma(b, c, h);
                        else
                        {
                            if (null !== l && null !== d && 0 <= d.yu && null !== d.R && Array.isArray(d.R.hq))
                            {
                                var m = d.yu,
                                    n = d.R.hq;
                                l.aG(n, m);
                                l.OA(n, m, h)
                            }
                        }
                    else try
                    {
                        if ("" !== c)
                        {
                            var p = f(h, b, l);
                            null !== l ? l.setDataProperty(b,
                                c, p) : w.Ma(b, c, p)
                        }
                        else p = f(h, b, l), void 0 !== p && null !== l && null !== d && 0 <= d.yu && null !== d.R && Array.isArray(d.R.hq) && (m = d.yu, n = d.R.hq, l.aG(n, m), l.OA(n, m, p))
                    }
                    catch (q)
                    {}
                }
                finally
                {
                    this.rz.remove(a)
                }
            }
        }
    };

    function $f()
    {
        this.PG = (new H(Bf)).freeze();
        this.Sb = "";
        this.fD = !1
    }
    w.ga("Transaction", $f);
    $f.prototype.toString = function (a)
    {
        var b = "Transaction: " + this.name + " " + this.Wf.count.toString() + (this.ru ? "" : ", incomplete");
        if (void 0 !== a && 0 < a)
        {
            a = this.Wf.count;
            for (var c = 0; c < a; c++)
            {
                var d = this.Wf.ea(c);
                null !== d && (b += "\n  " + d.toString())
            }
        }
        return b
    };
    $f.prototype.clear = $f.prototype.clear = function ()
    {
        var a = this.Wf;
        a.Qa();
        for (var b = a.count - 1; 0 <= b; b--)
        {
            var c = a.ea(b);
            null !== c && c.clear()
        }
        a.clear();
        a.freeze()
    };
    $f.prototype.canUndo = $f.prototype.canUndo = function ()
    {
        return this.ru
    };
    $f.prototype.undo = $f.prototype.undo = function ()
    {
        if (this.canUndo())
            for (var a = this.Wf.count - 1; 0 <= a; a--)
            {
                var b = this.Wf.ea(a);
                null !== b && b.undo()
            }
    };
    $f.prototype.canRedo = $f.prototype.canRedo = function ()
    {
        return this.ru
    };
    $f.prototype.redo = $f.prototype.redo = function ()
    {
        if (this.canRedo())
            for (var a = this.Wf.count, b = 0; b < a; b++)
            {
                var c = this.Wf.ea(b);
                null !== c && c.redo()
            }
    };
    w.u($f,
        {
            Wf: "changes"
        }, function ()
        {
            return this.PG
        });
    w.defineProperty($f,
        {
            name: "name"
        }, function ()
        {
            return this.Sb
        }, function (a)
        {
            this.Sb = a
        });
    w.defineProperty($f,
        {
            ru: "isComplete"
        }, function ()
        {
            return this.fD
        }, function (a)
        {
            this.fD = a
        });

    function Rf()
    {
        this.Iz = new I(F);
        this.jf = !1;
        this.TG = (new H($f)).freeze();
        this.ah = -1;
        this.tD = 999;
        this.eh = !1;
        this.Fv = null;
        this.Kl = 0;
        this.qC = !1;
        this.jh = (new H("string")).freeze();
        this.bp = new H("number");
        this.sz = !0;
        this.Dz = !1
    }
    w.ga("UndoManager", Rf);
    Rf.prototype.toString = function (a)
    {
        for (var b = "UndoManager " + this.xj + "<" + this.history.count + "<=" + this.OF, b = b + "[", c = this.TF.count, d = 0; d < c; d++) 0 < d && (b += " "), b += this.TF.ea(d);
        b += "]";
        if (void 0 !== a && 0 < a)
            for (c = this.history.count, d = 0; d < c; d++) b += "\n " + this.history.ea(d).toString(a - 1);
        return b
    };
    Rf.prototype.clear = Rf.prototype.clear = function ()
    {
        var a = this.history;
        a.Qa();
        for (var b = a.count - 1; 0 <= b; b--)
        {
            var c = a.ea(b);
            null !== c && c.clear()
        }
        a.clear();
        this.ah = -1;
        a.freeze();
        this.eh = !1;
        this.Fv = null;
        this.Kl = 0;
        this.jh.Qa();
        this.jh.clear();
        this.jh.freeze();
        this.bp.clear()
    };
    Rf.prototype.addModel = Rf.prototype.lH = function (a)
    {
        this.Iz.add(a)
    };
    Rf.prototype.removeModel = Rf.prototype.qJ = function (a)
    {
        this.Iz.remove(a)
    };
    Rf.prototype.startTransaction = Rf.prototype.Kb = function (a)
    {
        void 0 === a && (a = "");
        null === a && (a = "");
        if (this.lb) return !1;
        !0 === this.sz && (this.sz = !1, this.Kl++, this.jd("StartingFirstTransaction", a, this.sj), 0 < this.Kl && this.Kl--);
        this.isEnabled && (this.jh.Qa(), this.jh.add(a), this.jh.freeze(), null === this.sj ? this.bp.add(0) : this.bp.add(this.sj.Wf.count));
        this.Kl++;
        var b = 1 === this.wi;
        b && this.jd("StartedTransaction", a, this.sj);
        return b
    };
    Rf.prototype.commitTransaction = Rf.prototype.Yc = function (a)
    {
        void 0 === a && (a = "");
        return eh(this, !0, a)
    };
    Rf.prototype.rollbackTransaction = Rf.prototype.km = function ()
    {
        return eh(this, !1, "")
    };

    function eh(a, b, c)
    {
        if (a.lb) return !1;
        a.mA && 1 > a.wi && w.trace("Ending transaction without having started a transaction: " + c);
        var d = 1 === a.wi;
        d && b && a.jd("CommittingTransaction", c, a.sj);
        var e = 0;
        if (0 < a.wi && (a.Kl--, a.isEnabled))
        {
            var f = a.jh.count;
            0 < f && ("" === c && (c = a.jh.ea(0)), a.jh.Qa(), a.jh.dd(f - 1), a.jh.freeze());
            f = a.bp.count;
            0 < f && (e = a.bp.ea(f - 1), a.bp.dd(f - 1))
        }
        f = a.sj;
        if (d)
        {
            if (b)
            {
                a.Dz = !1;
                if (a.isEnabled && null !== f)
                {
                    b = f;
                    b.ru = !0;
                    b.name = c;
                    d = a.history;
                    d.Qa();
                    for (e = d.count - 1; e > a.xj; e--) f = d.ea(e), null !== f && f.clear(),
                        d.dd(e), a.Dz = !0;
                    e = a.OF;
                    0 === e && (e = 1);
                    0 < e && d.count >= e && (f = d.ea(0), null !== f && f.clear(), d.dd(0), a.ah--);
                    d.add(b);
                    a.ah++;
                    d.freeze();
                    f = b
                }
                a.jd("CommittedTransaction", c, f)
            }
            else
            {
                a.eh = !0;
                try
                {
                    a.isEnabled && null !== f && (f.ru = !0, f.undo())
                }
                finally
                {
                    a.jd("RolledBackTransaction", c, f), a.eh = !1
                }
                null !== f && f.clear()
            }
            a.Fv = null;
            return !0
        }
        if (a.isEnabled && !b && null !== f)
        {
            a = e;
            c = f.Wf;
            for (b = c.count - 1; b >= a; b--) d = c.ea(b), null !== d && d.undo(), c.Qa(), c.dd(b);
            c.freeze()
        }
        return !1
    }
    Rf.prototype.canUndo = Rf.prototype.canUndo = function ()
    {
        if (!this.isEnabled || 0 < this.wi) return !1;
        var a = this.FG;
        return null !== a && a.canUndo() ? !0 : !1
    };
    Rf.prototype.undo = Rf.prototype.undo = function ()
    {
        if (this.canUndo())
        {
            var a = this.FG;
            try
            {
                this.eh = !0, this.jd("StartingUndo", "Undo", a), this.ah--, a.undo()
            }
            catch (b)
            {
                w.trace("undo error: " + b.toString())
            }
            finally
            {
                this.jd("FinishedUndo", "Undo", a), this.eh = !1
            }
        }
    };
    Rf.prototype.canRedo = Rf.prototype.canRedo = function ()
    {
        if (!this.isEnabled || 0 < this.wi) return !1;
        var a = this.EG;
        return null !== a && a.canRedo() ? !0 : !1
    };
    Rf.prototype.redo = Rf.prototype.redo = function ()
    {
        if (this.canRedo())
        {
            var a = this.EG;
            try
            {
                this.eh = !0, this.jd("StartingRedo", "Redo", a), this.ah++, a.redo()
            }
            catch (b)
            {
                w.trace("redo error: " + b.toString())
            }
            finally
            {
                this.jd("FinishedRedo", "Redo", a), this.eh = !1
            }
        }
    };
    Rf.prototype.jd = function (a, b, c)
    {
        void 0 === c && (c = null);
        var d = new Bf;
        d.Dc = Df;
        d.propertyName = a;
        d.object = c;
        d.oldValue = b;
        for (a = this.$I; a.next();) b = a.value, d.$ = b, b.kx(d)
    };
    Rf.prototype.handleChanged = Rf.prototype.rF = function (a)
    {
        if (this.isEnabled && !this.lb && !this.skipsEvent(a))
        {
            var b = this.sj;
            null === b && (this.Fv = b = new $f);
            var c = a.copy(),
                b = b.Wf;
            b.Qa();
            b.add(c);
            b.freeze();
            this.mA && 0 >= this.wi && !this.sz && (a = a.g, null !== a && !1 === a.In || w.trace("Change not within a transaction: " + c.toString()))
        }
    };
    Rf.prototype.skipsEvent = function (a)
    {
        if (null === a || 0 > a.Dc.value) return !0;
        a = a.object;
        if (a instanceof G)
        {
            if (a = a.layer, null !== a && a.Pc) return !0
        }
        else if (a instanceof pg && a.Pc) return !0;
        return !1
    };
    w.u(Rf,
        {
            $I: "models"
        }, function ()
        {
            return this.Iz.i
        });
    w.defineProperty(Rf,
        {
            isEnabled: "isEnabled"
        }, function ()
        {
            return this.jf
        }, function (a)
        {
            this.jf = a
        });
    w.u(Rf,
        {
            FG: "transactionToUndo"
        }, function ()
        {
            return 0 <= this.xj && this.xj <= this.history.count - 1 ? this.history.ea(this.xj) : null
        });
    w.u(Rf,
        {
            EG: "transactionToRedo"
        }, function ()
        {
            return this.xj < this.history.count - 1 ? this.history.ea(this.xj + 1) : null
        });
    w.u(Rf,
        {
            lb: "isUndoingRedoing"
        }, function ()
        {
            return this.eh
        });
    w.u(Rf,
        {
            history: "history"
        }, function ()
        {
            return this.TG
        });
    w.defineProperty(Rf,
        {
            OF: "maxHistoryLength"
        }, function ()
        {
            return this.tD
        }, function (a)
        {
            this.tD = a
        });
    w.u(Rf,
        {
            xj: "historyIndex"
        }, function ()
        {
            return this.ah
        });
    w.u(Rf,
        {
            sj: "currentTransaction"
        }, function ()
        {
            return this.Fv
        });
    w.u(Rf,
        {
            wi: "transactionLevel"
        }, function ()
        {
            return this.Kl
        });
    w.u(Rf,
        {
            DF: "isInTransaction"
        }, function ()
        {
            return 0 < this.Kl
        });
    w.defineProperty(Rf,
        {
            mA: "checksTransactionLevel"
        }, function ()
        {
            return this.qC
        }, function (a)
        {
            this.qC = a
        });
    w.u(Rf,
        {
            TF: "nestedTransactionNames"
        }, function ()
        {
            return this.jh
        });

    function rg()
    {
        0 < arguments.length && w.nd(rg);
        w.nc(this);
        this.aa = null;
        this.tC = !1;
        this.OC = this.uC = !0;
        this.wC = this.xC = this.PC = this.yC = !1;
        this.Bl = this.jC = null;
        this.qE = 1.05;
        this.LC = 1;
        this.Ez = NaN;
        this.qD = null;
        this.gA = NaN;
        this.fA = dd;
        this.hj = null;
        this.PD = 0
    }
    w.ga("CommandHandler", rg);
    var fh = null,
        gh = "";
    rg.prototype.toString = function ()
    {
        return "CommandHandler"
    };
    w.u(rg,
        {
            g: "diagram"
        }, function ()
        {
            return this.aa
        });
    rg.prototype.Sc = function (a)
    {
        this.aa = a
    };
    rg.prototype.doKeyDown = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Q,
                c = w.yh ? b.Fu : b.control,
                d = b.shift,
                e = b.alt,
                f = b.key;
            !c || "C" !== f && "Insert" !== f ? c && "X" === f || d && "Del" === f ? this.canCutSelection() && this.cutSelection() : c && "V" === f || d && "Insert" === f ? this.canPasteSelection() && this.pasteSelection() : c && "Y" === f || e && d && "Backspace" === f ? this.canRedo() && this.redo() : c && "Z" === f || e && "Backspace" === f ? this.canUndo() && this.undo() : "Del" === f || "Backspace" === f ? this.canDeleteSelection() && this.deleteSelection() : c && "A" === f ? this.canSelectAll() &&
                this.selectAll() : "Esc" === f ? this.canStopCommand() && this.stopCommand() : "Up" === f ? a.se && (c ? a.scroll("pixel", "up") : a.scroll("line", "up")) : "Down" === f ? a.se && (c ? a.scroll("pixel", "down") : a.scroll("line", "down")) : "Left" === f ? a.re && (c ? a.scroll("pixel", "left") : a.scroll("line", "left")) : "Right" === f ? a.re && (c ? a.scroll("pixel", "right") : a.scroll("line", "right")) : "PageUp" === f ? d && a.re ? a.scroll("page", "left") : a.se && a.scroll("page", "up") : "PageDown" === f ? d && a.re ? a.scroll("page", "right") : a.se && a.scroll("page", "down") : "Home" ===
            f ? c && a.se ? a.scroll("document", "up") : !c && a.re && a.scroll("document", "left") : "End" === f ? c && a.se ? a.scroll("document", "down") : !c && a.re && a.scroll("document", "right") : " " === f ? this.canScrollToPart() && this.scrollToPart() : "Subtract" === f ? this.canDecreaseZoom() && this.decreaseZoom() : "Add" === f ? this.canIncreaseZoom() && this.increaseZoom() : c && "0" === f ? this.canResetZoom() && this.resetZoom() : d && "Z" === f ? this.canZoomToFit() && this.zoomToFit() : c && !d && "G" === f ? this.canGroupSelection() && this.groupSelection() : c && d && "G" === f ? this.canUngroupSelection() &&
                this.ungroupSelection() : b.event && 113 === b.event.which ? this.canEditTextBlock() && this.editTextBlock() : b.event && 93 === b.event.which ? this.canShowContextMenu() && this.showContextMenu() : b.bubbles = !0 : this.canCopySelection() && this.copySelection()
        }
    };
    rg.prototype.doKeyUp = function ()
    {
        var a = this.g;
        null !== a && (a.Q.bubbles = !0)
    };
    rg.prototype.stopCommand = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Xa;
            b instanceof hh && a.Af && a.nA();
            null !== b && b.doCancel()
        }
    };
    rg.prototype.canStopCommand = function ()
    {
        return !0
    };
    rg.prototype.selectAll = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            a.oa();
            try
            {
                a.ic = "wait";
                a.Aa("ChangingSelection");
                for (var b = a.Ij; b.next();) b.value.jb = !0;
                for (var c = a.hg; c.next();) c.value.jb = !0;
                for (var d = a.links; d.next();) d.value.jb = !0
            }
            finally
            {
                a.Aa("ChangedSelection"), a.ic = ""
            }
        }
    };
    rg.prototype.canSelectAll = function ()
    {
        var a = this.g;
        return null !== a && a.Af
    };
    rg.prototype.deleteSelection = function ()
    {
        var a = this.g;
        if (null !== a && !a.Aa("SelectionDeleting", a.selection)) try
        {
            a.ic = "wait";
            a.Kb("Delete");
            a.Aa("ChangingSelection");
            for (var b = new I(R), c = a.selection.i; c.next();) ih(b, c.value, !0, this.OH ? Infinity : 0, this.UE, function (a)
            {
                return a.canDelete()
            });
            a.sB(b, !0);
            a.Aa("SelectionDeleted", b)
        }
        finally
        {
            a.Aa("ChangedSelection"), a.Yc("Delete"), a.ic = ""
        }
    };
    rg.prototype.canDeleteSelection = function ()
    {
        var a = this.g;
        return null === a || a.ib || a.Df || !a.ln || 0 === a.selection.count ? !1 : !0
    };

    function ih(a, b, c, d, e, f)
    {
        void 0 === f && (f = null);
        if (!(a.contains(b) || null !== f && !f(b) || b instanceof jh))
            if (a.add(b), b instanceof T)
            {
                if (c && b instanceof V)
                    for (var h = b.vc; h.next();) ih(a, h.value, c, d, e, f);
                if (e)
                    for (h = b.je; h.next();)
                    {
                        var k = h.value;
                        if (!a.contains(k))
                        {
                            var l = k.Y,
                                m = k.Z;
                            null !== l && a.contains(l) && null !== m && a.contains(m) ? ih(a, k, c, d, e, f) : null !== l && null !== m || ih(a, k, c, d, e, f)
                        }
                    }
                if (1 < d)
                    for (b = b.dF(); b.next();) ih(a, b.value, c, d - 1, e, f)
            }
            else if (b instanceof W)
                for (b = b.Ef; b.next();) ih(a, b.value, c, d, e, f)
    }
    rg.prototype.Op = function (a, b, c)
    {
        var d = new ma(R, R);
        for (a = a.i; a.next();) kh(this, a.value, b, d, c);
        if (null !== b)
        {
            c = b.$;
            a = !1;
            null !== b.Va.ce && (a = b.Va.ce.uj);
            for (var e = new I(W), f = new ma(W, W), h = d.i; h.next();)
            {
                var k = h.value;
                if (k instanceof W)
                {
                    var l = k;
                    a || null !== l.Y && null !== l.Z || e.add(l)
                }
                else if (c instanceof Zf && k instanceof T && null !== k.data)
                {
                    var l = c,
                        m = k,
                        k = h.key,
                        n = k.Kk();
                    null !== n && (n = d.ka(n), null !== n ? (l.ti(m.data, l.rb(n.data)), l = b.Xf(m.data), k = k.zn(), null !== k && null !== l && f.add(k, l)) : l.ti(m.data, void 0))
                }
            }
            0 < e.count &&
            b.sB(e, !1);
            if (0 < f.count)
                for (c = f.i; c.next();) d.add(c.key, c.value)
        }
        if (null !== b && null !== this.g && (b = b.$, c = b.nH, null !== c))
        {
            var p = new ma;
            d.each(function (a)
            {
                null !== a.key.data && p.add(a.key.data, a.value.data)
            });
            c(p, b, this.g.$)
        }
        for (b = d.i; b.next();) b.value.Lb();
        return d
    };

    function kh(a, b, c, d, e)
    {
        if (null === b || e && !b.canCopy()) return null;
        if (d.contains(b)) return d.ka(b);
        var f = null,
            h = b.data;
        if (null !== h && null !== c)
        {
            var k = c.$;
            b instanceof W ? k instanceof Q && (h = k.mx(h), w.Pa(h) && (k.Kt(h), f = c.Xf(h))) : (h = k.copyNodeData(h), w.Pa(h) && (k.Nl(h), f = c.vh(h)))
        }
        else lh(b), f = b.copy(), null !== f && (null !== c ? c.add(f) : null !== h && null !== a.g && a.EH && (k = a.g.$, h = f instanceof W && k instanceof Q ? k.mx(h) : k.copyNodeData(h), w.Pa(h) && (f.data = h)));
        if (!(f instanceof R)) return null;
        f.jb = !1;
        f.Ng = !1;
        d.add(b, f);
        if (b instanceof T)
        {
            for (h = b.je; h.next();)
            {
                k = h.value;
                if (k.Y === b)
                {
                    var l = d.ka(k);
                    null !== l && (l.Y = f)
                }
                k.Z === b && (l = d.ka(k), null !== l && (l.Z = f))
            }
            if (b instanceof V && f instanceof V)
                for (h = f, b = b.vc; b.next();) k = kh(a, b.value, c, d, e), k instanceof W || null === k || (k.Da = h)
        }
        else if (b instanceof W && f instanceof W)
            for (h = b.Y, null !== h && (h = d.ka(h), null !== h && (f.Y = h)), h = b.Z, null !== h && (h = d.ka(h), null !== h && (f.Z = h)), b = b.Ef; b.next();) h = kh(a, b.value, c, d, e), null !== h && h instanceof T && (h.Xb = f);
        return f
    }
    rg.prototype.copySelection = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            for (var b = new I(R), a = a.selection.i; a.next();) ih(b, a.value, !0, this.HH ? Infinity : 0, this.FH, function (a)
            {
                return a.canCopy()
            });
            this.copyToClipboard(b)
        }
    };
    rg.prototype.canCopySelection = function ()
    {
        var a = this.g;
        return null !== a && a.Ck && a.hA && 0 !== a.selection.count ? !0 : !1
    };
    rg.prototype.cutSelection = function ()
    {
        this.copySelection();
        this.deleteSelection()
    };
    rg.prototype.canCutSelection = function ()
    {
        var a = this.g;
        return null !== a && !a.ib && !a.Df && a.Ck && a.ln && a.hA && 0 !== a.selection.count ? !0 : !1
    };
    rg.prototype.copyToClipboard = function (a)
    {
        var b = this.g;
        if (null !== b)
        {
            var c = null;
            if (null === a) fh = null, gh = "";
            else
            {
                var c = b.$,
                    d = !1,
                    e = !1,
                    f = null;
                try
                {
                    if (c instanceof Zf)
                    {
                        var h = c,
                            d = h.un;
                        h.un = this.NE
                    }
                    c instanceof Q && (h = c, e = h.tn, h.tn = this.ME);
                    f = b.Op(a, null, !0)
                }
                finally
                {
                    c instanceof Zf && (c.un = d), c instanceof Q && (c.tn = e), c = new H(R), c.Nc(f), fh = c, gh = b.$.Wl
                }
            }
            b.Aa("ClipboardChanged", c)
        }
    };
    rg.prototype.pasteFromClipboard = function ()
    {
        var a = new I(R),
            b = fh;
        if (null === b) return a;
        var c = this.g;
        if (null === c || gh !== c.$.Wl) return a;
        var d = c.$,
            e = !1,
            f = !1,
            h = null;
        try
        {
            if (d instanceof Zf)
            {
                var k = d,
                    e = k.un;
                k.un = this.NE
            }
            d instanceof Q && (k = d, f = k.tn, k.tn = this.ME);
            h = c.Op(b, c, !1)
        }
        finally
        {
            for (d instanceof Zf && (d.un = e), d instanceof Q && (d.tn = f), b = h.i; b.next();) c = b.value, d = b.key, c.location.I() || (d.location.I() ? c.location = d.location : !c.position.I() && d.position.I() && (c.position = d.position)), a.add(c)
        }
        return a
    };
    rg.prototype.pasteSelection = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try
        {
            b.ic = "wait";
            b.Kb("Paste");
            b.Aa("ChangingSelection");
            var c = this.pasteFromClipboard();
            0 < c.count && mh(b);
            for (var d = c.i; d.next();) d.value.jb = !0;
            b.Aa("ChangedSelection");
            if (null !== a)
            {
                var e = b.computePartsBounds(b.selection);
                if (e.I())
                {
                    var f = b.Va.ce;
                    null === f && (f = new nh, f.Sc(b));
                    var h = f.computeEffectiveCollection(b.selection);
                    f.moveParts(h, new y(a.x - e.la, a.y - e.ra), !1)
                }
            }
            b.Aa("ClipboardPasted", c)
        }
        finally
        {
            b.Yc("Paste"), b.ic =
                ""
        }
    };
    rg.prototype.canPasteSelection = function ()
    {
        var a = this.g;
        return null === a || a.ib || a.Df || !a.Fp || !a.hA || null === fh || 0 === fh.count || gh !== a.$.Wl ? !1 : !0
    };
    rg.prototype.undo = function ()
    {
        var a = this.g;
        null !== a && a.ja.undo()
    };
    rg.prototype.canUndo = function ()
    {
        var a = this.g;
        return null === a || a.ib || a.Df ? !1 : a.zE && a.ja.canUndo()
    };
    rg.prototype.redo = function ()
    {
        var a = this.g;
        null !== a && a.ja.redo()
    };
    rg.prototype.canRedo = function ()
    {
        var a = this.g;
        return null === a || a.ib || a.Df ? !1 : a.zE && a.ja.canRedo()
    };
    rg.prototype.decreaseZoom = function (a)
    {
        void 0 === a && (a = 1 / this.Gy);
        w.Ad(a, rg, "decreaseZoom:factor");
        var b = this.g;
        null !== b && b.Rl === oh && (a *= b.scale, a < b.Bh || a > b.Ah || (b.scale = a))
    };
    rg.prototype.canDecreaseZoom = function (a)
    {
        void 0 === a && (a = 1 / this.Gy);
        w.Ad(a, rg, "canDecreaseZoom:factor");
        var b = this.g;
        if (null === b || b.Rl !== oh) return !1;
        a *= b.scale;
        return a < b.Bh || a > b.Ah ? !1 : b.jx
    };
    rg.prototype.increaseZoom = function (a)
    {
        void 0 === a && (a = this.Gy);
        w.Ad(a, rg, "increaseZoom:factor");
        var b = this.g;
        null !== b && b.Rl === oh && (a *= b.scale, a < b.Bh || a > b.Ah || (b.scale = a))
    };
    rg.prototype.canIncreaseZoom = function (a)
    {
        void 0 === a && (a = this.Gy);
        w.Ad(a, rg, "canIncreaseZoom:factor");
        var b = this.g;
        if (null === b || b.Rl !== oh) return !1;
        a *= b.scale;
        return a < b.Bh || a > b.Ah ? !1 : b.jx
    };
    rg.prototype.resetZoom = function (a)
    {
        void 0 === a && (a = this.qx);
        w.Ad(a, rg, "resetZoom:newscale");
        var b = this.g;
        null === b || a < b.Bh || a > b.Ah || (b.scale = a)
    };
    rg.prototype.canResetZoom = function (a)
    {
        void 0 === a && (a = this.qx);
        w.Ad(a, rg, "canResetZoom:newscale");
        var b = this.g;
        return null === b || a < b.Bh || a > b.Ah ? !1 : b.jx
    };
    rg.prototype.zoomToFit = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.scale,
                c = a.position;
            b === this.gA && !isNaN(this.Ez) && a.be.L(this.fA) ? (a.scale = this.Ez, a.position = this.qD, this.gA = NaN, this.fA = dd) : (this.Ez = b, this.qD = c.copy(), a.zoomToFit(), this.gA = a.scale, this.fA = a.be.copy())
        }
    };
    rg.prototype.canZoomToFit = function ()
    {
        var a = this.g;
        return null === a ? !1 : a.jx
    };
    rg.prototype.scrollToPart = function (a)
    {
        void 0 === a && (a = null);
        null !== a && w.G(a, R, rg, "part");
        var b = this.g;
        if (null !== b)
        {
            if (null === a)
            {
                try
                {
                    null !== this.hj && (this.hj.next() ? a = this.hj.value : this.hj = null)
                }
                catch (c)
                {
                    this.hj = null
                }
                null === a && (0 < b.cm.count ? this.hj = b.cm.i : 0 < b.selection.count && (this.hj = b.selection.i), null !== this.hj && this.hj.next() && (a = this.hj.value))
            }
            if (null !== a)
            {
                var d = b.Ka;
                d.Wn("Scroll To Part");
                var e = this.BJ;
                if (0 < e)
                {
                    var f = ph(this, a, [a]),
                        h = function ()
                        {
                            b.Kb();
                            for (var a = f.pop(); 0 < f.length && a instanceof T && a.uc && (!(a instanceof V) || a.ad);) a = f.pop();
                            0 < f.length ? (a instanceof R && b.lG(a.U), a instanceof T && !a.uc && (a.uc = !0), a instanceof V && !a.ad && (a.ad = !0)) : (a instanceof R && b.GE(a.U), b.rB("LayoutCompleted", k));
                            b.Yc("Scroll To Part")
                        },
                        k = function ()
                        {
                            setTimeout(h, (d.isEnabled ? d.duration : 0) + e)
                        };
                    b.Zw("LayoutCompleted", k);
                    h()
                }
                else
                {
                    var l = b.position.copy();
                    b.GE(a.U);
                    l.Oc(b.position) && d.Hh()
                }
            }
        }
    };

    function ph(a, b, c)
    {
        if (b.isVisible()) return c;
        if (b instanceof jh) ph(a, b.Ye, c);
        else if (b instanceof W)
        {
            var d = b.Y;
            null !== d && ph(a, d, c);
            b = b.Z;
            null !== b && ph(a, b, c)
        }
        else b instanceof T && (d = b.Xb, null !== d && ph(a, d, c), d = b.Kk(), null !== d && (d.uc || d.Hq || c.push(d), ph(a, d, c))), b = b.Da, null !== b && (b.ad || b.Fy || c.push(b), ph(a, b, c));
        return c
    }
    rg.prototype.canScrollToPart = function (a)
    {
        void 0 === a && (a = null);
        if (null !== a && !(a instanceof R)) return !1;
        a = this.g;
        return null === a || 0 === a.selection.count && 0 === a.cm.count ? !1 : a.re && a.se
    };
    rg.prototype.collapseTree = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try
        {
            b.Kb("Collapse Tree");
            b.Ka.Wn("Collapse Tree");
            var c = new H(T);
            if (null !== a && a.uc) a.collapseTree(), c.add(a);
            else
                for (var d = b.selection.i; d.next();)
                {
                    var e = d.value;
                    e instanceof T && (a = e, a.uc && (a.collapseTree(), c.add(a)))
                }
            b.Aa("TreeCollapsed", c)
        }
        finally
        {
            b.Yc("Collapse Tree")
        }
    };
    rg.prototype.canCollapseTree = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.ib) return !1;
        if (null !== a)
        {
            if (!(a instanceof T && a.uc)) return !1;
            if (0 < a.Ex().count) return !0
        }
        else
            for (a = b.selection.i; a.next();)
                if (b = a.value, b instanceof T && b.uc && 0 < b.Ex().count) return !0;
        return !1
    };
    rg.prototype.expandTree = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try
        {
            b.Kb("Expand Tree");
            b.Ka.Wn("Expand Tree");
            var c = new H(T);
            if (null === a || a.uc)
                for (var d = b.selection.i; d.next();)
                {
                    var e = d.value;
                    e instanceof T && (a = e, a.uc || (a.expandTree(), c.add(a)))
                }
            else a.expandTree(), c.add(a);
            b.Aa("TreeExpanded", c)
        }
        finally
        {
            b.Yc("Expand Tree")
        }
    };
    rg.prototype.canExpandTree = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.ib) return !1;
        if (null !== a)
        {
            if (!(a instanceof T) || a.uc) return !1;
            if (0 < a.Ex().count) return !0
        }
        else
            for (a = b.selection.i; a.next();)
                if (b = a.value, b instanceof T && !b.uc && 0 < b.Ex().count) return !0;
        return !1
    };
    rg.prototype.groupSelection = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.$;
            if (b instanceof Q)
            {
                var c = this.AE;
                if (null !== c)
                {
                    var d = null;
                    try
                    {
                        a.ic = "wait";
                        a.Kb("Group");
                        a.Aa("ChangingSelection");
                        for (var e = new H(R), f = a.selection.i; f.next();)
                        {
                            var h = f.value;
                            h.he() && h.canGroup() && e.add(h)
                        }
                        for (var k = new H(R), l = e.i; l.next();)
                        {
                            for (var m = l.value, f = !1, n = e.i; n.next();)
                                if (m.qi(n.value))
                                {
                                    f = !0;
                                    break
                                }
                            f || k.add(m)
                        }
                        if (0 < k.count)
                        {
                            var p = k.first().Da;
                            if (null !== p)
                                for (; null !== p;)
                                {
                                    for (var e = !1, q = k.i; q.next();)
                                        if (!q.value.qi(p))
                                        {
                                            e = !0;
                                            break
                                        }
                                    if (e) p = p.Da;
                                    else break
                                }
                            if (c instanceof V) lh(c), d = c.copy(), null !== d && a.add(d);
                            else if (b.UA(c))
                            {
                                var r = b.copyNodeData(c);
                                w.Pa(r) && (b.Nl(r), d = a.Dx(r))
                            }
                            if (null !== d)
                            {
                                null !== p && this.isValidMember(p, d) && (d.Da = p);
                                for (var s = k.i; s.next();)
                                {
                                    var u = s.value;
                                    this.isValidMember(d, u) && (u.Da = d)
                                }
                                a.select(d)
                            }
                        }
                        a.Aa("ChangedSelection");
                        a.Aa("SelectionGrouped", d)
                    }
                    finally
                    {
                        a.Yc("Group"), a.ic = ""
                    }
                }
            }
        }
    };
    rg.prototype.canGroupSelection = function ()
    {
        var a = this.g;
        if (null === a || a.ib || a.Df || !a.Fp || !a.bx || !(a.$ instanceof Q) || null === this.AE) return !1;
        for (a = a.selection.i; a.next();)
        {
            var b = a.value;
            if (b.he() && b.canGroup()) return !0
        }
        return !1
    };

    function qh(a)
    {
        var b = w.gb();
        for (a = a.i; a.next();)
        {
            var c = a.value;
            c instanceof W || b.push(c)
        }
        a = new I(R);
        for (var c = b.length, d = 0; d < c; d++)
        {
            for (var e = b[d], f = !0, h = 0; h < c; h++)
                if (e.qi(b[h]))
                {
                    f = !1;
                    break
                }
            f && a.add(e)
        }
        w.ta(b);
        return a
    }
    rg.prototype.isValidMember = function (a, b)
    {
        if (null === b || a === b || b instanceof W) return !1;
        if (null !== a)
        {
            if (a === b || a.qi(b)) return !1;
            var c = a.dB;
            if (null !== c && !c(a, b) || null === a.data && null !== b.data || null !== a.data && null === b.data) return !1
        }
        c = this.dB;
        return null !== c ? c(a, b) : !0
    };
    rg.prototype.ungroupSelection = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)
        {
            var c = b.$;
            if (c instanceof Q) try
            {
                b.ic = "wait";
                b.Kb("Ungroup");
                b.Aa("ChangingSelection");
                var d = new H(V);
                if (null !== a) d.add(a);
                else
                    for (var e = b.selection.i; e.next();)
                    {
                        var f = e.value;
                        f instanceof V && (a = f, a.canUngroup() && d.add(a))
                    }
                if (0 < d.count)
                {
                    b.nA();
                    for (var h = d.i; h.next();)
                    {
                        var k = h.value;
                        k.expandSubGraph();
                        var l = k.Da,
                            m = null !== l && null !== l.data ? c.rb(l.data) : void 0,
                            n = new H(R);
                        n.Nc(k.vc);
                        for (var p = n.i; p.next();)
                        {
                            var q =
                                p.value;
                            q.jb = !0;
                            if (!(q instanceof W))
                            {
                                var r = q.data;
                                null !== r ? c.BB(r, m) : q.Da = l
                            }
                        }
                        b.remove(k)
                    }
                }
                b.Aa("ChangedSelection");
                b.Aa("SelectionUngrouped", d, n)
            }
            finally
            {
                b.Yc("Ungroup"), b.ic = ""
            }
        }
    };
    rg.prototype.canUngroupSelection = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.ib || b.Df || !b.ln || !b.ix || !(b.$ instanceof Q)) return !1;
        if (null !== a)
        {
            if (!(a instanceof V)) return !1;
            if (a.canUngroup()) return !0
        }
        else
            for (a = b.selection.i; a.next();)
                if (b = a.value, b instanceof V && b.canUngroup()) return !0;
        return !1
    };
    rg.prototype.addTopLevelParts = function (a, b)
    {
        for (var c = !0, d = qh(a).i; d.next();)
        {
            var e = d.value;
            null !== e.Da && (!b || this.isValidMember(null, e) ? e.Da = null : c = !1)
        }
        return c
    };
    rg.prototype.collapseSubGraph = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try
        {
            b.Kb("Collapse SubGraph");
            b.Ka.Wn("Collapse SubGraph");
            var c = new H(V);
            if (null !== a && a.ad) a.collapseSubGraph(), c.add(a);
            else
                for (var d = b.selection.i; d.next();)
                {
                    var e = d.value;
                    e instanceof V && (a = e, a.ad && (a.collapseSubGraph(), c.add(a)))
                }
            b.Aa("SubGraphCollapsed", c)
        }
        finally
        {
            b.Yc("Collapse SubGraph")
        }
    };
    rg.prototype.canCollapseSubGraph = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.ib) return !1;
        if (null !== a) return a instanceof V && a.ad ? !0 : !1;
        for (a = b.selection.i; a.next();)
            if (b = a.value, b instanceof V && b.ad) return !0;
        return !1
    };
    rg.prototype.expandSubGraph = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) try
        {
            b.Kb("Expand SubGraph");
            b.Ka.Wn("Expand SubGraph");
            var c = new H(V);
            if (null === a || a.ad)
                for (var d = b.selection.i; d.next();)
                {
                    var e = d.value;
                    e instanceof V && (a = e, a.ad || (a.expandSubGraph(), c.add(a)))
                }
            else a.expandSubGraph(), c.add(a);
            b.Aa("SubGraphExpanded", c)
        }
        finally
        {
            b.Yc("Expand SubGraph")
        }
    };
    rg.prototype.canExpandSubGraph = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.ib) return !1;
        if (null !== a) return a instanceof V && !a.ad ? !0 : !1;
        for (a = b.selection.i; a.next();)
            if (b = a.value, b instanceof V && !b.ad) return !0;
        return !1
    };
    rg.prototype.editTextBlock = function (a)
    {
        void 0 === a && (a = null);
        null !== a && w.G(a, Lh, rg, "editTextBlock");
        var b = this.g;
        if (null !== b)
        {
            var c = b.Va.KB;
            if (null !== c)
            {
                if (null === a)
                {
                    a = null;
                    for (var d = b.selection.i; d.next();)
                    {
                        var e = d.value;
                        if (e.canEdit())
                        {
                            a = e;
                            break
                        }
                    }
                    if (null === a) return;
                    a = a.Yt(function (a)
                    {
                        return a instanceof Lh && a.zA
                    })
                }
                null !== a && (b.Xa = null, c.Wg = a, b.Xa = c)
            }
        }
    };
    rg.prototype.canEditTextBlock = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.ib || b.Df || !b.hx || null === b.Va.KB) return !1;
        if (null !== a)
        {
            if (!(a instanceof Lh)) return !1;
            a = a.V;
            if (null !== a && a.canEdit()) return !0
        }
        else
            for (b = b.selection.i; b.next();)
                if (a = b.value, a.canEdit() && (a = a.Yt(function (a)
                {
                    return a instanceof Lh && a.zA
                }), null !== a)) return !0;
        return !1
    };
    rg.prototype.showContextMenu = function (a)
    {
        var b = this.g;
        if (null !== b)
        {
            var c = b.Va.sA;
            if (null !== c && (void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b), a = c.findObjectWithContextMenu(a), null !== a))
            {
                var d = new yf,
                    e = null;
                a instanceof G ? e = a.Ya(Jb) : b.AI || (e = b.sb, e = new y(e.x + e.width / 2, e.y + e.height / 2));
                null !== e && (d.g = b, d.Ce = b.Cy(e), d.da = e, d.left = !1, d.right = !0, d.up = !0, b.Q = d);
                b.Xa = c;
                Mh(c, !1, a)
            }
        }
    };
    rg.prototype.canShowContextMenu = function (a)
    {
        var b = this.g;
        if (null === b) return !1;
        var c = b.Va.sA;
        if (null === c) return !1;
        void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b);
        return null === c.findObjectWithContextMenu(a) ? !1 : !0
    };
    w.defineProperty(rg,
        {
            EH: "copiesClipboardData"
        }, function ()
        {
            return this.tC
        }, function (a)
        {
            w.j(a, "boolean", rg, "copiesClipboardData");
            this.tC = a
        });
    w.defineProperty(rg,
        {
            FH: "copiesConnectedLinks"
        }, function ()
        {
            return this.uC
        }, function (a)
        {
            w.j(a, "boolean", rg, "copiesConnectedLinks");
            this.uC = a
        });
    w.defineProperty(rg,
        {
            UE: "deletesConnectedLinks"
        }, function ()
        {
            return this.OC
        }, function (a)
        {
            w.j(a, "boolean", rg, "deletesConnectedLinks");
            this.OC = a
        });
    w.defineProperty(rg,
        {
            HH: "copiesTree"
        }, function ()
        {
            return this.yC
        }, function (a)
        {
            w.j(a, "boolean", rg, "copiesTree");
            this.yC = a
        });
    w.defineProperty(rg,
        {
            OH: "deletesTree"
        }, function ()
        {
            return this.PC
        }, function (a)
        {
            w.j(a, "boolean", rg, "deletesTree");
            this.PC = a
        });
    w.defineProperty(rg,
        {
            NE: "copiesParentKey"
        }, function ()
        {
            return this.xC
        }, function (a)
        {
            w.j(a, "boolean", rg, "copiesParentKey");
            this.xC = a
        });
    w.defineProperty(rg,
        {
            ME: "copiesGroupKey"
        }, function ()
        {
            return this.wC
        }, function (a)
        {
            w.j(a, "boolean", rg, "copiesGroupKey");
            this.wC = a
        });
    w.defineProperty(rg,
        {
            AE: "archetypeGroupData"
        }, function ()
        {
            return this.jC
        }, function (a)
        {
            null !== a && w.G(a, Object, rg, "archetypeGroupData");
            var b = this.g;
            null !== b && (b = b.$, b instanceof Q && (a instanceof V || b.UA(a) || w.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: " + a)));
            this.jC = a
        });
    w.defineProperty(rg,
        {
            dB: "memberValidation"
        }, function ()
        {
            return this.Bl
        }, function (a)
        {
            null !== a && w.j(a, "function", rg, "memberValidation");
            this.Bl = a
        });
    w.defineProperty(rg,
        {
            qx: "defaultScale"
        }, function ()
        {
            return this.LC
        }, function (a)
        {
            w.Ad(a, rg, "defaultScale");
            0 < a || w.k("defaultScale must be larger than zero, not: " + a);
            this.LC = a
        });
    w.defineProperty(rg,
        {
            Gy: "zoomFactor"
        }, function ()
        {
            return this.qE
        }, function (a)
        {
            w.Ad(a, rg, "zoomFactor");
            1 < a || w.k("zoomFactor must be larger than 1.0, not: " + a);
            this.qE = a
        });
    w.defineProperty(rg,
        {
            BJ: "scrollToPartPause"
        }, function ()
        {
            return this.PD
        }, function (a)
        {
            w.Ad(a, rg, "scrollToPartPause");
            this.PD = a
        });

    function qg()
    {
        0 < arguments.length && w.nd(qg);
        w.nc(this);
        this.aa = null;
        this.Sb = "";
        this.jf = !0;
        this.dD = !1;
        this.kE = null;
        this.Xw = -1
    }
    w.ga("Tool", qg);
    qg.prototype.Sc = function (a)
    {
        this.aa = a
    };
    qg.prototype.toString = function ()
    {
        return "" !== this.name ? this.name + " Tool" : w.pf(Object.getPrototypeOf(this))
    };
    qg.prototype.updateAdornments = function () {};
    qg.prototype.canStart = function ()
    {
        return this.isEnabled
    };
    qg.prototype.doStart = function () {};
    qg.prototype.doActivate = function ()
    {
        this.sa = !0
    };
    qg.prototype.doDeactivate = function ()
    {
        this.sa = !1
    };
    qg.prototype.doStop = function () {};
    qg.prototype.doCancel = function ()
    {
        this.stopTool()
    };
    qg.prototype.stopTool = function ()
    {
        var a = this.g;
        null !== a && a.Xa === this && (a.Xa = null, a.ic = "")
    };
    qg.prototype.doMouseDown = function ()
    {
        !this.sa && this.canStart() && this.doActivate()
    };
    qg.prototype.doMouseMove = function () {};
    qg.prototype.doMouseUp = function ()
    {
        this.stopTool()
    };
    qg.prototype.doMouseWheel = function () {};
    qg.prototype.canStartMultiTouch = function ()
    {
        return !0
    };
    qg.prototype.standardPinchZoomStart = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Q,
                c = b.Gx(0, w.xb(NaN, NaN)),
                d = b.Gx(1, w.xb(NaN, NaN));
            if (c.I() && d.I() && (this.doCancel(), a.ku("hasGestureZoom")))
            {
                a.Ls = a.scale;
                var e = d.x - c.x,
                    f = d.y - c.y;
                a.UD = Math.sqrt(e * e + f * f);
                b.bubbles = !1
            }
            w.v(c);
            w.v(d)
        }
    };
    qg.prototype.standardPinchZoomMove = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Q,
                c = b.Gx(0, w.xb(NaN, NaN)),
                d = b.Gx(1, w.xb(NaN, NaN));
            if (c.I() && d.I() && (this.doCancel(), a.ku("hasGestureZoom")))
            {
                var e = d.x - c.x,
                    f = d.y - c.y,
                    f = Math.sqrt(e * e + f * f) / a.UD,
                    e = new y((Math.min(d.x, c.x) + Math.max(d.x, c.x)) / 2, (Math.min(d.y, c.y) + Math.max(d.y, c.y)) / 2),
                    f = a.Ls * f,
                    h = a.pb;
                if (f !== a.scale && h.canResetZoom(f))
                {
                    var k = a.zi;
                    a.zi = e;
                    h.resetZoom(f);
                    a.zi = k
                }
                b.bubbles = !1
            }
            w.v(c);
            w.v(d)
        }
    };
    qg.prototype.doKeyDown = function ()
    {
        var a = this.g;
        null !== a && "Esc" === a.Q.key && this.doCancel()
    };
    qg.prototype.doKeyUp = function () {};
    qg.prototype.startTransaction = qg.prototype.Kb = function (a)
    {
        void 0 === a && (a = this.name);
        this.Lf = null;
        var b = this.g;
        return null === b ? !1 : b.Kb(a)
    };
    qg.prototype.stopTransaction = qg.prototype.Vk = function ()
    {
        var a = this.g;
        return null === a ? !1 : null === this.Lf ? a.km() : a.Yc(this.Lf)
    };
    qg.prototype.standardMouseSelect = function ()
    {
        var a = this.g;
        if (null !== a && a.Af)
        {
            var b = a.Q,
                c = a.au(b.da, !1);
            if (null !== c)
                if (w.yh ? b.Fu : b.control)
                {
                    a.Aa("ChangingSelection");
                    for (b = c; null !== b && !b.canSelect();) b = b.Da;
                    null !== b && (b.jb = !b.jb);
                    a.Aa("ChangedSelection")
                }
                else if (b.shift)
                {
                    if (!c.jb)
                    {
                        a.Aa("ChangingSelection");
                        for (b = c; null !== b && !b.canSelect();) b = b.Da;
                        null !== b && (b.jb = !0);
                        a.Aa("ChangedSelection")
                    }
                }
                else
                {
                    if (!c.jb)
                    {
                        for (b = c; null !== b && !b.canSelect();) b = b.Da;
                        null !== b && a.select(b)
                    }
                }
            else !b.left || (w.yh ? b.Fu : b.control) ||
            b.shift || a.nA()
        }
    };
    qg.prototype.standardMouseClick = function (a, b)
    {
        void 0 === a && (a = null);
        void 0 === b && (b = function (a)
        {
            return !a.layer.Pc
        });
        var c = this.g;
        if (null === c) return !1;
        var d = c.Q,
            e = c.Oe(d.da, a, b);
        d.Be = e;
        Nh(e, d, c);
        return d.tc
    };

    function Nh(a, b, c)
    {
        b.tc = !1;
        if (null === a || a.su())
        {
            var d = 0;
            b.left ? d = 1 === b.te ? 1 : 2 === b.te ? 2 : 1 : b.right && 1 === b.te && (d = 3);
            var e = "";
            if (null !== a)
            {
                switch (d)
                {
                    case 1:
                        e = "ObjectSingleClicked";
                        break;
                    case 2:
                        e = "ObjectDoubleClicked";
                        break;
                    case 3:
                        e = "ObjectContextClicked"
                }
                0 !== d && c.Aa(e, a)
            }
            else
            {
                switch (d)
                {
                    case 1:
                        e = "BackgroundSingleClicked";
                        break;
                    case 2:
                        e = "BackgroundDoubleClicked";
                        break;
                    case 3:
                        e = "BackgroundContextClicked"
                }
                0 !== d && c.Aa(e)
            }
            if (null !== a)
                for (; null !== a;)
                {
                    c = null;
                    switch (d)
                    {
                        case 1:
                            c = a.click;
                            break;
                        case 2:
                            c = a.Vt ? a.Vt :
                                a.click;
                            break;
                        case 3:
                            c = a.rA
                    }
                    if (null !== c && (c(b, a), b.tc)) break;
                    a = a.R
                }
            else
            {
                a = null;
                switch (d)
                {
                    case 1:
                        a = c.click;
                        break;
                    case 2:
                        a = c.Vt ? c.Vt : c.click;
                        break;
                    case 3:
                        a = c.rA
                }
                null !== a && a(b)
            }
        }
    }
    qg.prototype.standardMouseOver = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Q;
            if (null !== b.g && !0 !== a.Ka.rc)
            {
                var c = a.fb;
                a.fb = !0;
                var d = a.dh ? a.Oe(b.da, null, null) : null;
                b.Be = d;
                var e = !1;
                if (d !== a.vo)
                {
                    var f = a.vo,
                        h = f;
                    a.vo = d;
                    this.doCurrentObjectChanged(f, d);
                    for (b.tc = !1; null !== f;)
                    {
                        var k = f.Hu;
                        if (null !== k)
                        {
                            if (d === f) break;
                            if (null !== d && d.fm(f)) break;
                            k(b, f, d);
                            e = !0;
                            if (b.tc) break
                        }
                        f = f.R
                    }
                    f = h;
                    for (b.tc = !1; null !== d;)
                    {
                        k = d.Gu;
                        if (null !== k)
                        {
                            if (f === d) break;
                            if (null !== f && f.fm(d)) break;
                            k(b, d, f);
                            e = !0;
                            if (b.tc) break
                        }
                        d = d.R
                    }
                    d = a.vo
                }
                if (null !==
                    d)
                {
                    f = d;
                    for (h = ""; null !== f;)
                    {
                        h = f.cursor;
                        if ("" !== h) break;
                        f = f.R
                    }
                    a.ic = h;
                    b.tc = !1;
                    for (f = d; null !== f;)
                    {
                        d = f.hB;
                        if (null !== d && (d(b, f), e = !0, b.tc)) break;
                        f = f.R
                    }
                }
                else a.ic = "", d = a.hB, null !== d && (d(b), e = !0);
                e && a.ye();
                a.fb = c
            }
        }
    };
    qg.prototype.doCurrentObjectChanged = function () {};
    qg.prototype.standardMouseWheel = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Q,
                c = b.oi;
            if (0 !== c && a.be.I())
            {
                var d = a.pb,
                    e = a.Va.Iu;
                if ((e === Oh && !b.shift || e === Ph && b.control) && (0 < c ? d.canIncreaseZoom() : d.canDecreaseZoom())) e = a.zi, a.zi = b.Ce, 0 < c ? d.increaseZoom() : d.decreaseZoom(), a.zi = e, b.bubbles = !1;
                else if (e === Oh && b.shift || e === Ph && !b.control)
                {
                    var d = a.position.copy(),
                        e = 0 < c ? c : -c,
                        f = b.event.deltaMode,
                        h = b.event.deltaX,
                        k = b.event.deltaY,
                        l = "pixel";
                    if (w.cq || w.dq || w.TA) f = 1, 0 < h && (h = 3), 0 > h && (h = -3), 0 < k && (k = 3), 0 > k && (k = -3);
                    if (void 0 === f || void 0 === h || void 0 === k || 0 === h && 0 === k || b.shift) !b.shift && a.se ? (f = a.Wu, e = 3 * e * f, 0 < c ? a.scroll("pixel", "up", e) : a.scroll("pixel", "down", e)) : b.shift && a.re && (f = a.Vu, e = 3 * e * f, 0 < c ? a.scroll("pixel", "left", e) : a.scroll("pixel", "right", e));
                    else
                    {
                        switch (f)
                        {
                            case 0:
                                l = "pixel";
                                break;
                            case 1:
                                l = "line";
                                break;
                            case 2:
                                l = "page";
                                break;
                            default:
                                l = "pixel"
                        }
                        0 !== h && a.re && (0 < h ? a.scroll(l, "left", -h) : a.scroll(l, "right", h));
                        0 !== k && a.se && (0 < k ? a.scroll(l, "up", -k) : a.scroll(l, "down", k))
                    }
                    a.position.L(d) || (b.bubbles = !1)
                }
            }
        }
    };
    qg.prototype.standardWaitAfter = function (a, b)
    {
        w.j(a, "number", qg, "standardWaitAfter:delay");
        this.cancelWaitAfter();
        var c = this,
            d = b.copy();
        this.Xw = w.setTimeout(function ()
        {
            c.doWaitAfter(d)
        }, a)
    };
    qg.prototype.cancelWaitAfter = function ()
    {
        -1 !== this.Xw && w.clearTimeout(this.Xw);
        this.Xw = -1
    };
    qg.prototype.doWaitAfter = function () {};
    qg.prototype.findToolHandleAt = function (a, b)
    {
        var c = this.g;
        if (null === c) return null;
        c = c.Oe(a, function (a)
        {
            for (; null !== a && !(a.R instanceof jh);) a = a.R;
            return a
        });
        return null === c ? null : c.V.zd === b ? c : null
    };
    qg.prototype.isBeyondDragSize = function (a, b)
    {
        var c = this.g;
        if (null === c) return !1;
        void 0 === a && (a = c.Ec.Ce);
        void 0 === b && (b = c.Q.Ce);
        var d = c.Va.SH,
            e = d.width,
            d = d.height;
        c.Ec.Bj && (e += 6, d += 6);
        return Math.abs(b.x - a.x) > e || Math.abs(b.y - a.y) > d
    };
    w.u(qg,
        {
            g: "diagram"
        }, function ()
        {
            return this.aa
        });
    w.defineProperty(qg,
        {
            name: "name"
        }, function ()
        {
            return this.Sb
        }, function (a)
        {
            w.j(a, "string", qg, "name");
            this.Sb = a
        });
    w.defineProperty(qg,
        {
            isEnabled: "isEnabled"
        }, function ()
        {
            return this.jf
        }, function (a)
        {
            w.j(a, "boolean", qg, "isEnabled");
            this.jf = a
        });
    w.defineProperty(qg,
        {
            sa: "isActive"
        }, function ()
        {
            return this.dD
        }, function (a)
        {
            w.j(a, "boolean", qg, "isActive");
            this.dD = a
        });
    w.defineProperty(qg,
        {
            Lf: "transactionResult"
        }, function ()
        {
            return this.kE
        }, function (a)
        {
            null !== a && w.j(a, "string", qg, "transactionResult");
            this.kE = a
        });

    function nh()
    {
        qg.call(this);
        0 < arguments.length && w.nd(nh);
        this.name = "Dragging";
        this.vC = this.hD = !0;
        this.Ur = this.UC = !1;
        this.lD = !0;
        this.uz = (new ia(NaN, NaN)).freeze();
        this.vz = zb;
        this.wz = (new y(NaN, NaN)).freeze();
        this.TC = !1;
        this.uw = this.tw = this.jz = this.sC = this.SC = this.DC = this.fj = null;
        this.zr = this.jD = !1;
        this.qp = new y(NaN, NaN);
        this.Nw = new y;
        this.Qw = !1;
        this.gD = !0;
        this.Bo = 100;
        this.Vj = [];
        this.SG = (new I(R)).freeze()
    }
    w.La(nh, qg);
    w.ga("DraggingTool", nh);
    w.defineProperty(nh,
        {
            zF: "isCopyEnabled"
        }, function ()
        {
            return this.hD
        }, function (a)
        {
            w.j(a, "boolean", nh, "isCopyEnabled");
            this.hD = a
        });
    w.defineProperty(nh,
        {
            GH: "copiesEffectiveCollection"
        }, function ()
        {
            return this.vC
        }, function (a)
        {
            w.j(a, "boolean", nh, "copiesEffectiveCollection");
            this.vC = a
        });
    w.defineProperty(nh,
        {
            TH: "dragsTree"
        }, function ()
        {
            return this.UC
        }, function (a)
        {
            w.j(a, "boolean", nh, "dragsTree");
            this.UC = a
        });
    w.defineProperty(nh,
        {
            Rk: "isGridSnapEnabled"
        }, function ()
        {
            return this.Ur
        }, function (a)
        {
            w.j(a, "boolean", nh, "isGridSnapEnabled");
            this.Ur = a
        });
    w.defineProperty(nh,
        {
            wI: "isComplexRoutingRealtime"
        }, function ()
        {
            return this.gD
        }, function (a)
        {
            w.j(a, "boolean", nh, "isComplexRoutingRealtime");
            this.gD = a
        });
    w.defineProperty(nh,
        {
            BF: "isGridSnapRealtime"
        }, function ()
        {
            return this.lD
        }, function (a)
        {
            w.j(a, "boolean", nh, "isGridSnapRealtime");
            this.lD = a
        });
    w.defineProperty(nh,
        {
            qF: "gridSnapCellSize"
        }, function ()
        {
            return this.uz
        }, function (a)
        {
            w.G(a, ia, nh, "gridSnapCellSize");
            this.uz.L(a) || (this.uz = a = a.S())
        });
    w.defineProperty(nh,
        {
            hI: "gridSnapCellSpot"
        }, function ()
        {
            return this.vz
        }, function (a)
        {
            w.G(a, K, nh, "gridSnapCellSpot");
            this.vz.L(a) || (this.vz = a = a.S())
        });
    w.defineProperty(nh,
        {
            iI: "gridSnapOrigin"
        }, function ()
        {
            return this.wz
        }, function (a)
        {
            w.G(a, y, nh, "gridSnapOrigin");
            this.wz.L(a) || (this.wz = a = a.S())
        });
    w.defineProperty(nh,
        {
            uj: "dragsLink"
        }, function ()
        {
            return this.TC
        }, function (a)
        {
            w.j(a, "boolean", nh, "dragsLink");
            this.TC = a
        });
    w.defineProperty(nh,
        {
            wn: "currentPart"
        }, function ()
        {
            return this.DC
        }, function (a)
        {
            null !== a && w.G(a, R, nh, "currentPart");
            this.DC = a
        });
    w.defineProperty(nh,
        {
            ec: "copiedParts"
        }, function ()
        {
            return this.sC
        }, function (a)
        {
            this.sC = a
        });
    w.defineProperty(nh,
        {
            $b: "draggedParts"
        }, function ()
        {
            return this.SC
        }, function (a)
        {
            this.SC = a
        });
    w.u(nh,
        {
            aL: "draggingParts"
        }, function ()
        {
            return null !== this.ec ? this.ec.Nj() : null !== this.$b ? this.$b.Nj() : this.SG
        });
    w.defineProperty(nh,
        {
            ld: "draggedLink"
        }, function ()
        {
            return this.jz
        }, function (a)
        {
            null !== a && w.G(a, W, nh, "draggedLink");
            this.jz !== a && (this.jz = a, null !== a ? (this.tw = a.kc, this.uw = a.Ic) : this.uw = this.tw = null)
        });
    w.defineProperty(nh,
        {
            Kx: "isDragOutStarted"
        }, function ()
        {
            return this.jD
        }, function (a)
        {
            this.jD = a
        });
    w.defineProperty(nh,
        {
            Uk: "startPoint"
        }, function ()
        {
            return this.Nw
        }, function (a)
        {
            w.G(a, y, nh, "startPoint");
            this.Nw.L(a) || (this.Nw = a = a.S())
        });
    w.defineProperty(nh,
        {
            QE: "delay"
        }, function ()
        {
            return this.Bo
        }, function (a)
        {
            w.j(a, "number", nh, "delay");
            this.Bo = a
        });
    nh.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        if (null === a || a.ib && !a.Nt || !a.Pl && !a.Ck && !a.Nt || !a.Af) return !1;
        var b = a.Q;
        return !b.left || a.Xa !== this && (!this.isBeyondDragSize() || b.Bj && b.timestamp - a.Ec.timestamp < this.Bo) ? !1 : null !== this.findDraggablePart()
    };
    nh.prototype.findDraggablePart = function ()
    {
        var a = this.g;
        if (null === a) return null;
        a = a.au(a.Ec.da, !1);
        if (null === a) return null;
        for (; null !== a && !a.canSelect();) a = a.Da;
        return null !== a && (a.canMove() || a.canCopy()) ? a : null
    };
    nh.prototype.standardMouseSelect = function ()
    {
        var a = this.g;
        if (null !== a && a.Af)
        {
            var b = a.au(a.Ec.da, !1);
            if (null !== b)
            {
                for (; null !== b && !b.canSelect();) b = b.Da;
                this.wn = b;
                this.wn.jb || (a.Aa("ChangingSelection"), b = a.Q, (w.yh ? b.Fu : b.control) || b.shift || mh(a), this.wn.jb = !0, a.Aa("ChangedSelection"))
            }
        }
    };
    nh.prototype.doActivate = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            null === this.wn && this.standardMouseSelect();
            var b = this.wn;
            null !== b && (b.canMove() || b.canCopy()) && (this.sa = !0, this.qp.set(a.position), Qh(this, a.selection), this.Vj.length = 0, this.$b = this.computeEffectiveCollection(a.selection), a.av = !0, Rh(this, this.$b), this.Kb("Drag"), this.Uk = a.Ec.da, a.ef = !0, a.Nt && (this.Kx = !0, this.zr = !1, Sh = this, Th = this.g, this.doSimulatedDragOut()))
        }
    };

    function Qh(a, b)
    {
        if (a.uj)
        {
            var c = a.g;
            null !== c && c.mn && (c.$ instanceof Q && 1 === b.count && b.first() instanceof W ? (a.ld = b.first(), a.ld.canRelinkFrom() && a.ld.canRelinkTo() && a.ld.Qt(), a.fj = c.Va.$F, null === a.fj && (a.fj = new Uh, a.fj.Sc(c))) : (a.ld = null, a.fj = null))
        }
    }
    nh.prototype.computeEffectiveCollection = function (a)
    {
        var b = null !== this.g && this.g.Xa === this,
            c = new ma(R);
        if (null === a) return c;
        for (var d = a.i; d.next();) Vh(this, c, d.value, b);
        if (null !== this.ld && this.uj) return c;
        for (d = a.i; d.next();) a = d.value, a instanceof W && (b = a.Y, null === b || c.contains(b) ? (b = a.Z, null === b || c.contains(b) || c.remove(a)) : c.remove(a));
        return c
    };

    function Wh(a, b)
    {
        return void 0 === b ? new Xh(cd) : a.Rk ? new Xh(new y(Math.round(b.x), Math.round(b.y))) : new Xh(b.copy())
    }

    function Vh(a, b, c, d)
    {
        if (!b.contains(c) && (!d || c.canMove() || c.canCopy()))
            if (c instanceof T)
            {
                b.add(c, Wh(a, c.location));
                if (c instanceof V)
                    for (var e = c.vc; e.next();) Vh(a, b, e.value, d);
                for (e = c.je; e.next();)
                {
                    var f = e.value;
                    if (!b.contains(f))
                    {
                        var h = f.Y,
                            k = f.Z;
                        null !== h && b.contains(h) && null !== k && b.contains(k) && Vh(a, b, f, d)
                    }
                }
                if (a.TH)
                    for (c = c.dF(); c.next();) Vh(a, b, c.value, d)
            }
            else if (c instanceof W)
                for (f = c, b.add(f, Wh(a)), c = f.Ef; c.next();) Vh(a, b, c.value, d);
            else c instanceof jh || b.add(c, Wh(a, c.location))
    }
    nh.prototype.doDeactivate = function ()
    {
        this.sa = !1;
        var a = this.g;
        null !== a && Yh(a);
        Zh(this);
        $h(this, this.$b);
        this.$b = this.wn = null;
        this.zr = this.Kx = !1;
        if (0 < ai.count)
        {
            for (var b = ai.length, c = 0; c < b; c++)
            {
                var d = ai.ea(c);
                bi(d);
                ci(d);
                Zh(d);
                null !== d.g && Yh(d.g)
            }
            ai.clear()
        }
        bi(this);
        this.qp.m(NaN, NaN);
        Sh = Th = null;
        ci(this);
        a.ef = !1;
        a.ic = "";
        a.av = !1;
        this.Vk()
    };

    function Zh(a)
    {
        var b = a.g;
        if (null !== b)
        {
            var c = b.fb;
            b.fb = !0;
            di(a, b.Q, null);
            b.fb = c
        }
        a.Vj.length = 0
    }

    function ei()
    {
        var a = Sh;
        ci(a);
        fi(a);
        var b = a.g;
        null !== b && a.qp.I() && (b.position = a.qp);
        null !== b && Yh(b)
    }
    nh.prototype.doCancel = function ()
    {
        ci(this);
        fi(this);
        var a = this.g;
        null !== a && this.qp.I() && (a.position = this.qp);
        this.stopTool()
    };

    function Rh(a, b)
    {
        if (null !== b)
        {
            a.Qw = !0;
            for (var c = b.i; c.next();)
            {
                var d = c.key;
                d instanceof W && (d.vi = !0)
            }
        }
    }

    function $h(a, b)
    {
        if (null !== b)
        {
            for (var c = b.i; c.next();)
            {
                var d = c.key;
                d instanceof W && (d.vi = !1, gi(d) && d.Wb())
            }
            a.Qw = !1
        }
    }
    nh.prototype.doKeyDown = function ()
    {
        var a = this.g;
        null !== a && (a = a.Q, null !== a && this.sa && ("Esc" === a.key ? this.doCancel() : this.doMouseMove()))
    };
    nh.prototype.doKeyUp = function ()
    {
        var a = this.g;
        null !== a && null !== a.Q && this.sa && this.doMouseMove()
    };

    function hi(a, b)
    {
        for (var c = Infinity, d = Infinity, e = -Infinity, f = -Infinity, h = a.i; h.next();)
        {
            var k = h.value;
            if (k.he() && k.isVisible())
            {
                var l = k.location,
                    k = l.x,
                    l = l.y;
                isNaN(k) || isNaN(l) || (k < c && (c = k), l < d && (d = l), k > e && (e = k), l > f && (f = l))
            }
        }
        Infinity === c ? b.m(0, 0, 0, 0) : b.m(c, d, e - c, f - d)
    }

    function ri(a, b)
    {
        if (null === a.ec)
        {
            var c = a.g;
            if (!(null === c || b && (c.ib || c.Df)) && null !== a.$b)
            {
                var d = c.ja;
                d.isEnabled && d.DF ? null !== d.sj && 0 < d.sj.Wf.count && (c.ja.km(), c.Kb("Drag")) : fi(a);
                c.fb = !b;
                c.Nq = !b;
                a.Uk = c.Ec.da;
                d = a.GH ? a.$b.Nj() : c.selection;
                d = c.Op(d, c, !0);
                for (c = d.i; c.next();) c.value.location = c.key.location;
                c = w.Kf();
                hi(d, c);
                w.Hb(c);
                for (var c = new ma(R), e = a.$b.i; e.next();)
                {
                    var f = e.key;
                    f.he() && f.canCopy() && (f = d.ka(f), null !== f && (f.af(), c.add(f, Wh(a, f.location))))
                }
                for (d = d.i; d.next();) e = d.value, e instanceof
                W && e.canCopy() && c.add(e, Wh(a));
                a.ec = c;
                Qh(a, c.Nj());
                null !== a.ld && (c = a.ld, d = c.Yn, c.Fj(a.Uk.x - (d.x + d.width / 2), a.Uk.y - (d.y + d.height / 2)))
            }
        }
    }

    function ci(a)
    {
        var b = a.g;
        if (null !== b)
        {
            if (null !== a.ec && (b.sB(a.ec.Nj(), !1), a.ec = null, null !== a.$b))
                for (var c = a.$b.i; c.next();) c.key instanceof W && (c.value.point = new y(0, 0));
            b.fb = !1;
            b.Nq = !1;
            a.Uk = b.Ec.da
        }
    }

    function bi(a)
    {
        if (null !== a.ld)
        {
            if (a.uj && null !== a.fj)
            {
                var b = a.fj;
                null !== b.g && (b.g.remove(b.Vd), b.g.remove(b.Wd))
            }
            a.ld = null;
            a.fj = null
        }
    }

    function Ei(a, b, c)
    {
        var d = a.g;
        if (null !== d)
        {
            var e = a.Uk,
                f = w.K();
            f.assign(d.Q.da);
            a.moveParts(b, f.ui(e), c);
            w.v(f)
        }
    }
    nh.prototype.moveParts = function (a, b, c)
    {
        if (null !== a && (w.G(a, ma, nh, "moveParts:parts"), 0 !== a.count))
        {
            var d = w.K(),
                e = w.K();
            e.assign(b);
            isNaN(e.x) && (e.x = 0);
            isNaN(e.y) && (e.y = 0);
            (b = this.Qw) || Rh(this, a);
            for (var f = new H(Fi), h = new H(Ca), k = a.i; k.next();)
            {
                var l = k.key;
                if (l.he())
                {
                    var m = Gi(this, l, a);
                    if (null !== m) f.add(new Fi(l, k.value, m));
                    else if (!c || l.canMove())
                    {
                        var n = k.value.point;
                        d.assign(n);
                        var m = new y,
                            p = this.computeMove(l, d.add(e), a, m);
                        l.location = p;
                        k.value.tG = m.ui(n)
                    }
                }
                else k.key instanceof W && h.add(k.Wa)
            }
            for (m =
                     f.i; m.next();) c = m.value, n = c.info.point, d.assign(n), c.Qc.location = d.add(c.jI.tG);
            c = w.K();
            n = w.K();
            for (h = h.i; h.next();)
                if (k = h.value, f = k.key, f instanceof W)
                    if (f.vi)
                        if (m = f.Y, l = f.Z, null !== this.ld && this.uj)
                            if (k = k.value.point, null === f.vx) a.add(f, Wh(this, e)), l = e.x - k.x, k = e.y - k.y, f.Fj(l, k);
                            else
                            {
                                p = w.K();
                                p.assign(f.location);
                                m = w.K();
                                m.assign(p);
                                m.add(e);
                                var q = m;
                                this.Rk && (this.BF || this.g.Q.up) && (q = w.K(), Hi(this, f, m, q));
                                m.assign(f.vx(f, m, q));
                                m.ui(p);
                                a.add(f, Wh(this, m));
                                l = m.x - k.x;
                                k = m.y - k.y;
                                f.Fj(l, k);
                                w.v(p);
                                w.v(m);
                                q !== m && w.v(q)
                            }
                        else null !== m && (c.assign(m.location), p = a.ka(m), null !== p && c.ui(p.point)), null !== l && (n.assign(l.location), p = a.ka(l), null !== p && n.ui(p.point)), null !== m && null !== l ? c.Oc(n) ? (k = k.value.point, m = d, m.assign(c), m.ui(k), a.add(f, Wh(this, c)), f.Fj(m.x, m.y)) : (f.vi = !1, f.Wb()) : (k = k.value.point, m = null !== m ? c : null !== l ? n : e, a.add(f, Wh(this, m)), l = m.x - k.x, k = m.y - k.y, f.Fj(l, k));
                    else if (null === f.Y || null === f.Z) k = k.value.point, a.add(f, Wh(this, e)), l = e.x - k.x, k = e.y - k.y, f.Fj(l, k);
            w.v(d);
            w.v(e);
            w.v(c);
            w.v(n);
            b || (Ii(this.g),
                $h(this, a))
        }
    };

    function Gi(a, b, c)
    {
        b = b.Da;
        if (null !== b)
        {
            a = Gi(a, b, c);
            if (null !== a) return a;
            a = c.ka(b);
            if (null !== a) return a
        }
        return null
    }

    function fi(a)
    {
        if (null !== a.$b)
        {
            for (var b = a.g, c = a.$b.i; c.next();)
            {
                var d = c.key;
                d.he() && (d.location = c.value.point)
            }
            for (c = a.$b.i; c.next();)
                if (d = c.key, d instanceof W && d.vi)
                {
                    var e = c.value.point;
                    a.$b.add(d, Wh(a));
                    d.Fj(-e.x, -e.y)
                }
            b.cg()
        }
    }

    function Hi(a, b, c, d)
    {
        d.assign(c);
        if (null !== b && (b = a.g, null !== b))
        {
            var e = b.En,
                f = a.qF;
            b = f.width;
            var f = f.height,
                h = a.iI,
                k = h.x,
                h = h.y;
            a = a.hI;
            if (null !== e)
            {
                var l = e.Hx;
                isNaN(b) && (b = l.width);
                isNaN(f) && (f = l.height);
                e = e.pF;
                isNaN(k) && (k = e.x);
                isNaN(h) && (h = e.y)
            }
            e = w.xb(0, 0);
            e.Zu(0, 0, b, f, a);
            Na(c.x, c.y, k + e.x, h + e.y, b, f, d);
            w.v(e)
        }
    }
    nh.prototype.computeMove = function (a, b, c, d)
    {
        void 0 === d && (d = new y);
        d.assign(b);
        if (null === a) return d;
        void 0 === c && (c = null);
        var e = b;
        this.Rk && (this.BF || null === c || null !== this.g && this.g.Q.up) && (e = w.K(), Hi(this, a, b, e));
        c = null !== a.vx ? a.vx(a, b, e) : e;
        var f = a.ZI,
            h = f.x;
        isNaN(h) && (h = a.location.x);
        f = f.y;
        isNaN(f) && (f = a.location.y);
        var k = a.TI,
            l = k.x;
        isNaN(l) && (l = a.location.x);
        k = k.y;
        isNaN(k) && (k = a.location.y);
        d.m(Math.max(h, Math.min(c.x, l)), Math.max(f, Math.min(c.y, k)));
        e !== b && w.v(e);
        return d
    };

    function Ji(a, b)
    {
        if (null === b) return !0;
        var c = b.V;
        return null === c || c instanceof jh || c.layer.Pc || a.$b && a.$b.contains(c) || a.ec && a.ec.contains(c) ? !0 : !1
    }

    function Ki(a, b)
    {
        var c = a.g;
        if (null !== c)
        {
            a.uj && (null !== a.ld && (a.ld.Y = null, a.ld.Z = null), Li(a, !1));
            var d = Mi(c, b, null, function (b)
                {
                    return !Ji(a, b)
                }),
                e = c.Q;
            e.Be = d;
            var f = c.fb,
                h = !1;
            try
            {
                c.fb = !0;
                h = di(a, e, d);
                if (!a.sa && null === Sh) return;
                if (null === d)
                {
                    var k = c.cJ;
                    null !== k && (k(e), h = !0)
                }
                if (!a.sa && null === Sh) return;
                a.doDragOver(b, d);
                if (!a.sa && null === Sh) return
            }
            finally
            {
                c.fb = f, h && c.cg()
            }(c.re || c.se) && c.yA(e.Ce)
        }
    }

    function di(a, b, c)
    {
        var d = !1,
            e = a.Vj.length,
            f = 0 < e ? a.Vj[0] : null;
        if (c === f) return !1;
        b.tc = !1;
        for (var h = 0; h < e; h++)
        {
            var k = a.Vj[h],
                l = k.bJ;
            if (null !== l && (l(b, k, c), d = !0, b.tc)) break
        }
        a.Vj.length = 0;
        if (!a.sa && null === Sh || null === c) return d;
        for (b.tc = !1; null !== c;) a.Vj.push(c), c = Ni(c);
        e = a.Vj.length;
        for (h = 0; h < e && (k = a.Vj[h], l = k.aJ, null === l || (l(b, k, f), d = !0, !b.tc)); h++);
        return d
    }

    function Ni(a)
    {
        var b = a.R;
        return null !== b ? b : a instanceof R && !(a instanceof V) && (a = a.Da, null !== a && a.mI) ? a : null
    }

    function Oi(a, b, c)
    {
        var d = a.fj;
        if (null === d) return null;
        var e = a.g.yn(b, d.YF, function (a)
        {
            return d.findValidLinkablePort(a, c)
        });
        a = w.K();
        for (var f = Infinity, h = null, e = e.i; e.next();)
        {
            var k = e.value;
            if (null !== k.V)
            {
                var l = k.Ya(Jb, a),
                    l = b.Bf(l);
                l < f && (h = k, f = l)
            }
        }
        w.v(a);
        return h
    }

    function Li(a, b)
    {
        var c = a.ld;
        if (null !== c && !(2 > c.qa))
        {
            var d = a.g;
            if (null !== d && !d.ib)
            {
                var e = a.fj;
                if (null !== e)
                {
                    var f = null,
                        h = null;
                    null === c.Y && (f = Oi(a, c.l(0), !1), null !== f && (h = f.V));
                    var k = null,
                        l = null;
                    null === c.Z && (k = Oi(a, c.l(c.qa - 1), !0), null !== k && (l = k.V));
                    e.isValidLink(h, f, l, k) ? b ? (c.Pp = c.l(0), c.Qp = c.l(c.qa - 1), c.vi = !1, c.Y = h, null !== f && (c.Mg = f.le), c.Z = l, null !== k && (c.Ih = k.le), c.kc !== a.tw && d.Aa("LinkRelinked", c, a.tw), c.Ic !== a.uw && d.Aa("LinkRelinked", c, a.uw)) : Pi(e, h, f, l, k) : Pi(e, null, null, null, null)
                }
            }
        }
    }
    nh.prototype.doDragOver = function () {};

    function Qi(a, b)
    {
        var c = a.g;
        if (null !== c)
        {
            a.uj && Li(a, !0);
            Zh(a);
            var d = Mi(c, b, null, function (b)
                {
                    return !Ji(a, b)
                }),
                e = c.Q;
            e.Be = d;
            if (null !== d)
            {
                e.tc = !1;
                for (var f = d; null !== f;)
                {
                    var h = f.eB;
                    if (null !== h && (h(e, f), e.tc)) break;
                    f = Ni(f)
                }
            }
            else f = c.eB, null !== f && f(e);
            if (a.sa || null !== Sh)
            {
                for (e = (a.ec || a.$b).i; e.next();) f = e.key, f instanceof T && f.je.each(function (a)
                {
                    a.vi = !1
                });
                a.doDropOnto(b, d);
                if (a.sa || null !== Sh)
                {
                    d = w.Kf();
                    for (e = c.selection.i; e.next();) f = e.value, f instanceof T && Ri(c, f.getAvoidableRect(d));
                    w.Hb(d)
                }
            }
        }
    }

    function Ri(a, b)
    {
        var c = !1;
        a.sb.Fk(b) && (c = !0);
        c = a.BA(b, function (a)
        {
            return a.V
        }, function (a)
        {
            return a instanceof W
        }, !0, function (a)
        {
            return a instanceof W
        }, c);
        if (0 !== c.count)
            for (c = c.i; c.next();)
            {
                var d = c.value;
                d.dm && d.Wb()
            }
    }
    nh.prototype.doDropOnto = function () {};
    nh.prototype.doMouseMove = function ()
    {
        if (this.sa)
        {
            var a = this.g;
            null !== a && null !== this.wn && null !== this.$b && (this.mayCopy() ? (a.ic = "copy", ri(this, !1), Rh(this, this.ec), Ei(this, this.ec, !1), $h(this, this.ec)) : this.mayMove() ? (ci(this), Ei(this, this.$b, !0)) : this.mayDragOut() ? (a.ic = "no-drop", ri(this, !1), Ei(this, this.ec, !1)) : ci(this), Ki(this, a.Q.da))
        }
    };
    nh.prototype.doMouseUp = function ()
    {
        if (this.sa)
        {
            var a = this.g;
            if (null !== a)
            {
                var b = !1,
                    c = this.mayCopy();
                c && null !== this.ec ? (ci(this), ri(this, !0), Rh(this, this.ec), Ei(this, this.ec, !1), $h(this, this.ec), null !== this.ec && a.oG(this.ec.Nj())) : (b = !0, ci(this), this.mayMove() && (Ei(this, this.$b, !0), Ki(this, a.Q.da)));
                this.zr = !0;
                Qi(this, a.Q.da);
                if (this.sa)
                {
                    this.ec = null;
                    if (b && null !== this.$b)
                        for (b = this.$b.i; b.next();)
                        {
                            var d = b.key;
                            d instanceof T && (d = d.Da, null === d || null === d.placeholder || this.$b.contains(d) || d.placeholder.H())
                        }
                    a.Fc();
                    $h(this, this.$b);
                    this.Lf = c ? "Copy" : "Move";
                    a.Aa(c ? "SelectionCopied" : "SelectionMoved", a.selection)
                }
                this.stopTool()
            }
        }
    };
    nh.prototype.mayCopy = function ()
    {
        if (!this.zF) return !1;
        var a = this.g;
        if (null === a || a.ib || a.Df || !a.Fp || !a.Ck || (w.yh ? !a.Q.alt : !a.Q.control)) return !1;
        for (a = a.selection.i; a.next();)
        {
            var b = a.value;
            if (b.he() && b.canCopy()) return !0
        }
        return null !== this.ld && this.uj && this.ld.canCopy() ? !0 : !1
    };
    nh.prototype.mayDragOut = function ()
    {
        if (!this.zF) return !1;
        var a = this.g;
        if (null === a || !a.Nt || !a.Ck || a.Pl) return !1;
        for (a = a.selection.i; a.next();)
        {
            var b = a.value;
            if (b.he() && b.canCopy()) return !0
        }
        return null !== this.ld && this.uj && this.ld.canCopy() ? !0 : !1
    };
    nh.prototype.mayMove = function ()
    {
        var a = this.g;
        if (null === a || a.ib || !a.Pl) return !1;
        for (a = a.selection.i; a.next();)
        {
            var b = a.value;
            if (b.he() && b.canMove()) return !0
        }
        return null !== this.ld && this.uj && this.ld.canMove() ? !0 : !1
    };
    var ai = new H(nh),
        Sh = null,
        Th = null;
    nh.prototype.getDraggingSource = function ()
    {
        return Sh
    };
    nh.prototype.mayDragIn = function ()
    {
        var a = this.g;
        if (null === a || !a.yE || a.ib || a.Df || !a.Fp) return !1;
        var b = Sh;
        return null === b || null === b.g || b.g.$.Wl !== a.$.Wl ? !1 : !0
    };
    nh.prototype.doSimulatedDragEnter = function ()
    {
        if (this.mayDragIn())
        {
            var a = this.g;
            a.Ka.Hh();
            Si(a);
            a.Ka.Hh();
            a = Sh;
            null !== a && null !== a.g && (a.g.ic = "copy")
        }
    };
    nh.prototype.doSimulatedDragLeave = function ()
    {
        var a = Sh;
        null !== a && a.doSimulatedDragOut();
        this.doCancel()
    };
    nh.prototype.doSimulatedDragOver = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = Sh;
            null !== b && null !== b.$b && this.mayDragIn() && (a.ic = "copy", Ti(this, b.$b.Nj(), !1), Ei(this, this.ec, !1), Ki(this, a.Q.da))
        }
    };
    nh.prototype.doSimulatedDrop = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = Sh;
            if (null !== b)
            {
                var c = b.g;
                b.zr = !0;
                ci(this);
                this.mayDragIn() && (this.Kb("Drop"), Ti(this, b.$b.Nj(), !0), Ei(this, this.ec, !1), null !== this.ec && a.oG(this.ec.Nj()), Qi(this, a.Q.da), a.Fc(), b = a.selection, null !== this.ec ? this.Lf = "ExternalCopy" : b = new I(R), this.ec = null, a.doFocus(), a.Aa("ExternalObjectsDropped", b, c), this.Vk())
            }
        }
    };

    function Ti(a, b, c)
    {
        if (null === a.ec)
        {
            var d = a.g;
            if (null !== d && !d.ib && !d.Df)
            {
                d.fb = !c;
                d.Nq = !c;
                a.Uk = d.Q.da;
                c = d.Op(b, d, !0);
                var e = w.Kf();
                hi(b, e);
                var d = e.x + e.width / 2,
                    f = e.y + e.height / 2;
                w.Hb(e);
                var e = a.Nw,
                    h = new ma(R),
                    k = w.K();
                for (b = b.i; b.next();)
                {
                    var l = b.value,
                        m = c.ka(l);
                    l.he() && l.canCopy() ? (l = l.location, k.m(e.x - (d - l.x), e.y - (f - l.y)), m.location = k, m.af(), h.add(m, Wh(a, k))) : l instanceof W && l.canCopy() && (m.Fj(e.x - d, e.y - f), h.add(m, Wh(a)))
                }
                w.v(k);
                a.ec = h;
                Qh(a, h.Nj());
                null !== a.ld && (c = a.ld, d = c.Yn, c.Fj(a.Uk.x - (d.x + d.width /
                    2), a.Uk.y - (d.y + d.height / 2)))
            }
        }
    }
    nh.prototype.doSimulatedDragOut = function ()
    {
        var a = this.g;
        null !== a && (this.mayCopy() || this.mayMove() ? a.ic = "" : a.ic = "no-drop")
    };

    function Xh(a)
    {
        this.point = a;
        this.tG = cd
    }
    w.ga("DraggingInfo", Xh);

    function Fi(a, b, c)
    {
        this.Qc = a;
        this.info = b;
        this.jI = c
    }

    function Ui()
    {
        0 < arguments.length && w.nd(Ui);
        qg.call(this);
        this.LD = 100;
        this.oD = !1;
        var a = new W,
            b = new X;
        b.ff = !0;
        b.stroke = "blue";
        a.add(b);
        b = new X;
        b.Gq = "Standard";
        b.fill = "blue";
        b.stroke = "blue";
        a.add(b);
        a.ag = "Tool";
        this.eE = a;
        a = new T;
        b = new X;
        b.le = "";
        b.Gb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        b.mb = 2;
        b.Ca = rd;
        a.add(b);
        a.lm = !1;
        a.ag = "Tool";
        this.cE = a;
        this.dE = b;
        a = new T;
        b = new X;
        b.le = "";
        b.Gb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        b.mb = 2;
        b.Ca = rd;
        a.add(b);
        a.lm = !1;
        a.ag = "Tool";
        this.fE = a;
        this.gE = b;
        this.KD = this.JD =
            this.ED = this.DD = this.FD = null;
        this.kD = !0;
        this.fH = new ma(G, "boolean");
        this.MD = this.zl = this.$D = null
    }
    w.La(Ui, qg);
    w.ga("LinkingBaseTool", Ui);
    Ui.prototype.doStop = function ()
    {
        var a = this.g;
        null !== a && Yh(a);
        this.Sg = this.Rg = this.Qg = this.Pg = this.lc = null;
        this.Ey.clear();
        this.Jf = null
    };
    w.defineProperty(Ui,
        {
            YF: "portGravity"
        }, function ()
        {
            return this.LD
        }, function (a)
        {
            w.j(a, "number", Ui, "portGravity");
            0 <= a && (this.LD = a)
        });
    w.defineProperty(Ui,
        {
            fq: "isUnconnectedLinkValid"
        }, function ()
        {
            return this.oD
        }, function (a)
        {
            w.j(a, "boolean", Ui, "isUnconnectedLinkValid");
            this.oD = a
        });
    w.defineProperty(Ui,
        {
            vf: "temporaryLink"
        }, function ()
        {
            return this.eE
        }, function (a)
        {
            w.G(a, W, Ui, "temporaryLink");
            this.eE = a
        });
    w.defineProperty(Ui,
        {
            Vd: "temporaryFromNode"
        }, function ()
        {
            return this.cE
        }, function (a)
        {
            w.G(a, T, Ui, "temporaryFromNode");
            this.cE = a
        });
    w.defineProperty(Ui,
        {
            bo: "temporaryFromPort"
        }, function ()
        {
            return this.dE
        }, function (a)
        {
            w.G(a, G, Ui, "temporaryFromPort");
            this.dE = a
        });
    w.defineProperty(Ui,
        {
            Wd: "temporaryToNode"
        }, function ()
        {
            return this.fE
        }, function (a)
        {
            w.G(a, T, Ui, "temporaryToNode");
            this.fE = a
        });
    w.defineProperty(Ui,
        {
            co: "temporaryToPort"
        }, function ()
        {
            return this.gE
        }, function (a)
        {
            w.G(a, G, Ui, "temporaryToPort");
            this.gE = a
        });
    w.defineProperty(Ui,
        {
            lc: "originalLink"
        }, function ()
        {
            return this.FD
        }, function (a)
        {
            null !== a && w.G(a, W, Ui, "originalLink");
            this.FD = a
        });
    w.defineProperty(Ui,
        {
            Pg: "originalFromNode"
        }, function ()
        {
            return this.DD
        }, function (a)
        {
            null !== a && w.G(a, T, Ui, "originalFromNode");
            this.DD = a
        });
    w.defineProperty(Ui,
        {
            Qg: "originalFromPort"
        }, function ()
        {
            return this.ED
        }, function (a)
        {
            null !== a && w.G(a, G, Ui, "originalFromPort");
            this.ED = a
        });
    w.defineProperty(Ui,
        {
            Rg: "originalToNode"
        }, function ()
        {
            return this.JD
        }, function (a)
        {
            null !== a && w.G(a, T, Ui, "originalToNode");
            this.JD = a
        });
    w.defineProperty(Ui,
        {
            Sg: "originalToPort"
        }, function ()
        {
            return this.KD
        }, function (a)
        {
            null !== a && w.G(a, G, Ui, "originalToPort");
            this.KD = a
        });
    w.defineProperty(Ui,
        {
            Sd: "isForwards"
        }, function ()
        {
            return this.kD
        }, function (a)
        {
            w.j(a, "boolean", Ui, "isForwards");
            this.kD = a
        });
    w.u(Ui,
        {
            Ey: "validPortsCache"
        }, function ()
        {
            return this.fH
        });
    w.defineProperty(Ui,
        {
            Jf: "targetPort"
        }, function ()
        {
            return this.$D
        }, function (a)
        {
            null !== a && w.G(a, G, Ui, "targetPort");
            this.$D = a
        });
    Ui.prototype.copyPortProperties = function (a, b, c, d, e)
    {
        if (null !== a && null !== b && null !== c && null !== d)
        {
            d.Ca = b.U.size;
            e ? (d.Cb = b.Cb, d.sm = b.sm) : (d.Bb = b.Bb, d.Zl = b.Zl);
            c.Ff = Jb;
            var f = w.K();
            c.location = b.Ya(Jb, f);
            w.v(f);
            d.angle = b.$l();
            null !== this.iy && this.iy(a, b, c, d, e)
        }
    };
    Ui.prototype.setNoTargetPortProperties = function (a, b, c)
    {
        null !== b && (b.Ca = rd, b.Bb = yb, b.Cb = yb);
        null !== a && null !== this.g && (a.location = this.g.Q.da);
        null !== this.iy && this.iy(null, null, a, b, c)
    };
    Ui.prototype.doMouseDown = function ()
    {
        this.sa && this.doMouseMove()
    };
    Ui.prototype.doMouseMove = function ()
    {
        if (this.sa)
        {
            var a = this.g;
            if (null !== a)
            {
                this.Jf = this.findTargetPort(this.Sd);
                if (null !== this.Jf && this.Jf.V instanceof T)
                {
                    var b = this.Jf.V;
                    this.Sd ? this.copyPortProperties(b, this.Jf, this.Wd, this.co, !0) : this.copyPortProperties(b, this.Jf, this.Vd, this.bo, !1)
                }
                else this.Sd ? this.setNoTargetPortProperties(this.Wd, this.co, !0) : this.setNoTargetPortProperties(this.Vd, this.bo, !1);
                (a.re || a.se) && a.yA(a.Q.Ce)
            }
        }
    };
    Ui.prototype.findValidLinkablePort = function (a, b)
    {
        if (null === a) return null;
        var c = a.V;
        if (!(c instanceof T)) return null;
        for (; null !== a;)
        {
            var d = b ? a.BG : a.fF;
            if (!0 === d && (null !== a.le || a instanceof T) && (b ? this.isValidTo(c, a) : this.isValidFrom(c, a))) return a;
            if (!1 === d) break;
            a = a.R
        }
        return null
    };
    Ui.prototype.findTargetPort = function (a)
    {
        var b = this.g,
            c = b.Q.da,
            d = this.YF;
        0 >= d && (d = .1);
        for (var e = this, f = b.yn(c, d, function (b)
        {
            return e.findValidLinkablePort(b, a)
        }, null, !0), d = Infinity, b = null, f = f.i; f.next();)
        {
            var h = f.value,
                k = h.V;
            if (k instanceof T)
            {
                var l = h.Ya(Jb, w.K()),
                    m = c.x - l.x,
                    n = c.y - l.y;
                w.v(l);
                l = m * m + n * n;
                l < d && (m = this.Ey.ka(h), null !== m ? m && (b = h, d = l) : a && this.isValidLink(this.Pg, this.Qg, k, h) || !a && this.isValidLink(k, h, this.Rg, this.Sg) ? (this.Ey.add(h, !0), b = h, d = l) : this.Ey.add(h, !1))
            }
        }
        return null !== b && (c = b.V,
        c instanceof T && (null === c.layer || c.layer.Ot)) ? b : null
    };
    Ui.prototype.isValidFrom = function (a, b)
    {
        if (null === a || null === b) return this.fq;
        if (null !== this.g && this.g.Xa === this && (null !== a.layer && !a.layer.Ot || !0 !== b.fF)) return !1;
        var c = b.EA;
        if (Infinity > c)
        {
            if (null !== this.lc && a === this.Pg && b === this.Qg) return !0;
            var d = b.le;
            null === d && (d = "");
            if (a.Cx(d).count >= c) return !1
        }
        return !0
    };
    Ui.prototype.isValidTo = function (a, b)
    {
        if (null === a || null === b) return this.fq;
        if (null !== this.g && this.g.Xa === this && (null !== a.layer && !a.layer.Ot || !0 !== b.BG)) return !1;
        var c = b.VJ;
        if (Infinity > c)
        {
            if (null !== this.lc && a === this.Rg && b === this.Sg) return !0;
            var d = b.le;
            null === d && (d = "");
            if (a.Lg(d).count >= c) return !1
        }
        return !0
    };
    Ui.prototype.isInSameNode = function (a, b)
    {
        if (null === a || null === b) return !1;
        if (a === b) return !0;
        var c = a.V,
            d = b.V;
        return null !== c && c === d
    };
    Ui.prototype.isLinked = function (a, b)
    {
        if (null === a || null === b) return !1;
        var c = a.V;
        if (!(c instanceof T)) return !1;
        var d = a.le;
        null === d && (d = "");
        var e = b.V;
        if (!(e instanceof T)) return !1;
        var f = b.le;
        null === f && (f = "");
        for (e = e.Lg(f); e.next();)
            if (f = e.value, f.Y === c && f.Mg === d) return !0;
        return !1
    };
    Ui.prototype.isValidLink = function (a, b, c, d)
    {
        if (!this.isValidFrom(a, b) || !this.isValidTo(c, d) || !(null === b || null === d || (b.$H && d.UJ || !this.isInSameNode(b, d)) && (b.ZH && d.TJ || !this.isLinked(b, d))) || null !== this.lc && (null !== a && this.isLabelDependentOnLink(a, this.lc) || null !== c && this.isLabelDependentOnLink(c, this.lc)) || null !== a && null !== c && (null === a.data && null !== c.data || null !== a.data && null === c.data) || !this.isValidCycle(a, c, this.lc)) return !1;
        if (null !== a)
        {
            var e = a.Vx;
            if (null !== e && !e(a, b, c, d, this.lc)) return !1
        }
        if (null !==
            c && (e = c.Vx, null !== e && !e(a, b, c, d, this.lc))) return !1;
        e = this.Vx;
        return null !== e ? e(a, b, c, d, this.lc) : !0
    };
    Ui.prototype.isLabelDependentOnLink = function (a, b)
    {
        if (null === a) return !1;
        var c = a.Xb;
        if (null === c) return !1;
        if (c === b) return !0;
        var d = new I(T);
        d.add(a);
        return Vi(this, c, b, d)
    };

    function Vi(a, b, c, d)
    {
        if (b === c) return !0;
        var e = b.Y;
        if (null !== e && e.Cf && (d.add(e), Vi(a, e.Xb, c, d))) return !0;
        b = b.Z;
        return null !== b && b.Cf && (d.add(b), Vi(a, b.Xb, c, d)) ? !0 : !1
    }
    Ui.prototype.isValidCycle = function (a, b, c)
    {
        void 0 === c && (c = null);
        if (null === a || null === b) return this.fq;
        var d = null !== this.g ? this.g.aK : Wi;
        if (d !== Wi)
        {
            if (d === Xi)
            {
                d = c || this.vf;
                if (null !== d && !d.bc) return !0;
                for (d = b.je; d.next();)
                {
                    var e = d.value;
                    if (e !== c && e.bc && e.Z === b) return !1
                }
                return !Yi(this, a, b, c, !0)
            }
            if (d === Zi)
            {
                d = c || this.vf;
                if (null !== d && !d.bc) return !0;
                for (d = a.je; d.next();)
                    if (e = d.value, e !== c && e.bc && e.Y === a) return !1;
                return !Yi(this, a, b, c, !0)
            }
            if (d === $i) return a === b ? a = !0 : (d = new I(T), d.add(b), a = aj(this, d, a, b, c)), !a;
            if (d === bj) return !Yi(this, a, b, c, !1);
            if (d === cj) return a === b ? a = !0 : (d = new I(T), d.add(b), a = dj(this, d, a, b, c)), !a
        }
        return !0
    };

    function Yi(a, b, c, d, e)
    {
        if (b === c) return !0;
        if (null === b || null === c) return !1;
        for (var f = b.je; f.next();)
        {
            var h = f.value;
            if (h !== d && (!e || h.bc) && h.Z === b && (h = h.Y, h !== b && Yi(a, h, c, d, e))) return !0
        }
        return !1
    }

    function aj(a, b, c, d, e)
    {
        if (c === d) return !0;
        if (null === c || null === d || b.contains(c)) return !1;
        b.add(c);
        for (var f = c.je; f.next();)
        {
            var h = f.value;
            if (h !== e && h.Z === c && (h = h.Y, h !== c && aj(a, b, h, d, e))) return !0
        }
        return !1
    }

    function dj(a, b, c, d, e)
    {
        if (c === d) return !0;
        if (null === c || null === d || b.contains(c)) return !1;
        b.add(c);
        for (var f = c.je; f.next();)
        {
            var h = f.value;
            if (h !== e)
            {
                var k = h.Y,
                    h = h.Z,
                    k = k === c ? h : k;
                if (k !== c && dj(a, b, k, d, e)) return !0
            }
        }
        return !1
    }
    w.defineProperty(Ui,
        {
            Vx: "linkValidation"
        }, function ()
        {
            return this.zl
        }, function (a)
        {
            null !== a && w.j(a, "function", Ui, "linkValidation");
            this.zl = a
        });
    w.defineProperty(Ui,
        {
            iy: "portTargeted"
        }, function ()
        {
            return this.MD
        }, function (a)
        {
            null !== a && w.j(a, "function", Ui, "portTargeted");
            this.MD = a
        });

    function ej()
    {
        0 < arguments.length && w.nd(ej);
        Ui.call(this);
        this.name = "Linking";
        this.lC = {};
        this.kC = null;
        this.ba = fj;
        this.VD = null
    }
    w.La(ej, Ui);
    w.ga("LinkingTool", ej);
    var fj;
    ej.Either = fj = w.p(ej, "Either", 0);
    var gj;
    ej.ForwardsOnly = gj = w.p(ej, "ForwardsOnly", 0);
    var hj;
    ej.BackwardsOnly = hj = w.p(ej, "BackwardsOnly", 0);
    w.defineProperty(ej,
        {
            CE: "archetypeLinkData"
        }, function ()
        {
            return this.lC
        }, function (a)
        {
            null !== a && w.G(a, Object, ej, "archetypeLinkData");
            a instanceof G && w.G(a, W, ej, "archetypeLinkData");
            this.lC = a
        });
    w.defineProperty(ej,
        {
            BE: "archetypeLabelNodeData"
        }, function ()
        {
            return this.kC
        }, function (a)
        {
            null !== a && w.G(a, Object, ej, "archetypeLabelNodeData");
            a instanceof G && w.G(a, T, ej, "archetypeLabelNodeData");
            this.kC = a
        });
    w.defineProperty(ej,
        {
            direction: "direction"
        }, function ()
        {
            return this.ba
        }, function (a)
        {
            w.ob(a, ej, ej, "direction");
            this.ba = a
        });
    w.defineProperty(ej,
        {
            wG: "startObject"
        }, function ()
        {
            return this.VD
        }, function (a)
        {
            null !== a && w.G(a, G, ej, "startObject");
            this.VD = a
        });
    ej.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        if (null === a || a.ib || a.Df || !a.Ot) return !1;
        var b = a.$;
        return (b instanceof Q || b instanceof Zf) && a.Q.left && (a.Xa === this || this.isBeyondDragSize()) ? null !== this.findLinkablePort() : !1
    };
    ej.prototype.findLinkablePort = function ()
    {
        var a = this.g;
        if (null === a) return null;
        var b = this.wG;
        null === b && (b = a.Oe(a.Ec.da, null, null));
        if (null === b || !(b.V instanceof T)) return null;
        a = this.direction;
        if (a === fj || a === gj)
        {
            var c = this.findValidLinkablePort(b, !1);
            if (null !== c) return this.Sd = !0, c
        }
        if (a === fj || a === hj)
            if (c = this.findValidLinkablePort(b, !0), null !== c) return this.Sd = !1, c;
        return null
    };
    ej.prototype.doActivate = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = this.findLinkablePort();
            null !== b && (this.Kb(this.name), a.ef = !0, a.ic = "pointer", this.Sd ? (null === this.Wd || this.Wd.location.I() || (this.Wd.location = a.Q.da), this.Qg = b, b = this.Qg.V, b instanceof T && (this.Pg = b), this.copyPortProperties(this.Pg, this.Qg, this.Vd, this.bo, !1)) : (null === this.Vd || this.Vd.location.I() || (this.Vd.location = a.Q.da), this.Sg = b, b = this.Sg.V, b instanceof T && (this.Rg = b), this.copyPortProperties(this.Rg, this.Sg, this.Wd, this.co, !0)),
                a.add(this.Vd), a.add(this.Wd), null !== this.vf && (null !== this.Vd && (this.vf.Y = this.Vd), null !== this.Wd && (this.vf.Z = this.Wd), this.vf.bc = this.isNewTreeLink(), this.vf.Wb(), a.add(this.vf)), this.sa = !0)
        }
    };
    ej.prototype.doDeactivate = function ()
    {
        this.sa = !1;
        var a = this.g;
        null !== a && (a.remove(this.vf), a.remove(this.Vd), a.remove(this.Wd), a.ef = !1, a.ic = "", this.Vk())
    };
    ej.prototype.doStop = function ()
    {
        Ui.prototype.doStop.call(this);
        this.wG = null
    };
    ej.prototype.doMouseUp = function ()
    {
        if (this.sa)
        {
            var a = this.g;
            if (null === a) return;
            var b = this.Lf = null,
                c = null,
                d = null,
                e = null,
                f = this.Jf = this.findTargetPort(this.Sd);
            if (null !== f)
            {
                var h = f.V;
                h instanceof T && (this.Sd ? (null !== this.Pg && (b = this.Pg, c = this.Qg), d = h, e = f) : (b = h, c = f, null !== this.Rg && (d = this.Rg, e = this.Sg)))
            }
            else this.Sd ? null !== this.Pg && this.fq && (b = this.Pg, c = this.Qg) : null !== this.Rg && this.fq && (d = this.Rg, e = this.Sg);
            null !== b || null !== d ? (h = this.insertLink(b, c, d, e), null !== h ? (null === f && (this.Sd ? h.Qp = a.Q.da : h.Pp =
                a.Q.da), a.Af && a.select(h), this.Lf = this.name, a.Aa("LinkDrawn", h)) : (a.$.HE(), this.doNoLink(b, c, d, e))) : this.Sd ? this.doNoLink(this.Pg, this.Qg, null, null) : this.doNoLink(null, null, this.Rg, this.Sg)
        }
        this.stopTool()
    };
    ej.prototype.isNewTreeLink = function ()
    {
        var a = this.CE;
        if (null === a) return !0;
        if (a instanceof W) return a.bc;
        var b = this.g;
        if (null === b) return !0;
        a = b.ju(a);
        b = ij(b, a);
        return null !== b ? b.bc : !0
    };
    ej.prototype.insertLink = function (a, b, c, d)
    {
        var e = this.g;
        if (null === e) return null;
        var f = e.$;
        if (f instanceof Zf)
        {
            var h = a;
            b = c;
            e.Ud || (h = c, b = a);
            if (null !== h && null !== b) return f.ti(b.data, f.rb(h.data)), b.zn()
        }
        else if (f instanceof Q)
            if (h = "", null !== a && (null === b && (b = a), h = b.le, null === h && (h = "")), b = "", null !== c && (null === d && (d = c), b = d.le, null === b && (b = "")), d = this.CE, d instanceof W)
            {
                if (lh(d), f = d.copy(), null !== f) return f.Y = a, f.Mg = h, f.Z = c, f.Ih = b, e.add(f), a = this.BE, a instanceof T && (lh(a), a = a.copy(), null !== a && (a.Xb = f, e.add(a))),
                    f
            }
            else if (null !== d && (d = f.mx(d), w.Pa(d))) return null !== a && f.zB(d, f.rb(a.data)), f.AB(d, h), null !== c && f.FB(d, f.rb(c.data)), f.GB(d, b), f.Kt(d), a = this.BE, null === a || a instanceof T || (a = f.copyNodeData(a), w.Pa(a) && (f.Nl(a), a = f.rb(a), void 0 !== a && f.wE(d, a))), f = e.Xf(d);
        return null
    };
    ej.prototype.doNoLink = function () {};

    function Uh()
    {
        0 < arguments.length && w.nd(Uh);
        Ui.call(this);
        this.name = "Relinking";
        var a = new X;
        a.Gb = "Diamond";
        a.Ca = Bd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.cursor = "pointer";
        a.Pe = 0;
        this.YC = a;
        a = new X;
        a.Gb = "Diamond";
        a.Ca = Bd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.cursor = "pointer";
        a.Pe = -1;
        this.hE = a;
        this.pc = null;
        this.GD = new B
    }
    w.La(Uh, Ui);
    w.ga("RelinkingTool", Uh);
    Uh.prototype.updateAdornments = function (a)
    {
        if (null !== a && a instanceof W)
        {
            var b = "RelinkFrom",
                c = null;
            if (a.jb && null !== this.g && !this.g.ib)
            {
                var d = a.zq;
                null !== d && a.canRelinkFrom() && a.U.I() && a.isVisible() && d.U.I() && d.Dj() && (c = a.Up(b), null === c && (c = this.makeAdornment(d, !1), a.Ml(b, c)))
            }
            null === c && a.Jj(b);
            b = "RelinkTo";
            c = null;
            a.jb && null !== this.g && !this.g.ib && (d = a.zq, null !== d && a.canRelinkTo() && a.U.I() && a.isVisible() && d.U.I() && d.Dj() && (c = a.Up(b), null === c && (c = this.makeAdornment(d, !0), a.Ml(b, c))));
            null === c && a.Jj(b)
        }
    };
    Uh.prototype.makeAdornment = function (a, b)
    {
        var c = new jh;
        c.type = jj;
        var d = b ? this.SJ : this.YH;
        null !== d && c.add(d.copy());
        c.ub = a;
        return c
    };
    w.defineProperty(Uh,
        {
            YH: "fromHandleArchetype"
        }, function ()
        {
            return this.YC
        }, function (a)
        {
            null !== a && w.G(a, G, Uh, "fromHandleArchetype");
            this.YC = a
        });
    w.defineProperty(Uh,
        {
            SJ: "toHandleArchetype"
        }, function ()
        {
            return this.hE
        }, function (a)
        {
            null !== a && w.G(a, G, Uh, "toHandleArchetype");
            this.hE = a
        });
    w.u(Uh,
        {
            handle: "handle"
        }, function ()
        {
            return this.pc
        });
    Uh.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        if (null === a || a.ib || a.Df || !a.mn) return !1;
        var b = a.$;
        if (!(b instanceof Q || b instanceof Zf) || !a.Q.left) return !1;
        b = this.findToolHandleAt(a.Ec.da, "RelinkFrom");
        null === b && (b = this.findToolHandleAt(a.Ec.da, "RelinkTo"));
        return null !== b
    };
    Uh.prototype.doActivate = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            if (null === this.lc)
            {
                var b = this.findToolHandleAt(a.Ec.da, "RelinkFrom");
                null === b && (b = this.findToolHandleAt(a.Ec.da, "RelinkTo"));
                if (null === b) return;
                var c = b.V;
                if (!(c instanceof jh && c.Ye instanceof W)) return;
                this.pc = b;
                this.Sd = null === c || "RelinkTo" === c.zd;
                this.lc = c.Ye
            }
            this.Kb(this.name);
            a.ef = !0;
            a.ic = "pointer";
            this.Qg = this.lc.kc;
            this.Pg = this.lc.Y;
            this.Sg = this.lc.Ic;
            this.Rg = this.lc.Z;
            this.GD.set(this.lc.U);
            null !== this.lc && 0 < this.lc.qa && (null === this.lc.Y &&
            (null !== this.bo && (this.bo.Ca = qd), null !== this.Vd && (this.Vd.location = this.lc.l(0))), null === this.lc.Z && (null !== this.co && (this.co.Ca = qd), null !== this.Wd && (this.Wd.location = this.lc.l(this.lc.qa - 1))));
            this.copyPortProperties(this.Pg, this.Qg, this.Vd, this.bo, !1);
            this.copyPortProperties(this.Rg, this.Sg, this.Wd, this.co, !0);
            a.add(this.Vd);
            a.add(this.Wd);
            null !== this.vf && (null !== this.Vd && (this.vf.Y = this.Vd), null !== this.Wd && (this.vf.Z = this.Wd), this.copyLinkProperties(this.lc, this.vf), this.vf.Wb(), a.add(this.vf));
            this.sa = !0
        }
    };
    Uh.prototype.copyLinkProperties = function (a, b)
    {
        if (null !== a && null !== b)
        {
            b.Ep = a.Ep;
            b.vA = a.vA;
            var c = a.nf;
            if (c === kj || c === lj) c = mj;
            b.nf = c;
            b.px = a.px;
            b.bc = a.bc;
            b.points = a.points;
            b.qy = a.qy;
            b.Dq = a.Dq;
            b.Bb = a.Bb;
            b.Zl = a.Zl;
            b.hu = a.hu;
            b.iu = a.iu;
            b.Cb = a.Cb;
            b.sm = a.sm;
            b.cv = a.cv;
            b.dv = a.dv
        }
    };
    Uh.prototype.doDeactivate = function ()
    {
        this.sa = !1;
        var a = this.g;
        null !== a && (a.remove(this.vf), a.remove(this.Vd), a.remove(this.Wd), a.ef = !1, a.ic = "", this.Vk())
    };
    Uh.prototype.doStop = function ()
    {
        Ui.prototype.doStop.call(this);
        this.pc = null
    };
    Uh.prototype.doMouseUp = function ()
    {
        if (this.sa)
        {
            var a = this.g;
            if (null === a) return;
            this.Lf = null;
            var b = this.Pg,
                c = this.Qg,
                d = this.Rg,
                e = this.Sg,
                f = this.lc;
            this.Jf = this.findTargetPort(this.Sd);
            if (null !== this.Jf)
            {
                var h = this.Jf.V;
                h instanceof T && (this.Sd ? (d = h, e = this.Jf) : (b = h, c = this.Jf))
            }
            else this.fq ? this.Sd ? e = d = null : c = b = null : f = null;
            null !== f ? (this.reconnectLink(f, this.Sd ? d : b, this.Sd ? e : c, this.Sd), null === this.Jf && (this.Sd ? f.Qp = a.Q.da : f.Pp = a.Q.da, f.Wb()), a.Af && (f.jb = !0), this.Lf = this.name, a.Aa("LinkRelinked", f, this.Sd ?
                this.Sg : this.Qg)) : this.doNoRelink(this.lc, this.Sd);
            nj(this.lc, this.GD)
        }
        this.stopTool()
    };
    Uh.prototype.reconnectLink = function (a, b, c, d)
    {
        if (null === this.g) return !1;
        c = null !== c && null !== c.le ? c.le : "";
        d ? (a.Z = b, a.Ih = c) : (a.Y = b, a.Mg = c);
        return !0
    };
    Uh.prototype.doNoRelink = function () {};

    function Pi(a, b, c, d, e)
    {
        null !== a.g && (null !== b ? (a.copyPortProperties(b, c, a.Vd, a.bo, !1), a.g.add(a.Vd)) : a.g.remove(a.Vd), null !== d ? (a.copyPortProperties(d, e, a.Wd, a.co, !0), a.g.add(a.Wd)) : a.g.remove(a.Wd))
    }

    function oj()
    {
        0 < arguments.length && w.nd(oj);
        qg.call(this);
        this.name = "LinkReshaping";
        var a = new X;
        a.Gb = "Rectangle";
        a.Ca = sd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        this.pl = a;
        a = new X;
        a.Gb = "Diamond";
        a.Ca = sd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        this.uD = a;
        this.ND = 3;
        this.Ty = this.pc = null;
        this.ep = new y;
        this.ww = null
    }
    w.La(oj, qg);
    w.ga("LinkReshapingTool", oj);
    var pj;
    oj.None = pj = w.p(oj, "None", 0);
    var qj;
    oj.Horizontal = qj = w.p(oj, "Horizontal", 1);
    var rj;
    oj.Vertical = rj = w.p(oj, "Vertical", 2);
    var sj;
    oj.All = sj = w.p(oj, "All", 3);
    oj.prototype.getReshapingBehavior = oj.prototype.kF = function (a)
    {
        return a && a.Oz ? a.Oz : pj
    };
    oj.prototype.setReshapingBehavior = oj.prototype.Yu = function (a, b)
    {
        w.G(a, G, oj, "setReshapingBehavior:obj");
        w.ob(b, oj, oj, "setReshapingBehavior:behavior");
        a.Oz = b
    };
    oj.prototype.updateAdornments = function (a)
    {
        if (null !== a && a instanceof W)
        {
            if (a.jb && null !== this.g && !this.g.ib)
            {
                var b = a.path;
                if (null !== b && a.canReshape() && a.U.I() && a.isVisible() && b.U.I() && b.Dj())
                {
                    var c = a.Up(this.name);
                    if (null === c || c.BD !== a.qa || c.pE !== a.Tu) c = this.makeAdornment(b), null !== c && (c.BD = a.qa, c.pE = a.Tu, a.Ml(this.name, c));
                    if (null !== c)
                    {
                        c.location = a.position;
                        return
                    }
                }
            }
            a.Jj(this.name)
        }
    };
    oj.prototype.makeAdornment = function (a)
    {
        var b = a.V,
            c = b.qa,
            d = b.ac,
            e = null;
        if (null !== b.points && 1 < c)
        {
            e = new jh;
            e.type = jj;
            var c = b.bu,
                f = b.Qx,
                h = d ? 1 : 0;
            if (b.Tu && b.computeCurve() !== tj)
                for (var k = c + h; k < f - h; k++)
                {
                    var l = this.makeResegmentHandle(a, k);
                    null !== l && (l.Pe = k, l.wB = .5, l.EA = 999, e.add(l))
                }
            for (k = c + 1; k < f; k++)
                if (l = this.makeHandle(a, k), null !== l)
                {
                    l.Pe = k;
                    if (k !== c)
                        if (k === c + 1 && d)
                        {
                            var h = b.l(c),
                                m = b.l(c + 1);
                            J(h.x, m.x) && J(h.y, m.y) && (m = b.l(c - 1));
                            J(h.x, m.x) ? (this.Yu(l, rj), l.cursor = "n-resize") : J(h.y, m.y) && (this.Yu(l, qj), l.cursor =
                                "w-resize")
                        }
                        else k === f - 1 && d ? (h = b.l(f - 1), m = b.l(f), J(h.x, m.x) && J(h.y, m.y) && (h = b.l(f + 1)), J(h.x, m.x) ? (this.Yu(l, rj), l.cursor = "n-resize") : J(h.y, m.y) && (this.Yu(l, qj), l.cursor = "w-resize")) : k !== f && (this.Yu(l, sj), l.cursor = "move");
                    e.add(l)
                }
            e.ub = a
        }
        return e
    };
    oj.prototype.makeHandle = function ()
    {
        var a = this.mu;
        return null === a ? null : a.copy()
    };
    w.defineProperty(oj,
        {
            mu: "handleArchetype"
        }, function ()
        {
            return this.pl
        }, function (a)
        {
            null !== a && w.G(a, G, oj, "handleArchetype");
            this.pl = a
        });
    oj.prototype.makeResegmentHandle = function ()
    {
        var a = this.YI;
        return null === a ? null : a.copy()
    };
    w.defineProperty(oj,
        {
            YI: "midHandleArchetype"
        }, function ()
        {
            return this.uD
        }, function (a)
        {
            null !== a && w.G(a, G, oj, "midHandleArchetype");
            this.uD = a
        });
    w.u(oj,
        {
            handle: "handle"
        }, function ()
        {
            return this.pc
        });
    w.u(oj,
        {
            Mt: "adornedLink"
        }, function ()
        {
            return this.Ty
        });
    oj.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        return null !== a && !a.ib && a.ex && a.Q.left ? null !== this.findToolHandleAt(a.Ec.da, this.name) : !1
    };
    oj.prototype.doActivate = function ()
    {
        var a = this.g;
        if (null !== a && (this.pc = this.findToolHandleAt(a.Ec.da, this.name), null !== this.pc))
        {
            var b = this.pc.V.Ye;
            if (b instanceof W)
            {
                this.Ty = b;
                a.ef = !0;
                this.Kb(this.name);
                if (b.Tu && 999 === this.pc.EA)
                {
                    var c = b.points.copy(),
                        d = this.getResegmentingPoint();
                    c.Rd(this.pc.Pe + 1, d);
                    b.ac && c.Rd(this.pc.Pe + 1, d);
                    b.points = c;
                    b.fe();
                    this.pc = this.findToolHandleAt(a.Ec.da, this.name);
                    if (null === this.pc)
                    {
                        this.doDeactivate();
                        return
                    }
                }
                this.ep = b.l(this.pc.Pe);
                this.ww = b.points.copy();
                this.sa = !0
            }
        }
    };
    oj.prototype.doDeactivate = function ()
    {
        this.Vk();
        this.Ty = this.pc = null;
        var a = this.g;
        null !== a && (a.ef = !1);
        this.sa = !1
    };
    oj.prototype.doCancel = function ()
    {
        var a = this.Mt;
        null !== a && (a.points = this.ww);
        this.stopTool()
    };
    oj.prototype.getResegmentingPoint = function ()
    {
        return this.handle.Ya(Jb)
    };
    oj.prototype.doMouseMove = function ()
    {
        var a = this.g;
        this.sa && null !== a && (a = this.computeReshape(a.Q.da), this.reshape(a))
    };
    oj.prototype.doMouseUp = function ()
    {
        var a = this.g;
        if (this.sa && null !== a)
        {
            var b = this.computeReshape(a.Q.da);
            this.reshape(b);
            b = this.Mt;
            if (null !== b && b.Tu)
            {
                var c = this.handle.Pe,
                    d = b.l(c - 1),
                    e = b.l(c),
                    f = b.l(c + 1);
                if (b.ac)
                {
                    if (c > b.bu + 1 && c < b.Qx - 1)
                    {
                        var h = b.l(c - 2);
                        if (Math.abs(d.x - e.x) < this.Fh && Math.abs(d.y - e.y) < this.Fh && (Mj(this, h, d, e, f, !0) || Mj(this, h, d, e, f, !1)))
                        {
                            var k = b.points.copy();
                            Mj(this, h, d, e, f, !0) ? (k.jg(c - 2, new y(h.x, (f.y + h.y) / 2)), k.jg(c + 1, new y(f.x, (f.y + h.y) / 2))) : (k.jg(c - 2, new y((f.x + h.x) / 2, h.y)), k.jg(c + 1,
                                new y((f.x + h.x) / 2, f.y)));
                            k.dd(c);
                            k.dd(c - 1);
                            b.points = k;
                            b.fe()
                        }
                        else h = b.l(c + 2), Math.abs(e.x - f.x) < this.Fh && Math.abs(e.y - f.y) < this.Fh && (Mj(this, d, e, f, h, !0) || Mj(this, d, e, f, h, !1)) && (k = b.points.copy(), Mj(this, d, e, f, h, !0) ? (k.jg(c - 1, new y(d.x, (d.y + h.y) / 2)), k.jg(c + 2, new y(h.x, (d.y + h.y) / 2))) : (k.jg(c - 1, new y((d.x + h.x) / 2, d.y)), k.jg(c + 2, new y((d.x + h.x) / 2, h.y))), k.dd(c + 1), k.dd(c), b.points = k, b.fe())
                    }
                }
                else h = w.K(), La(d.x, d.y, f.x, f.y, e.x, e.y, h) && h.Bf(e) < this.Fh * this.Fh && (k = b.points.copy(), k.dd(c), b.points = k, b.fe()),
                    w.v(h)
            }
            a.Fc();
            this.Lf = this.name;
            a.Aa("LinkReshaped", this.Mt, this.ww)
        }
        this.stopTool()
    };

    function Mj(a, b, c, d, e, f)
    {
        return f ? Math.abs(b.y - c.y) < a.Fh && Math.abs(c.y - d.y) < a.Fh && Math.abs(d.y - e.y) < a.Fh : Math.abs(b.x - c.x) < a.Fh && Math.abs(c.x - d.x) < a.Fh && Math.abs(d.x - e.x) < a.Fh
    }
    w.defineProperty(oj,
        {
            Fh: "resegmentingDistance"
        }, function ()
        {
            return this.ND
        }, function (a)
        {
            w.j(a, "number", oj, "resegmentingDistance");
            this.ND = a
        });
    oj.prototype.reshape = function (a)
    {
        var b = this.Mt;
        b.om();
        var c = this.handle.Pe,
            d = this.kF(this.handle);
        if (b.ac)
            if (c === b.bu + 1) c = b.bu + 1, d === rj ? (b.ca(c, b.l(c - 1).x, a.y), b.ca(c + 1, b.l(c + 2).x, a.y)) : d === qj && (b.ca(c, a.x, b.l(c - 1).y), b.ca(c + 1, a.x, b.l(c + 2).y));
            else if (c === b.Qx - 1) c = b.Qx - 1, d === rj ? (b.ca(c - 1, b.l(c - 2).x, a.y), b.ca(c, b.l(c + 1).x, a.y)) : d === qj && (b.ca(c - 1, a.x, b.l(c - 2).y), b.ca(c, a.x, b.l(c + 1).y));
            else
            {
                var d = c,
                    e = b.l(d),
                    f = b.l(d - 1),
                    h = b.l(d + 1);
                J(f.x, e.x) && J(e.y, h.y) ? (J(f.x, b.l(d - 2).x) && !J(f.y, b.l(d - 2).y) ? (b.w(d, a.x,
                    f.y), c++, d++) : b.ca(d - 1, a.x, f.y), J(h.y, b.l(d + 2).y) && !J(h.x, b.l(d + 2).x) ? b.w(d + 1, h.x, a.y) : b.ca(d + 1, h.x, a.y)) : J(f.y, e.y) && J(e.x, h.x) ? (J(f.y, b.l(d - 2).y) && !J(f.x, b.l(d - 2).x) ? (b.w(d, f.x, a.y), c++, d++) : b.ca(d - 1, f.x, a.y), J(h.x, b.l(d + 2).x) && !J(h.y, b.l(d + 2).y) ? b.w(d + 1, a.x, h.y) : b.ca(d + 1, a.x, h.y)) : J(f.x, e.x) && J(e.x, h.x) ? (J(f.x, b.l(d - 2).x) && !J(f.y, b.l(d - 2).y) ? (b.w(d, a.x, f.y), c++, d++) : b.ca(d - 1, a.x, f.y), J(h.x, b.l(d + 2).x) && !J(h.y, b.l(d + 2).y) ? b.w(d + 1, a.x, h.y) : b.ca(d + 1, a.x, h.y)) : J(f.y, e.y) && J(e.y, h.y) && (J(f.y, b.l(d -
                    2).y) && !J(f.x, b.l(d - 2).x) ? (b.w(d, f.x, a.y), c++, d++) : b.ca(d - 1, f.x, a.y), J(h.y, b.l(d + 2).y) && !J(h.x, b.l(d + 2).x) ? b.w(d + 1, h.x, a.y) : b.ca(d + 1, h.x, a.y));
                b.ca(c, a.x, a.y)
            }
        else b.ca(c, a.x, a.y), e = b.Y, f = b.kc, null !== e && (d = e.findVisibleNode(), null !== d && d !== e && (e = d, f = e.port)), 1 === c && b.computeSpot(!0, f).Td() && (d = f.Ya(Jb, w.K()), e = b.getLinkPointFromPoint(e, f, d, a, !0, w.K()), b.ca(0, e.x, e.y), w.v(d), w.v(e)), e = b.Z, f = b.Ic, null !== e && (d = e.findVisibleNode(), null !== d && d !== e && (e = d, f = e.port)), c === b.qa - 2 && b.computeSpot(!1, f).Td() &&
        (d = f.Ya(Jb, w.K()), e = b.getLinkPointFromPoint(e, f, d, a, !1, w.K()), b.ca(b.qa - 1, e.x, e.y), w.v(d), w.v(e));
        b.qj()
    };
    oj.prototype.computeReshape = function (a)
    {
        var b = this.Mt,
            c = this.handle.Pe;
        switch (this.kF(this.handle))
        {
            case sj:
                return a;
            case rj:
                return b = b.l(c), new y(b.x, a.y);
            case qj:
                return b = b.l(c), new y(a.x, b.y);
            default:
            case pj:
                return b.l(c)
        }
    };
    w.u(oj,
        {
            EL: "originalPoint"
        }, function ()
        {
            return this.ep
        });
    w.u(oj,
        {
            FL: "originalPoints"
        }, function ()
        {
            return this.ww
        });

    function Nj()
    {
        0 < arguments.length && w.nd(Nj);
        qg.call(this);
        this.name = "Resizing";
        this.Zh = (new ia(1, 1)).freeze();
        this.Yh = (new ia(9999, 9999)).freeze();
        this.Sj = (new ia(NaN, NaN)).freeze();
        this.Ur = !1;
        this.Jc = null;
        var a = new X;
        a.oh = Jb;
        a.Gb = "Rectangle";
        a.Ca = sd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.mb = 1;
        a.cursor = "pointer";
        this.pl = a;
        this.pc = null;
        this.ep = new y;
        this.CD = new ia;
        this.HD = new y;
        this.qz = new ia(0, 0);
        this.pz = new ia(Infinity, Infinity);
        this.oz = new ia(1, 1);
        this.AD = !0
    }
    w.La(Nj, qg);
    w.ga("ResizingTool", Nj);
    Nj.prototype.updateAdornments = function (a)
    {
        if (!(null === a || a instanceof W))
        {
            if (a.jb && null !== this.g && !this.g.ib)
            {
                var b = a.hG;
                if (null !== b && a.canResize() && a.U.I() && a.isVisible() && b.U.I() && b.Dj())
                {
                    var c = a.Up(this.name);
                    if (null === c || c.ub !== b) c = this.makeAdornment(b);
                    if (null !== c)
                    {
                        var d = b.$l();
                        c.angle = d;
                        var e = b.Ya(c.Ff, w.K()),
                            f = b.vj();
                        c.location = e;
                        w.v(e);
                        e = c.placeholder;
                        if (null !== e)
                        {
                            var b = b.Ja,
                                h = w.rm();
                            h.m(b.width * f, b.height * f);
                            e.Ca = h;
                            w.Lk(h)
                        }
                        this.updateResizeHandles(c, d);
                        a.Ml(this.name, c);
                        return
                    }
                }
            }
            a.Jj(this.name)
        }
    };
    Nj.prototype.makeAdornment = function (a)
    {
        var b = null,
            b = a.V.gG;
        if (null === b)
        {
            b = new jh;
            b.type = Oj;
            b.Ff = Jb;
            var c = new Pj;
            c.ff = !0;
            b.add(c);
            b.add(this.makeHandle(a, zb));
            b.add(this.makeHandle(a, Cb));
            b.add(this.makeHandle(a, Sb));
            b.add(this.makeHandle(a, Qb));
            b.add(this.makeHandle(a, Gc));
            b.add(this.makeHandle(a, Ic));
            b.add(this.makeHandle(a, Jc));
            b.add(this.makeHandle(a, Hc))
        }
        else if (lh(b), b = b.copy(), null === b) return null;
        b.ub = a;
        return b
    };
    Nj.prototype.makeHandle = function (a, b)
    {
        var c = this.mu;
        if (null === c) return null;
        c = c.copy();
        c.alignment = b;
        return c
    };
    Nj.prototype.updateResizeHandles = function (a, b)
    {
        if (null !== a)
            if (!a.alignment.Zc() && ("pointer" === a.cursor || 0 < a.cursor.indexOf("resize"))) a:
            {
                var c = a.alignment;c.Td() && (c = Jb);
                var d = b;
                if (0 >= c.x) d = 0 >= c.y ? d + 225 : 1 <= c.y ? d + 135 : d + 180;
                else if (1 <= c.x) 0 >= c.y ? d += 315 : 1 <= c.y && (d += 45);
                else if (0 >= c.y) d += 270;
                else if (1 <= c.y) d += 90;
                else break a;0 > d ? d += 360 : 360 <= d && (d -= 360);a.cursor = 22.5 > d ? "e-resize" : 67.5 > d ? "se-resize" : 112.5 > d ? "s-resize" : 157.5 > d ? "sw-resize" : 202.5 > d ? "w-resize" : 247.5 > d ? "nw-resize" : 292.5 > d ? "n-resize" : 337.5 > d ?
                "ne-resize" : "e-resize"
            }
            else if (a instanceof C)
                for (c = a.elements; c.next();) this.updateResizeHandles(c.value, b)
    };
    w.defineProperty(Nj,
        {
            mu: "handleArchetype"
        }, function ()
        {
            return this.pl
        }, function (a)
        {
            null !== a && w.G(a, G, Nj, "handleArchetype");
            this.pl = a
        });
    w.u(Nj,
        {
            handle: "handle"
        }, function ()
        {
            return this.pc
        });
    w.defineProperty(Nj,
        {
            ub: "adornedObject"
        }, function ()
        {
            return this.Jc
        }, function (a)
        {
            null !== a && w.G(a, G, Nj, "adornedObject");
            this.Jc = a
        });
    Nj.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        return null !== a && !a.ib && a.Pt && a.Q.left ? null !== this.findToolHandleAt(a.Ec.da, this.name) : !1
    };
    Nj.prototype.doActivate = function ()
    {
        var a = this.g;
        null !== a && (this.pc = this.findToolHandleAt(a.Ec.da, this.name), null !== this.pc && (this.Jc = this.pc.V.ub, this.ep.set(this.ub.Ya(this.handle.alignment.WF())), this.HD.set(this.Jc.V.location), this.CD.set(this.Jc.Ca), this.oz = this.computeCellSize(), this.qz = this.computeMinSize(), this.pz = this.computeMaxSize(), a.ef = !0, this.AD = a.Ka.isEnabled, a.Ka.isEnabled = !1, this.Kb(this.name), this.sa = !0))
    };
    Nj.prototype.doDeactivate = function ()
    {
        var a = this.g;
        null !== a && (this.Vk(), this.Jc = this.pc = null, this.sa = a.ef = !1, a.Ka.isEnabled = this.AD)
    };
    Nj.prototype.doCancel = function ()
    {
        null !== this.ub && (this.ub.Ca = this.XF, this.ub.V.location = this.iJ);
        this.stopTool()
    };
    Nj.prototype.doMouseMove = function ()
    {
        var a = this.g;
        if (this.sa && null !== a)
        {
            var b = this.qz,
                c = this.pz,
                d = this.oz,
                e = this.ub.iF(a.Q.da, w.K()),
                f = this.computeReshape(),
                b = this.computeResize(e, this.handle.alignment, b, c, d, f);
            this.resize(b);
            a.cg();
            w.v(e)
        }
    };
    Nj.prototype.doMouseUp = function ()
    {
        var a = this.g;
        if (this.sa && null !== a)
        {
            var b = this.qz,
                c = this.pz,
                d = this.oz,
                e = this.ub.iF(a.Q.da, w.K()),
                f = this.computeReshape(),
                b = this.computeResize(e, this.handle.alignment, b, c, d, f);
            this.resize(b);
            w.v(e);
            a.Fc();
            this.Lf = this.name;
            a.Aa("PartResized", this.ub, this.XF)
        }
        this.stopTool()
    };
    Nj.prototype.resize = function (a)
    {
        var b = this.g;
        if (null !== b)
        {
            var c = this.ub,
                d = c.V;
            c.Ca = a.size;
            d.af();
            a = this.ub.Ya(this.handle.alignment.WF());
            if (d instanceof V)
            {
                var c = b.Va.ce,
                    e = !1;
                null !== c && (e = c.Rk, c.Rk = !1);
                var f = new H(R);
                f.add(d);
                b.moveParts(f, this.ep.copy().ui(a), !0);
                null !== c && (c.Rk = e)
            }
            else d.location = d.location.copy().ui(a).add(this.ep)
        }
    };
    Nj.prototype.computeResize = function (a, b, c, d, e, f)
    {
        b.Td() && (b = Jb);
        var h = this.ub.Ja,
            k = h.x,
            l = h.y,
            m = h.x + h.width,
            n = h.y + h.height,
            p = 1;
        if (!f)
        {
            var p = h.width,
                q = h.height;
            0 >= p && (p = 1);
            0 >= q && (q = 1);
            p = q / p
        }
        q = w.K();
        Na(a.x, a.y, k, l, e.width, e.height, q);
        a = h.copy();
        0 >= b.x ? 0 >= b.y ? (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = Math.max(m - a.x, c.width), a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height), a.height = Math.max(n - a.y, c.height), f || (b = a.height / a.width, 1 <= b ? (a.height = Math.max(Math.min(p * a.width,
            d.height), c.height), a.width = a.height / p) : (a.width = Math.max(Math.min(a.height / p, d.width), c.width), a.height = p * a.width), a.x = m - a.width, a.y = n - a.height)) : 1 <= b.y ? (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = Math.max(m - a.x, c.width), a.height = Math.max(Math.min(q.y - l, d.height), c.height), f || (b = a.height / a.width, 1 <= b ? (a.height = Math.max(Math.min(p * a.width, d.height), c.height), a.width = a.height / p) : (a.width = Math.max(Math.min(a.height / p, d.width), c.width), a.height = p * a.width), a.x = m - a.width)) : (a.x = Math.max(q.x,
            m - d.width), a.x = Math.min(a.x, m - c.width), a.width = m - a.x, f || (a.height = Math.max(Math.min(p * a.width, d.height), c.height), a.width = a.height / p, a.y = l + .5 * (n - l - a.height))) : 1 <= b.x ? 0 >= b.y ? (a.width = Math.max(Math.min(q.x - k, d.width), c.width), a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height), a.height = Math.max(n - a.y, c.height), f || (b = a.height / a.width, 1 <= b ? (a.height = Math.max(Math.min(p * a.width, d.height), c.height), a.width = a.height / p) : (a.width = Math.max(Math.min(a.height / p, d.width), c.width), a.height = p * a.width), a.y =
            n - a.height)) : 1 <= b.y ? (a.width = Math.max(Math.min(q.x - k, d.width), c.width), a.height = Math.max(Math.min(q.y - l, d.height), c.height), f || (b = a.height / a.width, 1 <= b ? (a.height = Math.max(Math.min(p * a.width, d.height), c.height), a.width = a.height / p) : (a.width = Math.max(Math.min(a.height / p, d.width), c.width), a.height = p * a.width))) : (a.width = Math.max(Math.min(q.x - k, d.width), c.width), f || (a.height = Math.max(Math.min(p * a.width, d.height), c.height), a.width = a.height / p, a.y = l + .5 * (n - l - a.height))) : 0 >= b.y ? (a.y = Math.max(q.y, n - d.height),
            a.y = Math.min(a.y, n - c.height), a.height = n - a.y, f || (a.width = Math.max(Math.min(a.height / p, d.width), c.width), a.height = p * a.width, a.x = k + .5 * (m - k - a.width))) : 1 <= b.y && (a.height = Math.max(Math.min(q.y - l, d.height), c.height), f || (a.width = Math.max(Math.min(a.height / p, d.width), c.width), a.height = p * a.width, a.x = k + .5 * (m - k - a.width)));
        w.v(q);
        return a
    };
    Nj.prototype.computeReshape = function ()
    {
        var a = Qj;
        this.ub instanceof X && (a = Rj(this.ub));
        return !(a === Sj || null !== this.g && this.g.Q.shift)
    };
    Nj.prototype.computeMinSize = function ()
    {
        var a = this.ub.si.copy(),
            b = this.si;
        !isNaN(b.width) && b.width > a.width && (a.width = b.width);
        !isNaN(b.height) && b.height > a.height && (a.height = b.height);
        return a
    };
    Nj.prototype.computeMaxSize = function ()
    {
        var a = this.ub.Gf.copy(),
            b = this.Gf;
        !isNaN(b.width) && b.width < a.width && (a.width = b.width);
        !isNaN(b.height) && b.height < a.height && (a.height = b.height);
        return a
    };
    Nj.prototype.computeCellSize = function ()
    {
        var a = new ia(NaN, NaN),
            b = this.ub.V;
        if (null !== b)
        {
            var c = b.tJ;
            !isNaN(c.width) && 0 < c.width && (a.width = c.width);
            !isNaN(c.height) && 0 < c.height && (a.height = c.height)
        }
        c = this.Ip;
        isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width);
        isNaN(a.height) && !isNaN(c.height) && 0 < c.height && (a.height = c.height);
        b = this.g;
        (isNaN(a.width) || isNaN(a.height)) && b && (c = b.Va.ce, null !== c && c.Rk && (c = c.qF, isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width), isNaN(a.height) && !isNaN(c.height) &&
        0 < c.height && (a.height = c.height)), b = b.En, null !== b && b.visible && this.Rk && (c = b.Hx, isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width), isNaN(a.height) && !isNaN(c.height) && 0 < c.height && (a.height = c.height)));
        if (isNaN(a.width) || 0 === a.width || Infinity === a.width) a.width = 1;
        if (isNaN(a.height) || 0 === a.height || Infinity === a.height) a.height = 1;
        return a
    };
    w.defineProperty(Nj,
        {
            si: "minSize"
        }, function ()
        {
            return this.Zh
        }, function (a)
        {
            w.G(a, ia, Nj, "minSize");
            if (!this.Zh.L(a))
            {
                var b = a.width;
                isNaN(b) && (b = 0);
                a = a.height;
                isNaN(a) && (a = 0);
                this.Zh.m(b, a)
            }
        });
    w.defineProperty(Nj,
        {
            Gf: "maxSize"
        }, function ()
        {
            return this.Yh
        }, function (a)
        {
            w.G(a, ia, Nj, "maxSize");
            if (!this.Yh.L(a))
            {
                var b = a.width;
                isNaN(b) && (b = Infinity);
                a = a.height;
                isNaN(a) && (a = Infinity);
                this.Yh.m(b, a)
            }
        });
    w.defineProperty(Nj,
        {
            Ip: "cellSize"
        }, function ()
        {
            return this.Sj
        }, function (a)
        {
            w.G(a, ia, Nj, "cellSize");
            this.Sj.L(a) || this.Sj.assign(a)
        });
    w.defineProperty(Nj,
        {
            Rk: "isGridSnapEnabled"
        }, function ()
        {
            return this.Ur
        }, function (a)
        {
            w.j(a, "boolean", Nj, "isGridSnapEnabled");
            this.Ur = a
        });
    w.u(Nj,
        {
            XF: "originalDesiredSize"
        }, function ()
        {
            return this.CD
        });
    w.u(Nj,
        {
            iJ: "originalLocation"
        }, function ()
        {
            return this.HD
        });

    function Tj()
    {
        0 < arguments.length && w.nd(Tj);
        qg.call(this);
        this.name = "Rotating";
        this.TD = 45;
        this.SD = 2;
        this.Jc = null;
        var a = new X;
        a.Gb = "Ellipse";
        a.Ca = Bd;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.mb = 1;
        a.cursor = "pointer";
        this.pl = a;
        this.pc = null;
        this.vw = 0;
        this.OD = new y
    }
    w.La(Tj, qg);
    w.ga("RotatingTool", Tj);
    Tj.prototype.updateAdornments = function (a)
    {
        if (null !== a)
        {
            if (a instanceof W)
            {
                var b = a.uB;
                if (b === a || b === a.path || b.ff) return
            }
            if (a.jb && null !== this.g && !this.g.ib && (b = a.uB, null !== b && a.canRotate() && a.U.I() && a.isVisible() && b.U.I() && b.Dj()))
            {
                var c = a.Up(this.name);
                if (null === c || c.ub !== b) c = this.makeAdornment(b);
                if (null !== c)
                {
                    c.angle = b.$l();
                    var d = null,
                        e = null;
                    b === a || b === a.bg ? (d = a.bg, e = a.Ff) : (d = b, e = Jb);
                    for (var f = d.Ja, e = w.xb(f.width * e.x + e.offsetX, f.height * e.y + e.offsetY); null !== d && d !== b;) d.transform.nb(e), d = d.R;
                    var d =
                            e.y,
                        f = Math.max(e.x - b.Ja.width, 0),
                        h = w.K();
                    c.location = b.Ya(new K(1, 0, 50 + f, d), h);
                    w.v(h);
                    w.v(e);
                    a.Ml(this.name, c);
                    return
                }
            }
            a.Jj(this.name)
        }
    };
    Tj.prototype.makeAdornment = function (a)
    {
        var b = null,
            b = a.V.wJ;
        if (null === b)
        {
            b = new jh;
            b.type = Uj;
            b.Ff = Jb;
            var c = this.mu;
            null !== c && b.add(c.copy())
        }
        else if (lh(b), b = b.copy(), null === b) return null;
        b.ub = a;
        return b
    };
    w.defineProperty(Tj,
        {
            mu: "handleArchetype"
        }, function ()
        {
            return this.pl
        }, function (a)
        {
            null !== a && w.G(a, G, Tj, "handleArchetype");
            this.pl = a
        });
    w.u(Tj,
        {
            handle: "handle"
        }, function ()
        {
            return this.pc
        });
    w.defineProperty(Tj,
        {
            ub: "adornedObject"
        }, function ()
        {
            return this.Jc
        }, function (a)
        {
            null !== a && w.G(a, G, Tj, "adornedObject");
            this.Jc = a
        });
    Tj.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        return null !== a && !a.ib && a.gx && a.Q.left ? null !== this.findToolHandleAt(a.Ec.da, this.name) : !1
    };
    Tj.prototype.doActivate = function ()
    {
        var a = this.g;
        if (null !== a && (this.pc = this.findToolHandleAt(a.Ec.da, this.name), null !== this.pc))
        {
            this.Jc = this.pc.V.ub;
            var b = this.Jc.V,
                c = b.bg;
            this.OD = this.Jc === b || this.Jc === c ? c.Ya(b.Ff) : this.Jc.Ya(Jb);
            this.vw = this.Jc.angle;
            a.ef = !0;
            a.xA = !0;
            this.Kb(this.name);
            this.sa = !0
        }
    };
    Tj.prototype.doDeactivate = function ()
    {
        var a = this.g;
        null !== a && (this.Vk(), this.Jc = this.pc = null, this.sa = a.ef = !1)
    };
    Tj.prototype.doCancel = function ()
    {
        var a = this.g;
        null !== a && (a.xA = !1);
        this.rotate(this.vw);
        this.stopTool()
    };
    Tj.prototype.doMouseMove = function ()
    {
        var a = this.g;
        this.sa && null !== a && (a = this.computeRotate(a.Q.da), this.rotate(a))
    };
    Tj.prototype.doMouseUp = function ()
    {
        var a = this.g;
        if (this.sa && null !== a)
        {
            a.xA = !1;
            var b = this.computeRotate(a.Q.da);
            this.rotate(b);
            a.Fc();
            this.Lf = this.name;
            a.Aa("PartRotated", this.Jc, this.vw)
        }
        this.stopTool()
    };
    Tj.prototype.rotate = function (a)
    {
        null !== this.Jc && (this.Jc.angle = a)
    };
    Tj.prototype.computeRotate = function (a)
    {
        a = this.OD.Qb(a);
        var b = this.Jc.R;
        null !== b && (a -= b.$l(), 360 <= a ? a -= 360 : 0 > a && (a += 360));
        var b = Math.min(Math.abs(this.LJ), 180),
            c = Math.min(Math.abs(this.KJ), b / 2);
        (null === this.g || !this.g.Q.shift) && 0 < b && 0 < c && (a % b < c ? a = Math.floor(a / b) * b : a % b > b - c && (a = (Math.floor(a / b) + 1) * b));
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        return a
    };
    w.defineProperty(Tj,
        {
            LJ: "snapAngleMultiple"
        }, function ()
        {
            return this.TD
        }, function (a)
        {
            w.j(a, "number", Tj, "snapAngleMultiple");
            this.TD = a
        });
    w.defineProperty(Tj,
        {
            KJ: "snapAngleEpsilon"
        }, function ()
        {
            return this.SD
        }, function (a)
        {
            w.j(a, "number", Tj, "snapAngleEpsilon");
            this.SD = a
        });
    w.u(Tj,
        {
            DL: "originalAngle"
        }, function ()
        {
            return this.vw
        });

    function Vj()
    {
        qg.call(this);
        0 < arguments.length && w.nd(Vj);
        this.name = "ClickSelecting"
    }
    w.La(Vj, qg);
    w.ga("ClickSelectingTool", Vj);
    Vj.prototype.canStart = function ()
    {
        return !this.isEnabled || null === this.g || this.isBeyondDragSize() ? !1 : !0
    };
    Vj.prototype.doMouseUp = function ()
    {
        this.sa && (this.standardMouseSelect(), !this.standardMouseClick() && null !== this.g && this.g.Q.Bj && this.g.Va.doToolTip());
        this.stopTool()
    };

    function Wj()
    {
        qg.call(this);
        0 < arguments.length && w.nd(Wj);
        this.name = "Action";
        this.ko = null
    }
    w.La(Wj, qg);
    w.ga("ActionTool", Wj);
    Wj.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        if (null === a) return !1;
        var b = a.Q,
            c = a.Oe(b.da, function (a)
            {
                for (; null !== a.R && !a.Ix;) a = a.R;
                return a
            });
        if (null !== c)
        {
            if (!c.Ix) return !1;
            this.ko = c;
            a.vo = a.Oe(b.da, null, null);
            return !0
        }
        return !1
    };
    Wj.prototype.doMouseDown = function ()
    {
        if (this.sa)
        {
            var a = this.g.Q,
                b = this.ko;
            null !== b && (a.Be = b, null !== b.sE && b.sE(a, b))
        }
        else this.canStart() && this.doActivate()
    };
    Wj.prototype.doMouseMove = function ()
    {
        if (this.sa)
        {
            var a = this.g.Q,
                b = this.ko;
            null !== b && (a.Be = b, null !== b.tE && b.tE(a, b))
        }
    };
    Wj.prototype.doMouseUp = function ()
    {
        if (this.sa)
        {
            var a = this.g,
                b = a.Q,
                c = this.ko;
            if (null === c) return;
            b.Be = c;
            null !== c.uE && c.uE(b, c);
            this.isBeyondDragSize() || Nh(c, b, a)
        }
        this.stopTool()
    };
    Wj.prototype.doCancel = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var a = a.Q,
                b = this.ko;
            if (null === b) return;
            a.Be = b;
            null !== b.rE && b.rE(a, b)
        }
        this.stopTool()
    };
    Wj.prototype.doStop = function ()
    {
        this.ko = null
    };

    function Xj()
    {
        qg.call(this);
        0 < arguments.length && w.nd(Xj);
        this.name = "ClickCreating";
        this.ym = null;
        this.iD = !0;
        this.XC = new y(0, 0)
    }
    w.La(Xj, qg);
    w.ga("ClickCreatingTool", Xj);
    Xj.prototype.canStart = function ()
    {
        if (!this.isEnabled || null === this.jA) return !1;
        var a = this.g;
        if (null === a || a.ib || a.Df || !a.Fp || !a.Q.left || this.isBeyondDragSize()) return !1;
        if (this.xI)
        {
            if (1 === a.Q.te && (this.XC = a.Q.Ce.copy()), 2 !== a.Q.te || this.isBeyondDragSize(this.XC)) return !1
        }
        else if (1 !== a.Q.te) return !1;
        return a.Xa !== this && null !== a.au(a.Q.da, !0) ? !1 : !0
    };
    Xj.prototype.doMouseUp = function ()
    {
        var a = this.g;
        this.sa && null !== a && this.insertPart(a.Q.da);
        this.stopTool()
    };
    Xj.prototype.insertPart = function (a)
    {
        var b = this.g;
        if (null === b) return null;
        var c = this.jA;
        if (null === c) return null;
        this.Kb(this.name);
        var d = null;
        c instanceof R ? c.he() && (lh(c), d = c.copy(), null !== d && b.add(d)) : null !== c && (c = b.$.copyNodeData(c), w.Pa(c) && (b.$.Nl(c), d = b.vh(c)));
        null !== d && (d.location = a, b.Af && b.select(d));
        b.Fc();
        this.Lf = this.name;
        b.Aa("PartCreated", d);
        this.Vk();
        return d
    };
    w.defineProperty(Xj,
        {
            jA: "archetypeNodeData"
        }, function ()
        {
            return this.ym
        }, function (a)
        {
            null !== a && w.G(a, Object, Xj, "archetypeNodeData");
            this.ym = a
        });
    w.defineProperty(Xj,
        {
            xI: "isDoubleClick"
        }, function ()
        {
            return this.iD
        }, function (a)
        {
            w.j(a, "boolean", Xj, "isDoubleClick");
            this.iD = a
        });

    function Yj()
    {
        this.mE = this.sD = this.yz = this.Uz = null
    }
    w.ga("HTMLInfo", Yj);
    w.defineProperty(Yj,
        {
            aB: "mainElement"
        }, function ()
        {
            return this.sD
        }, function (a)
        {
            null !== a && w.G(a, HTMLElement, Yj, "mainElement");
            this.sD = a
        });
    w.defineProperty(Yj,
        {
            show: "show"
        }, function ()
        {
            return this.Uz
        }, function (a)
        {
            this.Uz !== a && (null !== a && w.j(a, "function", Yj, "show"), this.Uz = a)
        });
    w.defineProperty(Yj,
        {
            Fn: "hide"
        }, function ()
        {
            return this.yz
        }, function (a)
        {
            this.yz !== a && (null !== a && w.j(a, "function", Yj, "hide"), this.yz = a)
        });
    w.defineProperty(Yj,
        {
            VB: "valueFunction"
        }, function ()
        {
            return this.mE
        }, function (a)
        {
            this.mE = a
        });

    function Zj(a, b, c)
    {
        this.text = a;
        this.JE = b;
        this.visible = c
    }

    function ak()
    {
        qg.call(this);
        0 < arguments.length && w.nd(ak);
        this.name = "ContextMenu";
        this.CC = this.az = this.zC = null;
        this.yD = new y;
        this.cz = this.Dm = null;
        var a = this;
        this.aA = function ()
        {
            a.stopTool()
        };
        bk(this)
    }
    w.La(ak, qg);
    w.ga("ContextMenuTool", ak);

    function bk(a)
    {
        var b = new Yj;
        b.show = function (a, b, c)
        {
            c.showDefaultContextMenu()
        };
        b.Fn = function (a, b)
        {
            b.hideDefaultContextMenu()
        };
        a.Dm = b;
        a.aA = function ()
        {
            a.stopTool()
        };
        if (!1 === w.PE)
        {
            var b = w.createElement("div"),
                c = w.createElement("div");
            b.style.cssText = "top: 0px;z-index:10002;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";
            c.style.cssText = "z-index:10001;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";
            var d = w.createElement("style");
            window.document.getElementsByTagName("head")[0].appendChild(d);
            d.sheet.insertRule(".goCXul { list-style: none; }", 0);
            d.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }", 0);
            d.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }", 0);
            b.addEventListener("contextmenu", ck, !1);
            b.addEventListener("selectstart", ck, !1);
            c.addEventListener("contextmenu", ck, !1);
            window.document.body && (window.document.body.appendChild(b), window.document.body.appendChild(c));
            w.St = b;
            w.Rt = c;
            w.PE = !0
        }
    }

    function ck(a)
    {
        a.preventDefault();
        return !1
    }
    ak.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        return null === a || this.isBeyondDragSize() || !a.Q.right ? !1 : null !== this.Dm && a.Q.Bj || null !== this.findObjectWithContextMenu() ? !0 : !1
    };
    ak.prototype.doStart = function ()
    {
        var a = this.g;
        null !== a && this.yD.set(a.Ec.da)
    };
    ak.prototype.doStop = function ()
    {
        this.hideContextMenu();
        this.ox = null
    };
    ak.prototype.findObjectWithContextMenu = function (a)
    {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b) return null;
        var c = b.Q,
            d = null;
        a instanceof D || (d = a instanceof G ? a : b.Oe(c.da, null, function (a)
        {
            return !a.layer.Pc
        }));
        if (null !== d)
        {
            for (a = d; null !== a;)
            {
                if (null !== a.contextMenu) return a;
                a = a.R
            }
            if (null !== this.Dm && b.Q.Bj) return d.V
        }
        else if (null !== b.contextMenu) return b;
        return null
    };
    ak.prototype.doActivate = function () {};
    ak.prototype.doMouseDown = function ()
    {
        qg.prototype.doMouseDown.call(this);
        null !== this.g && this.g.Va.gf.contains(this) && dk(this)
    };
    ak.prototype.doMouseUp = function ()
    {
        dk(this)
    };

    function dk(a)
    {
        var b = a.g;
        if (null !== b)
            if (a.sa)
            {
                var c = a.Ul;
                if (null !== c)
                {
                    if (!(c instanceof Yj))
                    {
                        var d = b.Oe(b.Q.da, null, null);
                        null !== d && d.fm(c) && a.standardMouseClick(null, null)
                    }
                    a.stopTool();
                    a.canStart() && (b.Xa = a, a.doMouseUp())
                }
            }
            else a.canStart() && (Mh(a, !0), a.sa || a.stopTool())
    }

    function Mh(a, b, c)
    {
        void 0 === c && (c = null);
        b && a.standardMouseSelect();
        if (!a.standardMouseClick())
            if (a.sa = !0, b = a.Dm, null === c && (c = a.findObjectWithContextMenu()), null !== c)
            {
                var d = c.contextMenu;
                null !== d ? (a.ox = c instanceof G ? c : null, a.showContextMenu(d, a.ox)) : null !== b && a.showContextMenu(b, a.ox)
            }
            else null !== b && a.showContextMenu(b, null)
    }
    ak.prototype.doMouseMove = function ()
    {
        this.sa && null !== this.g && this.g.Va.doMouseMove()
    };
    ak.prototype.showContextMenu = function (a, b)
    {
        null !== b && w.G(b, G, ak, "showContextMenu:obj");
        var c = this.g;
        if (null !== c)
        {
            a !== this.Ul && this.hideContextMenu();
            if (a instanceof jh)
            {
                a.ag = "Tool";
                a.lm = !1;
                a.scale = 1 / c.scale;
                a.zd = this.name;
                null !== a.placeholder && (a.placeholder.scale = c.scale);
                var d = a.g;
                null !== d && d !== c && d.remove(a);
                c.add(a);
                null !== b ? (c = null, d = b.Yl(), null !== d && (c = d.data), a.ub = b, a.data = c) : a.data = c.$;
                a.af();
                this.positionContextMenu(a, b)
            }
            else a instanceof Yj && a.show(b, c, this);
            this.Ul = a
        }
    };
    ak.prototype.positionContextMenu = function (a)
    {
        if (null === a.placeholder)
        {
            var b = this.g;
            if (null !== b)
            {
                var c = b.Q.da.copy(),
                    d = a.za,
                    e = b.sb;
                b.Q.Bj && (c.x -= d.width);
                c.x + d.width > e.right && (c.x -= d.width + 5 / b.scale);
                c.x < e.x && (c.x = e.x);
                c.y + d.height > e.bottom && (c.y -= d.height + 5 / b.scale);
                c.y < e.y && (c.y = e.y);
                a.position = c
            }
        }
    };
    ak.prototype.hideContextMenu = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = this.Ul;
            null !== b && (b instanceof jh ? (a.remove(b), null !== this.az && this.az.Jj(b.zd), b.data = null, b.ub = null) : b instanceof Yj && (null !== b.Fn ? b.Fn(a, this) : null !== b.aB && (b.aB.style.display = "none")), this.Ul = null, this.standardMouseOver())
        }
    };

    function ek(a)
    {
        if (null === a.g) return null;
        a = new H(Zj);
        a.add(new Zj("Copy", function (a)
        {
            a.pb.copySelection()
        }, function (a)
        {
            return a.pb.canCopySelection()
        }));
        a.add(new Zj("Cut", function (a)
        {
            a.pb.cutSelection()
        }, function (a)
        {
            return a.pb.canCutSelection()
        }));
        a.add(new Zj("Delete", function (a)
        {
            a.pb.deleteSelection()
        }, function (a)
        {
            return a.pb.canDeleteSelection()
        }));
        a.add(new Zj("Paste", function (a)
        {
            a.pb.pasteSelection(a.Q.da)
        }, function (a)
        {
            return a.pb.canPasteSelection()
        }));
        a.add(new Zj("Select All", function (a)
            {
                a.pb.selectAll()
            },
            function (a)
            {
                return a.pb.canSelectAll()
            }));
        a.add(new Zj("Undo", function (a)
        {
            a.pb.undo()
        }, function (a)
        {
            return a.pb.canUndo()
        }));
        a.add(new Zj("Redo", function (a)
        {
            a.pb.redo()
        }, function (a)
        {
            return a.pb.canRedo()
        }));
        a.add(new Zj("Scroll To Part", function (a)
        {
            a.pb.scrollToPart()
        }, function (a)
        {
            return a.pb.canScrollToPart()
        }));
        a.add(new Zj("Zoom To Fit", function (a)
        {
            a.pb.zoomToFit()
        }, function (a)
        {
            return a.pb.canZoomToFit()
        }));
        a.add(new Zj("Reset Zoom", function (a)
        {
            a.pb.resetZoom()
        }, function (a)
        {
            return a.pb.canResetZoom()
        }));
        a.add(new Zj("Group Selection", function (a)
        {
            a.pb.groupSelection()
        }, function (a)
        {
            return a.pb.canGroupSelection()
        }));
        a.add(new Zj("Ungroup Selection", function (a)
        {
            a.pb.ungroupSelection()
        }, function (a)
        {
            return a.pb.canUngroupSelection()
        }));
        a.add(new Zj("Edit Text", function (a)
        {
            a.pb.editTextBlock()
        }, function (a)
        {
            return a.pb.canEditTextBlock()
        }));
        return a
    }
    ak.prototype.showDefaultContextMenu = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            null === this.cz && (this.cz = ek(this));
            w.St.innerHTML = "";
            w.Rt.addEventListener("click", this.aA, !1);
            var b = this,
                c = w.createElement("ul");
            c.className = "goCXul";
            w.St.appendChild(c);
            c.innerHTML = "";
            for (var d = this.cz.i; d.next();)
            {
                var e = d.value,
                    f = e.visible;
                if ("function" === typeof e.JE && ("function" !== typeof f || f(a)))
                {
                    f = w.createElement("li");
                    f.className = "goCXli";
                    var h = w.createElement("a");
                    h.className = "goCXa";
                    h.href = "#";
                    h.QG = e.JE;
                    h.addEventListener("click",
                        function (c)
                        {
                            this.QG(a);
                            b.stopTool();
                            c.preventDefault();
                            return !1
                        }, !1);
                    h.textContent = e.text;
                    f.appendChild(h);
                    c.appendChild(f)
                }
            }
            w.St.style.display = "block";
            w.Rt.style.display = "block"
        }
    };
    ak.prototype.hideDefaultContextMenu = function ()
    {
        null !== this.Ul && this.Ul === this.Dm && (w.St.style.display = "none", w.Rt.style.display = "none", w.Rt.removeEventListener("click", this.aA, !1), this.Ul = null)
    };
    w.defineProperty(ak,
        {
            Ul: "currentContextMenu"
        }, function ()
        {
            return this.zC
        }, function (a)
        {
            this.zC = a;
            this.az = a instanceof jh ? a.Ye : null
        });
    w.defineProperty(ak,
        {
            $K: "defaultTouchContextMenu"
        }, function ()
        {
            return this.Dm
        }, function (a)
        {
            this.Dm = a
        });
    w.defineProperty(ak,
        {
            ox: "currentObject"
        }, function ()
        {
            return this.CC
        }, function (a)
        {
            null !== a && w.G(a, G, ak, "currentObject");
            this.CC = a
        });
    w.u(ak,
        {
            zL: "mouseDownPoint"
        }, function ()
        {
            return this.yD
        });

    function fk()
    {
        qg.call(this);
        0 < arguments.length && w.nd(fk);
        this.name = "DragSelecting";
        this.Bo = 175;
        this.nD = !1;
        var a = new R;
        a.ag = "Tool";
        a.lm = !1;
        var b = new X;
        b.name = "SHAPE";
        b.Gb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        a.add(b);
        this.Am = a
    }
    w.La(fk, qg);
    w.ga("DragSelectingTool", fk);
    fk.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        if (null === a || !a.Af) return !1;
        var b = a.Q;
        return !b.left || a.Xa !== this && (!this.isBeyondDragSize() || b.timestamp - a.Ec.timestamp < this.QE || null !== a.au(b.da, !0)) ? !1 : !0
    };
    fk.prototype.doActivate = function ()
    {
        var a = this.g;
        null !== a && (this.sa = !0, a.ef = !0, a.fb = !0, a.add(this.rh), this.doMouseMove())
    };
    fk.prototype.doDeactivate = function ()
    {
        var a = this.g;
        null !== a && (Yh(a), a.remove(this.rh), a.fb = !1, this.sa = a.ef = !1)
    };
    fk.prototype.doMouseMove = function ()
    {
        var a = this.g;
        if (null !== a && this.sa && null !== this.rh)
        {
            var b = this.computeBoxBounds(),
                c = this.rh.Cd("SHAPE");
            null === c && (c = this.rh.Bd());
            c.Ca = b.size;
            this.rh.position = b.position;
            (a.re || a.se) && a.yA(a.Q.Ce)
        }
    };
    fk.prototype.doMouseUp = function ()
    {
        if (this.sa)
        {
            var a = this.g;
            a.remove(this.rh);
            try
            {
                a.ic = "wait", this.selectInRect(this.computeBoxBounds())
            }
            finally
            {
                a.ic = ""
            }
        }
        this.stopTool()
    };
    fk.prototype.computeBoxBounds = function ()
    {
        var a = this.g;
        return null === a ? new B(0, 0, 0, 0) : new B(a.Ec.da, a.Q.da)
    };
    fk.prototype.selectInRect = function (a)
    {
        var b = this.g;
        if (null !== b)
        {
            var c = b.Q;
            b.Aa("ChangingSelection");
            a = b.Jk(a, null, function (a)
            {
                return a instanceof R ? a.canSelect() : !1
            }, this.DI);
            if (w.yh ? c.Fu : c.control)
                if (c.shift)
                    for (a = a.i; a.next();) c = a.value, c.jb && (c.jb = !1);
                else
                    for (a = a.i; a.next();) c = a.value, c.jb = !c.jb;
            else
            {
                if (!c.shift)
                {
                    for (var c = new H(R), d = b.selection.i; d.next();)
                    {
                        var e = d.value;
                        a.contains(e) || c.add(e)
                    }
                    for (c = c.i; c.next();) c.value.jb = !1
                }
                for (a = a.i; a.next();) c = a.value, c.jb || (c.jb = !0)
            }
            b.Aa("ChangedSelection")
        }
    };
    w.defineProperty(fk,
        {
            QE: "delay"
        }, function ()
        {
            return this.Bo
        }, function (a)
        {
            w.j(a, "number", fk, "delay");
            this.Bo = a
        });
    w.defineProperty(fk,
        {
            DI: "isPartialInclusion"
        }, function ()
        {
            return this.nD
        }, function (a)
        {
            w.j(a, "boolean", fk, "isPartialInclusion");
            this.nD = a
        });
    w.defineProperty(fk,
        {
            rh: "box"
        }, function ()
        {
            return this.Am
        }, function (a)
        {
            null !== a && w.G(a, R, fk, "box");
            this.Am = a
        });

    function gk()
    {
        qg.call(this);
        0 < arguments.length && w.nd(gk);
        this.name = "Panning";
        this.Lz = new y;
        this.Rj = !1;
        var a = this;
        this.XD = function ()
        {
            window.document.removeEventListener("scroll", a.XD, !1);
            a.stopTool()
        }
    }
    w.La(gk, qg);
    w.ga("PanningTool", gk);
    gk.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        return null === a || !a.re && !a.se || !a.Q.left || a.Xa !== this && !this.isBeyondDragSize() ? !1 : !0
    };
    gk.prototype.doActivate = function ()
    {
        var a = this.g;
        null !== a && (this.Rj ? (a.Q.bubbles = !0, window.document.addEventListener("scroll", this.XD, !1)) : (a.ic = "move", a.ef = !0, this.Lz = a.position.copy()), this.sa = !0)
    };
    gk.prototype.doDeactivate = function ()
    {
        var a = this.g;
        null !== a && (a.ic = "", this.sa = a.ef = !1)
    };
    gk.prototype.doCancel = function ()
    {
        var a = this.g;
        null !== a && (a.position = this.Lz, a.ef = !1);
        this.stopTool()
    };
    gk.prototype.doMouseMove = function ()
    {
        this.move()
    };
    gk.prototype.doMouseUp = function ()
    {
        this.move();
        this.stopTool()
    };
    gk.prototype.move = function ()
    {
        var a = this.g;
        if (this.sa && a)
            if (this.Rj) a.Q.bubbles = !0;
            else
            {
                var b = a.position,
                    c = a.Ec.da,
                    d = a.Q.da,
                    e = b.x + c.x - d.x,
                    c = b.y + c.y - d.y;
                a.re || (e = b.x);
                a.se || (c = b.y);
                a.position = new y(e, c)
            }
    };
    w.defineProperty(gk,
        {
            bubbles: "bubbles"
        }, function ()
        {
            return this.Rj
        }, function (a)
        {
            w.j(a, "boolean", gk, "bubbles");
            this.Rj = a
        });
    w.u(gk,
        {
            GL: "originalPosition"
        }, function ()
        {
            return this.Lz
        });

    function hk()
    {
        0 < arguments.length && w.nd(hk);
        qg.call(this);
        this.name = "TextEditing";
        this.Zz = this.vk = null;
        this.WD = ik;
        this.Il = null;
        this.Ta = jk;
        this.Is = null;
        this.vD = 1;
        this.QD = !0;
        var a = new Yj;
        this.EC = null;
        this.MC = a;
        this.dz = null;
        kk(this, a)
    }
    w.ga("TextEditingTool", hk);
    w.La(hk, qg);
    var lk;
    hk.LostFocus = lk = w.p(hk, "LostFocus", 0);
    var mk;
    hk.MouseDown = mk = w.p(hk, "MouseDown", 1);
    var nk;
    hk.Tab = nk = w.p(hk, "Tab", 2);
    var ok;
    hk.Enter = ok = w.p(hk, "Enter", 3);
    hk.SingleClick = w.p(hk, "SingleClick", 0);
    var ik;
    hk.SingleClickSelected = ik = w.p(hk, "SingleClickSelected", 1);
    var pk;
    hk.DoubleClick = pk = w.p(hk, "DoubleClick", 2);
    var jk;
    hk.StateNone = jk = w.p(hk, "StateNone", 0);
    var qk;
    hk.StateActive = qk = w.p(hk, "StateActive", 1);
    var rk;
    hk.StateEditing = rk = w.p(hk, "StateEditing", 2);
    var sk;
    hk.StateValidating = sk = w.p(hk, "StateValidating", 3);
    var tk;
    hk.StateInvalid = tk = w.p(hk, "StateInvalid", 4);
    var uk;
    hk.StateValidated = uk = w.p(hk, "StateValidated", 5);

    function kk(a, b)
    {
        var c = w.createElement("textarea");
        a.dz = c;
        c.addEventListener("input", function ()
        {
            if (null !== a.Wg)
            {
                var b = a.VI(this.value);
                this.style.width = 20 + b.za.width * this.RJ + "px";
                this.rows = b.Tx
            }
        }, !1);
        c.addEventListener("keydown", function (b)
        {
            if (null !== a.Wg)
            {
                var c = b.which;
                13 === c ? (!1 === a.Wg.Mx && b.preventDefault(), a.acceptText(ok)) : 9 === c ? (a.acceptText(nk), b.preventDefault()) : 27 === c && (a.doCancel(), null !== a.g && a.g.doFocus())
            }
        }, !1);
        c.addEventListener("focus", function ()
        {
            vk(a)
        }, !1);
        c.addEventListener("blur",
            function ()
            {
                wk(a)
            }, !1);
        b.VB = function ()
        {
            return c.value
        };
        b.aB = c;
        b.show = function (a, b, f)
        {
            if (f.state === tk) c.style.border = "3px solid red", c.focus();
            else
            {
                var h = a.Ya(Jb),
                    k = b.position,
                    l = b.scale,
                    m = a.vj() * l;
                m < f.RF && (m = f.RF);
                var n = a.Ja.width * m + 6,
                    p = a.Ja.height * m + 2,
                    q = (h.x - k.x) * l,
                    h = (h.y - k.y) * l;
                c.value = a.text;
                b.tj.style.font = a.font;
                c.style.position = "absolute";
                c.style.zIndex = "100";
                c.style.font = "inherit";
                c.style.fontSize = 100 * m + "%";
                c.style.lineHeight = "normal";
                c.style.width = n + "px";
                c.style.left = (q - n / 2 | 0) - 1 + "px";
                c.style.top =
                    (h - p / 2 | 0) - 1 + "px";
                c.style.textAlign = a.textAlign;
                c.style.margin = "0";
                c.style.padding = "1px";
                c.style.border = "0";
                c.style.outline = "none";
                c.style.whiteSpace = "pre-wrap";
                c.style.overflow = " hidden";
                c.rows = a.Tx;
                c.RJ = m;
                b.tj.appendChild(c);
                c.focus();
                f.vy && (c.select(), c.setSelectionRange(0, 9999))
            }
        };
        b.Fn = function (a)
        {
            a.tj.removeChild(c)
        }
    }
    w.defineProperty(hk,
        {
            Wg: "textBlock"
        }, function ()
        {
            return this.Zz
        }, function (a)
        {
            null !== a && w.G(a, Lh, hk, "textBlock");
            this.Zz = a
        });
    w.defineProperty(hk,
        {
            rj: "currentTextEditor"
        }, function ()
        {
            return this.EC
        }, function (a)
        {
            this.EC = a
        });
    w.defineProperty(hk,
        {
            MH: "defaultTextEditor"
        }, function ()
        {
            return this.MC
        }, function (a)
        {
            this.MC = a
        });
    w.defineProperty(hk,
        {
            xG: "starting"
        }, function ()
        {
            return this.WD
        }, function (a)
        {
            w.ob(a, hk, hk, "starting");
            this.WD = a
        });
    hk.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        if (null === a || a.ib || !a.Q.left || this.isBeyondDragSize()) return !1;
        var b = a.Oe(a.Q.da);
        if (!(null !== b && b instanceof Lh && b.zA && b.V.canEdit())) return !1;
        b = b.V;
        return null === b || this.xG === ik && !b.jb || this.xG === pk && 2 > a.Q.te ? !1 : !0
    };
    hk.prototype.doStart = function ()
    {
        this.sa || null === this.Wg || this.doActivate()
    };
    hk.prototype.doActivate = function ()
    {
        if (!this.sa)
        {
            var a = this.g;
            if (null !== a)
            {
                var b = this.Wg;
                null === b && (b = a.Oe(a.Q.da));
                if (null !== b && b instanceof Lh && (this.Wg = b, null !== b.V))
                {
                    this.sa = !0;
                    this.Ta = qk;
                    var c = this.MH;
                    null !== b.AG && (c = b.AG);
                    this.vk = this.Wg.copy();
                    var d = new B(this.Wg.Ya(zb), this.Wg.Ya(Sb));
                    a.lG(d);
                    if (c instanceof Yj) c.show(b, a, this);
                    else
                    {
                        c.style.position = "absolute";
                        c.style.zIndex = "100";
                        c.textEditingTool = this;
                        if ("function" === typeof c.onActivate) c.onActivate();
                        a.tj.appendChild(c);
                        "function" === typeof c.focus &&
                        c.focus();
                        "function" === typeof c.select && this.vy && (c.select(), c.setSelectionRange(0, 9999))
                    }
                    this.rj = c
                }
            }
        }
    };
    hk.prototype.doCancel = function ()
    {
        null !== this.Is && this.rj instanceof HTMLElement && (this.rj.style.border = this.Is, this.Is = null);
        this.stopTool()
    };
    hk.prototype.doMouseUp = function ()
    {
        !this.sa && this.canStart() && this.doActivate()
    };
    hk.prototype.doMouseDown = function ()
    {
        this.sa && this.acceptText(mk)
    };
    hk.prototype.acceptText = function (a)
    {
        switch (a)
        {
            case mk:
                if (this.Ta === uk) this.rj instanceof HTMLElement && this.rj.focus();
                else if (this.Ta === qk || this.Ta === tk || this.Ta === rk) this.Ta = sk, xk(this);
                break;
            case lk:
            case ok:
            case nk:
                if (ok === a && !0 === this.Zz.Mx) break;
                if (this.Ta === qk || this.Ta === tk || this.Ta === rk) this.Ta = sk, xk(this)
        }
    };

    function xk(a)
    {
        var b = a.Wg,
            c = a.g,
            d = a.rj;
        if (null !== b && null !== d)
        {
            var e = b.text,
                f = "";
            d instanceof Yj ? null !== d.VB && (f = d.VB()) : (f = d.value, f = "function" === typeof f ? f() : f);
            a.isValidText(b, e, f) ? (a.Kb(a.name), a.Ta = uk, a.Lf = a.name, b.text = f, null !== b.zG && b.zG(b, e, f), null !== c && c.Aa("TextEdited", b, e), a.Vk(), a.stopTool(), null !== c && c.doFocus()) : (a.Ta = tk, null !== b.AA && b.AA(a, e, f), d instanceof Yj ? d.show(b, c, a) : (null === a.Is && (a.Is = d.style.border, d.style.border = "3px solid red"), "function" === typeof d.focus && d.focus()))
        }
    }
    hk.prototype.doDeactivate = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            this.Ta = jk;
            this.Wg = null;
            if (null !== this.rj)
            {
                var b = this.rj;
                if (b instanceof Yj) b.Fn(a, this);
                else
                {
                    if ("function" === typeof b.onDeactivate) b.onDeactivate();
                    null !== b && a.tj.removeChild(b)
                }
            }
            this.sa = !1
        }
    };
    hk.prototype.doFocus = function ()
    {
        vk(this)
    };
    hk.prototype.doBlur = function ()
    {
        wk(this)
    };

    function vk(a)
    {
        if (null !== a.rj && a.state !== jk)
        {
            var b = a.dz;
            a.Ta === qk && (a.Ta = rk);
            "function" === typeof b.select && a.vy && (b.select(), b.setSelectionRange(0, 9999))
        }
    }

    function wk(a)
    {
        if (null !== a.rj && a.state !== jk)
        {
            var b = a.dz;
            "function" === typeof b.focus && b.focus();
            "function" === typeof b.select && a.vy && (b.select(), b.setSelectionRange(0, 9999))
        }
    }
    hk.prototype.isValidText = function (a, b, c)
    {
        w.G(a, Lh, hk, "isValidText:textblock");
        var d = this.LB;
        if (null !== d && !d(a, b, c)) return !1;
        d = a.LB;
        return null === d || d(a, b, c) ? !0 : !1
    };
    w.defineProperty(hk,
        {
            LB: "textValidation"
        }, function ()
        {
            return this.Il
        }, function (a)
        {
            null !== a && w.j(a, "function", hk, "textValidation");
            this.Il = a
        });
    w.defineProperty(hk,
        {
            RF: "minimumEditorScale"
        }, function ()
        {
            return this.vD
        }, function (a)
        {
            null !== a && w.j(a, "number", hk, "minimumEditorScale");
            this.vD = a
        });
    w.defineProperty(hk,
        {
            vy: "selectsTextOnActivate"
        }, function ()
        {
            return this.QD
        }, function (a)
        {
            null !== a && w.j(a, "boolean", hk, "selectsTextOnActivate");
            this.QD = a
        });
    w.defineProperty(hk,
        {
            state: "state"
        }, function ()
        {
            return this.Ta
        }, function (a)
        {
            this.Ta !== a && (w.ob(a, hk, hk, "starting"), this.Ta = a)
        });
    hk.prototype.measureTemporaryTextBlock = hk.prototype.VI = function (a)
    {
        var b = this.vk;
        b.text = a;
        yk(b, this.Wg.Vo, Infinity);
        return b
    };

    function hh()
    {
        qg.call(this);
        this.name = "ToolManager";
        this.VG = new H(qg);
        this.WG = new H(qg);
        this.XG = new H(qg);
        this.aD = this.bD = 850;
        this.RC = (new ia(2, 2)).Ha();
        this.iE = 5E3;
        this.zD = Ph;
        this.ZC = zk;
        this.Ev = this.FC = null;
        this.jn = -1
    }
    w.La(hh, qg);
    w.ga("ToolManager", hh);
    var Ph;
    hh.WheelScroll = Ph = w.p(hh, "WheelScroll", 0);
    var Oh;
    hh.WheelZoom = Oh = w.p(hh, "WheelZoom", 1);
    hh.WheelNone = w.p(hh, "WheelNone", 2);
    var zk;
    hh.GestureZoom = zk = w.p(hh, "GestureZoom", 3);
    var Ak;
    hh.GestureCancel = Ak = w.p(hh, "GestureCancel", 4);
    var Bk;
    hh.GestureNone = Bk = w.p(hh, "GestureNone", 5);
    w.defineProperty(hh,
        {
            Iu: "mouseWheelBehavior"
        }, function ()
        {
            return this.zD
        }, function (a)
        {
            w.ob(a, hh, hh, "mouseWheelBehavior");
            this.zD = a
        });
    w.defineProperty(hh,
        {
            Mk: "gestureBehavior"
        }, function ()
        {
            return this.ZC
        }, function (a)
        {
            w.ob(a, hh, hh, "gestureBehavior");
            this.ZC = a
        });
    hh.prototype.initializeStandardTools = function ()
    {
        this.hH = new Wj;
        this.$F = new Uh;
        this.MI = new oj;
        this.jG = new Nj;
        this.yJ = new Tj;
        this.NF = new ej;
        this.ce = new nh;
        this.RH = new fk;
        this.jJ = new gk;
        this.sA = new ak;
        this.KB = new hk;
        this.uH = new Xj;
        this.vH = new Vj
    };
    hh.prototype.updateAdornments = function (a)
    {
        var b = this.Vl;
        if (b instanceof jh && this.Ev === a)
        {
            var c = b.ub;
            (null !== a ? c.V === a : null === c) ? this.showToolTip(b, c): this.hideToolTip()
        }
    };
    hh.prototype.doMouseDown = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Q;
            b.Bj && this.Mk === Ak && (b.bubbles = !1);
            if (b.wu)
            {
                this.cancelWaitAfter();
                if (this.Mk === Bk)
                {
                    b.bubbles = !0;
                    return
                }
                if (this.Mk === Ak) return;
                if (a.Xa.canStartMultiTouch())
                {
                    a.Xa.standardPinchZoomStart();
                    return
                }
            }
            var c = a.ja;
            c.mA && 0 !== c.wi && w.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");
            for (var c = this.gf.length, d = 0; d < c; d++)
            {
                var e = this.gf.ea(d);
                null === e.g && e.Sc(this.g);
                if (e.canStart())
                {
                    a.doFocus();
                    a.Xa = e;
                    a.Xa === e && (e.sa || e.doActivate(), e.doMouseDown());
                    return
                }
            }
            1 === a.Q.button && (this.Iu === Ph ? this.Iu = Oh : this.Iu === Oh && (this.Iu = Ph));
            this.doActivate();
            this.standardWaitAfter(this.tF, b)
        }
    };
    hh.prototype.doMouseMove = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Q;
            if (b.wu)
            {
                if (this.Mk === Bk)
                {
                    b.bubbles = !0;
                    return
                }
                if (this.Mk === Ak) return;
                if (a.Xa.canStartMultiTouch())
                {
                    a.Xa.standardPinchZoomMove();
                    return
                }
            }
            if (this.sa)
                for (var c = this.dg.length, d = 0; d < c; d++)
                {
                    var e = this.dg.ea(d);
                    null === e.g && e.Sc(this.g);
                    if (e.canStart())
                    {
                        a.doFocus();
                        a.Xa = e;
                        a.Xa === e && (e.sa || e.doActivate(), e.doMouseMove());
                        return
                    }
                }
            Ck(this, a);
            a = b.event;
            null === a || "mousemove" !== a.type && "pointermove" !== a.type && a.cancelable || (b.bubbles = !0)
        }
    };

    function Ck(a, b)
    {
        a.standardMouseOver();
        a.isBeyondDragSize() && a.standardWaitAfter(a.sa ? a.tF : a.pI, b.Q)
    }
    hh.prototype.doCurrentObjectChanged = function (a, b)
    {
        var c = this.Vl;
        null === c || null !== b && c instanceof jh && (b === c || b.fm(c)) || this.hideToolTip()
    };
    hh.prototype.doWaitAfter = function (a)
    {
        var b = this.g;
        null !== b && b.yb && (this.doMouseHover(), this.sa || this.doToolTip(), a.Bj && !b.Q.tc && (a = a.copy(), a.button = 2, a.buttons = 2, b.Q = a, b.wp = !0, b.doMouseUp()))
    };
    hh.prototype.doMouseHover = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Q;
            null === b.Be && (b.Be = a.Oe(b.da, null, null));
            var c = b.Be;
            if (null !== c)
                for (b.tc = !1; null !== c;)
                {
                    a = this.sa ? c.fB : c.gB;
                    if (null !== a && (a(b, c), b.tc)) break;
                    c = c.R
                }
            else c = this.sa ? a.fB : a.gB, null !== c && c(b)
        }
    };
    hh.prototype.doToolTip = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            var b = a.Q;
            null === b.Be && (b.Be = a.Oe(b.da, null, null));
            b = b.Be;
            if (null !== b)
            {
                if (a = this.Vl, !(a instanceof jh) || b !== a && !b.fm(a))
                {
                    for (; null !== b;)
                    {
                        a = b.NB;
                        if (null !== a)
                        {
                            this.showToolTip(a, b);
                            return
                        }
                        b = b.R
                    }
                    this.hideToolTip()
                }
            }
            else a = a.NB, null !== a ? this.showToolTip(a, null) : this.hideToolTip()
        }
    };
    hh.prototype.showToolTip = function (a, b)
    {
        null !== b && w.G(b, G, hh, "showToolTip:obj");
        var c = this.g;
        if (null !== c)
        {
            a !== this.Vl && this.hideToolTip();
            if (a instanceof jh)
            {
                a.ag = "Tool";
                a.lm = !1;
                a.scale = 1 / c.scale;
                a.zd = "ToolTip";
                null !== a.placeholder && (a.placeholder.scale = c.scale);
                var d = a.g;
                null !== d && d !== c && d.remove(a);
                c.add(a);
                null !== b ? (c = null, d = b.Yl(), null !== d && (c = d.data), a.ub = b, a.data = c) : a.data = c.$;
                a.af();
                this.positionToolTip(a, b)
            }
            else a instanceof Yj && a !== this.Vl && a.show(b, c, this);
            this.Vl = a; - 1 !== this.jn && (w.clearTimeout(this.jn),
            this.jn = -1);
            c = this.WJ;
            if (0 < c && Infinity !== c)
            {
                var e = this;
                this.jn = w.setTimeout(function ()
                {
                    e.hideToolTip()
                }, c)
            }
        }
    };
    hh.prototype.positionToolTip = function (a)
    {
        if (null === a.placeholder)
        {
            var b = this.g;
            if (null !== b)
            {
                var c = b.Q.da.copy(),
                    d = a.za,
                    e = b.sb;
                b.Q.Bj && (c.x -= d.width);
                c.x + d.width > e.right && (c.x -= d.width + 5 / b.scale);
                c.x < e.x && (c.x = e.x);
                c.y = c.y + 20 / b.scale + d.height > e.bottom ? c.y - (d.height + 5 / b.scale) : c.y + 20 / b.scale;
                c.y < e.y && (c.y = e.y);
                a.position = c
            }
        }
    };
    hh.prototype.hideToolTip = function ()
    {
        -1 !== this.jn && (w.clearTimeout(this.jn), this.jn = -1);
        var a = this.g;
        if (null !== a)
        {
            var b = this.Vl;
            null !== b && (b instanceof jh ? (a.remove(b), null !== this.Ev && this.Ev.Jj(b.zd), b.data = null, b.ub = null) : b instanceof Yj && null !== b.Fn && b.Fn(a, this), this.Vl = null)
        }
    };
    w.defineProperty(hh,
        {
            Vl: "currentToolTip"
        }, function ()
        {
            return this.FC
        }, function (a)
        {
            this.FC = a;
            this.Ev = null !== a && a instanceof jh ? a.Ye : null
        });
    hh.prototype.doMouseUp = function ()
    {
        this.cancelWaitAfter();
        var a = this.g;
        if (null !== a)
        {
            if (this.sa)
                for (var b = this.eg.length, c = 0; c < b; c++)
                {
                    var d = this.eg.ea(c);
                    null === d.g && d.Sc(this.g);
                    if (d.canStart())
                    {
                        a.doFocus();
                        a.Xa = d;
                        a.Xa === d && (d.sa || d.doActivate(), d.doMouseUp());
                        return
                    }
                }
            a.doFocus();
            this.doDeactivate()
        }
    };
    hh.prototype.doMouseWheel = function ()
    {
        this.standardMouseWheel()
    };
    hh.prototype.doKeyDown = function ()
    {
        var a = this.g;
        null !== a && a.pb.doKeyDown()
    };
    hh.prototype.doKeyUp = function ()
    {
        var a = this.g;
        null !== a && a.pb.doKeyUp()
    };
    hh.prototype.doCancel = function ()
    {
        null !== Sh && Sh.doCancel();
        qg.prototype.doCancel.call(this)
    };
    hh.prototype.findTool = function (a)
    {
        w.j(a, "string", hh, "findTool:name");
        for (var b = this.gf.length, c = 0; c < b; c++)
        {
            var d = this.gf.ea(c);
            if (d.name === a) return d
        }
        b = this.dg.length;
        for (c = 0; c < b; c++)
            if (d = this.dg.ea(c), d.name === a) return d;
        b = this.eg.length;
        for (c = 0; c < b; c++)
            if (d = this.eg.ea(c), d.name === a) return d;
        return null
    };
    hh.prototype.replaceTool = function (a, b)
    {
        w.j(a, "string", hh, "replaceTool:name");
        null !== b && (w.G(b, qg, hh, "replaceTool:newtool"), b.g && b.g !== this.g && w.k("Cannot share tools between Diagrams: " + b.toString()), b.Sc(this.g));
        for (var c = this.gf.length, d = 0; d < c; d++)
        {
            var e = this.gf.ea(d);
            if (e.name === a) return null !== b ? this.gf.jg(d, b) : this.gf.dd(d), e
        }
        c = this.dg.length;
        for (d = 0; d < c; d++)
            if (e = this.dg.ea(d), e.name === a) return null !== b ? this.dg.jg(d, b) : this.dg.dd(d), e;
        c = this.eg.length;
        for (d = 0; d < c; d++)
            if (e = this.eg.ea(d), e.name ===
            a) return null !== b ? this.eg.jg(d, b) : this.eg.dd(d), e;
        return null
    };

    function Dk(a, b, c, d)
    {
        w.j(b, "string", hh, "replaceStandardTool:name");
        w.G(d, H, hh, "replaceStandardTool:list");
        null !== c && (w.G(c, qg, hh, "replaceStandardTool:newtool"), c.g && c.g !== a.g && w.k("Cannot share tools between Diagrams: " + c.toString()), c.name = b, c.Sc(a.g));
        a.findTool(b) ? a.replaceTool(b, c) : null !== c && d.add(c)
    }
    w.u(hh,
        {
            gf: "mouseDownTools"
        }, function ()
        {
            return this.VG
        });
    w.u(hh,
        {
            dg: "mouseMoveTools"
        }, function ()
        {
            return this.WG
        });
    w.u(hh,
        {
            eg: "mouseUpTools"
        }, function ()
        {
            return this.XG
        });
    w.defineProperty(hh,
        {
            pI: "hoverDelay"
        }, function ()
        {
            return this.bD
        }, function (a)
        {
            w.j(a, "number", hh, "hoverDelay");
            this.bD = a
        });
    w.defineProperty(hh,
        {
            tF: "holdDelay"
        }, function ()
        {
            return this.aD
        }, function (a)
        {
            w.j(a, "number", hh, "holdDelay");
            this.aD = a
        });
    w.defineProperty(hh,
        {
            SH: "dragSize"
        }, function ()
        {
            return this.RC
        }, function (a)
        {
            w.G(a, ia, hh, "dragSize");
            this.RC = a.S()
        });
    w.defineProperty(hh,
        {
            WJ: "toolTipDuration"
        }, function ()
        {
            return this.iE
        }, function (a)
        {
            w.j(a, "number", hh, "toolTipDuration");
            this.iE = a
        });
    w.defineProperty(hh,
        {
            hH: "actionTool"
        }, function ()
        {
            return this.findTool("Action")
        }, function (a)
        {
            Dk(this, "Action", a, this.gf)
        });
    w.defineProperty(hh,
        {
            $F: "relinkingTool"
        }, function ()
        {
            return this.findTool("Relinking")
        }, function (a)
        {
            Dk(this, "Relinking", a, this.gf)
        });
    w.defineProperty(hh,
        {
            MI: "linkReshapingTool"
        }, function ()
        {
            return this.findTool("LinkReshaping")
        }, function (a)
        {
            Dk(this, "LinkReshaping", a, this.gf)
        });
    w.defineProperty(hh,
        {
            jG: "resizingTool"
        }, function ()
        {
            return this.findTool("Resizing")
        }, function (a)
        {
            Dk(this, "Resizing", a, this.gf)
        });
    w.defineProperty(hh,
        {
            yJ: "rotatingTool"
        }, function ()
        {
            return this.findTool("Rotating")
        }, function (a)
        {
            Dk(this, "Rotating", a, this.gf)
        });
    w.defineProperty(hh,
        {
            NF: "linkingTool"
        }, function ()
        {
            return this.findTool("Linking")
        }, function (a)
        {
            Dk(this, "Linking", a, this.dg)
        });
    w.defineProperty(hh,
        {
            ce: "draggingTool"
        }, function ()
        {
            return this.findTool("Dragging")
        }, function (a)
        {
            Dk(this, "Dragging", a, this.dg)
        });
    w.defineProperty(hh,
        {
            RH: "dragSelectingTool"
        }, function ()
        {
            return this.findTool("DragSelecting")
        }, function (a)
        {
            Dk(this, "DragSelecting", a, this.dg)
        });
    w.defineProperty(hh,
        {
            jJ: "panningTool"
        }, function ()
        {
            return this.findTool("Panning")
        }, function (a)
        {
            Dk(this, "Panning", a, this.dg)
        });
    w.defineProperty(hh,
        {
            sA: "contextMenuTool"
        }, function ()
        {
            return this.findTool("ContextMenu")
        }, function (a)
        {
            Dk(this, "ContextMenu", a, this.eg)
        });
    w.defineProperty(hh,
        {
            KB: "textEditingTool"
        }, function ()
        {
            return this.findTool("TextEditing")
        }, function (a)
        {
            Dk(this, "TextEditing", a, this.eg)
        });
    w.defineProperty(hh,
        {
            uH: "clickCreatingTool"
        }, function ()
        {
            return this.findTool("ClickCreating")
        }, function (a)
        {
            Dk(this, "ClickCreating", a, this.eg)
        });
    w.defineProperty(hh,
        {
            vH: "clickSelectingTool"
        }, function ()
        {
            return this.findTool("ClickSelecting")
        }, function (a)
        {
            Dk(this, "ClickSelecting", a, this.eg)
        });

    function Wg()
    {
        this.GC = Ek;
        this.sr = this.tr = this.aa = null;
        this.xm = this.ur = this.vr = 0;
        this.no = this.rc = this.Ro = this.ek = !1;
        this.ul = this.jf = !0;
        this.Cv = this.Bv = this.BC = null;
        this.AC = 0;
        this.Dv = null;
        this.rv = new I("string");
        this.lz = 600;
        this.YG = new y(0, 0);
        this.oC = this.nC = this.lE = !1;
        this.Um = new ma(G, Fk)
    }
    w.ga("AnimationManager", Wg);
    Wg.prototype.Sc = function (a)
    {
        this.aa = a
    };

    function Ek(a, b, c, d)
    {
        a /= d / 2;
        return 1 > a ? c / 2 * a * a + b : -c / 2 * (--a * (a - 2) - 1) + b
    }
    w.u(Wg,
        {
            CK: "animationReasons"
        }, function ()
        {
            return this.rv
        });
    Wg.prototype.canStart = function ()
    {
        return !0
    };
    Wg.prototype.prepareAutomaticAnimation = Wg.prototype.Wn = function (a)
    {
        this.jf && (this.ul || this.aa.In) && (this.rv.add(a), this.canStart(a) && (this.ek && this.Hh(), this.rc = !0))
    };

    function Gk(a)
    {
        if (a.jf && (a.rv.clear(), a.rc))
            if (!a.no) a.rc = !1;
            else if (0 === a.xm)
            {
                var b = +new Date;
                a.xm = b;
                requestAnimationFrame(function ()
                {
                    if (!1 !== a.rc && !a.ek && a.xm === b)
                    {
                        var c = a.aa;
                        c.wj("temporaryPixelRatio") && (c.uk = 1);
                        Hk(c);
                        a.rc = !1;
                        c.Aa("AnimationStarting");
                        Uk(a, b)
                    }
                })
            }
    }

    function Vk(a, b, c, d, e, f)
    {
        if (!(!a.rc || "position" === c && d.L(e) || b instanceof R && !b.xF))
        {
            var h = a.Um;
            if (h.contains(b))
            {
                var h = h.ka(b),
                    k = h.start,
                    l = h.end;
                void 0 === k[c] && (k[c] = Wk(d));
                h.nx && void 0 !== l[c] ? h.Xt[c] = Wk(e) : (f || (h.Xt[c] = Wk(e)), l[c] = Wk(e));
                f && 0 === c.indexOf("position:") && b instanceof R && (h.Xt.location = Wk(b.location))
            }
            else k = new ra, l = new ra, k[c] = Wk(d), l[c] = Wk(e), d = l, e = k.position, e instanceof y && !e.I() && a.rv.contains("Expand SubGraph") && e.assign(d.position), k = new Fk(k, l, f), f && 0 === c.indexOf("position:") &&
            b instanceof R && (k.Xt.location = Wk(b.location)), h.add(b, k);
            a.no = !0
        }
    }

    function Wk(a)
    {
        return a instanceof y ? a.copy() : a instanceof ia ? a.copy() : a
    }

    function Uk(a, b)
    {
        var c;

        function d()
        {
            if (!1 !== f.ek && f.xm === b)
            {
                var a = +new Date,
                    c = a > s ? m : a - r;
                Xk(f);
                bl(f, e, q, h, c, m);
                f.Bv && f.Bv();
                Si(e);
                cl(f);
                a > s ? dl(f) : requestAnimationFrame(d)
            }
        }
        void 0 === c && (c = new ra);
        var e = a.aa;
        if (null !== e)
        {
            var f = a,
                h = c.cL || a.GC,
                k = c.BL || null,
                l = c.CL || null,
                m = c.duration || a.lz,
                n = a.YG;
            for (c = a.Um.i; c.next();)
            {
                var p = c.value.start.position;
                p instanceof y && (p.I() || p.assign(n))
            }
            a.BC = h;
            a.Bv = k;
            a.Cv = l;
            a.AC = m;
            a.Dv = a.Um;
            var q = a.Dv;
            for (c = q.i; c.next();) k = c.value.end, k["position:placeholder"] && (l = c.key.findVisibleNode(),
            l instanceof V && null !== l.placeholder && (l = l.placeholder, n = l.Ya(zb), n.x += l.padding.left, n.y += l.padding.top, k["position:placeholder"] = n));
            a.ek = !0;
            Xk(a);
            bl(a, e, q, h, 0, m);
            Si(a.aa);
            cl(a);
            var r = +new Date,
                s = r + m;
            f.xm === b && requestAnimationFrame(function ()
            {
                d()
            })
        }
    }

    function Xk(a)
    {
        if (!a.Ro)
        {
            var b = a.aa;
            a.lE = b.fb;
            a.nC = b.Qe;
            a.oC = b.av;
            b.fb = !0;
            b.Qe = !0;
            b.av = !0;
            a.Ro = !0
        }
    }

    function cl(a)
    {
        var b = a.aa;
        b.fb = a.lE;
        b.Qe = a.nC;
        b.av = a.oC;
        a.Ro = !1
    }

    function bl(a, b, c, d, e, f)
    {
        for (c = c.i; c.next();)
        {
            var h = c.key,
                k = c.value,
                l = k.start,
                k = k.end,
                m;
            for (m in k)
                if (("position" !== m || !k["position:placeholder"] && !k["position:node"]) && void 0 !== el[m]) el[m](h, l[m], k[m], d, e, f)
        }
        d = b.SA;
        b.SA = !0;
        m = a.GC;
        0 !== a.vr && 0 !== a.ur && (c = a.vr, b.qb = m(e, c, a.ur - c, f));
        null !== a.tr && null !== a.sr && (c = a.tr, a = a.sr, b.$a = new y(m(e, c.x, a.x - c.x, f), m(e, c.y, a.y - c.y, f)));
        b.SA = d
    }
    Wg.prototype.stopAnimation = Wg.prototype.Hh = function ()
    {
        !0 === this.rc && (this.rc = !1, this.xm = 0, this.no && this.aa.ye());
        this.ek && this.jf && dl(this)
    };

    function dl(a)
    {
        a.ek = !1;
        a.no = !1;
        Xk(a);
        for (var b = a.aa, c = a.BC, d = a.AC, e = a.Dv.i; e.next();)
        {
            var f = e.key,
                h = e.value,
                k = h.start,
                l = h.end,
                m = h.Xt,
                n;
            for (n in l)
                if (void 0 !== el[n])
                {
                    var p = n;
                    !h.nx || "position:node" !== p && "position:placeholder" !== p || (p = "position");
                    el[p](f, k[n], void 0 !== m[n] ? m[n] : h.nx ? k[n] : l[n], c, d, d)
                }
            h.nx && void 0 !== m.location && f instanceof R && (f.location = m.location);
            h.ly && f instanceof R && f.Dd(!1)
        }
        for (c = a.aa.links; c.next();) d = c.value, null !== d.kp && (d.points = d.kp, d.kp = null);
        b.Wx.clear();
        b.uk = null;
        b.Fc();
        b.oa();
        b.cg();
        fl(b);
        cl(a);
        a.Cv && a.Cv();
        a.xm = 0;
        a.Dv = null;
        a.Cv = null;
        a.Bv = null;
        a.tr = null;
        a.sr = null;
        a.vr = 0;
        a.ur = 0;
        a.Um = new ma(G, Fk);
        b.Aa("AnimationFinished");
        b.ye()
    }

    function gl(a, b, c)
    {
        var d = b.U,
            e = c.U,
            f = null;
        c instanceof V && (f = c.placeholder);
        null !== f ? (d = f.Ya(zb), d.x += f.padding.left, d.y += f.padding.top, Vk(a, b, "position", d, b.position, !1)) : Vk(a, b, "position", new y(e.x + e.width / 2 - d.width / 2, e.y + e.height / 2 - d.height / 2), b.position, !1);
        Vk(a, b, "scale", .01, b.scale, !1);
        if (b instanceof V)
            for (b = b.vc; b.next();) f = b.value, f instanceof T && gl(a, f, c)
    }

    function hl(a, b, c)
    {
        if (b.isVisible())
        {
            var d = null;
            c instanceof V && (d = c.placeholder);
            null !== d ? Vk(a, b, "position:placeholder", b.position, d, !0) : Vk(a, b, "position:node", b.position, c, !0);
            Vk(a, b, "scale", b.scale, .01, !0);
            a.rc && (d = a.Um, d.contains(b) && (d.ka(b).ly = !0));
            if (b instanceof V)
                for (b = b.vc; b.next();) d = b.value, d instanceof T && hl(a, d, c)
        }
    }

    function il(a, b, c)
    {
        a.rc && (null === a.tr && b.I() && null === a.sr && (a.tr = b.copy()), a.sr = c.copy(), a.no = !0)
    }

    function jl(a, b, c)
    {
        a.rc && a.aa.In && (0 === a.vr && 0 === a.ur && (a.vr = b), a.ur = c, a.no = !0)
    }
    w.defineProperty(Wg,
        {
            isEnabled: "isEnabled"
        }, function ()
        {
            return this.jf
        }, function (a)
        {
            w.j(a, "boolean", Wg, "isEnabled");
            this.jf = a
        });
    w.defineProperty(Wg,
        {
            duration: "duration"
        }, function ()
        {
            return this.lz
        }, function (a)
        {
            w.j(a, "number", Wg, "duration");
            1 > a && w.Fa(a, ">= 1", Wg, "duration");
            this.lz = a
        });
    w.u(Wg,
        {
            df: "isAnimating"
        }, function ()
        {
            return this.ek
        });
    w.u(Wg,
        {
            EI: "isTicking"
        }, function ()
        {
            return this.Ro
        });
    w.defineProperty(Wg,
        {
            EF: "isInitial"
        }, function ()
        {
            return this.ul
        }, function (a)
        {
            w.j(a, "boolean", Wg, "isInitial");
            this.ul = a
        });

    function Fk(a, b, c)
    {
        this.start = a;
        this.end = b;
        this.Xt = new ra;
        this.nx = c;
        this.ly = !1
    }
    var el = {
        opacity: function (a, b, c, d, e, f)
        {
            a.opacity = d(e, b, c - b, f)
        },
        position: function (a, b, c, d, e, f)
        {
            e !== f ? a.zy(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f)) : a.position = new y(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f))
        },
        "position:node": function (a, b, c, d, e, f)
        {
            var h = a.U,
                k = c.U;
            c = k.x + k.width / 2 - h.width / 2;
            h = k.y + k.height / 2 - h.height / 2;
            e !== f ? a.zy(d(e, b.x, c - b.x, f), d(e, b.y, h - b.y, f)) : a.position = new y(d(e, b.x, c - b.x, f), d(e, b.y, h - b.y, f))
        },
        "position:placeholder": function (a, b, c, d, e, f)
        {
            e !== f ? a.zy(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f)) :
                a.position = new y(d(e, b.x, c.x - b.x, f), d(e, b.y, c.y - b.y, f))
        },
        scale: function (a, b, c, d, e, f)
        {
            a.scale = d(e, b, c - b, f)
        },
        visible: function (a, b, c, d, e, f)
        {
            a.visible = e !== f ? b : c
        }
    };

    function pg()
    {
        0 < arguments.length && w.nd(pg);
        w.nc(this);
        this.aa = null;
        this.Ab = new H(R);
        this.Sb = "";
        this.Bc = 1;
        this.Cz = !1;
        this.Dl = this.eA = this.el = this.dl = this.cl = this.bl = this.$k = this.al = this.Zk = this.gl = this.Yk = this.fl = this.Xk = this.Wk = !0;
        this.zz = !1;
        this.Ms = []
    }
    w.ga("Layer", pg);
    pg.prototype.Sc = function (a)
    {
        this.aa = a
    };
    pg.prototype.toString = function (a)
    {
        void 0 === a && (a = 0);
        var b = 'Layer "' + this.name + '"';
        if (0 >= a) return b;
        for (var c = 0, d = 0, e = 0, f = 0, h = 0, k = this.Ab.i; k.next();)
        {
            var l = k.value;
            l instanceof V ? e++ : l instanceof T ? d++ : l instanceof W ? f++ : l instanceof jh ? h++ : c++
        }
        k = "";
        0 < c && (k += c + " Parts ");
        0 < d && (k += d + " Nodes ");
        0 < e && (k += e + " Groups ");
        0 < f && (k += f + " Links ");
        0 < h && (k += h + " Adornments ");
        if (1 < a)
            for (a = this.Ab.i; a.next();) c = a.value, k += "\n    " + c.toString(), d = c.data, null !== d && w.Pd(d) && (k += " #" + w.Pd(d)), c instanceof T ? k += " " +
                Qf(d) : c instanceof W && (k += " " + Qf(c.Y) + " " + Qf(c.Z));
        return b + " " + this.Ab.count + ": " + k
    };
    pg.prototype.findObjectAt = pg.prototype.Oe = function (a, b, c)
    {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        if (!1 === this.Dl) return null;
        var d = !1;
        null !== this.g && this.g.sb.Ia(a) && (d = !0);
        for (var e = w.K(), f = this.Ab.n, h = f.length; h--;)
        {
            var k = f[h];
            if ((!0 !== d || !1 !== kl(k)) && k.isVisible() && (e.assign(a), Pa(e, k.ph), k = k.Oe(e, b, c), null !== k && (null !== b && (k = b(k)), null !== k && (null === c || c(k))))) return w.v(e), k
        }
        w.v(e);
        return null
    };
    pg.prototype.findObjectsAt = pg.prototype.$t = function (a, b, c, d)
    {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof H || d instanceof I || (d = new I(G));
        if (!1 === this.Dl) return d;
        var e = !1;
        null !== this.g && this.g.sb.Ia(a) && (e = !0);
        for (var f = w.K(), h = this.Ab.n, k = h.length; k--;)
        {
            var l = h[k];
            if ((!0 !== e || !1 !== kl(l)) && l.isVisible())
            {
                f.assign(a);
                Pa(f, l.ph);
                var m = l;
                l.$t(f, b, c, d) && (null !== b && (m = b(m)), null === m || null !== c && !c(m) || (d instanceof I && d.add(m), d instanceof H && d.add(m)))
            }
        }
        w.v(f);
        return d
    };
    pg.prototype.findObjectsIn = pg.prototype.Jk = function (a, b, c, d, e)
    {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        void 0 === d && (d = !1);
        e instanceof H || e instanceof I || (e = new I(G));
        if (!1 === this.Dl) return e;
        var f = !1;
        null !== this.g && this.g.sb.Fk(a) && (f = !0);
        for (var h = this.Ab.n, k = h.length; k--;)
        {
            var l = h[k];
            if ((!0 !== f || !1 !== kl(l)) && l.isVisible())
            {
                var m = l;
                l.Jk(a, b, c, d, e) && (null !== b && (m = b(m)), null === m || null !== c && !c(m) || (e instanceof I && e.add(m), e instanceof H && e.add(m)))
            }
        }
        return e
    };
    pg.prototype.BA = function (a, b, c, d, e, f, h)
    {
        if (!1 === this.Dl) return e;
        for (var k = this.Ab.n, l = k.length; l--;)
        {
            var m = k[l];
            if ((!0 !== h || !1 !== kl(m)) && f(m) && m.isVisible())
            {
                var n = m;
                m.Jk(a, b, c, d, e) && (null !== b && (n = b(n)), null === n || null !== c && !c(n) || (e instanceof I && e.add(n), e instanceof H && e.add(n)))
            }
        }
        return e
    };
    pg.prototype.findObjectsNear = pg.prototype.yn = function (a, b, c, d, e, f)
    {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        void 0 === e && (e = !0);
        if (!1 !== e && !0 !== e)
        {
            if (e instanceof H || e instanceof I) f = e;
            e = !0
        }
        f instanceof H || f instanceof I || (f = new I(G));
        if (!1 === this.Dl) return f;
        var h = !1;
        null !== this.g && this.g.sb.Ia(a) && (h = !0);
        for (var k = w.K(), l = w.K(), m = this.Ab.n, n = m.length; n--;)
        {
            var p = m[n];
            if ((!0 !== h || !1 !== kl(p)) && p.isVisible())
            {
                k.assign(a);
                Pa(k, p.ph);
                l.m(a.x + b, a.y);
                Pa(l, p.ph);
                var q = p;
                p.yn(k, l, c, d, e, f) && (null !== c && (q =
                    c(q)), null === q || null !== d && !d(q) || (f instanceof I && f.add(q), f instanceof H && f.add(q)))
            }
        }
        w.v(k);
        w.v(l);
        return f
    };
    g = pg.prototype;
    g.Hf = function (a, b)
    {
        if (this.visible)
        {
            var c;
            c = void 0 === b ? a.sb : b;
            for (var d = this.Ab.n, e = d.length, f = 0; f < e; f++)
            {
                var h = d[f];
                h.rD = f;
                if (!(h instanceof W && !1 === h.Mf))
                {
                    if (h instanceof jh)
                    {
                        var k = h;
                        if (null !== k.Ye) continue
                    }
                    if ($a(h.U, c))
                        for (h.Hf(!0), ll(h), h = h.ax; h.next();) k = h.value, yk(k, Infinity, Infinity), k.hc(), k.Hf(!0);
                    else h.Hf(!1), null !== h.ax && 0 < h.ax.count && ll(h)
                }
            }
        }
    };
    g.ve = function (a, b, c)
    {
        if (this.visible && 0 !== this.Bc && (void 0 === c && (c = !0), c || !this.Pc))
        {
            c = this.Ab.n;
            var d = c.length;
            if (0 !== d)
            {
                1 !== this.Bc && (a.globalAlpha = this.Bc);
                var e = this.Ms;
                e.length = 0;
                for (var f = b.scale, h = 0; h < d; h++)
                {
                    var k = c[h];
                    if (kl(k))
                    {
                        if (k instanceof W)
                        {
                            var l = k;
                            l.ac && e.push(l);
                            if (!1 === l.Mf) continue
                        }
                        l = k.U;
                        1 < l.width * f || 1 < l.height * f ? k.ve(a, b) : ml(k, a)
                    }
                }
                a.globalAlpha = 1
            }
        }
    };

    function nl(a, b, c, d)
    {
        if (a.visible && 0 !== a.Bc)
        {
            1 !== a.Bc && (b.globalAlpha = a.Bc);
            var e = a.Ms;
            e.length = 0;
            var f = c.scale;
            a = a.Ab.n;
            for (var h = a.length, k = d.length, l = 0; l < h; l++)
            {
                var m = a[l];
                if (kl(m))
                {
                    if (m instanceof W)
                    {
                        var n = m;
                        n.ac && e.push(n);
                        if (!1 === n.Mf) continue
                    }
                    var n = ol(m, m.U),
                        p;
                    a:
                    {
                        p = n;
                        for (var q = d, r = k, s = 2 / f, u = 4 / f, t = 0; t < r; t++)
                        {
                            var x = q[t];
                            if (0 !== x.width && 0 !== x.height && p.vF(x.x - s, x.y - s, x.width + u, x.height + u))
                            {
                                p = !0;
                                break a
                            }
                        }
                        p = !1
                    }
                    p && (1 < n.width * f || 1 < n.height * f ? m.ve(b, c) : ml(m, b))
                }
            }
            b.globalAlpha = 1
        }
    }
    g.h = function (a, b, c, d, e)
    {
        var f = this.g;
        null !== f && f.cd(Cf, a, this, b, c, d, e)
    };
    g.$p = function (a, b, c)
    {
        var d = this.Ab;
        b.gw = this;
        if (a >= d.count) a = d.count;
        else if (d.ea(a) === b) return -1;
        d.Rd(a, b);
        b.nu(c);
        d = this.g;
        null !== d && (c ? d.oa() : d.$p(b));
        pl(this, a, b);
        return a
    };
    g.rf = function (a, b, c)
    {
        if (!c && b.layer !== this && null !== b.layer) return b.layer.rf(a, b, c);
        var d = this.Ab;
        if (0 > a || a >= d.length)
        {
            if (a = d.indexOf(b), 0 > a) return -1
        }
        else if (d.ea(a) !== b && (a = d.indexOf(b), 0 > a)) return -1;
        b.ou(c);
        d.dd(a);
        d = this.g;
        null !== d && (c ? d.oa() : d.rf(b));
        b.gw = null;
        return a
    };

    function pl(a, b, c)
    {
        b = ql(a, b, c);
        if (c instanceof V && null !== c && isNaN(c.io))
        {
            if (0 !== c.vc.count)
            {
                for (var d = -1, e = a.Ab.n, f = e.length, h = 0; h < f; h++)
                {
                    var k = e[h];
                    if (k === c && (b = h, 0 <= d)) break;
                    if (0 > d && k.Da === c && (d = h, 0 <= b)) break
                }!(0 > d) && d < b && (e = a.Ab, e.dd(b), e.Rd(d, c))
            }
            c = c.Da;
            null !== c && pl(a, -1, c)
        }
    }

    function ql(a, b, c)
    {
        var d = c.io;
        if (isNaN(d)) return b;
        a = a.Ab;
        var e = a.count;
        if (1 >= e) return b;
        0 > b && (b = a.indexOf(c));
        if (0 > b) return -1;
        for (var f = b - 1, h = NaN; 0 <= f;)
        {
            h = a.ea(f).io;
            if (!isNaN(h)) break;
            f--
        }
        for (var k = b + 1, l = NaN; k < e;)
        {
            l = a.ea(k).io;
            if (!isNaN(l)) break;
            k++
        }
        if (!isNaN(h) && h > d)
            for (;;)
            {
                if (-1 === f || h <= d)
                {
                    f++;
                    if (f === b) break;
                    a.dd(b);
                    a.Rd(f, c);
                    return f
                }
                for (h = NaN; 0 <= --f && (h = a.ea(f).io, isNaN(h)););
            }
        else if (!isNaN(l) && l < d)
            for (;;)
            {
                if (k === e || l >= d)
                {
                    k--;
                    if (k === b) break;
                    a.dd(b);
                    a.Rd(k, c);
                    return k
                }
                for (l = NaN; ++k < e && (l = a.ea(k).io,
                    isNaN(l)););
            }
        return b
    }
    g.clear = function ()
    {
        for (var a = this.Ab.xc(), b = a.length, c = 0; c < b; c++) a[c].Hf(!1), this.rf(-1, a[c], !1);
        this.Ms.length = 0
    };
    w.u(pg,
        {
            Ij: "parts"
        }, function ()
        {
            return this.Ab.i
        });
    w.u(pg,
        {
            JL: "partsBackwards"
        }, function ()
        {
            return this.Ab.Jn
        });
    w.u(pg,
        {
            g: "diagram"
        }, function ()
        {
            return this.aa
        });
    w.defineProperty(pg,
        {
            name: "name"
        }, function ()
        {
            return this.Sb
        }, function (a)
        {
            w.j(a, "string", pg, "name");
            var b = this.Sb;
            if (b !== a)
            {
                var c = this.g;
                if (null !== c)
                    for ("" === b && w.k("Cannot rename default Layer to: " + a), c = c.Sx; c.next();) c.value.name === a && w.k("Layer.name is already present in this diagram: " + a);
                this.Sb = a;
                this.h("name", b, a);
                for (a = this.Ab.i; a.next();) a.value.ag = this.Sb
            }
        });
    w.defineProperty(pg,
        {
            opacity: "opacity"
        }, function ()
        {
            return this.Bc
        }, function (a)
        {
            var b = this.Bc;
            b !== a && (w.j(a, "number", pg, "opacity"), (0 > a || 1 < a) && w.Fa(a, "0 <= value <= 1", pg, "opacity"), this.Bc = a, this.h("opacity", b, a), a = this.g, null !== a && a.oa())
        });
    w.defineProperty(pg,
        {
            Pc: "isTemporary"
        }, function ()
        {
            return this.Cz
        }, function (a)
        {
            var b = this.Cz;
            b !== a && (w.j(a, "boolean", pg, "isTemporary"), this.Cz = a, this.h("isTemporary", b, a))
        });
    w.defineProperty(pg,
        {
            visible: "visible"
        }, function ()
        {
            return this.eA
        }, function (a)
        {
            var b = this.eA;
            if (b !== a)
            {
                w.j(a, "boolean", pg, "visible");
                this.eA = a;
                this.h("visible", b, a);
                for (b = this.Ab.i; b.next();) b.value.Dd(a);
                a = this.g;
                null !== a && a.oa()
            }
        });
    w.defineProperty(pg,
        {
            Tg: "pickable"
        }, function ()
        {
            return this.Dl
        }, function (a)
        {
            var b = this.Dl;
            b !== a && (w.j(a, "boolean", pg, "pickable"), this.Dl = a, this.h("pickable", b, a))
        });
    w.defineProperty(pg,
        {
            yF: "isBoundsIncluded"
        }, function ()
        {
            return this.zz
        }, function (a)
        {
            this.zz !== a && (this.zz = a, null !== this.g && this.g.Fc())
        });
    w.defineProperty(pg,
        {
            Ck: "allowCopy"
        }, function ()
        {
            return this.Wk
        }, function (a)
        {
            var b = this.Wk;
            b !== a && (w.j(a, "boolean", pg, "allowCopy"), this.Wk = a, this.h("allowCopy", b, a))
        });
    w.defineProperty(pg,
        {
            ln: "allowDelete"
        }, function ()
        {
            return this.Xk
        }, function (a)
        {
            var b = this.Xk;
            b !== a && (w.j(a, "boolean", pg, "allowDelete"), this.Xk = a, this.h("allowDelete", b, a))
        });
    w.defineProperty(pg,
        {
            hx: "allowTextEdit"
        }, function ()
        {
            return this.fl
        }, function (a)
        {
            var b = this.fl;
            b !== a && (w.j(a, "boolean", pg, "allowTextEdit"), this.fl = a, this.h("allowTextEdit", b, a))
        });
    w.defineProperty(pg,
        {
            bx: "allowGroup"
        }, function ()
        {
            return this.Yk
        }, function (a)
        {
            var b = this.Yk;
            b !== a && (w.j(a, "boolean", pg, "allowGroup"), this.Yk = a, this.h("allowGroup", b, a))
        });
    w.defineProperty(pg,
        {
            ix: "allowUngroup"
        }, function ()
        {
            return this.gl
        }, function (a)
        {
            var b = this.gl;
            b !== a && (w.j(a, "boolean", pg, "allowUngroup"), this.gl = a, this.h("allowUngroup", b, a))
        });
    w.defineProperty(pg,
        {
            Ot: "allowLink"
        }, function ()
        {
            return this.Zk
        }, function (a)
        {
            var b = this.Zk;
            b !== a && (w.j(a, "boolean", pg, "allowLink"), this.Zk = a, this.h("allowLink", b, a))
        });
    w.defineProperty(pg,
        {
            mn: "allowRelink"
        }, function ()
        {
            return this.al
        }, function (a)
        {
            var b = this.al;
            b !== a && (w.j(a, "boolean", pg, "allowRelink"), this.al = a, this.h("allowRelink", b, a))
        });
    w.defineProperty(pg,
        {
            Pl: "allowMove"
        }, function ()
        {
            return this.$k
        }, function (a)
        {
            var b = this.$k;
            b !== a && (w.j(a, "boolean", pg, "allowMove"), this.$k = a, this.h("allowMove", b, a))
        });
    w.defineProperty(pg,
        {
            ex: "allowReshape"
        }, function ()
        {
            return this.bl
        }, function (a)
        {
            var b = this.bl;
            b !== a && (w.j(a, "boolean", pg, "allowReshape"), this.bl = a, this.h("allowReshape", b, a))
        });
    w.defineProperty(pg,
        {
            Pt: "allowResize"
        }, function ()
        {
            return this.cl
        }, function (a)
        {
            var b = this.cl;
            b !== a && (w.j(a, "boolean", pg, "allowResize"), this.cl = a, this.h("allowResize", b, a))
        });
    w.defineProperty(pg,
        {
            gx: "allowRotate"
        }, function ()
        {
            return this.dl
        }, function (a)
        {
            var b = this.dl;
            b !== a && (w.j(a, "boolean", pg, "allowRotate"), this.dl = a, this.h("allowRotate", b, a))
        });
    w.defineProperty(pg,
        {
            Af: "allowSelect"
        }, function ()
        {
            return this.el
        }, function (a)
        {
            var b = this.el;
            b !== a && (w.j(a, "boolean", pg, "allowSelect"), this.el = a, this.h("allowSelect", b, a))
        });

    function D(a)
    {
        function b()
        {
            window.document.removeEventListener("DOMContentLoaded", b, !1);
            rl(c)
        }
        1 < arguments.length && w.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");
        w.nc(this);
        sl = [];
        this.Vc = !0;
        this.iC = new Wg;
        this.iC.Sc(this);
        this.yd = 17;
        this.Xr = !1;
        this.Pz = "default";
        var c = this;
        null !== window.document.body ? rl(this) : window.document.addEventListener("DOMContentLoaded", b, !1);
        this.dc = new H(pg);
        this.Db = this.Eb = 0;
        this.rk = this.Ob = this.hf = this.yb = null;
        this.fG();
        this.Oo =
            null;
        this.eG();
        this.$a = (new y(NaN, NaN)).freeze();
        this.qb = 1;
        this.Wv = (new y(NaN, NaN)).freeze();
        this.Xv = NaN;
        this.ow = 1E-4;
        this.mw = 100;
        this.kd = new ka;
        this.Yw = (new y(NaN, NaN)).freeze();
        this.Ov = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.Fw = (new hb(0, 0, 0, 0)).freeze();
        this.Gw = tl;
        this.Jw = !0;
        this.Cw = this.Aw = null;
        this.zm = oh;
        this.Cm = qc;
        this.sl = oh;
        this.Lo = qc;
        this.Yv = this.Vv = zb;
        this.Fe = !0;
        this.Sr = !1;
        this.ug = new I(R);
        this.ml = new ma(W, B);
        this.yr = !0;
        this.Vq = 250;
        this.oo = -1;
        this.tv = (new hb(16, 16, 16, 16)).freeze();
        this.wr =
            this.Tf = !1;
        this.Go = !0;
        this.Pi = new yf;
        this.wd = new yf;
        this.Rb = new yf;
        this.hh = this.Di = null;
        this.wp = !1;
        this.gz = this.hz = null;
        this.Uy = window.PointerEvent && (w.cq || w.dq || w.TA) && window.navigator && !1 !== window.navigator.msPointerEnabled;
        ul(this);
        this.dp = new I(T);
        this.Jl = new I(V);
        this.Xo = new I(W);
        this.Ab = new I(R);
        this.cw = !0;
        this.Tw = vl;
        this.eD = !1;
        this.Vw = Wi;
        this.bz = this.ez = this.$z = null;
        this.Av = "";
        this.rr = "auto";
        this.Hi = this.jj = this.Yi = this.rw = this.Zi = this.$i = this.aj = this.Gi = this.Mi = this.Ei = null;
        this.Jz = !1;
        this.Nz = {};
        this.gp = [null, null];
        this.Zy = null;
        this.Nq = this.fz = this.Vz = this.RD = this.ij = !1;
        this.pD = !0;
        this.Bz = this.Zd = !1;
        this.qe = null;
        var d = this;
        this.wD = function (a)
        {
            if (a.$ === d.$ && d.Ua)
            {
                d.Ua = !1;
                try
                {
                    var b = a.Dc;
                    "" === a.tf && b === Cf && wl(d, a.object, a.propertyName)
                }
                finally
                {
                    d.Ua = !0
                }
            }
        };
        this.xD = function (a)
        {
            xl(d, a)
        };
        this.oE = !0;
        this.ah = -2;
        this.Ii = new ma(Object, R);
        this.Tj = new ma(Object, W);
        this.Km = new ma(Object, Array);
        this.fp = new ma("string", Array);
        this.Mz = new H(yl);
        this.Si = !1;
        this.Xk = this.Wk = this.jv = this.jf = !0;
        this.lv = this.kv = !1;
        this.qv = this.ov = this.el = this.dl = this.cl = this.bl = this.$k = this.al = this.Zk = this.nv = this.gl = this.Yk = this.fl = !0;
        this.dh = this.mD = !1;
        this.pv = this.mv = this.Tv = this.Sv = !0;
        this.Iw = this.Ew = 16;
        this.Rz = this.Dw = !1;
        this.gt = this.Hw = null;
        this.Sz = this.Tz = 0;
        this.lf = (new hb(5)).freeze();
        this.Lw = (new I(R)).freeze();
        this.nw = 999999999;
        this.Uv = (new I(R)).freeze();
        this.tl = this.Hm = this.dk = !0;
        this.ql = this.ck = !1;
        this.oe = null;
        this.Qj = !0;
        this.bh = !1;
        this.UG = new I(W);
        this.cD = new I(zl);
        this.Ld = null;
        this.Ls = 1;
        this.UD = 0;
        this.nh = {
            scale: 1,
            position: new y,
            bounds: new B,
            isScroll: !1
        };
        this.nE = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.Hv = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.dw = !1;
        this.Jv = null;
        this.xw = new I(Al);
        Bl(this);
        this.iw = this.Qv = this.sw = this.JC = this.IC = this.KC = this.kk = this.ol = this.bj = null;
        Cl(this);
        this.td = null;
        this.Pv = !1;
        this.vo = null;
        this.Va = new hh;
        this.Va.initializeStandardTools();
        this.Xa = this.Tt = this.Va;
        this.pb = new rg;
        this.$ = new Q;
        this.ij = !0;
        this.Tb = new sg;
        this.ij = !1;
        this.VC = this.kz = null;
        this.Jd = 1;
        this.uk = null;
        var e = w.vfo.split(".");
        !0 !== w.tx.licenseKey && "1" === e[0] && 7 > parseInt(e[1], 10) && (w.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version " + w.vfo + ". This license key will do nothing until you upgrade to GoJS 1.7 or later."), w.tx.licenseKey = !0);
        this.Vh = 1;
        this.jk = 0;
        this.fw = new y;
        this.bA = 500;
        this.sv = new y;
        this.pt = null;
        this.gk = !1;
        this.preventDefault = this.ky = this.pq = this.qq = this.oq = this.nq = this.Rn = this.Tn = this.Sn = this.Pn = this.Qn = this.WB = this.OB = this.PB = this.QB = this.Fl = this.ct =
            this.El = this.bt = null;
        this.$v = !1;
        this.rl = new Dl;
        void 0 !== a && El(this, a);
        this.Vc = !1
    }
    w.ga("Diagram", D);
    D.prototype.clear = D.prototype.clear = function ()
    {
        this.$.clear();
        fh = null;
        gh = "";
        Fl(this, !1);
        this.Hv = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.oa()
    };

    function Fl(a, b)
    {
        var c = null;
        null !== a.td && (c = a.td.V);
        a.Ka.Hh();
        for (var d = [], e = a.dc.length, f = 0; f < e; f++)
        {
            var h = a.dc.n[f];
            if (b)
                for (var k = h.Ij; k.next();)
                {
                    var l = k.value;
                    l !== c && null === l.data && d.push(l)
                }
            h.clear()
        }
        a.ug.clear();
        a.ml.clear();
        a.dp.clear();
        a.Jl.clear();
        a.Xo.clear();
        a.Ab.clear();
        a.Ii.clear();
        a.Tj.clear();
        a.Km.clear();
        a.Lw.Qa();
        a.Lw.clear();
        a.Lw.freeze();
        a.Uv.Qa();
        a.Uv.clear();
        a.Uv.freeze();
        a.vo = null;
        w.Ly = [];
        null !== c && (a.add(c), a.Ab.remove(c));
        if (b)
            for (c = 0; c < d.length; c++) a.add(d[c])
    }
    D.prototype.reset = D.prototype.reset = function ()
    {
        this.Vc = !0;
        this.clear();
        this.dc = new H(pg);
        this.fG();
        this.eG();
        this.$a = (new y(NaN, NaN)).freeze();
        this.qb = 1;
        this.Wv = (new y(NaN, NaN)).freeze();
        this.Xv = NaN;
        this.ow = 1E-4;
        this.mw = 100;
        this.Yw = (new y(NaN, NaN)).freeze();
        this.Ov = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.Fw = (new hb(0, 0, 0, 0)).freeze();
        this.Gw = tl;
        this.Jw = !0;
        this.Cw = this.Aw = null;
        this.zm = oh;
        this.Cm = qc;
        this.sl = oh;
        this.Lo = qc;
        this.Yv = this.Vv = zb;
        this.Vq = 250;
        this.tv = (new hb(16, 16, 16, 16)).freeze();
        this.cw = !0;
        this.Tw = vl;
        this.Vw = Wi;
        this.rr = "auto";
        this.Hi = this.jj = this.Yi = this.rw = this.Zi = this.$i = this.aj = this.Gi = this.Mi = this.Ei = null;
        this.Si = !1;
        this.Xk = this.Wk = this.jv = this.jf = !0;
        this.lv = this.kv = !1;
        this.pv = this.mv = this.Tv = this.Sv = this.qv = this.ov = this.el = this.dl = this.cl = this.bl = this.$k = this.al = this.Zk = this.nv = this.gl = this.Yk = this.fl = !0;
        this.Iw = this.Ew = 16;
        this.lf = (new hb(5)).freeze();
        this.nw = 999999999;
        this.oe = null;
        this.dw = !1;
        Cl(this);
        this.td = null;
        this.Va = new hh;
        this.Va.initializeStandardTools();
        this.Xa = this.Tt =
            this.Va;
        this.pb = new rg;
        this.ij = !0;
        Bl(this);
        this.Tb = new sg;
        this.ij = !1;
        this.$ = new Q;
        this.bh = !1;
        this.Go = !0;
        this.Vc = this.Tf = !1;
        this.oa();
        this.hh = this.Di = null;
        ul(this);
        this.Av = ""
    };

    function Cl(a)
    {
        a.bj = new ma("string", R);
        var b = new T,
            c = new Lh;
        c.bind(new ah("text", "", Qf));
        b.add(c);
        a.KC = b;
        a.bj.add("", b);
        b = new T;
        c = new Lh;
        c.stroke = "brown";
        c.bind(new ah("text", "", Qf));
        b.add(c);
        a.bj.add("Comment", b);
        b = new T;
        b.lm = !1;
        b.kA = !1;
        c = new X;
        c.Gb = "Ellipse";
        c.fill = "black";
        c.stroke = null;
        c.Ca = (new ia(3, 3)).Ha();
        b.add(c);
        a.bj.add("LinkLabel", b);
        a.ol = new ma("string", V);
        b = new V;
        b.yB = "GROUPPANEL";
        b.type = Gl;
        c = new Lh;
        c.font = "bold 12pt sans-serif";
        c.bind(new ah("text", "", Qf));
        b.add(c);
        c = new C(Hl);
        c.name =
            "GROUPPANEL";
        var d = new X;
        d.Gb = "Rectangle";
        d.fill = "rgba(128,128,128,0.2)";
        d.stroke = "black";
        c.add(d);
        d = new Pj;
        d.padding = (new hb(5, 5, 5, 5)).Ha();
        c.add(d);
        b.add(c);
        a.IC = b;
        a.ol.add("", b);
        a.kk = new ma("string", W);
        b = new W;
        c = new X;
        c.ff = !0;
        b.add(c);
        c = new X;
        c.Gq = "Standard";
        c.fill = "black";
        c.stroke = null;
        c.mb = 0;
        b.add(c);
        a.JC = b;
        a.kk.add("", b);
        b = new W;
        c = new X;
        c.ff = !0;
        c.stroke = "brown";
        b.add(c);
        a.kk.add("Comment", b);
        b = new jh;
        b.type = Hl;
        c = new X;
        c.fill = null;
        c.stroke = "dodgerblue";
        c.mb = 3;
        b.add(c);
        c = new Pj;
        c.margin = (new hb(1.5,
            1.5, 1.5, 1.5)).Ha();
        b.add(c);
        a.sw = b;
        a.Qv = b;
        b = new jh;
        b.type = jj;
        c = new X;
        c.ff = !0;
        c.fill = null;
        c.stroke = "dodgerblue";
        c.mb = 3;
        b.add(c);
        a.iw = b
    }

    function rl(a)
    {
        var b = w.createElement("p");
        b.style.width = "100%";
        b.style.height = "200px";
        b.style.boxSizing = "content-box";
        var c = w.createElement("div");
        c.style.position = "absolute";
        c.style.visibility = "hidden";
        c.style.width = "200px";
        c.style.height = "150px";
        c.style.overflow = "hidden";
        c.style.boxSizing = "content-box";
        c.appendChild(b);
        window.document.body.appendChild(c);
        var d = b.offsetWidth;
        c.style.overflow = "scroll";
        b = b.offsetWidth;
        d === b && (b = c.clientWidth);
        window.document.body.removeChild(c);
        c = d - b;
        0 !== c || w.CF ||
        (c = 11);
        a.yd = c;
        c = w.createElement("div");
        c.dir = "rtl";
        c.style.cssText = "font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;";
        c.textContent = "A";
        window.document.body.appendChild(c);
        d = "reverse";
        0 < c.scrollLeft ? d = "default" : (c.scrollLeft = 1, 0 === c.scrollLeft && (d = "negative"));
        window.document.body.removeChild(c);
        a.Pz = d
    }
    D.prototype.gc = function (a)
    {
        a.Je === D ? this.Rl = a : w.Mj(this, a)
    };
    D.prototype.toString = function (a)
    {
        void 0 === a && (a = 0);
        var b = "";
        this.tj && this.tj.id && (b = this.tj.id);
        b = 'Diagram "' + b + '"';
        if (0 >= a) return b;
        for (var c = this.dc.i; c.next();) b += "\n  " + c.value.toString(a - 1);
        return b
    };
    D.fromDiv = function (a)
    {
        var b = a;
        "string" === typeof a && (b = window.document.getElementById(a));
        return b instanceof HTMLDivElement && b.aa instanceof D ? b.aa : null
    };
    w.defineProperty(D,
        {
            tj: "div"
        }, function ()
        {
            return this.Ob
        }, function (a)
        {
            null !== a && w.G(a, HTMLDivElement, D, "div");
            if (this.Ob !== a)
            {
                sl = [];
                var b = this.Ob;
                null !== b ? (b.aa = void 0, b.innerHTML = "", null !== this.yb && (this.yb.removeEventListener("touchstart", this.QB, !1), this.yb.removeEventListener("touchmove", this.PB, !1), this.yb.removeEventListener("touchend", this.OB, !1), this.yb.Od.aa = null), b = this.Va, null !== b && (b.gf.each(function (a)
                {
                    a.cancelWaitAfter()
                }), b.dg.each(function (a)
                {
                    a.cancelWaitAfter()
                }), b.eg.each(function (a)
                {
                    a.cancelWaitAfter()
                })),
                    b.cancelWaitAfter(), this.Xa.doCancel(), this.hf = this.yb = null, window.removeEventListener("resize", this.WB, !1), window.removeEventListener("mousemove", this.Qn, !0), window.removeEventListener("mousedown", this.Pn, !0), window.removeEventListener("mouseup", this.Sn, !0), window.removeEventListener("wheel", this.Tn, !0), window.removeEventListener("mouseout", this.Rn, !0)) : this.bh = !1;
                this.Ob = null;
                if (null !== a)
                {
                    if (b = a.aa) b.tj = null;
                    El(this, a);
                    this.Pu()
                }
            }
        });

    function Il(a)
    {
        var b = a.yb;
        a.Uy ? (b.addEventListener("pointerdown", a.nq, !1), b.addEventListener("pointermove", a.oq, !1), b.addEventListener("pointerup", a.qq, !1), b.addEventListener("pointerout", a.pq, !1)) : (b.addEventListener("touchstart", a.QB, !1), b.addEventListener("touchmove", a.PB, !1), b.addEventListener("touchend", a.OB, !1), b.addEventListener("mousemove", a.Qn, !1), b.addEventListener("mousedown", a.Pn, !1), b.addEventListener("mouseup", a.Sn, !1), b.addEventListener("mouseout", a.Rn, !1));
        b.addEventListener("wheel",
            a.Tn, !1);
        b.addEventListener("keydown", a.GI, !1);
        b.addEventListener("keyup", a.HI, !1);
        b.addEventListener("selectstart", function (a)
        {
            a.preventDefault();
            return !1
        }, !1);
        b.addEventListener("contextmenu", function (a)
        {
            a.preventDefault();
            return !1
        }, !1);
        b.addEventListener("gesturestart", function (b)
        {
            a.Va.Mk !== Bk && (a.Va.Mk === Ak ? b.preventDefault() : (b.preventDefault(), a.Ls = a.scale, a.Xa.doCancel()))
        }, !1);
        b.addEventListener("gesturechange", function (b)
        {
            if (a.Va.Mk !== Bk)
                if (a.Va.Mk === Ak) b.preventDefault();
                else
                {
                    b.preventDefault();
                    var d = b.scale;
                    if (null !== a.Ls)
                    {
                        var e = a.Eb,
                            f = a.Db,
                            h = a.yb.getBoundingClientRect();
                        b = new y(b.pageX - window.scrollX - e / h.width * h.left, b.pageY - window.scrollY - f / h.height * h.top);
                        d *= a.Ls;
                        e = a.pb;
                        d !== a.scale && e.canResetZoom(d) && (f = a.zi, a.zi = b, e.resetZoom(d), a.zi = f)
                    }
                }
        }, !1);
        window.addEventListener("resize", a.WB, !1)
    }
    D.prototype.computePixelRatio = function ()
    {
        if (null !== this.uk) return this.uk;
        var a = this.hf;
        return (window.devicePixelRatio || 1) / (a.ua.webkitBackingStorePixelRatio || a.ua.mozBackingStorePixelRatio || a.ua.msBackingStorePixelRatio || a.ua.oBackingStorePixelRatio || a.ua.backingStorePixelRatio || 1)
    };
    D.prototype.doMouseMove = function ()
    {
        this.Xa.doMouseMove()
    };
    D.prototype.doMouseDown = function ()
    {
        this.Xa.doMouseDown()
    };
    D.prototype.doMouseUp = function ()
    {
        this.Xa.doMouseUp()
    };
    D.prototype.doMouseWheel = function ()
    {
        this.Xa.doMouseWheel()
    };
    D.prototype.doKeyDown = function ()
    {
        this.Xa.doKeyDown()
    };
    D.prototype.doKeyUp = function ()
    {
        this.Xa.doKeyUp()
    };
    D.prototype.doFocus = function ()
    {
        this.focus()
    };
    D.prototype.focus = D.prototype.focus = function ()
    {
        if (this.yb)
            if (this.CJ) this.yb.focus();
            else
            {
                var a = window.scrollX || window.pageXOffset,
                    b = window.scrollY || window.pageYOffset;
                this.yb.focus();
                window.scrollTo(a, b)
            }
    };

    function Hk(a)
    {
        if (null !== a.yb)
        {
            var b = a.Ob;
            if (0 !== b.clientWidth && 0 !== b.clientHeight)
            {
                var c = a.ql ? a.yd : 0,
                    d = a.ck ? a.yd : 0,
                    e = a.Jd;
                a.Jd = a.computePixelRatio();
                a.Jd !== e && (a.Sr = !0, a.ye());
                if (b.clientWidth !== a.Eb + c || b.clientHeight !== a.Db + d) a.Hm = !0, a.Fe = !0, b = a.Tb, null !== b && b.Ox && a.Rl === oh && (a.wr = !0, b.J()), a.Zd || a.ye()
            }
        }
    }

    function Bl(a)
    {
        var b = new pg;
        b.name = "Background";
        a.Jt(b);
        b = new pg;
        b.name = "";
        a.Jt(b);
        b = new pg;
        b.name = "Foreground";
        a.Jt(b);
        b = new pg;
        b.name = "Adornment";
        b.Pc = !0;
        a.Jt(b);
        b = new pg;
        b.name = "Tool";
        b.Pc = !0;
        b.yF = !0;
        a.Jt(b);
        b = new pg;
        b.name = "Grid";
        b.Af = !1;
        b.Tg = !1;
        b.Pc = !0;
        a.kH(b, a.Zt("Background"))
    }

    function Jl(a)
    {
        a.td = new C(Kl);
        a.td.name = "GRID";
        var b = new X;
        b.Gb = "LineH";
        b.stroke = "lightgray";
        b.mb = .5;
        b.interval = 1;
        a.td.add(b);
        b = new X;
        b.Gb = "LineH";
        b.stroke = "gray";
        b.mb = .5;
        b.interval = 5;
        a.td.add(b);
        b = new X;
        b.Gb = "LineH";
        b.stroke = "gray";
        b.mb = 1;
        b.interval = 10;
        a.td.add(b);
        b = new X;
        b.Gb = "LineV";
        b.stroke = "lightgray";
        b.mb = .5;
        b.interval = 1;
        a.td.add(b);
        b = new X;
        b.Gb = "LineV";
        b.stroke = "gray";
        b.mb = .5;
        b.interval = 5;
        a.td.add(b);
        b = new X;
        b.Gb = "LineV";
        b.stroke = "gray";
        b.mb = 1;
        b.interval = 10;
        a.td.add(b);
        b = new R;
        b.add(a.td);
        b.ag = "Grid";
        b.io = 0;
        b.VA = !1;
        b.xF = !1;
        b.Tg = !1;
        b.$A = "GRID";
        a.add(b);
        a.Ab.remove(b);
        a.td.visible = !1
    }

    function Ll()
    {
        this.aa.Rz ? this.aa.Rz = !1 : this.aa.isEnabled ? this.aa.QH(this) : Ml(this.aa)
    }

    function Nl(a)
    {
        this.aa.isEnabled ? (this.aa.Tz = a.target.scrollTop, this.aa.Sz = a.target.scrollLeft) : Ml(this.aa)
    }
    D.prototype.diagramScroll = D.prototype.QH = function (a)
    {
        if (null !== this.yb)
        {
            this.Dw = !0;
            var b = this.be,
                c = this.sb,
                d = this.sy,
                e = b.x - d.left,
                f = b.y - d.top,
                h = b.width + d.left + d.right,
                k = b.height + d.top + d.bottom,
                l = b.right + d.right,
                d = b.bottom + d.bottom,
                m = c.x,
                b = c.y,
                n = c.width,
                p = c.height,
                q = c.right,
                r = c.bottom,
                c = this.scale,
                s;
            s = a.scrollLeft;
            if (this.Xr) switch (this.Pz)
            {
                case "negative":
                    s = s + a.scrollWidth - a.clientWidth;
                    break;
                case "reverse":
                    s = a.scrollWidth - s - a.clientWidth
            }
            var u = s;
            n < h || p < k ? (s = w.xb(this.position.x, this.position.y),
            this.re && this.Sz !== u && (s.x = u / c + e, this.Sz = u), this.se && this.Tz !== a.scrollTop && (s.y = a.scrollTop / c + f, this.Tz = a.scrollTop), this.position = s, w.v(s), this.Hm = this.Dw = !1) : (s = w.K(), a.aH && this.re && (e < m && (this.position = s.m(u + e, this.position.y)), l > q && (this.position = s.m(-(this.Hw.scrollWidth - this.Eb) + u - this.Eb / c + l, this.position.y))), a.bH && this.se && (f < b && (this.position = s.m(this.position.x, a.scrollTop + f)), d > r && (this.position = s.m(this.position.x, -(this.Hw.scrollHeight - this.Db) + a.scrollTop - this.Db / c + d))), w.v(s), Ol(this),
                this.Hm = this.Dw = !1, b = this.be, c = this.sb, l = b.right, q = c.right, d = b.bottom, r = c.bottom, e = b.x, m = c.x, f = b.y, b = c.y, n >= h && e >= m && l <= q && (this.gt.style.width = "1px"), p >= k && f >= b && d <= r && (this.gt.style.height = "1px"))
        }
    };
    D.prototype.computeBounds = D.prototype.sh = function ()
    {
        0 < this.ug.count && Ii(this);
        return Pl(this)
    };

    function Pl(a)
    {
        if (a.eF.I())
        {
            var b = a.eF.copy();
            b.$w(a.padding);
            return b
        }
        for (var c = !0, d = a.dc.n, e = d.length, f = 0; f < e; f++)
        {
            var h = d[f];
            if (h.visible && (!h.Pc || h.yF))
                for (var h = h.Ab.n, k = h.length, l = 0; l < k; l++)
                {
                    var m = h[l];
                    m.VA && m.isVisible() && (m = m.U, m.I() && (c ? (c = !1, b = m.copy()) : b.Jh(m)))
                }
        }
        c && (b = new B(0, 0, 0, 0));
        b.$w(a.padding);
        return b
    }
    D.prototype.computePartsBounds = function (a, b)
    {
        void 0 === b && (b = !1);
        for (var c = null, d = a.i; d.next();)
        {
            var e = d.value;
            !b && e instanceof W || (e.af(), null === c ? c = e.U.copy() : c.Jh(e.U))
        }
        return null === c ? new B(NaN, NaN, 0, 0) : c
    };

    function Ql(a, b)
    {
        if ((b || a.bh) && !a.Vc && null !== a.yb && !a.Ka.df && a.be.I())
        {
            a.Vc = !0;
            var c = a.zm;
            b && a.sl !== oh && (c = a.sl);
            var d = c !== oh ? Rl(a, c) : a.scale,
                c = a.sb.copy(),
                e = a.Eb / d,
                f = a.Db / d,
                h = null,
                k = a.Ka;
            k.rc && (h = a.$a.copy());
            a.position.Qa();
            var l = a.Cm;
            b && !l.$c() && a.Lo.$c() && (l = a.Lo);
            Sl(a, a.$a, a.be, e, f, l, b);
            a.position.freeze();
            null !== h && il(k, h, a.$a);
            e = a.scale;
            a.scale = d;
            a.Vc = !1;
            d = a.sb;
            d.Oc(c) || a.Mu(c, d, e, a.scale, !1)
        }
    }

    function Rl(a, b)
    {
        var c = a.pb.qx;
        if (null === a.yb) return c;
        a.dk && Tl(a, a.sh());
        var d = a.be;
        if (!d.I()) return c;
        var e = d.width,
            d = d.height,
            f = a.Eb,
            h = a.Db,
            k = f / e,
            l = h / d;
        return b === Ul ? (e = Math.min(l, k), e > c && (e = c), e < a.Bh && (e = a.Bh), e > a.Ah && (e = a.Ah), e) : b === Vl ? (e = l > k ? (h - a.yd) / d : (f - a.yd) / e, e > c && (e = c), e < a.Bh && (e = a.Bh), e > a.Ah && (e = a.Ah), e) : a.scale
    }
    D.prototype.zoomToFit = D.prototype.zoomToFit = function ()
    {
        this.scale = Rl(this, Ul);
        this.ty !== tl && (this.$a.Qa(), Sl(this, this.$a, this.be, this.Eb / this.qb, this.Db / this.qb, this.Cm, !0), this.$a.freeze())
    };
    D.prototype.zoomToRect = function (a, b)
    {
        void 0 === b && (b = Ul);
        var c = a.width,
            d = a.height;
        if (!(0 === c || 0 === d || isNaN(c) && isNaN(d)))
        {
            var e = 1;
            if (b === Ul || b === Vl)
                if (isNaN(c)) e = this.sb.height * this.scale / d;
                else if (isNaN(d)) e = this.sb.width * this.scale / c;
                else var e = this.Eb,
                        f = this.Db,
                        e = b === Vl ? f / d > e / c ? (f - (this.ck ? this.yd : 0)) / d : (e - (this.ql ? this.yd : 0)) / c : Math.min(f / d, e / c);
            this.scale = e;
            this.position = new y(a.x, a.y)
        }
    };
    w.defineProperty(D,
        {
            SA: null
        }, function ()
        {
            return this.Vc
        }, function (a)
        {
            this.Vc = a
        });
    D.prototype.alignDocument = function (a, b)
    {
        this.dk && Tl(this, this.sh());
        var c = this.be,
            d = this.sb;
        this.position = new y(c.x + (a.x * c.width + a.offsetX) - (b.x * d.width - b.offsetX), c.y + (a.y * c.height + a.offsetY) - (b.y * d.height - b.offsetY))
    };

    function Sl(a, b, c, d, e, f, h)
    {
        var k = b.x,
            l = b.y;
        if (h || a.ty === tl) f.$c() && (d > c.width && (k = c.x + (f.x * c.width + f.offsetX) - (f.x * d - f.offsetX)), e > c.height && (l = c.y + (f.y * c.height + f.offsetY) - (f.y * e - f.offsetY))), f = a.sy, h = d - c.width, d < c.width + f.left + f.right ? (k = Math.min(k + d / 2, c.right + Math.max(h, f.right) - d / 2), k = Math.max(k, c.left - Math.max(h, f.left) + d / 2), k -= d / 2) : k > c.left ? k = c.left : k < c.right - d && (k = c.right - d), d = e - c.height, e < c.height + f.top + f.bottom ? (l = Math.min(l + e / 2, c.bottom + Math.max(d, f.bottom) - e / 2), l = Math.max(l, c.top - Math.max(d,
            f.top) + e / 2), l -= e / 2) : l > c.top ? l = c.top : l < c.bottom - e && (l = c.bottom - e);
        b.x = isFinite(k) ? k : -a.padding.left;
        b.y = isFinite(l) ? l : -a.padding.top;
        null !== a.ZF && (a = a.ZF(a, b), b.x = a.x, b.y = a.y)
    }
    D.prototype.findPartAt = D.prototype.au = function (a, b)
    {
        var c = b ? Mi(this, a, function (a)
        {
            return a.V
        }, function (a)
        {
            return a.canSelect()
        }) : Mi(this, a, function (a)
        {
            return a.V
        });
        return c instanceof R ? c : null
    };
    D.prototype.findObjectAt = D.prototype.Oe = function (a, b, c)
    {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        Ii(this);
        for (var d = this.dc.Jn; d.next();)
        {
            var e = d.value;
            if (e.visible && (e = e.Oe(a, b, c), null !== e)) return e
        }
        return null
    };

    function Mi(a, b, c, d)
    {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        Ii(a);
        for (a = a.dc.Jn; a.next();)
        {
            var e = a.value;
            if (e.visible && !e.Pc && (e = e.Oe(b, c, d), null !== e)) return e
        }
        return null
    }
    D.prototype.findObjectsAt = D.prototype.$t = function (a, b, c, d)
    {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof H || d instanceof I || (d = new I(G));
        Ii(this);
        for (var e = this.dc.Jn; e.next();)
        {
            var f = e.value;
            f.visible && f.$t(a, b, c, d)
        }
        return d
    };
    D.prototype.findObjectsIn = D.prototype.Jk = function (a, b, c, d, e)
    {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        void 0 === d && (d = !1);
        e instanceof H || e instanceof I || (e = new I(G));
        Ii(this);
        for (var f = this.dc.Jn; f.next();)
        {
            var h = f.value;
            h.visible && h.Jk(a, b, c, d, e)
        }
        return e
    };
    D.prototype.BA = function (a, b, c, d, e, f)
    {
        var h = new I(G);
        Ii(this);
        for (var k = this.dc.Jn; k.next();)
        {
            var l = k.value;
            l.visible && l.BA(a, b, c, d, h, e, f)
        }
        return h
    };
    D.prototype.findObjectsNear = D.prototype.yn = function (a, b, c, d, e, f)
    {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        void 0 === e && (e = !0);
        if (!1 !== e && !0 !== e)
        {
            if (e instanceof H || e instanceof I) f = e;
            e = !0
        }
        f instanceof H || f instanceof I || (f = new I(G));
        Ii(this);
        for (var h = this.dc.Jn; h.next();)
        {
            var k = h.value;
            k.visible && k.yn(a, b, c, d, e, f)
        }
        return f
    };
    D.prototype.acceptEvent = function (a)
    {
        var b = this.wd;
        this.wd = this.Rb;
        this.Rb = b;
        Wl(this, this, a, b, a instanceof MouseEvent);
        return b
    };

    function Wl(a, b, c, d, e)
    {
        d.g = b;
        d.event = c;
        e ? Xl(a, c, d) : (d.Ce = b.Rb.Ce, d.da = b.Rb.da);
        a = 0;
        c.ctrlKey && (a += 1);
        c.altKey && (a += 2);
        c.shiftKey && (a += 4);
        c.metaKey && (a += 8);
        d.md = a;
        d.button = c.button;
        void 0 === c.buttons || w.uu || (d.buttons = c.buttons);
        w.yh && 0 === c.button && c.ctrlKey && (d.button = 2);
        d.Hk = !1;
        d.up = !1;
        d.te = 1;
        d.oi = 0;
        d.tc = !1;
        d.bubbles = !1;
        d.timestamp = Date.now();
        d.wu = !1;
        d.If = Yl(c);
        d.Be = null
    }

    function Yl(a)
    {
        var b = a.target.aa;
        if (!b)
        {
            var c = a.path;
            c || "function" !== typeof a.zH || (c = a.zH());
            c && c[0] && (b = c[0].aa)
        }
        return b ? b : null
    }

    function Zl(a, b, c, d)
    {
        var e = a.wd;
        a.wd = a.Rb;
        a.Rb = e;
        e.g = a;
        Xl(a, c, e);
        e.button = 0;
        e.buttons = 1;
        c = 0;
        b.ctrlKey && (c += 1);
        b.altKey && (c += 2);
        b.shiftKey && (c += 4);
        b.metaKey && (c += 8);
        e.md = c;
        e.Hk = !0;
        e.up = !1;
        e.te = 1;
        e.oi = 0;
        e.tc = !1;
        e.bubbles = !0;
        e.event = b;
        e.timestamp = Date.now();
        e.wu = d;
        e.If = Yl(b);
        e.Be = null;
        d || (a.Pi = e.copy());
        Sh = null;
        return e
    }

    function $l(a, b, c, d)
    {
        var e = a.wd;
        a.wd = a.Rb;
        a.Rb = e;
        var f = null;
        e.g = a;
        null !== c ? ((f = window.document.elementFromPoint(c.clientX, c.clientY)) && f.aa ? f = f.aa : (c = void 0 !== b.targetTouches ? b.targetTouches[0] : b, f = a), e.If = f, Xl(a, c, e)) : null !== a.wd ? (e.da = a.wd.da, e.Ce = a.wd.Ce, e.If = a.wd.If) : null !== a.Pi && (e.da = a.Pi.da, e.Ce = a.Pi.Ce, e.If = a.Pi.If);
        e.button = 0;
        e.buttons = 1;
        a = 0;
        b.ctrlKey && (a += 1);
        b.altKey && (a += 2);
        b.shiftKey && (a += 4);
        b.metaKey && (a += 8);
        e.md = a;
        e.Hk = !1;
        e.up = !1;
        e.te = 1;
        e.oi = 0;
        e.tc = !1;
        e.bubbles = !1;
        e.event = b;
        e.timestamp =
            Date.now();
        e.wu = d;
        e.Be = null;
        return e
    }

    function am(a, b)
    {
        if (a.bubbles) return !0;
        void 0 !== b.stopPropagation && b.stopPropagation();
        b.preventDefault();
        b.cancelBubble = !0;
        return !1
    }
    D.prototype.GI = function (a)
    {
        if (!this.aa.isEnabled) return !1;
        var b = this.aa.Rb;
        Wl(this.aa, this.aa, a, b, !1);
        b.key = String.fromCharCode(a.which);
        b.Hk = !0;
        switch (a.which)
        {
            case 8:
                b.key = "Backspace";
                break;
            case 33:
                b.key = "PageUp";
                break;
            case 34:
                b.key = "PageDown";
                break;
            case 35:
                b.key = "End";
                break;
            case 36:
                b.key = "Home";
                break;
            case 37:
                b.key = "Left";
                break;
            case 38:
                b.key = "Up";
                break;
            case 39:
                b.key = "Right";
                break;
            case 40:
                b.key = "Down";
                break;
            case 45:
                b.key = "Insert";
                break;
            case 46:
                b.key = "Del";
                break;
            case 48:
                b.key = "0";
                break;
            case 187:
            case 61:
            case 107:
                b.key =
                    "Add";
                break;
            case 189:
            case 173:
            case 109:
                b.key = "Subtract";
                break;
            case 27:
                b.key = "Esc"
        }
        this.aa.doKeyDown();
        return am(b, a)
    };
    D.prototype.HI = function (a)
    {
        if (!this.aa.isEnabled) return !1;
        var b = this.aa.Rb;
        Wl(this.aa, this.aa, a, b, !1);
        b.key = String.fromCharCode(a.which);
        b.up = !0;
        switch (a.which)
        {
            case 8:
                b.key = "Backspace";
                break;
            case 33:
                b.key = "PageUp";
                break;
            case 34:
                b.key = "PageDown";
                break;
            case 35:
                b.key = "End";
                break;
            case 36:
                b.key = "Home";
                break;
            case 37:
                b.key = "Left";
                break;
            case 38:
                b.key = "Up";
                break;
            case 39:
                b.key = "Right";
                break;
            case 40:
                b.key = "Down";
                break;
            case 45:
                b.key = "Insert";
                break;
            case 46:
                b.key = "Del"
        }
        this.aa.doKeyUp();
        return am(b, a)
    };
    D.prototype.Jr = function (a)
    {
        var b = this.yb;
        if (null === b) return new y(0, 0);
        var c = this.Eb,
            d = this.Db,
            b = b.getBoundingClientRect(),
            c = a.clientX - c / b.width * b.left;
        a = a.clientY - d / b.height * b.top;
        return null !== this.kd ? (a = new y(c, a), Pa(a, this.kd), a) : new y(c, a)
    };

    function Xl(a, b, c)
    {
        var d = a.yb,
            e = a.Eb,
            f = a.Db,
            h = 0,
            k = 0;
        null !== d && (d = d.getBoundingClientRect(), h = b.clientX - e / d.width * d.left, k = b.clientY - f / d.height * d.top);
        c.Ce.m(h, k);
        null !== a.kd ? (b = w.xb(h, k), a.kd.wh(b), c.da.assign(b), w.v(b)) : c.da.m(h, k)
    }

    function zf(a, b, c, d)
    {
        var e = null;
        if (void 0 !== b.targetTouches)
        {
            if (2 > b.targetTouches.length) return;
            e = b.targetTouches[c]
        }
        else if (null !== a.gp[0]) e = a.gp[c];
        else return;
        c = a.yb;
        b = a.Eb;
        a = a.Db;
        var f = 0,
            h = 0;
        null !== c && null !== e && (c = c.getBoundingClientRect(), f = e.clientX - b / c.width * c.left, h = e.clientY - a / c.height * c.top);
        d.m(f, h)
    }
    D.prototype.invalidateDocumentBounds = D.prototype.Fc = function ()
    {
        this.dk || (this.dk = !0, this.ye(!0))
    };

    function fl(a)
    {
        a.Zd || Ii(a);
        a.dk && Tl(a, a.sh())
    }
    D.prototype.redraw = D.prototype.Pu = function ()
    {
        this.Vc || this.Zd || (this.oa(), bm(this), Ol(this), this.Fc(), this.cg())
    };
    D.prototype.isUpdateRequested = function ()
    {
        return this.Tf
    };
    D.prototype.delayInitialization = function (a)
    {
        void 0 === a && (a = null);
        var b = this.Ka,
            c = b.isEnabled;
        b.Hh();
        b.isEnabled = !1;
        Si(this);
        this.bh = !1;
        b.isEnabled = c;
        null !== a && w.setTimeout(a, 1)
    };
    D.prototype.requestUpdate = D.prototype.ye = function (a)
    {
        void 0 === a && (a = !1);
        if (!0 !== this.Tf && !(this.Vc || !1 === a && this.Zd))
        {
            this.Tf = !0;
            var b = this;
            requestAnimationFrame(function ()
            {
                b.Tf && b.cg()
            })
        }
    };
    D.prototype.maybeUpdate = D.prototype.cg = function ()
    {
        if (!this.Go || this.Tf) this.Go && (this.Go = !1), Si(this)
    };

    function cm(a, b)
    {
        a.Ka.df || a.Vc || !a.Hm || Ml(a) || (b && Ii(a), Ql(a, !1))
    }

    function Si(a)
    {
        if (!a.Zd && (a.Tf = !1, null !== a.Ob))
        {
            a.Zd = !0;
            var b = a.Ka,
                c = a.Mz;
            if (!b.Ro && 0 !== c.length)
            {
                for (var d = c.n, e = d.length, f = 0; f < e; f++)
                {
                    var h = d[f];
                    dm(h, !1);
                    h.H()
                }
                c.clear()
            }
            c = a.cD;
            0 < c.count && (c.each(function (a)
            {
                a.UB()
            }), c.clear());
            d = c = !1;
            b.df && (d = !0, c = a.fb, a.fb = !0);
            b.rc || Hk(a);
            cm(a, !1);
            null !== a.td && (a.td.visible && !a.Pv && (em(a), a.Pv = !0), !a.td.visible && a.Pv && (a.Pv = !1));
            Ii(a);
            e = !1;
            if (!a.bh || a.Qj) a.bh ? fm(a, !a.wr) : (a.Kb("Initial Layout"), !1 === b.isEnabled && b.Hh(), fm(a, !1)), e = !0;
            a.wr = !1;
            Ii(a);
            a.Vz || b.df ||
            fl(a);
            cm(a, !0);
            e && (a.bh || gm(a), a.Aa("LayoutCompleted"));
            Ii(a);
            e && !a.bh && (a.bh = !0, a.Yc("Initial Layout"), a.fb || a.ja.clear(), w.setTimeout(function ()
            {
                a.ri = !1
            }, 1));
            hm(a);
            Gk(b);
            a.ve(a.hf);
            d && (a.fb = c);
            a.Zd = !1
        }
    }
    w.u(D,
        {
            In: null
        }, function ()
        {
            return this.bh
        });

    function gm(a)
    {
        var b = a.dc.n;
        a.Hf(b, b.length, a);
        a.sl !== oh ? a.scale = Rl(a, a.sl) : a.zm !== oh ? a.scale = Rl(a, a.zm) : (b = a.tI, isFinite(b) && 0 < b && (a.scale = b));
        b = a.sI;
        if (b.I()) a.position = b;
        else
        {
            b = w.K();
            b.Zn(a.be, a.rI);
            var c = a.sb,
                c = w.kg(0, 0, c.width, c.height),
                d = w.K();
            d.Zn(c, a.uI);
            d.m(b.x - d.x, b.y - d.y);
            a.position = d;
            w.Hb(c);
            w.v(d);
            w.v(b);
            bm(a);
            cm(a, !0);
            Ql(a, !0)
        }
        a.Aa("InitialLayoutCompleted");
        em(a)
    }

    function Ii(a)
    {
        if ((a.Zd || !a.Ka.df) && 0 !== a.ug.count)
        {
            for (var b = 0; 23 > b; b++)
            {
                var c = a.ug.i;
                if (null === c || 0 === a.ug.count) break;
                a.ug = new I(R);
                a.UB(c, a.ug)
            }
            a.hg.each(function (a)
            {
                a instanceof V && 0 !== (a.ya & 65536) !== !1 && (a.ya ^= 65536)
            })
        }
    }
    D.prototype.UB = function (a, b)
    {
        for (a.reset(); a.next();)
        {
            var c = a.value;
            !c.he() || c instanceof V || (c.gm() ? (yk(c, Infinity, Infinity), c.hc()) : b.add(c))
        }
        for (a.reset(); a.next();) c = a.value, c instanceof V && c.isVisible() && km(this, c);
        for (a.reset(); a.next();) c = a.value, c instanceof W && c.isVisible() && (c.gm() ? (yk(c, Infinity, Infinity), c.hc()) : b.add(c));
        for (a.reset(); a.next();) c = a.value, c instanceof jh && c.isVisible() && (c.gm() ? (yk(c, Infinity, Infinity), c.hc()) : b.add(c))
    };

    function km(a, b)
    {
        for (var c = w.gb(), d = w.gb(), e = b.vc; e.next();)
        {
            var f = e.value;
            f.isVisible() && (f instanceof V ? (sm(f) || Gm(f) || Hm(f)) && km(a, f) : f instanceof W ? f.Y === b || f.Z === b ? d.push(f) : c.push(f) : (yk(f, Infinity, Infinity), f.hc()))
        }
        for (var e = c.length, h = 0; h < e; h++) f = c[h], yk(f, Infinity, Infinity), f.hc();
        w.ta(c);
        yk(b, Infinity, Infinity);
        b.hc();
        e = d.length;
        for (h = 0; h < e; h++) f = d[h], yk(f, Infinity, Infinity), f.hc();
        w.ta(d)
    }
    D.prototype.Hf = function (a, b, c, d)
    {
        var e = this.Ka;
        if (this.tl || e.df)
            for (e = 0; e < b; e++) a[e].Hf(c, d)
    };
    D.prototype.ve = function (a, b)
    {
        void 0 === b && (b = null);
        null === this.Ob && w.k("No div specified");
        var c = this.yb;
        null === c && w.k("No canvas specified");
        var d = this.Ka;
        if (!d.rc && (Im(this), "0" !== this.Ob.style.opacity))
        {
            var e = a !== this.hf,
                f = this.dc.n,
                h = f.length,
                k = this;
            this.Hf(f, h, k);
            if (e) a.Ke(!0), Ol(this);
            else if (!this.Fe && null === b && !d.ek) return;
            var h = this.$a,
                l = this.qb,
                m = Math.round(h.x * l) / l,
                n = Math.round(h.y * l) / l,
                d = this.kd;
            d.reset();
            1 !== l && d.scale(l);
            0 === h.x && 0 === h.y || d.translate(-m, -n);
            l = this.Jd;
            w.Gn ? (c.width = c.width,
                a.Ke(!0), a.scale(l, l)) : (a.setTransform(1, 0, 0, 1, 0, 0), a.scale(l, l), a.clearRect(0, 0, this.Eb, this.Db));
            a.setTransform(1, 0, 0, 1, 0, 0);
            a.scale(l, l);
            a.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
            c = null !== b ? function (c)
            {
                var d = b;
                if (c.visible && 0 !== c.Bc)
                {
                    var e = c.Ab.n,
                        f = e.length;
                    if (0 !== f)
                    {
                        1 !== c.Bc && (a.globalAlpha = c.Bc);
                        c = c.Ms;
                        c.length = 0;
                        for (var h = k.scale, l = 0; l < f; l++)
                        {
                            var m = e[l];
                            if (kl(m) && !d.contains(m))
                            {
                                if (m instanceof W)
                                {
                                    var n = m;
                                    n.ac && c.push(n);
                                    if (!1 === n.Mf) continue
                                }
                                n = m.U;
                                1 < n.width * h || 1 < n.height * h ? m.ve(a, k) : ml(m,
                                    a)
                            }
                        }
                        a.globalAlpha = 1
                    }
                }
            } : function (b)
            {
                b.ve(a, k)
            };
            Jm(this, a);
            h = f.length;
            for (m = 0; m < h; m++) a.setTransform(1, 0, 0, 1, 0, 0), a.scale(l, l), a.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy), c(f[m]);
            this.rl ? this.rl.tm(this) && this.Jv() : this.Jr = function ()
            {
                return new y(0, 0)
            };
            e ? (this.hf.Ke(!0), Ol(this)) : this.Fe = this.tl = !1
        }
    };

    function Km(a, b, c, d, e)
    {
        null === a.Ob && w.k("No div specified");
        var f = a.yb;
        null === f && w.k("No canvas specified");
        if (!a.Ka.rc)
        {
            var h = a.hf;
            if (a.Fe)
            {
                Im(a);
                var k = a.Jd;
                w.Gn ? (f.width = f.width, h.Ke(!0)) : (h.setTransform(1, 0, 0, 1, 0, 0), h.clearRect(0, 0, a.Eb * k, a.Db * k));
                h.xy(!1);
                h.drawImage(a.kz.Od, 0 < d ? 0 : Math.round(-d), 0 < e ? 0 : Math.round(-e));
                e = a.$a;
                var f = a.qb,
                    l = Math.round(e.x * f) / f,
                    m = Math.round(e.y * f) / f;
                d = a.kd;
                d.reset();
                1 !== f && d.scale(f);
                0 === e.x && 0 === e.y || d.translate(-l, -m);
                h.save();
                h.beginPath();
                e = c.length;
                for (f = 0; f <
                e; f++) l = c[f], 0 !== l.width && 0 !== l.height && h.rect(Math.floor(l.x), Math.floor(l.y), Math.ceil(l.width), Math.ceil(l.height));
                h.clip();
                h.setTransform(1, 0, 0, 1, 0, 0);
                h.scale(k, k);
                h.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
                c = a.dc.n;
                e = c.length;
                a.Hf(c, e, a);
                Jm(a, h);
                for (f = 0; f < e; f++) nl(c[f], h, a, b);
                h.restore();
                h.Ke(!0);
                a.rl ? a.rl.tm(a) && a.Jv() : a.Jr = function ()
                {
                    return new y(0, 0)
                };
                a.tl = !1;
                a.Fe = !1;
                a.ky()
            }
        }
    }

    function Lm(a, b, c, d, e, f, h, k, l, m)
    {
        null === a.Ob && w.k("No div specified");
        null === a.yb && w.k("No canvas specified");
        void 0 === h && (h = null);
        void 0 === k && (k = null);
        void 0 === l && (l = !1);
        void 0 === m && (m = !1);
        Im(a);
        a.hf.Ke(!0);
        Ol(a);
        a.Bz = !0;
        var n = a.qb;
        a.qb = e;
        var p = a.dc.n,
            q = p.length;
        try
        {
            var r = new B(f.x, f.y, d.width / e, d.height / e),
                s = r.copy();
            s.$w(c);
            em(a, s);
            Ii(a);
            a.Hf(p, q, a, r);
            var u = a.Jd;
            b.setTransform(1, 0, 0, 1, 0, 0);
            b.scale(u, u);
            b.clearRect(0, 0, d.width, d.height);
            null !== k && "" !== k && (b.fillStyle = k, b.fillRect(0, 0, d.width, d.height));
            var t = w.Vg();
            t.reset();
            t.translate(c.left, c.top);
            t.scale(e);
            0 === f.x && 0 === f.y || t.translate(-f.x, -f.y);
            b.setTransform(t.m11, t.m12, t.m21, t.m22, t.dx, t.dy);
            w.bf(t);
            Jm(a, b);
            var x;
            if (null !== h)
            {
                var v = new I(R),
                    z = h.i;
                for (z.reset(); z.next();)
                {
                    var A = z.value;
                    !1 === m && "Grid" === A.layer.name || null === A || v.add(A)
                }
                x = function (c)
                {
                    var d = l;
                    if (c.visible && 0 !== c.Bc && (void 0 === d && (d = !0), d || !c.Pc))
                    {
                        var d = c.Ab.n,
                            e = d.length;
                        if (0 !== e)
                        {
                            1 !== c.Bc && (b.globalAlpha = c.Bc);
                            c = c.Ms;
                            c.length = 0;
                            for (var f = a.scale, h = 0; h < e; h++)
                            {
                                var k = d[h];
                                if (kl(k) &&
                                    v.contains(k))
                                {
                                    if (k instanceof W)
                                    {
                                        var m = k;
                                        m.ac && c.push(m);
                                        if (!1 === m.Mf) continue
                                    }
                                    m = k.U;
                                    1 < m.width * f || 1 < m.height * f ? k.ve(b, a) : ml(k, b)
                                }
                            }
                            b.globalAlpha = 1
                        }
                    }
                }
            }
            else if (!l && m)
            {
                var L = a.En.V,
                    E = L.layer;
                x = function (c)
                {
                    c === E ? L.ve(b, a) : c.ve(b, a, l)
                }
            }
            else x = function (c)
                {
                    c.ve(b, a, l)
                };
            for (c = 0; c < q; c++) x(p[c]);
            a.Bz = !1;
            a.rl ? a.rl.tm(a) && a.Jv() : a.Jr = function ()
            {
                return new y(0, 0)
            }
        }
        finally
        {
            a.qb = n, a.hf.Ke(!0), Ol(a), a.Hf(p, q, a), em(a)
        }
    }
    D.prototype.getRenderingHint = D.prototype.wj = function (a)
    {
        return this.rk[a]
    };
    D.prototype.setRenderingHint = D.prototype.IJ = function (a, b)
    {
        this.rk[a] = b;
        this.Pu()
    };
    D.prototype.resetRenderingHints = D.prototype.fG = function ()
    {
        this.rk = new ra;
        this.rk.drawShadows = !0;
        this.rk.textGreeking = !0;
        this.rk.viewportOptimizations = w.CF || w.cq || w.dq ? !1 : !0;
        this.rk.temporaryPixelRatio = !0;
        this.rk.pictureRatioOptimization = !0
    };

    function Jm(a, b)
    {
        var c = a.rk;
        null !== c && (void 0 !== c.imageSmoothingEnabled && b.xy(!!c.imageSmoothingEnabled), c = c.defaultFont, void 0 !== c && null !== c && (b.font = c))
    }
    D.prototype.getInputOption = D.prototype.ku = function (a)
    {
        return this.Oo[a]
    };
    D.prototype.setInputOption = function (a, b)
    {
        this.Oo[a] = b
    };
    D.prototype.resetInputOptions = D.prototype.eG = function ()
    {
        this.Oo = new ra;
        this.Oo.extraTouchArea = 10;
        this.Oo.extraTouchThreshold = 10;
        this.Oo.hasGestureZoom = !0
    };
    D.prototype.setProperties = function (a)
    {
        w.Xu(this, a)
    };

    function hm(a)
    {
        if (0 === a.ja.wi && 0 !== a.ml.count)
        {
            for (; 0 < a.ml.count;)
            {
                var b = a.ml;
                a.ml = new ma(W, B);
                for (b = b.i; b.next();)
                {
                    var c = b.key;
                    nj(c, b.value);
                    c.ge()
                }
            }
            a.oa()
        }
    }
    D.prototype.oa = function (a)
    {
        void 0 === a && (a = null);
        if (null === a) this.Fe = !0, this.ye();
        else
        {
            var b = this.sb;
            null !== a && a.I() && b.Zf(a) && (this.Fe = !0, this.ye())
        }
        for (b = this.xw.i; b.next();) b.value.oa(a)
    };
    D.prototype.wF = function (a, b)
    {
        if (!0 !== this.Fe)
        {
            this.Fe = !0;
            var c = !0 === this.wj("temporaryPixelRatio");
            if (!0 === this.wj("viewportOptimizations") && this.ty !== Mm && this.sy.zx(0, 0, 0, 0) && b.width === a.width && b.height === a.height)
            {
                var d = this.scale,
                    e = w.Kf(),
                    f = Math.max(a.x, b.x),
                    h = Math.max(a.y, b.y),
                    k = Math.min(a.x + a.width, b.x + b.width),
                    l = Math.min(a.y + a.height, b.y + b.height);
                e.x = f;
                e.y = h;
                e.width = Math.max(0, k - f) * d;
                e.height = Math.max(0, l - h) * d;
                if (0 < e.width && 0 < e.height)
                {
                    if (!this.Zd && (this.Tf = !1, null !== this.Ob))
                    {
                        this.Zd = !0;
                        hm(this);
                        this.be.I() || Tl(this, this.sh());
                        var m = this.yb;
                        if (null !== m)
                        {
                            var n = this.Jd,
                                h = this.Eb * n,
                                k = this.Db * n,
                                f = this.scale * n,
                                d = Math.round(Math.round(b.x * f) - Math.round(a.x * f)),
                                f = Math.round(Math.round(b.y * f) - Math.round(a.y * f)),
                                l = this.kz,
                                p = this.VC;
                            l.width !== h && (l.width = h);
                            l.height !== k && (l.height = k);
                            p.clearRect(0, 0, h, k);
                            var l = 190 * this.Jd,
                                q = 70 * this.Jd,
                                r = Math.max(d, 0),
                                s = Math.max(f, 0),
                                u = Math.floor(h - r),
                                t = Math.floor(k - s);
                            p.xy(!1);
                            p.drawImage(m.Od, r, s, u, t, 0, 0, u, t);
                            this.rl.tm(this) && p.clearRect(0, 0, l, q);
                            var m = w.gb(),
                                p =
                                    w.gb(),
                                t = Math.abs(d),
                                u = Math.abs(f),
                                x = 0 === r ? 0 : h - t,
                                r = w.xb(x, 0),
                                t = w.xb(t + x, k);
                            p.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            var v = this.kd;
                            v.reset();
                            v.scale(n, n);
                            1 !== this.qb && v.scale(this.qb);
                            n = this.$a;
                            (0 !== n.x || 0 !== n.y) && isFinite(n.x) && isFinite(n.y) && v.translate(-n.x, -n.y);
                            Pa(r, v);
                            Pa(t, v);
                            m.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            x = 0 === s ? 0 : k - u;
                            r.m(0, x);
                            t.m(h, u + x);
                            p.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x -
                                t.x), Math.abs(r.y - t.y)));
                            Pa(r, v);
                            Pa(t, v);
                            m.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            this.rl.tm(this) && (h = 0 < d ? 0 : -d, k = 0 < f ? 0 : -f, r.m(h, k), t.m(l + h, q + k), p.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y))), Pa(r, v), Pa(t, v), m.push(new B(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y))));
                            w.v(r);
                            w.v(t);
                            cm(this, !1);
                            Km(this, m, p, d, f);
                            w.ta(m);
                            w.ta(p);
                            this.Zd = !1
                        }
                    }
                }
                else this.cg();
                w.Hb(e);
                c && (this.uk = 1, this.cg(),
                    this.uk = null, this.ky())
            }
            else c ? (this.uk = 1, this.cg(), this.uk = null, this.ky()) : this.cg()
        }
    };

    function bm(a)
    {
        !1 === a.Hm && (a.Hm = !0)
    }

    function Ol(a)
    {
        !1 === a.tl && (a.tl = !0)
    }

    function Im(a)
    {
        !1 !== a.Sr && (a.Sr = !1, Nm(a, a.Eb, a.Db))
    }

    function Nm(a, b, c)
    {
        var d = a.yb,
            e = a.Jd,
            f = b * e,
            e = c * e;
        if (d.width !== f || d.height !== e) d.width = f, d.height = e, d.style.width = b + "px", d.style.height = c + "px", a.Fe = !0, a.hf.Ke(!0)
    }

    function Ml(a)
    {
        var b = a.yb;
        if (null === b) return !0;
        var c = a.Ob,
            d = a.Eb,
            e = a.Db,
            f = a.nE.copy();
        if (!f.I()) return !0;
        var h = !1,
            k = a.ql ? a.yd : 0,
            l = a.ck ? a.yd : 0,
            m = c.clientWidth || d + k,
            c = c.clientHeight || e + l;
        if (m !== d + k || c !== e + l) a.ql = !1, a.ck = !1, l = k = 0, a.Eb = m, a.Db = c, h = a.Sr = !0;
        a.Hm = !1;
        var n = a.sb,
            p = a.be,
            q = 0,
            r = 0,
            s = 0,
            u = 0,
            m = n.width,
            c = n.height,
            t = a.sy;
        a.qA.$c() ? (p.width > m && (q = t.left, r = t.right), p.height > c && (s = t.top, u = t.bottom)) : (q = t.left, r = t.right, s = t.top, u = t.bottom);
        var t = p.width + q + r,
            x = p.height + s + u,
            q = p.x - q,
            v = n.x,
            r = p.right + r,
            z = n.right +
                k,
            s = p.y - s,
            A = n.y,
            u = p.bottom + u,
            n = n.bottom + l,
            L = "1px",
            E = "1px",
            p = a.scale,
            P = !(t < m + k),
            $ = !(x < c + l);
        a.ty === tl && (P || $) && (P && a.LA && a.re && (L = 1, q + 1 < v && (L = Math.max((v - q) * p + a.Eb, L)), r > z + 1 && (L = Math.max((r - z) * p + a.Eb, L)), m + k + 1 < t && (L = Math.max((t - m + k) * p + a.Eb, L)), L = L.toString() + "px"), $ && a.MA && a.se && (E = 1, s + 1 < A && (E = Math.max((A - s) * p + a.Db, E)), u > n + 1 && (E = Math.max((u - n) * p + a.Db, E)), c + l + 1 < x && (E = Math.max((x - c + l) * p + a.Db, E)), E = E.toString() + "px"));
        var P = "1px" !== L,
            S = "1px" !== E;
        P && S || !P && !S || ($ = !(x < c + l), S && (z -= a.yd), P && (n -= a.yd), t < m +
        k || !a.LA || !a.re || (L = 1, q + 1 < v && (L = Math.max((v - q) * p + a.Eb, L)), r > z + 1 && (L = Math.max((r - z) * p + a.Eb, L)), m + 1 < t && (L = Math.max((t - m) * p + a.Eb, L)), L = L.toString() + "px"), P = "1px" !== L, k = a.Db, P !== a.ck && (k = P ? a.Db - a.yd : a.Db + a.yd), $ && a.MA && a.se && (E = 1, s + 1 < A && (E = Math.max((A - s) * p + k, E)), u > n + 1 && (E = Math.max((u - n) * p + k, E)), c + 1 < x && (E = Math.max((x - c) * p + k, E)), E = E.toString() + "px"), S = "1px" !== E);
        if (a.Dw && P === a.ck && S === a.ql) return d === a.Eb && e === a.Db || a.cg(), !1;
        P !== a.ck && (a.Db = "1px" === L ? a.Db + a.yd : Math.max(a.Db - a.yd, 1), h = !0);
        a.ck = P;
        a.gt.style.width =
            L;
        S !== a.ql && (a.Eb = "1px" === E ? a.Eb + a.yd : Math.max(a.Eb - a.yd, 1), h = !0, a.Xr && (k = w.K(), S ? (b.style.left = a.yd + "px", a.position = k.m(a.$a.x + a.yd / a.scale, a.$a.y)) : (b.style.left = "0px", a.position = k.m(a.$a.x - a.yd / a.scale, a.$a.y)), w.v(k)));
        a.ql = S;
        a.gt.style.height = E;
        a.Rz = !0;
        h && (a.Sr = !0);
        b = a.Hw;
        k = b.scrollLeft;
        a.LA && a.re && (m + 1 < t ? k = (a.position.x - q) * p : q + 1 < v ? k = b.scrollWidth - b.clientWidth : r > z + 1 && (k = a.position.x * p));
        if (a.Xr) switch (a.Pz)
        {
            case "negative":
                k = -(b.scrollWidth - k - b.clientWidth);
                break;
            case "reverse":
                k = b.scrollWidth -
                    k - b.clientWidth
        }
        b.scrollLeft = k;
        a.MA && a.se && (c + 1 < x ? b.scrollTop = (a.position.y - s) * p : s + 1 < A ? b.scrollTop = b.scrollHeight - b.clientHeight : u > n + 1 && (b.scrollTop = a.position.y * p));
        m = a.Eb;
        c = a.Db;
        b.style.width = m + (a.ql ? a.yd : 0) + "px";
        b.style.height = c + (a.ck ? a.yd : 0) + "px";
        return d !== m || e !== c || a.Ka.rc ? (n = a.sb, a.Mu(f, n, p, a.scale, h), !1) : !0
    }
    D.prototype.add = D.prototype.add = function (a)
    {
        w.G(a, R, D, "add:part");
        var b = a.g;
        if (b !== this)
        {
            null !== b && w.k("Cannot add part " + a.toString() + " to " + this.toString() + ". It is already a part of " + b.toString());
            this.Nq && (a.xl = "Tool");
            var c = a.ag,
                b = this.Zt(c);
            null === b && (b = this.Zt(""));
            null === b && w.k('Cannot add a Part when unable find a Layer named "' + c + '" and there is no default Layer');
            a.layer !== b && (c = b.$p(99999999, a, a.g === this), 0 <= c && this.cd(Ef, "parts", b, null, a, null, c), b.Pc || this.Fc(), a.J(Om), c = a.Rx, null !==
            c && c(a, null, b))
        }
    };
    D.prototype.$p = function (a)
    {
        if (a instanceof T)
        {
            if (this.dp.add(a), a instanceof V)
            {
                var b = a.Da;
                null === b ? this.Jl.add(a) : b.ap.add(a);
                b = a.Tb;
                null !== b && (b.g = this)
            }
        }
        else a instanceof W ? this.Xo.add(a) : a instanceof jh || this.Ab.add(a);
        var c = this;
        Pm(a, function (a)
        {
            Qm(c, a)
        });
        (a instanceof jh || a instanceof V && null !== a.Nb) && a.H();
        b = a.data;
        null !== b && (a instanceof jh || (a instanceof W ? this.Tj.add(b, a) : this.Ii.add(b, a)), Pm(a, function (a)
        {
            Rm(c, a)
        }));
        !0 !== Gm(a) && !0 !== Hm(a) || this.ug.add(a);
        Sm(a, !0, this);
        Tm(a) ? (a.U.I() && this.oa(ol(a,
            a.U)), this.Fc()) : a.isVisible() && a.U.I() && this.oa(ol(a, a.U));
        this.ye()
    };
    D.prototype.rf = function (a)
    {
        a.Qt();
        if (a instanceof T)
        {
            if (this.dp.remove(a), a instanceof V)
            {
                var b = a.Da;
                null === b ? this.Jl.remove(a) : b.ap.remove(a);
                b = a.Tb;
                null !== b && (b.g = null)
            }
        }
        else a instanceof W ? this.Xo.remove(a) : a instanceof jh || this.Ab.remove(a);
        var c = this;
        Pm(a, function (a)
        {
            Um(c, a)
        });
        b = a.data;
        null !== b && (a instanceof jh || (a instanceof W ? this.Tj.remove(b) : this.Ii.remove(b)), Pm(a, function (a)
        {
            Vm(c, a)
        }));
        this.ug.remove(a);
        Tm(a) ? (a.U.I() && this.oa(ol(a, a.U)), this.Fc()) : a.isVisible() && a.U.I() && this.oa(ol(a,
            a.U));
        this.ye()
    };
    D.prototype.remove = D.prototype.remove = function (a)
    {
        w.G(a, R, D, "remove:part");
        Wm(this, a, !0)
    };

    function Wm(a, b, c)
    {
        var d = b.layer;
        null !== d && d.g === a && (b.jb = !1, b.Ng = !1, b.J(Xm), c && b.xn(), c = d.rf(-1, b, !1), 0 <= c && a.cd(Ff, "parts", d, b, null, c, null), a = b.Rx, null !== a && a(b, d, null))
    }
    D.prototype.removeParts = D.prototype.sB = function (a, b)
    {
        if (w.isArray(a))
            for (var c = w.bb(a), d = 0; d < c; d++)
            {
                var e = w.Ba(a, d);
                b && !e.canDelete() || this.remove(e)
            }
        else
            for (e = new I(R), e.Nc(a), c = e.i; c.next();) e = c.value, b && !e.canDelete() || this.remove(e)
    };
    D.prototype.copyParts = D.prototype.Op = function (a, b, c)
    {
        return this.pb.Op(a, b, c)
    };
    D.prototype.moveParts = D.prototype.moveParts = function (a, b, c)
    {
        w.G(b, y, D, "moveParts:offset");
        var d = this.Va;
        if (null !== d)
        {
            d = d.ce;
            null === d && (d = new nh, d.Sc(this));
            var e = new ma(R);
            if (null !== a) a = a.i;
            else
            {
                for (a = this.Ij; a.next();) Vh(d, e, a.value, c);
                for (a = this.hg; a.next();) Vh(d, e, a.value, c);
                a = this.links
            }
            for (; a.next();) Vh(d, e, a.value, c);
            d.moveParts(e, b, c)
        }
    };

    function Ym(a, b, c)
    {
        w.G(b, pg, D, "addLayer:layer");
        null !== b.g && b.g !== a && w.k("Cannot share a Layer with another Diagram: " + b + " of " + b.g);
        null === c ? null !== b.g && w.k("Cannot add an existing Layer to this Diagram again: " + b) : (w.G(c, pg, D, "addLayer:existingLayer"), c.g !== a && w.k("Existing Layer must be in this Diagram: " + c + " not in " + c.g), b === c && w.k("Cannot move a Layer before or after itself: " + b));
        if (b.g !== a)
        {
            b = b.name;
            a = a.dc;
            c = a.count;
            for (var d = 0; d < c; d++) a.ea(d).name === b && w.k("Cannot add Layer with the name '" +
                b + "'; a Layer with the same name is already present in this Diagram.")
        }
    }
    D.prototype.addLayer = D.prototype.Jt = function (a)
    {
        Ym(this, a, null);
        a.Sc(this);
        var b = this.dc,
            c = b.count - 1;
        if (!a.Pc)
            for (; 0 <= c && b.ea(c).Pc;) c--;
        b.Rd(c + 1, a);
        null !== this.qe && this.cd(Ef, "layers", this, null, a, null, c + 1);
        this.oa();
        this.Fc()
    };
    D.prototype.addLayerBefore = D.prototype.kH = function (a, b)
    {
        Ym(this, a, b);
        a.Sc(this);
        var c = this.dc,
            d = c.indexOf(a);
        0 <= d && (c.remove(a), null !== this.qe && this.cd(Ff, "layers", this, a, null, d, null));
        for (var e = c.count, f = 0; f < e; f++)
            if (c.ea(f) === b)
            {
                c.Rd(f, a);
                break
            }
        null !== this.qe && this.cd(Ef, "layers", this, null, a, null, f);
        this.oa();
        0 > d && this.Fc()
    };
    D.prototype.addLayerAfter = function (a, b)
    {
        Ym(this, a, b);
        a.Sc(this);
        var c = this.dc,
            d = c.indexOf(a);
        0 <= d && (c.remove(a), null !== this.qe && this.cd(Ff, "layers", this, a, null, d, null));
        for (var e = c.count, f = 0; f < e; f++)
            if (c.ea(f) === b)
            {
                c.Rd(f + 1, a);
                break
            }
        null !== this.qe && this.cd(Ef, "layers", this, null, a, null, f + 1);
        this.oa();
        0 > d && this.Fc()
    };
    D.prototype.removeLayer = function (a)
    {
        w.G(a, pg, D, "removeLayer:layer");
        a.g !== this && w.k("Cannot remove a Layer from another Diagram: " + a + " of " + a.g);
        if ("" !== a.name)
        {
            var b = this.dc,
                c = b.indexOf(a);
            if (b.remove(a))
            {
                for (b = a.Ab.copy().i; b.next();)
                {
                    var d = b.value,
                        e = d.ag;
                    d.ag = e !== a.name ? e : ""
                }
                null !== this.qe && this.cd(Ff, "layers", this, a, null, c, null);
                this.oa();
                this.Fc()
            }
        }
    };
    D.prototype.findLayer = D.prototype.Zt = function (a)
    {
        for (var b = this.Sx; b.next();)
        {
            var c = b.value;
            if (c.name === a) return c
        }
        return null
    };
    D.prototype.addModelChangedListener = D.prototype.mH = function (a)
    {
        w.j(a, "function", D, "addModelChangedListener:listener");
        null === this.hh && (this.hh = new H("function"));
        this.hh.add(a);
        this.$.kn(a)
    };
    D.prototype.removeModelChangedListener = function (a)
    {
        w.j(a, "function", D, "removeModelChangedListener:listener");
        null !== this.hh && (this.hh.remove(a), 0 === this.hh.count && (this.hh = null));
        this.$.Qu(a)
    };
    D.prototype.addChangedListener = D.prototype.kn = function (a)
    {
        w.j(a, "function", D, "addChangedListener:listener");
        null === this.Di && (this.Di = new H("function"));
        this.Di.add(a)
    };
    D.prototype.removeChangedListener = D.prototype.Qu = function (a)
    {
        w.j(a, "function", D, "removeChangedListener:listener");
        null !== this.Di && (this.Di.remove(a), 0 === this.Di.count && (this.Di = null))
    };
    D.prototype.kx = function (a)
    {
        this.fb || this.ja.rF(a);
        a.Dc !== Df && (this.ri = !0);
        if (null !== this.Di)
            for (var b = this.Di, c = b.length, d = 0; d < c; d++) b.ea(d)(a)
    };
    D.prototype.raiseChangedEvent = D.prototype.cd = function (a, b, c, d, e, f, h)
    {
        void 0 === f && (f = null);
        void 0 === h && (h = null);
        var k = new Bf;
        k.g = this;
        k.Dc = a;
        k.propertyName = b;
        k.object = c;
        k.oldValue = d;
        k.Hj = f;
        k.newValue = e;
        k.Gj = h;
        this.kx(k)
    };
    D.prototype.raiseChanged = D.prototype.h = function (a, b, c, d, e)
    {
        this.cd(Cf, a, this, b, c, d, e)
    };
    w.u(D,
        {
            Ka: "animationManager"
        }, function ()
        {
            return this.iC
        });
    w.u(D,
        {
            ja: "undoManager"
        }, function ()
        {
            return this.qe.ja
        });
    w.defineProperty(D,
        {
            fb: "skipsUndoManager"
        }, function ()
        {
            return this.ij
        }, function (a)
        {
            w.j(a, "boolean", D, "skipsUndoManager");
            this.ij = a;
            this.qe.ij = a
        });
    w.defineProperty(D,
        {
            xA: "delaysLayout"
        }, function ()
        {
            return this.fz
        }, function (a)
        {
            this.fz = a
        });
    D.prototype.pn = function (a, b)
    {
        if (null !== a && a.g === this)
        {
            var c = this.Qe;
            try
            {
                this.Qe = !0;
                var d = a.Dc,
                    e;
                if (d === Cf)
                {
                    var f = a.object,
                        h = a.propertyName,
                        k = a.ka(b);
                    w.Ma(f, h, k);
                    if (f instanceof G)
                    {
                        var l, m = f.V;
                        null !== m && m.fe()
                    }
                    this.ri = !0
                }
                else if (d === Ef)
                {
                    var n = a.object,
                        p = a.Gj,
                        f = a.newValue;
                    if (n instanceof C)
                        if ("number" === typeof p && f instanceof G)
                        {
                            l = f;
                            var q = n;
                            b ? q.rf(p) : q.Rd(p, l);
                            m = n.V;
                            null !== m && m.fe()
                        }
                        else
                        {
                            if ("number" === typeof p && f instanceof Vg)
                            {
                                var r = f,
                                    q = n;
                                b ? r.xe ? q.dG(p) : q.bG(p) : (e = r.xe ? q.ee(r.index) : q.de(r.index),
                                    e.Np(r))
                            }
                        }
                    else if (n instanceof pg)
                    {
                        var s = !0 === a.Hj;
                        if ("number" === typeof p && f instanceof R)
                        {
                            var m = f,
                                u = n;
                            b ? (m.jb = !1, m.Ng = !1, m.fe(), u.rf(s ? p : -1, m, s)) : u.$p(p, m, s)
                        }
                    }
                    else if (n instanceof D)
                    {
                        if ("number" === typeof p && f instanceof pg)
                        {
                            var t = f;
                            b ? this.dc.dd(p) : (d = t, d.Sc(this), this.dc.Rd(p, d))
                        }
                    }
                    else w.k("unknown ChangedEvent.Insert object: " + a.toString());
                    this.ri = !0
                }
                else d === Ff ? (n = a.object, p = a.Hj, f = a.oldValue, n instanceof C ? "number" === typeof p && f instanceof G ? (q = n, b ? q.Rd(p, f) : q.rf(p)) : "number" === typeof p && f instanceof Vg && (r = f, q = n, b ? (e = r.xe ? q.ee(r.index) : q.de(r.index), e.Np(r)) : r.xe ? q.dG(p) : q.bG(p)) : n instanceof pg ? (s = !0 === a.Gj, "number" === typeof p && f instanceof R && (m = f, u = n, b ? u.$p(p, m, s) : (m.jb = !1, m.Ng = !1, m.fe(), u.rf(s ? p : -1, m, s)))) : n instanceof D ? "number" === typeof p && f instanceof pg && (t = f, b ? (d = t, d.Sc(this), this.dc.Rd(p, d)) : this.dc.dd(p)) : w.k("unknown ChangedEvent.Remove object: " + a.toString()), this.ri = !0) : d !== Df && w.k("unknown ChangedEvent: " + a.toString())
            }
            finally
            {
                this.Qe = c
            }
        }
    };
    D.prototype.startTransaction = D.prototype.Kb = function (a)
    {
        return this.ja.Kb(a)
    };
    D.prototype.commitTransaction = D.prototype.Yc = function (a)
    {
        return this.ja.Yc(a)
    };
    D.prototype.rollbackTransaction = D.prototype.km = function ()
    {
        return this.ja.km()
    };
    D.prototype.commit = D.prototype.commit = function (a, b)
    {
        var c = b;
        void 0 === c && (c = "");
        var d = this.fb;
        null === c && (this.fb = !0, c = "");
        this.ja.Kb(c);
        var e = !1;
        try
        {
            a(this), e = !0
        }
        finally
        {
            e ? this.ja.Yc(c) : this.ja.km(), this.fb = d
        }
    };
    D.prototype.updateAllTargetBindings = D.prototype.IG = function (a)
    {
        void 0 === a && (a = "");
        for (var b = this.Ij; b.next();) b.value.Lb(a);
        for (b = this.hg; b.next();) b.value.Lb(a);
        for (b = this.links; b.next();) b.value.Lb(a)
    };
    D.prototype.updateAllRelationshipsFromData = D.prototype.$J = function ()
    {
        for (var a = this.$, b = new I, c = a.Og, d = 0; d < c.length; d++)
        {
            var e = c[d];
            b.add(e)
        }
        var f = [];
        this.hg.each(function (a)
        {
            null === a.data || b.contains(a.data) || f.push(a.data)
        });
        this.Ij.each(function (a)
        {
            null === a.data || b.contains(a.data) || f.push(a.data)
        });
        f.forEach(function (b)
        {
            yg(a, b, !1)
        });
        for (d = 0; d < c.length; d++)
        {
            var e = c[d],
                h = this.vh(e);
            null === h && xg(a, e, !1)
        }
        if (a instanceof Q)
        {
            for (var k = new I, c = a.zh, d = 0; d < c.length; d++) e = c[d], k.add(e);
            var l = [];
            this.links.each(function (a)
            {
                null ===
                a.data || k.contains(a.data) || l.push(a.data)
            });
            l.forEach(function (b)
            {
                $g(a, b, !1)
            });
            for (d = 0; d < c.length; d++) e = c[d], h = this.Xf(e), null === h && Zg(a, e, !1)
        }
        for (d = this.Ij; d.next();) h = d.value, h.updateRelationshipsFromData();
        for (d = this.hg; d.next();) d.value.updateRelationshipsFromData();
        for (d = this.links; d.next();) h = d.value, h.updateRelationshipsFromData()
    };

    function Zm(a, b, c)
    {
        if (a.Vc || a.Zd) a.qb = c, c = a.Ka, c.rc && jl(c, b, a.qb);
        else if (a.Vc = !0, null === a.yb) a.qb = c;
        else
        {
            var d = a.sb.copy(),
                e = a.Eb,
                f = a.Db;
            d.width = a.Eb / b;
            d.height = a.Db / b;
            var h = a.zi.x,
                k = a.zi.y,
                l = a.qA;
            isNaN(h) && (l.Aj() ? l.yj(Yb) ? h = 0 : l.yj(Zb) && (h = e - 1) : h = l.$c() ? l.x * (e - 1) : e / 2);
            isNaN(k) && (l.Aj() ? l.yj(Xb) ? k = 0 : l.yj($b) && (k = f - 1) : k = l.$c() ? l.y * (f - 1) : f / 2);
            null !== a.kG && (c = a.kG(a, c));
            c < a.Bh && (c = a.Bh);
            c > a.Ah && (c = a.Ah);
            e = w.xb(a.$a.x + h / b - h / c, a.$a.y + k / b - k / c);
            a.position = e;
            w.v(e);
            a.qb = c;
            a.Mu(d, a.sb, b, c, !1);
            a.Vc = !1;
            Ql(a, !1);
            c = a.Ka;
            c.rc && jl(c, b, a.qb);
            a.oa();
            bm(a)
        }
    }
    D.prototype.Mu = function (a, b, c, d, e)
    {
        a.L(b) || (void 0 === e && (e = !1), e || bm(this), Ol(this), d = this.Tb, null === d || !d.Ox || this.Rl !== oh || e || a.width === b.width && a.height === b.height || d.J(), d = this.Xa, !0 === this.dh && d instanceof hh && (this.Q.da = this.RB(this.Q.Ce), Ck(d, this)), this.Vc || this.wF(a, b), em(this), this.nh.scale = c, this.nh.position.x = a.x, this.nh.position.y = a.y, this.nh.bounds.set(a), this.nh.isScroll = e, this.Aa("ViewportBoundsChanged", this.nh, a), this.XA && this.links.each(function (a)
        {
            a.dm && a.U.Zf(b) && a.Wb()
        }))
    };

    function em(a, b)
    {
        void 0 === b && (b = null);
        var c = a.td;
        if (null !== c && c.visible)
        {
            for (var d = w.rm(), e = 1, f = 1, h = c.xa.n, k = h.length, l = 0; l < k; l++)
            {
                var m = h[l],
                    n = m.interval;
                2 > n || ($m(m.Gb) ? f = f * n / ze(f, n) : e = e * n / ze(e, n))
            }
            h = c.Hx;
            d.m(f * h.width, e * h.height);
            h = f = l = k = 0;
            if (null !== b) k = b.width, l = b.height, f = b.x, h = b.y;
            else
            {
                e = w.Kf();
                f = a.sb;
                e.m(f.x, f.y, f.width, f.height);
                for (h = a.xw.i; h.next();) f = h.value.sb, f.I() && ab(e, f.x, f.y, f.width, f.height);
                if (!e.I())
                {
                    w.Hb(e);
                    return
                }
                k = e.width;
                l = e.height;
                f = e.x;
                h = e.y;
                w.Hb(e)
            }
            c.width = k + 2 * d.width;
            c.height =
                l + 2 * d.height;
            e = w.K();
            Na(f, h, 0, 0, d.width, d.height, e);
            e.offset(-d.width, -d.height);
            w.Lk(d);
            c.V.location = e;
            w.v(e)
        }
    }
    D.prototype.clearSelection = D.prototype.nA = function ()
    {
        var a = 0 < this.selection.count;
        a && this.Aa("ChangingSelection");
        mh(this);
        a && this.Aa("ChangedSelection")
    };

    function mh(a)
    {
        a = a.selection;
        if (0 < a.count)
        {
            for (var b = a.xc(), c = b.length, d = 0; d < c; d++) b[d].jb = !1;
            a.Qa();
            a.clear();
            a.freeze()
        }
    }
    D.prototype.select = D.prototype.select = function (a)
    {
        null !== a && (w.G(a, R, D, "select:part"), a.layer.g === this && (!a.jb || 1 < this.selection.count) && (this.Aa("ChangingSelection"), mh(this), a.jb = !0, this.Aa("ChangedSelection")))
    };
    D.prototype.selectCollection = D.prototype.oG = function (a)
    {
        this.Aa("ChangingSelection");
        mh(this);
        if (w.isArray(a))
            for (var b = w.bb(a), c = 0; c < b; c++)
            {
                var d = w.Ba(a, c);
                d instanceof R || w.k("Diagram.selectCollection given something that is not a Part: " + d);
                d.jb = !0
            }
        else
            for (a = a.i; a.next();) d = a.value, d instanceof R || w.k("Diagram.selectCollection given something that is not a Part: " + d), d.jb = !0;
        this.Aa("ChangedSelection")
    };
    D.prototype.clearHighlighteds = D.prototype.tH = function ()
    {
        var a = this.cm;
        if (0 < a.count)
        {
            for (var b = a.xc(), c = b.length, d = 0; d < c; d++) b[d].Ng = !1;
            a.Qa();
            a.clear();
            a.freeze()
        }
    };
    D.prototype.highlight = function (a)
    {
        null !== a && a.layer.g === this && (w.G(a, R, D, "highlight:part"), !a.Ng || 1 < this.cm.count) && (this.tH(), a.Ng = !0)
    };
    D.prototype.highlightCollection = function (a)
    {
        for (var b = (new I(R)).Nc(a), c = this.cm.copy().my(b).i; c.next();) a = c.value, a.Ng = !1;
        for (b = b.i; b.next();) a = b.value, a instanceof R || w.k("Diagram.highlightCollection given something that is not a Part: " + a), a.Ng = !0
    };
    D.prototype.scroll = D.prototype.scroll = function (a, b, c)
    {
        void 0 === c && (c = 1);
        var d = "up" === b || "down" === b,
            e = 0;
        if ("pixel" === a) e = c;
        else if ("line" === a) e = c * (d ? this.Wu : this.Vu);
        else if ("page" === a) a = d ? this.sb.height : this.sb.width, a *= this.scale, 0 !== a && (e = Math.max(a - (d ? this.Wu : this.Vu), 0), e *= c);
        else
        {
            if ("document" === a)
            {
                e = this.be;
                d = this.sb;
                c = w.K();
                "up" === b ? this.position = c.m(d.x, e.y) : "left" === b ? this.position = c.m(e.x, d.y) : "down" === b ? this.position = c.m(d.x, e.bottom - d.height) : "right" === b && (this.position = c.m(e.right - d.width,
                    d.y));
                w.v(c);
                return
            }
            w.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: " + a)
        }
        e /= this.scale;
        c = this.position.copy();
        "up" === b ? c.y = this.position.y - e : "down" === b ? c.y = this.position.y + e : "left" === b ? c.x = this.position.x - e : "right" === b ? c.x = this.position.x + e : w.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: " + b);
        this.position = c
    };
    D.prototype.scrollToRect = D.prototype.lG = function (a)
    {
        var b = this.sb;
        b.Fk(a) || (a = a.Sl, a.x -= b.width / 2, a.y -= b.height / 2, this.position = a)
    };
    D.prototype.centerRect = D.prototype.GE = function (a)
    {
        var b = this.sb;
        a = a.Sl;
        a.x -= b.width / 2;
        a.y -= b.height / 2;
        this.position = a
    };
    D.prototype.transformDocToView = D.prototype.Cy = function (a)
    {
        var b = this.kd;
        b.reset();
        1 !== this.qb && b.scale(this.qb);
        var c = this.$a;
        (0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate(-c.x, -c.y);
        return a.copy().transform(this.kd)
    };
    D.prototype.transformViewToDoc = D.prototype.RB = function (a)
    {
        var b = this.kd;
        b.reset();
        1 !== this.qb && b.scale(this.qb);
        var c = this.$a;
        (0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate(-c.x, -c.y);
        return Pa(a.copy(), this.kd)
    };
    var oh;
    D.None = oh = w.p(D, "None", 0);
    var Ul;
    D.Uniform = Ul = w.p(D, "Uniform", 1);
    var Vl;
    D.UniformToFill = Vl = w.p(D, "UniformToFill", 2);
    var Wi;
    D.CycleAll = Wi = w.p(D, "CycleAll", 10);
    var $i;
    D.CycleNotDirected = $i = w.p(D, "CycleNotDirected", 11);
    var bj;
    D.CycleNotDirectedFast = bj = w.p(D, "CycleNotDirectedFast", 12);
    var cj;
    D.CycleNotUndirected = cj = w.p(D, "CycleNotUndirected", 13);
    var Xi;
    D.CycleDestinationTree = Xi = w.p(D, "CycleDestinationTree", 14);
    var Zi;
    D.CycleSourceTree = Zi = w.p(D, "CycleSourceTree", 15);
    var tl;
    D.DocumentScroll = tl = w.p(D, "DocumentScroll", 1);
    var Mm;
    D.InfiniteScroll = Mm = w.p(D, "InfiniteScroll", 2);
    var vl;
    D.TreeParentCollapsed = vl = w.p(D, "TreeParentCollapsed", 21);
    var an;
    D.AllParentsCollapsed = an = w.p(D, "AllParentsCollapsed", 22);
    var bn;
    D.AnyParentsCollapsed = bn = w.p(D, "AnyParentsCollapsed", 23);
    w.defineProperty(D,
        {
            aK: "validCycle"
        }, function ()
        {
            return this.Vw
        }, function (a)
        {
            var b = this.Vw;
            b !== a && (w.ob(a, D, D, "validCycle"), this.Vw = a, this.h("validCycle", b, a))
        });
    w.u(D,
        {
            Sx: "layers"
        }, function ()
        {
            return this.dc.i
        });
    w.defineProperty(D,
        {
            Df: "isModelReadOnly"
        }, function ()
        {
            var a = this.qe;
            return null === a ? !1 : a.ib
        }, function (a)
        {
            var b = this.qe;
            null !== b && (b.ib = a)
        });
    w.defineProperty(D,
        {
            ib: "isReadOnly"
        }, function ()
        {
            return this.Si
        }, function (a)
        {
            var b = this.Si;
            b !== a && (w.j(a, "boolean", D, "isReadOnly"), this.Si = a, this.h("isReadOnly", b, a))
        });
    w.defineProperty(D,
        {
            isEnabled: "isEnabled"
        }, function ()
        {
            return this.jf
        }, function (a)
        {
            var b = this.jf;
            b !== a && (w.j(a, "boolean", D, "isEnabled"), this.jf = a, this.h("isEnabled", b, a))
        });
    w.defineProperty(D,
        {
            hA: "allowClipboard"
        }, function ()
        {
            return this.jv
        }, function (a)
        {
            var b = this.jv;
            b !== a && (w.j(a, "boolean", D, "allowClipboard"), this.jv = a, this.h("allowClipboard", b, a))
        });
    w.defineProperty(D,
        {
            Ck: "allowCopy"
        }, function ()
        {
            return this.Wk
        }, function (a)
        {
            var b = this.Wk;
            b !== a && (w.j(a, "boolean", D, "allowCopy"), this.Wk = a, this.h("allowCopy", b, a))
        });
    w.defineProperty(D,
        {
            ln: "allowDelete"
        }, function ()
        {
            return this.Xk
        }, function (a)
        {
            var b = this.Xk;
            b !== a && (w.j(a, "boolean", D, "allowDelete"), this.Xk = a, this.h("allowDelete", b, a))
        });
    w.defineProperty(D,
        {
            Nt: "allowDragOut"
        }, function ()
        {
            return this.kv
        }, function (a)
        {
            var b = this.kv;
            b !== a && (w.j(a, "boolean", D, "allowDragOut"), this.kv = a, this.h("allowDragOut", b, a))
        });
    w.defineProperty(D,
        {
            yE: "allowDrop"
        }, function ()
        {
            return this.lv
        }, function (a)
        {
            var b = this.lv;
            b !== a && (w.j(a, "boolean", D, "allowDrop"), this.lv = a, this.h("allowDrop", b, a))
        });
    w.defineProperty(D,
        {
            hx: "allowTextEdit"
        }, function ()
        {
            return this.fl
        }, function (a)
        {
            var b = this.fl;
            b !== a && (w.j(a, "boolean", D, "allowTextEdit"), this.fl = a, this.h("allowTextEdit", b, a))
        });
    w.defineProperty(D,
        {
            bx: "allowGroup"
        }, function ()
        {
            return this.Yk
        }, function (a)
        {
            var b = this.Yk;
            b !== a && (w.j(a, "boolean", D, "allowGroup"), this.Yk = a, this.h("allowGroup", b, a))
        });
    w.defineProperty(D,
        {
            ix: "allowUngroup"
        }, function ()
        {
            return this.gl
        }, function (a)
        {
            var b = this.gl;
            b !== a && (w.j(a, "boolean", D, "allowUngroup"), this.gl = a, this.h("allowUngroup", b, a))
        });
    w.defineProperty(D,
        {
            Fp: "allowInsert"
        }, function ()
        {
            return this.nv
        }, function (a)
        {
            var b = this.nv;
            b !== a && (w.j(a, "boolean", D, "allowInsert"), this.nv = a, this.h("allowInsert", b, a))
        });
    w.defineProperty(D,
        {
            Ot: "allowLink"
        }, function ()
        {
            return this.Zk
        }, function (a)
        {
            var b = this.Zk;
            b !== a && (w.j(a, "boolean", D, "allowLink"), this.Zk = a, this.h("allowLink", b, a))
        });
    w.defineProperty(D,
        {
            mn: "allowRelink"
        }, function ()
        {
            return this.al
        }, function (a)
        {
            var b = this.al;
            b !== a && (w.j(a, "boolean", D, "allowRelink"), this.al = a, this.h("allowRelink", b, a))
        });
    w.defineProperty(D,
        {
            Pl: "allowMove"
        }, function ()
        {
            return this.$k
        }, function (a)
        {
            var b = this.$k;
            b !== a && (w.j(a, "boolean", D, "allowMove"), this.$k = a, this.h("allowMove", b, a))
        });
    w.defineProperty(D,
        {
            ex: "allowReshape"
        }, function ()
        {
            return this.bl
        }, function (a)
        {
            var b = this.bl;
            b !== a && (w.j(a, "boolean", D, "allowReshape"), this.bl = a, this.h("allowReshape", b, a))
        });
    w.defineProperty(D,
        {
            Pt: "allowResize"
        }, function ()
        {
            return this.cl
        }, function (a)
        {
            var b = this.cl;
            b !== a && (w.j(a, "boolean", D, "allowResize"), this.cl = a, this.h("allowResize", b, a))
        });
    w.defineProperty(D,
        {
            gx: "allowRotate"
        }, function ()
        {
            return this.dl
        }, function (a)
        {
            var b = this.dl;
            b !== a && (w.j(a, "boolean", D, "allowRotate"), this.dl = a, this.h("allowRotate", b, a))
        });
    w.defineProperty(D,
        {
            Af: "allowSelect"
        }, function ()
        {
            return this.el
        }, function (a)
        {
            var b = this.el;
            b !== a && (w.j(a, "boolean", D, "allowSelect"), this.el = a, this.h("allowSelect", b, a))
        });
    w.defineProperty(D,
        {
            zE: "allowUndo"
        }, function ()
        {
            return this.ov
        }, function (a)
        {
            var b = this.ov;
            b !== a && (w.j(a, "boolean", D, "allowUndo"), this.ov = a, this.h("allowUndo", b, a))
        });
    w.defineProperty(D,
        {
            jx: "allowZoom"
        }, function ()
        {
            return this.qv
        }, function (a)
        {
            var b = this.qv;
            b !== a && (w.j(a, "boolean", D, "allowZoom"), this.qv = a, this.h("allowZoom", b, a))
        });
    w.defineProperty(D,
        {
            MA: "hasVerticalScrollbar"
        }, function ()
        {
            return this.Tv
        }, function (a)
        {
            var b = this.Tv;
            b !== a && (w.j(a, "boolean", D, "hasVerticalScrollbar"), this.Tv = a, bm(this), this.oa(), this.h("hasVerticalScrollbar", b, a), Ql(this, !1))
        });
    w.defineProperty(D,
        {
            LA: "hasHorizontalScrollbar"
        }, function ()
        {
            return this.Sv
        }, function (a)
        {
            var b = this.Sv;
            b !== a && (w.j(a, "boolean", D, "hasHorizontalScrollbar"), this.Sv = a, bm(this), this.oa(), this.h("hasHorizontalScrollbar", b, a), Ql(this, !1))
        });
    w.defineProperty(D,
        {
            re: "allowHorizontalScroll"
        }, function ()
        {
            return this.mv
        }, function (a)
        {
            var b = this.mv;
            b !== a && (w.j(a, "boolean", D, "allowHorizontalScroll"), this.mv = a, this.h("allowHorizontalScroll", b, a), Ql(this, !1))
        });
    w.defineProperty(D,
        {
            se: "allowVerticalScroll"
        }, function ()
        {
            return this.pv
        }, function (a)
        {
            var b = this.pv;
            b !== a && (w.j(a, "boolean", D, "allowVerticalScroll"), this.pv = a, this.h("allowVerticalScroll", b, a), Ql(this, !1))
        });
    w.defineProperty(D,
        {
            Vu: "scrollHorizontalLineChange"
        }, function ()
        {
            return this.Ew
        }, function (a)
        {
            var b = this.Ew;
            b !== a && (w.j(a, "number", D, "scrollHorizontalLineChange"), 0 > a && w.Fa(a, ">= 0", D, "scrollHorizontalLineChange"), this.Ew = a, this.h("scrollHorizontalLineChange", b, a))
        });
    w.defineProperty(D,
        {
            Wu: "scrollVerticalLineChange"
        }, function ()
        {
            return this.Iw
        }, function (a)
        {
            var b = this.Iw;
            b !== a && (w.j(a, "number", D, "scrollVerticalLineChange"), 0 > a && w.Fa(a, ">= 0", D, "scrollVerticalLineChange"), this.Iw = a, this.h("scrollVerticalLineChange", b, a))
        });
    w.defineProperty(D,
        {
            Q: "lastInput"
        }, function ()
        {
            return this.Rb
        }, function (a)
        {
            this.Rb = a
        });
    w.defineProperty(D,
        {
            Ec: "firstInput"
        }, function ()
        {
            return this.Pi
        }, function (a)
        {
            this.Pi = a
        });
    w.defineProperty(D,
        {
            ic: "currentCursor"
        }, function ()
        {
            return this.Av
        }, function (a)
        {
            "" === a && (a = this.rr);
            if (this.Av !== a)
            {
                w.j(a, "string", D, "currentCursor");
                var b = this.yb,
                    c = this.Ob;
                if (null !== b)
                {
                    this.Av = a;
                    var d = b.style.cursor;
                    b.style.cursor = a;
                    c.style.cursor = a;
                    b.style.cursor === d && (b.style.cursor = "-webkit-" + a, c.style.cursor = "-webkit-" + a, b.style.cursor === d && (b.style.cursor = "-moz-" + a, c.style.cursor = "-moz-" + a, b.style.cursor === d && (b.style.cursor = a, c.style.cursor = a)))
                }
            }
        });
    w.defineProperty(D,
        {
            RK: "defaultCursor"
        }, function ()
        {
            return this.rr
        }, function (a)
        {
            "" === a && (a = "auto");
            var b = this.rr;
            b !== a && (w.j(a, "string", D, "defaultCursor"), this.rr = a, this.h("defaultCursor", b, a))
        });
    w.defineProperty(D,
        {
            click: "click"
        }, function ()
        {
            return this.Ei
        }, function (a)
        {
            var b = this.Ei;
            b !== a && (null !== a && w.j(a, "function", D, "click"), this.Ei = a, this.h("click", b, a))
        });
    w.defineProperty(D,
        {
            Vt: "doubleClick"
        }, function ()
        {
            return this.Mi
        }, function (a)
        {
            var b = this.Mi;
            b !== a && (null !== a && w.j(a, "function", D, "doubleClick"), this.Mi = a, this.h("doubleClick", b, a))
        });
    w.defineProperty(D,
        {
            rA: "contextClick"
        }, function ()
        {
            return this.Gi
        }, function (a)
        {
            var b = this.Gi;
            b !== a && (null !== a && w.j(a, "function", D, "contextClick"), this.Gi = a, this.h("contextClick", b, a))
        });
    w.defineProperty(D,
        {
            hB: "mouseOver"
        }, function ()
        {
            return this.aj
        }, function (a)
        {
            var b = this.aj;
            b !== a && (null !== a && w.j(a, "function", D, "mouseOver"), this.aj = a, this.h("mouseOver", b, a))
        });
    w.defineProperty(D,
        {
            gB: "mouseHover"
        }, function ()
        {
            return this.$i
        }, function (a)
        {
            var b = this.$i;
            b !== a && (null !== a && w.j(a, "function", D, "mouseHover"), this.$i = a, this.h("mouseHover", b, a))
        });
    w.defineProperty(D,
        {
            fB: "mouseHold"
        }, function ()
        {
            return this.Zi
        }, function (a)
        {
            var b = this.Zi;
            b !== a && (null !== a && w.j(a, "function", D, "mouseHold"), this.Zi = a, this.h("mouseHold", b, a))
        });
    w.defineProperty(D,
        {
            cJ: "mouseDragOver"
        }, function ()
        {
            return this.rw
        }, function (a)
        {
            var b = this.rw;
            b !== a && (null !== a && w.j(a, "function", D, "mouseDragOver"), this.rw = a, this.h("mouseDragOver", b, a))
        });
    w.defineProperty(D,
        {
            eB: "mouseDrop"
        }, function ()
        {
            return this.Yi
        }, function (a)
        {
            var b = this.Yi;
            b !== a && (null !== a && w.j(a, "function", D, "mouseDrop"), this.Yi = a, this.h("mouseDrop", b, a))
        });
    w.defineProperty(D,
        {
            NB: "toolTip"
        }, function ()
        {
            return this.jj
        }, function (a)
        {
            var b = this.jj;
            b !== a && (this.jj = a, this.h("toolTip", b, a))
        });
    w.defineProperty(D,
        {
            contextMenu: "contextMenu"
        }, function ()
        {
            return this.Hi
        }, function (a)
        {
            var b = this.Hi;
            b !== a && (this.Hi = a, this.h("contextMenu", b, a))
        });
    w.defineProperty(D,
        {
            pb: "commandHandler"
        }, function ()
        {
            return this.Zy
        }, function (a)
        {
            var b = this.Zy;
            b !== a && (w.G(a, rg, D, "commandHandler"), null !== a.g && w.k("Cannot share CommandHandlers between Diagrams: " + a.toString()), null !== b && b.Sc(null), this.Zy = a, a.Sc(this))
        });
    w.defineProperty(D,
        {
            Va: "toolManager"
        }, function ()
        {
            return this.$z
        }, function (a)
        {
            var b = this.$z;
            b !== a && (w.G(a, hh, D, "toolManager"), null !== a.g && w.k("Cannot share ToolManagers between Diagrams: " + a.toString()), null !== b && b.Sc(null), this.$z = a, a.Sc(this))
        });
    w.defineProperty(D,
        {
            Tt: "defaultTool"
        }, function ()
        {
            return this.ez
        }, function (a)
        {
            var b = this.ez;
            b !== a && (w.G(a, qg, D, "defaultTool"), this.ez = a, this.Xa === b && (this.Xa = a))
        });
    w.defineProperty(D,
        {
            Xa: "currentTool"
        }, function ()
        {
            return this.bz
        }, function (a)
        {
            var b = this.bz;
            null !== b && (b.sa && b.doDeactivate(), b.cancelWaitAfter(), b.doStop());
            null === a && (a = this.Tt);
            null !== a && (w.G(a, qg, D, "currentTool"), this.bz = a, a.Sc(this), a.doStart())
        });
    w.u(D,
        {
            selection: "selection"
        }, function ()
        {
            return this.Lw
        });
    w.defineProperty(D,
        {
            UI: "maxSelectionCount"
        }, function ()
        {
            return this.nw
        }, function (a)
        {
            var b = this.nw;
            if (b !== a)
                if (w.j(a, "number", D, "maxSelectionCount"), 0 <= a && !isNaN(a))
                {
                    if (this.nw = a, this.h("maxSelectionCount", b, a), !this.ja.lb && (a = this.selection.count - a, 0 < a))
                    {
                        this.Aa("ChangingSelection");
                        for (var b = this.selection.xc(), c = 0; c < a; c++) b[c].jb = !1;
                        this.Aa("ChangedSelection")
                    }
                }
                else w.Fa(a, ">= 0", D, "maxSelectionCount")
        });
    w.defineProperty(D,
        {
            gJ: "nodeSelectionAdornmentTemplate"
        }, function ()
        {
            return this.sw
        }, function (a)
        {
            var b = this.sw;
            b !== a && (w.G(a, jh, D, "nodeSelectionAdornmentTemplate"), this.sw = a, this.h("nodeSelectionAdornmentTemplate", b, a))
        });
    w.defineProperty(D,
        {
            kI: "groupSelectionAdornmentTemplate"
        }, function ()
        {
            return this.Qv
        }, function (a)
        {
            var b = this.Qv;
            b !== a && (w.G(a, jh, D, "groupSelectionAdornmentTemplate"), this.Qv = a, this.h("groupSelectionAdornmentTemplate", b, a))
        });
    w.defineProperty(D,
        {
            NI: "linkSelectionAdornmentTemplate"
        }, function ()
        {
            return this.iw
        }, function (a)
        {
            var b = this.iw;
            b !== a && (w.G(a, jh, D, "linkSelectionAdornmentTemplate"), this.iw = a, this.h("linkSelectionAdornmentTemplate", b, a))
        });
    w.u(D,
        {
            cm: "highlighteds"
        }, function ()
        {
            return this.Uv
        });
    w.defineProperty(D,
        {
            ri: "isModified"
        }, function ()
        {
            var a = this.ja;
            return a.isEnabled ? null !== a.sj ? !0 : this.$v && this.ah !== a.xj : this.$v
        }, function (a)
        {
            if (this.$v !== a)
            {
                w.j(a, "boolean", D, "isModified");
                this.$v = a;
                var b = this.ja;
                !a && b.isEnabled && (this.ah = b.xj);
                a || cn(this)
            }
        });

    function cn(a)
    {
        var b = a.ri;
        a.oE !== b && (a.oE = b, a.Aa("Modified"))
    }
    w.defineProperty(D,
        {
            $: "model"
        }, function ()
        {
            return this.qe
        }, function (a)
        {
            var b = this.qe;
            if (b !== a)
            {
                w.G(a, F, D, "model");
                this.Xa.doCancel();
                null !== b && b.ja !== a.ja && b.ja.DF && w.k("Do not replace a Diagram.model while a transaction is in progress.");
                Fl(this, !0);
                this.bh = !1;
                this.Go = !0;
                this.ah = -2;
                this.Tf = !1;
                var c = this.Zd;
                this.Zd = !0;
                this.Ka.Wn("Model");
                null !== b && (null !== this.hh && this.hh.each(function (a)
                {
                    b.Qu(a)
                }), b.Qu(this.xD));
                this.qe = a;
                a.kn(this.wD);
                dn(this, a.Og);
                a instanceof Q && en(this, a.zh);
                a.Qu(this.wD);
                a.kn(this.xD);
                null !== this.hh && this.hh.each(function (b)
                {
                    a.kn(b)
                });
                this.Zd = c;
                this.Vc || this.oa();
                null !== b && (a.ja.isEnabled = b.ja.isEnabled)
            }
        });
    w.defineProperty(D,
        {
            Ua: null
        }, function ()
        {
            return this.pD
        }, function (a)
        {
            this.pD = a
        });
    w.u(D,
        {
            Wx: null
        }, function ()
        {
            return this.UG
        });

    function xl(a, b)
    {
        if (b.$ === a.$)
        {
            var c = b.Dc,
                d = b.propertyName;
            if (c === Df && "S" === d[0])
                if ("StartingFirstTransaction" === d) c = a.Va, c.gf.each(function (b)
                {
                    b.Sc(a)
                }), c.dg.each(function (b)
                {
                    b.Sc(a)
                }), c.eg.each(function (b)
                {
                    b.Sc(a)
                }), a.Zd || a.bh || (a.wr = !0, a.Go && (a.Tf = !0));
                else if ("StartingUndo" === d || "StartingRedo" === d)
                {
                    var e = a.Ka;
                    e.df && !a.fb && e.Hh();
                    a.Aa("ChangingSelection")
                }
                else "StartedTransaction" === d && (e = a.Ka, e.df && !a.fb && e.Hh());
            else if (a.Ua)
            {
                a.Ua = !1;
                try
                {
                    var f = b.tf;
                    if ("" !== f)
                        if (c === Cf)
                        {
                            if ("linkFromKey" === f)
                            {
                                var h =
                                        b.object,
                                    k = a.Xf(h);
                                if (null !== k)
                                {
                                    var l = b.newValue,
                                        m = a.Ne(l);
                                    k.Y = m
                                }
                            }
                            else if ("linkToKey" === f) h = b.object, k = a.Xf(h), null !== k && (l = b.newValue, m = a.Ne(l), k.Z = m);
                            else if ("linkFromPortId" === f)
                            {
                                if (h = b.object, k = a.Xf(h), null !== k)
                                {
                                    var n = b.newValue;
                                    "string" === typeof n && (k.Mg = n)
                                }
                            }
                            else if ("linkToPortId" === f) h = b.object, k = a.Xf(h), null !== k && (n = b.newValue, "string" === typeof n && (k.Ih = n));
                            else if ("nodeGroupKey" === f)
                            {
                                var h = b.object,
                                    p = a.vh(h);
                                if (null !== p)
                                {
                                    var q = b.newValue;
                                    if (void 0 !== q)
                                    {
                                        var r = a.Ne(q);
                                        p.Da = r instanceof V ? r :
                                            null
                                    }
                                    else p.Da = null
                                }
                            }
                            else if ("linkLabelKeys" === f)
                            {
                                if (h = b.object, k = a.Xf(h), null !== k)
                                {
                                    var s = b.oldValue,
                                        u = b.newValue;
                                    if (w.isArray(s))
                                        for (var t = w.bb(s), x = 0; x < t; x++)
                                        {
                                            var v = w.Ba(s, x),
                                                m = a.Ne(v);
                                            null !== m && (m.Xb = null)
                                        }
                                    if (w.isArray(u))
                                        for (t = w.bb(u), x = 0; x < t; x++) v = w.Ba(u, x), m = a.Ne(v), null !== m && (m.Xb = k)
                                }
                            }
                            else if ("nodeParentKey" === f)
                            {
                                var z = b.object,
                                    A = a.Ne(b.newValue),
                                    L = a.Dx(z);
                                if (null !== L)
                                {
                                    var E = L.zn();
                                    null !== E ? null === A ? a.remove(E) : a.Ud ? E.Y = A : E.Z = A : fn(a, A, L)
                                }
                            }
                            else if ("parentLinkCategory" === f)
                            {
                                var z = b.object,
                                    L =
                                        a.Dx(z),
                                    P = b.newValue;
                                null !== L && "string" === typeof P && (E = L.zn(), null !== E && (E.zd = P))
                            }
                            else if ("nodeCategory" === f)
                            {
                                var h = b.object,
                                    $ = a.vh(h),
                                    P = b.newValue;
                                null !== $ && "string" === typeof P && ($.zd = P)
                            }
                            else if ("linkCategory" === f)
                            {
                                var h = b.object,
                                    S = a.Xf(h),
                                    P = b.newValue;
                                null !== S && "string" === typeof P && (S.zd = P)
                            }
                            else if ("nodeDataArray" === f)
                            {
                                var ba = b.oldValue;
                                gn(a, ba);
                                var ha = b.newValue;
                                dn(a, ha)
                            }
                            else "linkDataArray" === f && (ba = b.oldValue, gn(a, ba), ha = b.newValue, en(a, ha));
                            a.ri = !0
                        }
                        else c === Ef ? (ha = b.newValue, "nodeDataArray" ===
                        f && w.Pa(ha) ? hn(a, ha) : "linkDataArray" === f && w.Pa(ha) ? jn(a, ha) : "linkLabelKeys" === f && wg(ha) && (k = a.Xf(b.object), m = a.Ne(ha), null !== k && null !== m && (m.Xb = k)), a.ri = !0) : c === Ff ? (ba = b.oldValue, "nodeDataArray" === f && w.Pa(ba) ? kn(a, ba) : "linkDataArray" === f && w.Pa(ba) ? kn(a, ba) : "linkLabelKeys" === f && wg(ba) && (m = a.Ne(ba), null !== m && (m.Xb = null)), a.ri = !0) : c === Df && ("SourceChanged" === f ? null !== b.object ? wl(a, b.object, b.propertyName) : (a.$J(), a.IG()) : "ModelDisplaced" === f && a.jm());
                    else if (c === Cf)
                    {
                        var ya = b.propertyName,
                            h = b.object;
                        if (h ===
                            a.$)
                        {
                            if ("nodeKeyProperty" === ya || "nodeCategoryProperty" === ya || "linkFromKeyProperty" === ya || "linkToKeyProperty" === ya || "linkFromPortIdProperty" === ya || "linkToPortIdProperty" === ya || "linkLabelKeysProperty" === ya || "nodeIsGroupProperty" === ya || "nodeGroupKeyProperty" === ya || "nodeParentKeyProperty" === ya || "linkCategoryProperty" === ya) a.ja.lb || a.jm()
                        }
                        else wl(a, h, ya);
                        a.ri = !0
                    }
                    else if (c === Ef || c === Ff) ln(a, b), a.ri = !0;
                    else if (c === Df)
                    {
                        if ("FinishedUndo" === d || "FinishedRedo" === d) a.Aa("ChangedSelection"), Ii(a);
                        e = a.Ka;
                        "RolledBackTransaction" ===
                        d && e.Hh();
                        a.wr = !0;
                        a.cg();
                        0 === a.ja.wi && Gk(e);
                        "CommittedTransaction" === d && a.ja.Dz && (a.ah = Math.min(a.ah, a.ja.xj - 1));
                        var Ga = b.IF;
                        Ga && (cn(a), a.Wx.clear());
                        !a.Jz && Ga && (a.Jz = !0, w.setTimeout(function ()
                        {
                            a.Xa.standardMouseOver();
                            a.Jz = !1
                        }, 10))
                    }
                }
                finally
                {
                    a.Ua = !0
                }
            }
        }
    }

    function wl(a, b, c)
    {
        if ("string" === typeof c)
        {
            var d = a.vh(b);
            if (null !== d) d.Lb(c), a.$ instanceof Zf && (d = a.Xf(b), null !== d && d.Lb(c));
            else
            {
                for (var d = null, e = a.Km.i; e.next();)
                {
                    for (var f = e.value, h = 0; h < f.length; h++)
                    {
                        var k = f[h].WH(b);
                        null !== k && (null === d && (d = w.gb()), d.push(k))
                    }
                    if (null !== d) break
                }
                if (null !== d)
                {
                    for (e = 0; e < d.length; e++) d[e].Lb(c);
                    w.ta(d)
                }
            }
            b === a.$.Sk && a.IG(c)
        }
    }
    w.defineProperty(D,
        {
            Qe: "skipsModelSourceBindings"
        }, function ()
        {
            return this.RD
        }, function (a)
        {
            this.RD = a
        });
    w.defineProperty(D,
        {
            av: null
        }, function ()
        {
            return this.Vz
        }, function (a)
        {
            this.Vz = a
        });

    function ln(a, b)
    {
        var c = b.Dc === Ef,
            d = c ? b.Gj : b.Hj,
            e = c ? b.newValue : b.oldValue,
            f = a.Km.ka(b.object);
        if (Array.isArray(f))
            for (var h = 0; h < f.length; h++)
            {
                var k = f[h];
                if (c) mn(k, e, d);
                else
                {
                    var l = d;
                    if (!(0 > l))
                    {
                        var m = l;
                        nn(k) && m++;
                        k.rf(m, !0);
                        on(k, m, l)
                    }
                }
            }
    }

    function Rm(a, b)
    {
        var c = b.ik;
        if (w.isArray(c))
        {
            var d = a.Km.ka(c);
            if (null === d) d = [], d.push(b), a.Km.add(c, d);
            else
            {
                for (c = 0; c < d.length; c++)
                    if (d[c] === b) return;
                d.push(b)
            }
        }
    }

    function Vm(a, b)
    {
        var c = b.ik;
        if (w.isArray(c))
        {
            var d = a.Km.ka(c);
            if (null !== d)
                for (var e = 0; e < d.length; e++)
                    if (d[e] === b)
                    {
                        d.splice(e, 1);
                        0 === d.length && a.Km.remove(c);
                        break
                    }
        }
    }

    function Qm(a, b)
    {
        for (var c = b.xa.n, d = c.length, e = 0; e < d; e++)
        {
            var f = c[e];
            f instanceof yl && pn(a, f)
        }
    }

    function pn(a, b)
    {
        var c = b.element;
        if (null !== c && c instanceof HTMLImageElement)
        {
            var d = b.Ue;
            null !== d && (d.Io instanceof Event && null !== b.Ve && b.Ve(b, d.Io), !0 === d.Vr && (null !== b.ki && b.ki(b, d.Qz), null !== b.g && b.g.Mz.add(b)));
            c = c.src;
            d = a.fp.ka(c);
            if (null === d) d = [], d.push(b), a.fp.add(c, d);
            else
            {
                for (c = 0; c < d.length; c++)
                    if (d[c] === b) return;
                d.push(b)
            }
        }
    }

    function Um(a, b)
    {
        for (var c = b.xa.n, d = c.length, e = 0; e < d; e++)
        {
            var f = c[e];
            f instanceof yl && qn(a, f)
        }
    }

    function qn(a, b)
    {
        var c = b.element;
        if (null !== c && c instanceof HTMLImageElement)
        {
            var c = c.src,
                d = a.fp.ka(c);
            if (null !== d)
                for (var e = 0; e < d.length; e++)
                    if (d[e] === b)
                    {
                        d.splice(e, 1);
                        0 === d.length && (a.fp.remove(c), rn(c));
                        break
                    }
        }
    }
    D.prototype.rebuildParts = D.prototype.jm = function ()
    {
        for (var a = this.kB.i; a.next();)
        {
            var b = a.value,
                c = a.key;
            (!b.he() || b instanceof V) && w.k('Invalid node template in Diagram.nodeTemplateMap: template for "' + c + '" must be a Node or a simple Part, not a Group or Link: ' + b)
        }
        for (a = this.KA.i; a.next();) b = a.value, c = a.key, b instanceof V || w.k('Invalid group template in Diagram.groupTemplateMap: template for "' + c + '" must be a Group, not a normal Node or Link: ' + b);
        for (a = this.ZA.i; a.next();) b = a.value, c = a.key, b instanceof
        W || w.k('Invalid link template in Diagram.linkTemplateMap: template for "' + c + '" must be a Link, not a normal Node or simple Part: ' + b);
        a = w.gb();
        for (b = this.selection.i; b.next();)(c = b.value.data) && a.push(c);
        for (var b = w.gb(), d = this.cm.i; d.next();)(c = d.value.data) && b.push(c);
        c = w.gb();
        for (d = this.hg.i; d.next();)
        {
            var e = d.value;
            null !== e.data && (c.push(e.data), c.push(e.location))
        }
        for (d = this.links.i; d.next();) e = d.value, null !== e.data && (c.push(e.data), c.push(e.location));
        for (d = this.Ij.i; d.next();) e = d.value, null !==
        e.data && (c.push(e.data), c.push(e.location));
        d = this.$;
        d instanceof Q && gn(this, d.zh);
        gn(this, d.Og);
        dn(this, d.Og);
        d instanceof Q && en(this, d.zh);
        for (d = 0; d < a.length; d++) e = this.vh(a[d]), null !== e && (e.jb = !0);
        for (d = 0; d < b.length; d++) e = this.vh(b[d]), null !== e && (e.Ng = !0);
        for (d = 0; d < c.length; d += 2) e = this.vh(c[d]), null !== e && (e.location = c[d + 1]);
        w.ta(a);
        w.ta(b);
        w.ta(c)
    };

    function dn(a, b)
    {
        if (null !== b)
        {
            for (var c = a.$, d = c instanceof Q, e = w.bb(b), f = 0; f < e; f++)
            {
                var h = w.Ba(b, f);
                c.Le(h) ? hn(a, h, !1) : d && jn(a, h)
            }
            if (d || c instanceof Zf)
            {
                for (f = 0; f < e; f++) h = w.Ba(b, f), c.Le(h) && sn(a, h);
                if (d)
                    for (c = a.links; c.next();) tn(c.value)
            }
            un(a, !1)
        }
    }

    function hn(a, b, c)
    {
        if (void 0 !== b && null !== b && !a.ja.lb && !a.Ii.contains(b))
        {
            void 0 === c && (c = !0);
            var d = a.GA(b),
                e = vn(a, b, d);
            if (null !== e && (lh(e), e = e.copy(), null !== e))
            {
                var f = a.Qe;
                a.Qe = !0;
                e.Ci = d;
                e.Yd = b;
                a.add(e);
                e.Yd = null;
                e.data = b;
                c && sn(a, b);
                a.Qe = f
            }
        }
    }
    D.prototype.GA = function (a)
    {
        return this.$.GA(a)
    };
    var wn = !1,
        xn = !1;

    function vn(a, b, c)
    {
        var d = !1,
            e = a.$;
        e instanceof Q && (d = e.UA(b));
        d ? (b = a.KA.ka(c), null === b && (b = a.KA.ka(""), null === b && (xn || (xn = !0, w.trace('No Group template found for category "' + c + '"'), w.trace("  Using default group template")), b = a.IC))) : (b = a.kB.ka(c), null === b && (b = a.kB.ka(""), null === b && (wn || (wn = !0, w.trace('No Node template found for category "' + c + '"'), w.trace("  Using default node template")), b = a.KC)));
        return b
    }

    function sn(a, b)
    {
        var c = a.$;
        if (c instanceof Q || c instanceof Zf)
        {
            var d = c.rb(b);
            if (void 0 !== d)
            {
                var e = zg(c, d),
                    f = a.vh(b);
                if (null !== e && null !== f)
                {
                    for (e = e.i; e.next();)
                    {
                        var h = e.value;
                        if (c instanceof Q)
                        {
                            var k = c;
                            if (k.Le(h))
                            {
                                if (f instanceof V && k.Bn(h) === d)
                                {
                                    var l = f,
                                        h = a.vh(h);
                                    null !== h && (h.Da = l)
                                }
                            }
                            else
                            {
                                var m = a.Xf(h);
                                if (null !== m && f instanceof T && (l = f, k.am(h) === d && (m.Y = l), k.bm(h) === d && (m.Z = l), h = k.Nk(h), w.isArray(h)))
                                    for (k = 0; k < w.bb(h); k++)
                                        if (w.Ba(h, k) === d)
                                        {
                                            l.Xb = m;
                                            break
                                        }
                            }
                        }
                        else c instanceof Zf && (m = c, m.Le(h) && f instanceof T && (l = f, m.Dn(h) === d && (h = a.Dx(h), fn(a, l, h))))
                    }
                    Bg(c, d)
                }
                c instanceof Q ? (c = c.Bn(b), void 0 !== c && (c = a.Ne(c), c instanceof V && (f.Da = c))) : c instanceof Zf && (c = c.Dn(b), void 0 !== c && f instanceof T && (l = f, f = a.Ne(c), fn(a, f, l)))
            }
        }
    }

    function fn(a, b, c)
    {
        if (null !== b && null !== c)
        {
            var d = a.Va.NF,
                e = b,
                f = c;
            if (a.Ud)
                for (b = f.je; b.next();)
                {
                    if (b.value.Z === f) return
                }
            else
                for (e = c, f = b, b = e.je; b.next();)
                    if (b.value.Y === e) return;
            if (null === d || !Yi(d, e, f, null, !0))
                if (d = a.ju(c.data), b = ij(a, d), null !== b && (lh(b), b = b.copy(), null !== b))
                {
                    var h = a.Qe;
                    a.Qe = !0;
                    b.Ci = d;
                    b.Yd = c.data;
                    b.Y = e;
                    b.Z = f;
                    a.add(b);
                    b.Yd = null;
                    b.data = c.data;
                    a.Qe = h
                }
        }
    }

    function en(a, b)
    {
        if (null !== b)
        {
            for (var c = w.bb(b), d = 0; d < c; d++)
            {
                var e = w.Ba(b, d);
                jn(a, e)
            }
            un(a, !1)
        }
    }

    function jn(a, b)
    {
        if (void 0 !== b && null !== b && !a.ja.lb && !a.Tj.contains(b))
        {
            var c = a.ju(b),
                d = ij(a, c);
            if (null !== d && (lh(d), d = d.copy(), null !== d))
            {
                var e = a.Qe;
                a.Qe = !0;
                d.Ci = c;
                d.Yd = b;
                var c = a.$,
                    f = c.cI(b);
                "" !== f && (d.Mg = f);
                f = c.am(b);
                void 0 !== f && (f = a.Ne(f), f instanceof T && (d.Y = f));
                f = c.gI(b);
                "" !== f && (d.Ih = f);
                f = c.bm(b);
                void 0 !== f && (f = a.Ne(f), f instanceof T && (d.Z = f));
                c = c.Nk(b);
                if (w.isArray(c))
                    for (var f = w.bb(c), h = 0; h < f; h++)
                    {
                        var k = w.Ba(c, h),
                            k = a.Ne(k);
                        null !== k && (k.Xb = d)
                    }
                a.add(d);
                d.Yd = null;
                d.data = b;
                a.Qe = e
            }
        }
    }
    D.prototype.ju = function (a)
    {
        var b = this.$,
            c = "";
        b instanceof Q ? c = b.ju(a) : b instanceof Zf && (c = b.eI(a));
        return c
    };
    var yn = !1;

    function ij(a, b)
    {
        var c = a.ZA.ka(b);
        null === c && (c = a.ZA.ka(""), null === c && (yn || (yn = !0, w.trace('No Link template found for category "' + b + '"'), w.trace("  Using default link template")), c = a.JC));
        return c
    }

    function gn(a, b)
    {
        for (var c = w.bb(b), d = 0; d < c; d++)
        {
            var e = w.Ba(b, d);
            kn(a, e)
        }
    }

    function kn(a, b)
    {
        if (void 0 !== b && null !== b)
        {
            var c = a.vh(b);
            if (null !== c)
            {
                Wm(a, c, !1);
                var d = a.$;
                if (d instanceof Q && c instanceof T)
                {
                    var e = d.rb(c.data);
                    if (void 0 !== e)
                    {
                        for (var f = c.je; f.next();) Ag(d, e, f.value.data);
                        c.Cf && (f = c.Xb, null !== f && Ag(d, e, f.data));
                        if (c instanceof V)
                            for (c = c.vc; c.next();) f = c.value.data, d.Le(f) && Ag(d, e, f)
                    }
                }
                else if (d instanceof Zf && c instanceof T)
                {
                    f = a.Xf(c.data);
                    if (null !== f)
                    {
                        f.jb = !1;
                        f.Ng = !1;
                        var h = f.layer;
                        if (null !== h)
                        {
                            var k = h.rf(-1, f, !1);
                            0 <= k && a.cd(Ff, "parts", h, f, null, k, null);
                            k = f.Rx;
                            null !==
                            k && k(f, h, null)
                        }
                    }
                    f = a.Ud;
                    for (c = c.je; c.next();) h = c.value, h = (f ? h.Z : h.Y).data, d.Le(h) && Ag(d, e, h)
                }
            }
        }
    }
    D.prototype.findPartForKey = D.prototype.XH = function (a)
    {
        if (null === a || void 0 === a) return null;
        var b = this.$.we(a);
        return null !== b ? this.Ii.ka(b) : this.$ instanceof Q && (b = this.$.Vp(a), null !== b) ? this.Tj.ka(b) : null
    };
    D.prototype.findNodeForKey = D.prototype.Ne = function (a)
    {
        if (null === a || void 0 === a) return null;
        a = this.$.we(a);
        if (null === a) return null;
        a = this.Ii.ka(a);
        return a instanceof T ? a : null
    };
    D.prototype.findPartForData = D.prototype.vh = function (a)
    {
        if (null === a) return null;
        var b = this.Ii.ka(a);
        return null !== b ? b : b = this.Tj.ka(a)
    };
    D.prototype.findNodeForData = D.prototype.Dx = function (a)
    {
        if (null === a) return null;
        a = this.Ii.ka(a);
        return a instanceof T ? a : null
    };
    D.prototype.findLinkForData = D.prototype.Xf = function (a)
    {
        return null === a ? null : this.Tj.ka(a)
    };
    D.prototype.findNodesByExample = function (a)
    {
        for (var b = new I(T), c = this.dp.i; c.next();)
        {
            var d = c.value,
                e = d.data;
            if (null !== e)
                for (var f = 0; f < arguments.length; f++)
                {
                    var h = arguments[f];
                    if (w.Pa(h) && zn(this, e, h))
                    {
                        b.add(d);
                        break
                    }
                }
        }
        return b.i
    };
    D.prototype.findLinksByExample = function (a)
    {
        for (var b = new I(W), c = this.Xo.i; c.next();)
        {
            var d = c.value,
                e = d.data;
            if (null !== e)
                for (var f = 0; f < arguments.length; f++)
                {
                    var h = arguments[f];
                    if (w.Pa(h) && zn(this, e, h))
                    {
                        b.add(d);
                        break
                    }
                }
        }
        return b.i
    };

    function zn(a, b, c)
    {
        for (var d in c)
        {
            var e = b[d],
                f = c[d];
            if (w.isArray(f))
            {
                if (!w.isArray(e) || e.length < f.length) return !1;
                for (var h = 0; h < e.length; h++)
                {
                    var k = e[h],
                        l = f[h];
                    if (void 0 !== l && !An(a, k, l)) return !1
                }
            }
            else if (!An(a, e, f)) return !1
        }
        return !0
    }

    function An(a, b, c)
    {
        if ("function" === typeof c)
        {
            if (!c(b)) return !1
        }
        else if (c instanceof RegExp)
        {
            if (!b || !c.test(b.toString())) return !1
        }
        else if (w.Pa(b) && w.Pa(c))
        {
            if (!zn(a, b, c)) return !1
        }
        else if (b !== c) return !1;
        return !0
    }
    w.defineProperty(D,
        {
            AL: "nodeTemplate"
        }, function ()
        {
            return this.bj.ka("")
        }, function (a)
        {
            var b = this.bj.ka("");
            b !== a && (w.G(a, R, D, "nodeTemplate"), this.bj.add("", a), this.h("nodeTemplate", b, a), this.ja.lb || this.jm())
        });
    w.defineProperty(D,
        {
            kB: "nodeTemplateMap"
        }, function ()
        {
            return this.bj
        }, function (a)
        {
            var b = this.bj;
            b !== a && (w.G(a, ma, D, "nodeTemplateMap"), this.bj = a, this.h("nodeTemplateMap", b, a), this.ja.lb || this.jm())
        });
    w.defineProperty(D,
        {
            eL: "groupTemplate"
        }, function ()
        {
            return this.ol.ka("")
        }, function (a)
        {
            var b = this.ol.ka("");
            b !== a && (w.G(a, V, D, "groupTemplate"), this.ol.add("", a), this.h("groupTemplate", b, a), this.ja.lb || this.jm())
        });
    w.defineProperty(D,
        {
            KA: "groupTemplateMap"
        }, function ()
        {
            return this.ol
        }, function (a)
        {
            var b = this.ol;
            b !== a && (w.G(a, ma, D, "groupTemplateMap"), this.ol = a, this.h("groupTemplateMap", b, a), this.ja.lb || this.jm())
        });
    w.defineProperty(D,
        {
            pL: "linkTemplate"
        }, function ()
        {
            return this.kk.ka("")
        }, function (a)
        {
            var b = this.kk.ka("");
            b !== a && (w.G(a, W, D, "linkTemplate"), this.kk.add("", a), this.h("linkTemplate", b, a), this.ja.lb || this.jm())
        });
    w.defineProperty(D,
        {
            ZA: "linkTemplateMap"
        }, function ()
        {
            return this.kk
        }, function (a)
        {
            var b = this.kk;
            b !== a && (w.G(a, ma, D, "linkTemplateMap"), this.kk = a, this.h("linkTemplateMap", b, a), this.ja.lb || this.jm())
        });
    w.defineProperty(D,
        {
            AI: null
        }, function ()
        {
            return this.dh
        }, function (a)
        {
            this.dh = a
        });
    w.defineProperty(D,
        {
            ef: "isMouseCaptured"
        }, function ()
        {
            return this.mD
        }, function (a)
        {
            var b = this.yb;
            null !== b && (a ? (this.Q.bubbles = !1, this.Uy ? (b.removeEventListener("pointermove", this.oq, !1), b.removeEventListener("pointerdown", this.nq, !1), b.removeEventListener("pointerup", this.qq, !1), b.removeEventListener("pointerout", this.pq, !1), window.addEventListener("pointermove", this.oq, !0), window.addEventListener("pointerdown", this.nq, !0), window.addEventListener("pointerup", this.qq, !0), window.addEventListener("pointerout",
                this.pq, !0)) : (b.removeEventListener("mousemove", this.Qn, !1), b.removeEventListener("mousedown", this.Pn, !1), b.removeEventListener("mouseup", this.Sn, !1), b.removeEventListener("mouseout", this.Rn, !1), window.addEventListener("mousemove", this.Qn, !0), window.addEventListener("mousedown", this.Pn, !0), window.addEventListener("mouseup", this.Sn, !0), window.addEventListener("mouseout", this.Rn, !0)), b.removeEventListener("wheel", this.Tn, !1), window.addEventListener("wheel", this.Tn, !0), window.addEventListener("selectstart",
                this.preventDefault, !1)) : (this.Uy ? (window.removeEventListener("pointermove", this.oq, !0), window.removeEventListener("pointerdown", this.nq, !0), window.removeEventListener("pointerup", this.qq, !0), window.removeEventListener("pointerout", this.pq, !0), b.addEventListener("pointermove", this.oq, !1), b.addEventListener("pointerdown", this.nq, !1), b.addEventListener("pointerup", this.qq, !1), b.addEventListener("pointerout", this.pq, !1)) : (window.removeEventListener("mousemove", this.Qn, !0), window.removeEventListener("mousedown",
                this.Pn, !0), window.removeEventListener("mouseup", this.Sn, !0), window.removeEventListener("mouseout", this.Rn, !0), b.addEventListener("mousemove", this.Qn, !1), b.addEventListener("mousedown", this.Pn, !1), b.addEventListener("mouseup", this.Sn, !1), b.addEventListener("mouseout", this.Rn, !1)), window.removeEventListener("wheel", this.Tn, !0), window.removeEventListener("selectstart", this.preventDefault, !1), b.addEventListener("wheel", this.Tn, !1)), this.mD = a)
        });
    w.defineProperty(D,
        {
            position: "position"
        }, function ()
        {
            return this.$a
        }, function (a)
        {
            var b = this.$a;
            if (!b.L(a))
            {
                w.G(a, y, D, "position");
                var c = this.sb.copy();
                a = a.copy();
                if (!this.Vc && null !== this.yb)
                {
                    this.Vc = !0;
                    var d = this.scale;
                    Sl(this, a, this.be, this.Eb / d, this.Db / d, this.Cm, !1);
                    this.Vc = !1
                }
                this.$a = a.S();
                a = this.Ka;
                a.rc && il(a, b, this.$a);
                this.Vc || this.Mu(c, this.sb, this.qb, this.qb, !1)
            }
        });
    w.defineProperty(D,
        {
            sI: "initialPosition"
        }, function ()
        {
            return this.Wv
        }, function (a)
        {
            this.Wv.L(a) || (w.G(a, y, D, "initialPosition"), this.Wv = a.S())
        });
    w.defineProperty(D,
        {
            tI: "initialScale"
        }, function ()
        {
            return this.Xv
        }, function (a)
        {
            this.Xv !== a && (w.j(a, "number", D, "initialScale"), this.Xv = a)
        });
    w.defineProperty(D,
        {
            En: "grid"
        }, function ()
        {
            null === this.td && Jl(this);
            return this.td
        }, function (a)
        {
            var b = this.td;
            if (b !== a)
            {
                null === b && (Jl(this), b = this.td);
                w.G(a, C, D, "grid");
                a.type !== Kl && w.k("Diagram.grid must be a Panel of type Panel.Grid");
                var c = b.R;
                null !== c && c.remove(b);
                this.td = a;
                a.name = "GRID";
                null !== c && c.add(a);
                em(this);
                this.oa();
                this.h("grid", b, a)
            }
        });
    w.u(D,
        {
            sb: "viewportBounds"
        }, function ()
        {
            var a = this.nE;
            if (null === this.yb) return a;
            var b = this.$a,
                c = this.qb;
            a.m(b.x, b.y, Math.max(this.Eb, 0) / c, Math.max(this.Db, 0) / c);
            return a
        });
    w.defineProperty(D,
        {
            eF: "fixedBounds"
        }, function ()
        {
            return this.Ov
        }, function (a)
        {
            var b = this.Ov;
            b.L(a) || (w.G(a, B, D, "fixedBounds"), -Infinity !== a.width && Infinity !== a.height && -Infinity !== a.height || w.k("fixedBounds width/height must not be Infinity"), this.Ov = a = a.S(), this.Fc(), this.h("fixedBounds", b, a))
        });
    w.defineProperty(D,
        {
            sy: "scrollMargin"
        }, function ()
        {
            return this.Fw
        }, function (a)
        {
            "number" === typeof a ? a = new hb(a) : w.G(a, hb, D, "scrollMargin");
            var b = this.Fw;
            b.L(a) || (this.Fw = a = a.S(), this.h("scrollMargin", b, a), this.Pu())
        });
    w.defineProperty(D,
        {
            ty: "scrollMode"
        }, function ()
        {
            return this.Gw
        }, function (a)
        {
            var b = this.Gw;
            b !== a && (w.ob(a, D, D, "scrollMode"), this.Gw = a, a === tl && Ql(this, !1), this.h("scrollMode", b, a))
        });
    w.defineProperty(D,
        {
            CJ: "scrollsPageOnFocus"
        }, function ()
        {
            return this.Jw
        }, function (a)
        {
            var b = this.Jw;
            b !== a && (w.j(a, "boolean", D, "scrollsPageOnFocus"), this.Jw = a, this.h("scrollsPageOnFocus", b, a))
        });
    w.defineProperty(D,
        {
            ZF: "positionComputation"
        }, function ()
        {
            return this.Aw
        }, function (a)
        {
            var b = this.Aw;
            b !== a && (null !== a && w.j(a, "function", D, "positionComputation"), this.Aw = a, Ql(this, !1), this.h("positionComputation", b, a))
        });
    w.defineProperty(D,
        {
            kG: "scaleComputation"
        }, function ()
        {
            return this.Cw
        }, function (a)
        {
            var b = this.Cw;
            b !== a && (null !== a && w.j(a, "function", D, "scaleComputation"), this.Cw = a, Zm(this, this.scale, this.scale), this.h("scaleComputation", b, a))
        });
    w.u(D,
        {
            be: "documentBounds"
        }, function ()
        {
            return this.Hv
        });

    function Tl(a, b)
    {
        a.dk = !1;
        var c = a.Hv;
        c.L(b) || (b = b.S(), a.Hv = b, Ql(a, !1), a.Aa("DocumentBoundsChanged", null, c.copy()), bm(a))
    }
    w.defineProperty(D,
        {
            XA: "isVirtualized"
        }, function ()
        {
            return this.dw
        }, function (a)
        {
            var b = this.dw;
            b !== a && (w.j(a, "boolean", D, "isVirtualized"), this.dw = a, this.h("isVirtualized", b, a))
        });
    w.defineProperty(D,
        {
            scale: "scale"
        }, function ()
        {
            return this.qb
        }, function (a)
        {
            var b = this.qb;
            w.Ad(a, D, "scale");
            b !== a && Zm(this, b, a)
        });
    w.defineProperty(D,
        {
            Rl: "autoScale"
        }, function ()
        {
            return this.zm
        }, function (a)
        {
            var b = this.zm;
            b !== a && (w.ob(a, D, D, "autoScale"), this.zm = a, this.h("autoScale", b, a), a !== oh && Ql(this, !1))
        });
    w.defineProperty(D,
        {
            hL: "initialAutoScale"
        }, function ()
        {
            return this.sl
        }, function (a)
        {
            var b = this.sl;
            b !== a && (w.ob(a, D, D, "initialAutoScale"), this.sl = a, this.h("initialAutoScale", b, a))
        });
    w.defineProperty(D,
        {
            uI: "initialViewportSpot"
        }, function ()
        {
            return this.Yv
        }, function (a)
        {
            var b = this.Yv;
            b !== a && (w.G(a, K, D, "initialViewportSpot"), a.$c() || w.k("initialViewportSpot must be a specific Spot: " + a), this.Yv = a, this.h("initialViewportSpot", b, a))
        });
    w.defineProperty(D,
        {
            rI: "initialDocumentSpot"
        }, function ()
        {
            return this.Vv
        }, function (a)
        {
            var b = this.Vv;
            b !== a && (w.G(a, K, D, "initialDocumentSpot"), a.$c() || w.k("initialViewportSpot must be a specific Spot: " + a), this.Vv = a, this.h("initialDocumentSpot", b, a))
        });
    w.defineProperty(D,
        {
            Bh: "minScale"
        }, function ()
        {
            return this.ow
        }, function (a)
        {
            w.Ad(a, D, "minScale");
            var b = this.ow;
            b !== a && (0 < a ? (this.ow = a, this.h("minScale", b, a), a > this.scale && (this.scale = a)) : w.Fa(a, "> 0", D, "minScale"))
        });
    w.defineProperty(D,
        {
            Ah: "maxScale"
        }, function ()
        {
            return this.mw
        }, function (a)
        {
            w.Ad(a, D, "maxScale");
            var b = this.mw;
            b !== a && (0 < a ? (this.mw = a, this.h("maxScale", b, a), a < this.scale && (this.scale = a)) : w.Fa(a, "> 0", D, "maxScale"))
        });
    w.defineProperty(D,
        {
            zi: "zoomPoint"
        }, function ()
        {
            return this.Yw
        }, function (a)
        {
            this.Yw.L(a) || (w.G(a, y, D, "zoomPoint"), this.Yw = a = a.S())
        });
    w.defineProperty(D,
        {
            qA: "contentAlignment"
        }, function ()
        {
            return this.Cm
        }, function (a)
        {
            var b = this.Cm;
            b.L(a) || (w.G(a, K, D, "contentAlignment"), this.Cm = a = a.S(), this.h("contentAlignment", b, a), Ql(this, !1))
        });
    w.defineProperty(D,
        {
            iL: "initialContentAlignment"
        }, function ()
        {
            return this.Lo
        }, function (a)
        {
            var b = this.Lo;
            b.L(a) || (w.G(a, K, D, "initialContentAlignment"), this.Lo = a = a.S(), this.h("initialContentAlignment", b, a))
        });
    w.defineProperty(D,
        {
            padding: "padding"
        }, function ()
        {
            return this.lf
        }, function (a)
        {
            "number" === typeof a ? a = new hb(a) : w.G(a, hb, D, "padding");
            var b = this.lf;
            b.L(a) || (this.lf = a = a.S(), this.Fc(), this.h("padding", b, a))
        });
    w.u(D,
        {
            hg: "nodes"
        }, function ()
        {
            return this.dp.i
        });
    w.u(D,
        {
            links: "links"
        }, function ()
        {
            return this.Xo.i
        });
    w.u(D,
        {
            Ij: "parts"
        }, function ()
        {
            return this.Ab.i
        });
    D.prototype.findTopLevelNodesAndLinks = function ()
    {
        for (var a = new I(R), b = this.dp.i; b.next();)
        {
            var c = b.value;
            c.eq && a.add(c)
        }
        for (b = this.Xo.i; b.next();) c = b.value, c.eq && a.add(c);
        return a.i
    };
    D.prototype.findTopLevelGroups = function ()
    {
        return this.Jl.i
    };
    w.defineProperty(D,
        {
            Tb: "layout"
        }, function ()
        {
            return this.oe
        }, function (a)
        {
            var b = this.oe;
            b !== a && (w.G(a, sg, D, "layout"), null !== b && (b.g = null, b.group = null), this.oe = a, a.g = this, a.group = null, this.Qj = !0, this.h("layout", b, a), this.ye())
        });
    D.prototype.layoutDiagram = function (a)
    {
        Ii(this);
        a && un(this, !0);
        fm(this, !1)
    };

    function un(a, b)
    {
        for (var c = a.Jl.i; c.next();) Bn(a, c.value, b);
        null !== a.Tb && (b ? a.Tb.sf = !1 : a.Tb.J())
    }

    function Bn(a, b, c)
    {
        if (null !== b)
        {
            for (var d = b.ap.i; d.next();) Bn(a, d.value, c);
            null !== b.Tb && (c ? b.Tb.sf = !1 : b.Tb.J())
        }
    }

    function fm(a, b)
    {
        if (a.Qj && !a.fz)
        {
            var c = a.Ua;
            a.Ua = !0;
            var d = a.ja.wi,
                e = a.Tb;
            try
            {
                0 === d && a.Kb("Layout");
                var f = a.Ka;
                1 >= d && !f.df && !f.rc && (b || f.Wn("Layout"));
                a.Qj = !1;
                for (var h = a.Jl.i; h.next();) Cn(a, h.value, b, d);
                e.sf || (!b || e.HF || 0 === d ? (e.doLayout(a), Ii(a), e.sf = !0) : a.Qj = !0)
            }
            finally
            {
                0 === d && a.Yc("Layout"), a.Qj = !e.sf, a.Ua = c
            }
        }
    }

    function Cn(a, b, c, d)
    {
        if (null !== b)
        {
            for (var e = b.ap.i; e.next();) Cn(a, e.value, c, d);
            e = b.Tb;
            null === e || e.sf || (!c || e.HF || 0 === d ? (b.Un = !b.location.I(), e.doLayout(b), b.J(Dn), km(a, b), e.sf = !0) : a.Qj = !0)
        }
    }
    w.defineProperty(D,
        {
            Ud: "isTreePathToChildren"
        }, function ()
        {
            return this.cw
        }, function (a)
        {
            var b = this.cw;
            if (b !== a && (w.j(a, "boolean", D, "isTreePathToChildren"), this.cw = a, this.h("isTreePathToChildren", b, a), !this.ja.lb))
                for (a = this.hg; a.next();) En(a.value)
        });
    D.prototype.findTreeRoots = function ()
    {
        for (var a = new H(T), b = this.hg; b.next();)
        {
            var c = b.value;
            c.eq && null === c.zn() && a.add(c)
        }
        return a.i
    };
    w.defineProperty(D,
        {
            SB: "treeCollapsePolicy"
        }, function ()
        {
            return this.Tw
        }, function (a)
        {
            var b = this.Tw;
            b !== a && (a !== vl && a !== an && a !== bn && w.k("Unknown Diagram.treeCollapsePolicy: " + a), this.Tw = a, this.h("treeCollapsePolicy", b, a))
        });
    w.defineProperty(D,
        {
            xh: null
        }, function ()
        {
            return this.eD
        }, function (a)
        {
            this.eD = a
        });

    function ul(a)
    {
        function b(a)
        {
            var b = a.toLowerCase(),
                h = new H("function");
            c.add(a, h);
            c.add(b, h);
            d.add(a, a);
            d.add(b, a)
        }
        var c = new ma("string", H),
            d = new ma("string", "string");
        b("AnimationStarting");
        b("AnimationFinished");
        b("BackgroundSingleClicked");
        b("BackgroundDoubleClicked");
        b("BackgroundContextClicked");
        b("ClipboardChanged");
        b("ClipboardPasted");
        b("DocumentBoundsChanged");
        b("ExternalObjectsDropped");
        b("InitialLayoutCompleted");
        b("LayoutCompleted");
        b("LinkDrawn");
        b("LinkRelinked");
        b("LinkReshaped");
        b("Modified");
        b("ObjectSingleClicked");
        b("ObjectDoubleClicked");
        b("ObjectContextClicked");
        b("PartCreated");
        b("PartResized");
        b("PartRotated");
        b("SelectionMoved");
        b("SelectionCopied");
        b("SelectionDeleting");
        b("SelectionDeleted");
        b("SelectionGrouped");
        b("SelectionUngrouped");
        b("ChangingSelection");
        b("ChangedSelection");
        b("SubGraphCollapsed");
        b("SubGraphExpanded");
        b("TextEdited");
        b("TreeCollapsed");
        b("TreeExpanded");
        b("ViewportBoundsChanged");
        a.hz = c;
        a.gz = d
    }

    function oa(a, b)
    {
        var c = a.gz.ka(b);
        return null !== c ? c : a.gz.ka(b.toLowerCase())
    }

    function Fn(a, b)
    {
        var c = a.hz.ka(b);
        if (null !== c) return c;
        c = a.hz.ka(b.toLowerCase());
        if (null !== c) return c;
        w.k("Unknown DiagramEvent name: " + b);
        return null
    }
    D.prototype.addDiagramListener = D.prototype.Zw = function (a, b)
    {
        w.j(a, "string", D, "addDiagramListener:name");
        w.j(b, "function", D, "addDiagramListener:listener");
        var c = Fn(this, a);
        null !== c && c.add(b)
    };
    D.prototype.removeDiagramListener = D.prototype.rB = function (a, b)
    {
        w.j(a, "string", D, "removeDiagramListener:name");
        w.j(b, "function", D, "addDiagramListener:listener");
        var c = Fn(this, a);
        null !== c && c.remove(b)
    };
    D.prototype.raiseDiagramEvent = D.prototype.Aa = function (a, b, c)
    {
        var d = Fn(this, a),
            e = new Af;
        e.g = this;
        a = oa(this, a);
        null !== a && (e.name = a);
        void 0 !== b && (e.JB = b);
        void 0 !== c && (e.mB = c);
        b = d.length;
        if (1 === b) d = d.ea(0), d(e);
        else if (0 !== b)
            for (c = d.xc(), a = 0; a < b; a++) d = c[a], d(e);
        return e.cancel
    };
    D.prototype.isUnoccupied = D.prototype.gq = function (a, b)
    {
        void 0 === b && (b = null);
        return Gn(this, !1, null, b).gq(a.x, a.y, a.width, a.height)
    };
    D.prototype.computeOccupiedArea = function ()
    {
        return this.XA ? this.sb.copy() : this.dk ? Pl(this) : this.be.copy()
    };

    function Gn(a, b, c, d)
    {
        null === a.Ld && (a.Ld = new Hn);
        if (a.Ld.pu || a.Ld.group !== c || a.Ld.IB !== d)
        {
            if (null === c)
            {
                b = a.computeOccupiedArea();
                b.Yf(100, 100);
                a.Ld.initialize(b);
                b = w.Kf();
                for (var e = a.hg; e.next();)
                {
                    var f = e.value,
                        h = f.layer;
                    null !== h && h.visible && !h.Pc && In(a, f, d, b)
                }
            }
            else
                for (0 < c.vc.count && (b = a.computePartsBounds(c.vc, !1), b.Yf(20, 20), a.Ld.initialize(b)), b = w.Kf(), e = c.vc; e.next();) f = e.value, f instanceof T && In(a, f, d, b);
            w.Hb(b);
            a.Ld.group = c;
            a.Ld.IB = d;
            a.Ld.pu = !1
        }
        else b && Jn(a.Ld);
        return a.Ld
    }

    function In(a, b, c, d)
    {
        if (b !== c)
            if (b.isVisible() && b.kA && !b.Cf)
            {
                c = b.getAvoidableRect(d);
                d = a.Ld.Jp;
                b = a.Ld.Hp;
                for (var e = c.x + c.width, f = c.y + c.height, h = c.x; h < e; h += d)
                {
                    for (var k = c.y; k < f; k += b) Kn(a.Ld, h, k);
                    Kn(a.Ld, h, f)
                }
                for (k = c.y; k < f; k += b) Kn(a.Ld, e, k);
                Kn(a.Ld, e, f)
            }
            else if (b instanceof V)
                for (b = b.vc; b.next();) e = b.value, e instanceof T && In(a, e, c, d)
    }
    D.invalidatePositionArray = D.prototype.QA = function (a)
    {
        null !== this.Ld && !this.Ld.pu && (void 0 === a && (a = null), null === a || a.kA && !a.Cf) && (this.Ld.pu = !0)
    };
    D.prototype.simulatedMouseMove = function (a, b, c)
    {
        if (null !== Sh)
        {
            var d = Sh.g;
            c instanceof D || (c = null);
            var e = Th;
            c !== e && (null !== e && e !== d && null !== e.Va.ce && (Yh(e), Sh.Kx = !1, e.Va.ce.doSimulatedDragLeave()), Th = c, null !== c && c !== d && null !== c.Va.ce && (ei(), e = c.Va.ce, ai.contains(e) || ai.add(e), c.Va.ce.doSimulatedDragEnter()));
            if (null === c || c === d || !c.yE || c.ib || !c.Fp) return !1;
            d = c.Va.ce;
            null !== d && (null !== a ? b = c.Jr(a) : null === b && (b = new y), c.Rb.da = b, c.Rb.Ce = c.Cy(b), c.Rb.Hk = !1, c.Rb.up = !1, d.doSimulatedDragOver());
            return !0
        }
        return !1
    };
    D.prototype.simulatedMouseUp = function (a, b, c, d)
    {
        if (null !== Sh)
        {
            null === d && (d = b);
            b = Th;
            var e = Sh.g;
            if (d !== b)
            {
                if (null !== b && b !== e && null !== b.Va.ce) return Yh(b), Sh.Kx = !1, b.Va.ce.doSimulatedDragLeave(), !1;
                Th = d;
                null !== d && null !== d.Va.ce && (ei(), b = d.Va.ce, ai.contains(b) || ai.add(b), d.Va.ce.doSimulatedDragEnter())
            }
            if (null === d) return Sh.doCancel(), !0;
            if (d !== this) return null !== a && (c = d.Jr(a)), d.Rb.da = c, d.Rb.Ce = d.Cy(c), d.Rb.Hk = !1, d.Rb.up = !0, a = d.Va.ce, null !== a && a.doSimulatedDrop(), a = Sh, null !== a && (d = a.mayCopy(), a.Lf = d ?
                "Copy" : "Move", a.stopTool()), !0
        }
        return !1
    };
    w.defineProperty(D,
        {
            FK: "autoScrollInterval"
        }, function ()
        {
            return this.Vq
        }, function (a)
        {
            var b = this.Vq;
            w.Ad(a, D, "scale");
            b !== a && (this.Vq = a, this.h("autoScrollInterval", b, a))
        });
    w.defineProperty(D,
        {
            FE: "autoScrollRegion"
        }, function ()
        {
            return this.tv
        }, function (a)
        {
            "number" === typeof a ? a = new hb(a) : w.G(a, hb, D, "autoScrollRegion");
            var b = this.tv;
            b.L(a) || (this.tv = a = a.S(), this.Fc(), this.h("autoScrollRegion", b, a))
        });
    D.prototype.doAutoScroll = D.prototype.yA = function (a)
    {
        this.sv.assign(a);
        Ln(this, this.sv).Oc(this.position) ? Yh(this) : Mn(this)
    };

    function Mn(a)
    {
        -1 === a.oo && (a.oo = w.setTimeout(function ()
        {
            if (-1 !== a.oo)
            {
                Yh(a);
                var b = a.Q.event;
                if (null !== b)
                {
                    var c = Ln(a, a.sv);
                    c.Oc(a.position) || (a.position = c, a.Q.da = a.RB(a.sv), c = Yl(b), a.simulatedMouseMove(b, null, c) || a.doMouseMove(), a.dk = !0, Tl(a, a.sh()), a.Fe = !0, a.cg(), Mn(a))
                }
            }
        }, a.Vq))
    }

    function Yh(a)
    {
        -1 !== a.oo && (w.clearTimeout(a.oo), a.oo = -1)
    }

    function Ln(a, b)
    {
        var c = a.position,
            d = a.FE;
        if (0 >= d.top && 0 >= d.left && 0 >= d.right && 0 >= d.bottom) return c;
        var e = a.sb,
            f = a.scale,
            e = w.kg(0, 0, e.width * f, e.height * f),
            h = w.xb(0, 0);
        if (b.x >= e.x && b.x < e.x + d.left)
        {
            var k = Math.max(a.Vu, 1),
                k = k | 0;
            h.x -= k;
            b.x < e.x + d.left / 2 && (h.x -= k);
            b.x < e.x + d.left / 4 && (h.x -= 4 * k)
        }
        else b.x <= e.x + e.width && b.x > e.x + e.width - d.right && (k = Math.max(a.Vu, 1), k |= 0, h.x += k, b.x > e.x + e.width - d.right / 2 && (h.x += k), b.x > e.x + e.width - d.right / 4 && (h.x += 4 * k));
        b.y >= e.y && b.y < e.y + d.top ? (k = Math.max(a.Wu, 1), k |= 0, h.y -= k, b.y < e.y +
        d.top / 2 && (h.y -= k), b.y < e.y + d.top / 4 && (h.y -= 4 * k)) : b.y <= e.y + e.height && b.y > e.y + e.height - d.bottom && (k = Math.max(a.Wu, 1), k |= 0, h.y += k, b.y > e.y + e.height - d.bottom / 2 && (h.y += k), b.y > e.y + e.height - d.bottom / 4 && (h.y += 4 * k));
        h.Oc(cd) || (c = new y(c.x + h.x / f, c.y + h.y / f));
        w.Hb(e);
        w.v(h);
        return c
    }
    D.prototype.makeSvg = D.prototype.makeSVG = function (a)
    {
        void 0 === a && (a = new ra);
        a.context = "svg";
        a = Nn(this, a);
        return null !== a ? a.pm : null
    };
    D.prototype.makeImage = function (a)
    {
        void 0 === a && (a = new ra);
        var b = (a.document || document).createElement("img");
        b.src = this.OI(a);
        return b
    };
    D.prototype.makeImageData = D.prototype.OI = function (a)
    {
        void 0 === a && (a = new ra);
        var b = Nn(this, a);
        if (null !== b)
        {
            var c = a.returnType,
                c = void 0 === c ? "string" : c.toLowerCase();
            switch (c)
            {
                case "imagedata":
                    return b.Gk.getImageData(0, 0, b.width, b.height);
                case "blob":
                    b = b.Od;
                    c = a.callback;
                    if ("function" !== typeof c)
                    {
                        w.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');
                        break
                    }
                    if ("function" === typeof b.toBlob) return b.toBlob(c, a.type, a.details), "toBlob";
                    if ("function" ===
                        typeof b.msToBlob) return c(b.msToBlob()), "msToBlob";
                    c(null);
                    break;
                default:
                    return b.toDataURL(a.type, a.details)
            }
        }
        return ""
    };
    var On = !1;

    function Nn(a, b)
    {
        a.Ka.Hh();
        a.cg();
        if (null === a.yb) return null;
        "object" !== typeof b && w.k("properties argument must be an Object.");
        var c = !1,
            d = b.size || null,
            e = b.scale || null;
        void 0 !== b.scale && isNaN(b.scale) && (e = "NaN");
        var f = b.maxSize;
        void 0 === b.maxSize && (c = !0, f = "svg" === b.context ? new ia(Infinity, Infinity) : new ia(2E3, 2E3));
        var h = b.position || null,
            k = b.parts || null,
            l = void 0 === b.padding ? 1 : b.padding,
            m = b.background || null,
            n = b.omitTemporary;
        void 0 === n && (n = !0);
        var p = b.document || document,
            q = b.elementFinished || null,
            r =
                b.showTemporary;
        void 0 === r && (r = !n);
        n = b.showGrid;
        void 0 === n && (n = r);
        null !== d && isNaN(d.width) && isNaN(d.height) && (d = null);
        "number" === typeof l ? l = new hb(l) : l instanceof hb || w.k("MakeImage padding must be a Margin or a number.");
        l.left = Math.max(l.left, 0);
        l.right = Math.max(l.right, 0);
        l.top = Math.max(l.top, 0);
        l.bottom = Math.max(l.bottom, 0);
        a.hf.Ke(!0);
        var s = new Vc(null, p),
            u = s.Gk;
        if (!(d || e || k || h))
        {
            s.width = a.Eb + Math.ceil(l.left + l.right);
            s.height = a.Db + Math.ceil(l.top + l.bottom);
            if ("svg" === b.context) return u = new Oc(s.Od,
                p, q), Lm(a, u, l, new ia(s.width, s.height), a.qb, a.$a, k, m, r, n), u;
            a.yr = !1;
            Lm(a, u, l, new ia(s.width, s.height), a.qb, a.$a, k, m, r, n);
            a.yr = !0;
            return s
        }
        var t = a.pb.qx,
            x = new y(0, 0),
            v = a.be.copy();
        v.PJ(a.padding);
        if (r)
            for (var z = !0, z = a.dc.n, A = z.length, L = 0; L < A; L++)
            {
                var E = z[L];
                if (E.visible && E.Pc)
                    for (var E = E.Ab.n, P = E.length, $ = 0; $ < P; $++)
                    {
                        var S = E[$];
                        S.VA && S.isVisible() && (S = S.U, S.I() && v.Jh(S))
                    }
            }
        x.x = v.x;
        x.y = v.y;
        if (null !== k)
        {
            var ba, z = !0,
                A = k.i;
            for (A.reset(); A.next();) S = A.value, S instanceof R && (E = S.layer, null !== E && !E.visible ||
            null !== E && !r && E.Pc || !S.isVisible() || (S = S.U, S.I() && (z ? (z = !1, ba = S.copy()) : ba.Jh(S))));
            z && (ba = new B(0, 0, 0, 0));
            v.width = ba.width;
            v.height = ba.height;
            x.x = ba.x;
            x.y = ba.y
        }
        null !== h && h.I() && (x = h, e || (e = t));
        z = S = 0;
        null !== l && (S = l.left + l.right, z = l.top + l.bottom);
        L = A = 0;
        null !== d && (A = d.width, L = d.height, isFinite(A) && (A = Math.max(0, A - S)), isFinite(L) && (L = Math.max(0, L - z)));
        ba = h = 0;
        null !== d && null !== e ? ("NaN" === e && (e = t), d.I() ? (h = A, ba = L) : isNaN(L) ? (h = A, ba = v.height * e) : (h = v.width * e, ba = L)) : null !== d ? d.I() ? (e = Math.min(A / v.width, L / v.height),
            h = A, ba = L) : isNaN(L) ? (e = A / v.width, h = A, ba = v.height * e) : (e = L / v.height, h = v.width * e, ba = L) : null !== e ? "NaN" === e && f.I() ? (e = Math.min((f.width - S) / v.width, (f.height - z) / v.height), e > t ? (e = t, h = v.width, ba = v.height) : (h = f.width, ba = f.height)) : (h = v.width * e, ba = v.height * e) : (e = t, h = v.width, ba = v.height);
        null !== l ? (h += S, ba += z) : l = new hb(0);
        null !== f && (d = f.width, f = f.height, "svg" !== b.context && c && !On && (h > d || ba > f) && (w.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. (" + Math.ceil(h) + "x" + Math.ceil(ba) +
            " vs 2000x2000) Consider increasing the max size."), On = !0), isNaN(d) && (d = 2E3), isNaN(f) && (f = 2E3), isFinite(d) && (h = Math.min(h, d)), isFinite(f) && (ba = Math.min(ba, f)));
        s.width = Math.ceil(h);
        s.height = Math.ceil(ba);
        if ("svg" === b.context) return u = new Oc(s.Od, p, q), Lm(a, u, l, new ia(Math.ceil(h), Math.ceil(ba)), e, x, k, m, r, n), u;
        a.yr = !1;
        Lm(a, u, l, new ia(Math.ceil(h), Math.ceil(ba)), e, x, k, m, r, n);
        a.yr = !0;
        return s
    }
    D.inherit = function (a, b)
    {
        w.j(a, "function", D, "inherit");
        w.j(b, "function", D, "inherit");
        b.cH && w.k("Cannot inherit from " + w.pf(b));
        w.La(a, b)
    };

    function Dl()
    {
        this.YD = null;
        this.eH = "63ad05bbe23a1786468a4c741b6d2";
        this.Ni = this.eH === this._tk ? !0 : null
    }
    Dl.prototype.tm = function (a)
    {
        a.hf.setTransform(a.Jd, 0, 0, a.Jd, 0, 0);
        if (null === this.Ni)
        {
            var b = "f",
                c = window[w.Jg("76a715b2f73f148a")][w.Jg("72ba13b5")];
            a = w.Jg;
            this.Ni = !0;
            if (window[a("7da7")] && window[a("7da7")][a("76a115b6ed251eaf4692")])
            {
                var d = window[a("7da7")][a("76a115b6ed251eaf4692")],
                    d = a(d).split(a("39e9"));
                if (!(6 > d.length))
                {
                    var e = a(d[1]).split(".");
                    if ("7da71ca0" === d[4])
                    {
                        var f = a(w[a("6cae19")]).split(".");
                        if (e[0] > f[0] || e[0] === f[0] && e[1] >= f[1])
                        {
                            f = c[a("76ad18b4f73e")];
                            for (e = c[a("73a612b6fb191d")](a("35e7")) +
                                2; e < f; e++) b += c[e];
                            c = b[a("73a612b6fb191d")](a(d[2]));
                            0 > c && a(d[2]) !== a("7da71ca0ad381e90") && (c = b[a("73a612b6fb191d")](a("76a715b2ef3e149757")));
                            0 > c && (c = b[a("73a612b6fb191d")](a("76a715b2ef3e149757")));
                            if (this.Ni = !(0 <= c && c < b[a("73a612b6fb191d")](a("35"))))
                                if (b = a(d[2]), "#" === b[0])
                                {
                                    c = window.document[a("79ba13b2f7333e8846865a7d00")]("div");
                                    for (e = d[0].replace(/[A-Za-z]/g, ""); 4 > e.length;) e += "9";
                                    e = e.substr(e.length - 4);
                                    d = "" + ["gsh", "gsf"][parseInt(e.substr(0, 1), 10) % 2];
                                    d += ["Header", "Background", "Display", "Feedback"][parseInt(e.substr(0,
                                        1), 10) % 4];
                                    c[a("79a417a0f0181a8946")] = d;
                                    if (window.document[a("78a712aa")])
                                    {
                                        if (window.document[a("78a712aa")][a("7bb806b6ed32388c4a875b")](c), e = window[a("7dad0290ec3b0b91578e5b40007031bf")](c)[a("7dad0283f1390b81519f4645156528bf")](a("78a704b7e62456904c9b12701b6532a8")), window.document[a("78a712aa")][a("68ad1bbcf533388c4a875b")](c), e)
                                            if (-1 !== e.indexOf(parseInt(b[1] + b[2], 16)) && -1 !== e.indexOf(parseInt(b[3] + b[4], 16))) this.Ni = !1;
                                            else if (w.uu || w.cq || w.dq || w.TA)
                                                for (d = "." + d, e = 0; e < document.styleSheets.length; e++)
                                                {
                                                    a =
                                                        document.styleSheets[e].rules || document.styleSheets[e].cssRules;
                                                    for (var h in a)
                                                        if (d === a[h].selectorText)
                                                        {
                                                            this.Ni = !1;
                                                            break
                                                        }
                                                }
                                    }
                                    else this.Ni = null, this.Ni = !1
                                }
                        }
                    }
                }
            }
            else
            {
                f = c[a("76ad18b4f73e")];
                for (e = c[a("73a612b6fb191d")](a("35e7")) + 2; e < f; e++) b += c[e];
                c = b[a("73a612b6fb191d")](a("7da71ca0ad381e90"));
                this.Ni = !(0 <= c && c < b[a("73a612b6fb191d")](a("35")))
            }
        }
        return 0 < this.Ni && this !== this.YD ? !0 : !1
    };
    Dl.prototype.t = function ()
    {
        this.YD = null
    };

    function El(a, b)
    {
        void 0 !== b && null !== b || w.k("Diagram setup requires an argument DIV.");
        null !== a.Ob && w.k("Diagram has already completed setup.");
        "string" === typeof b ? a.Ob = window.document.getElementById(b) : b instanceof HTMLDivElement ? a.Ob = b : w.k("No DIV or DIV id supplied: " + b);
        null === a.Ob && w.k("Invalid DIV id; could not get element with id: " + b);
        void 0 !== a.Ob.aa && w.k("Invalid div id; div already has a Diagram associated with it.");
        "static" === window.getComputedStyle(a.Ob, null).position && (a.Ob.style.position =
            "relative");
        a.Ob.style["-webkit-tap-highlight-color"] = "rgba(255, 255, 255, 0)";
        a.Ob.style["-ms-touch-action"] = "none";
        a.Ob.innerHTML = "";
        a.Ob.aa = a;
        var c = new Vc(a);
        c.Od.innerHTML = "This text is displayed if your browser does not support the Canvas HTML element.";
        void 0 !== c.style && (c.style.position = "absolute", c.style.top = "0px", c.style.left = "0px", "rtl" === window.getComputedStyle(a.Ob, null).getPropertyValue("direction") && (a.Xr = !0), c.style.zIndex = "2", c.style.aM = "none", c.style.webkitUserSelect = "none", c.style.MozUserSelect =
            "none");
        a.Eb = a.Ob.clientWidth || 1;
        a.Db = a.Ob.clientHeight || 1;
        a.yb = c;
        a.hf = c.Gk;
        var d = a.hf;
        a.Jd = a.computePixelRatio();
        Nm(a, a.Eb, a.Db);
        a.Jv = d[w.Jg("7eba17a4ca3b1a8346")][w.Jg("78a118b7")](d, w.tm, 4, 4);
        a.Ob.insertBefore(c.Od, a.Ob.firstChild);
        c = new Vc(null);
        c.width = 1;
        c.height = 1;
        a.kz = c;
        a.VC = c.Gk;
        var c = w.createElement("div"),
            e = w.createElement("div");
        c.style.position = "absolute";
        c.style.overflow = "auto";
        c.style.width = a.Eb + "px";
        c.style.height = a.Db + "px";
        c.style.zIndex = "1";
        e.style.position = "absolute";
        e.style.width =
            "1px";
        e.style.height = "1px";
        a.Ob.appendChild(c);
        c.appendChild(e);
        c.onscroll = Ll;
        c.onmousedown = Nl;
        c.ontouchstart = Nl;
        c.aa = a;
        c.aH = !0;
        c.bH = !0;
        a.Hw = c;
        a.gt = e;
        a.ky = w.OE(function ()
        {
            a.uk = null;
            a.oa()
        }, 300, !1);
        a.WB = w.OE(function ()
        {
            Hk(a)
        }, 250, !1);
        a.preventDefault = function (a)
        {
            a.preventDefault();
            return !1
        };
        a.Qn = function (b)
        {
            if (a.isEnabled)
            {
                a.dh = !0;
                var c = a.wd;
                w.Gn && c.Bj ? (b.preventDefault(), b.simulated = !0, a.pt = b) : (a.wd = a.Rb, a.Rb = c, Wl(a, a, b, c, !0), a.simulatedMouseMove(b, null, b.target.aa) || (a.doMouseMove(), a.Xa.isBeyondDragSize() &&
                (a.Vh = 0), am(c, b)))
            }
        };
        a.Pn = function (b)
        {
            if (a.isEnabled)
            {
                a.dh = !0;
                var c = a.wd;
                if (w.Gn && null !== a.pt) a.pt = b, b.preventDefault();
                else if (w.Gn && 400 > b.timeStamp - a.jk) b.preventDefault();
                else if (a.gk) b.preventDefault();
                else
                {
                    a.wd = a.Rb;
                    a.Rb = c;
                    Wl(a, a, b, c, !0);
                    c.Hk = !0;
                    c.te = b.detail;
                    if (w.cq || w.dq) b.timeStamp - a.jk < a.bA && !a.Xa.isBeyondDragSize() ? a.Vh++ : a.Vh = 1, a.jk = b.timeStamp, c.te = a.Vh;
                    a.Pi = c;
                    !0 === c.Er.simulated ? (b.preventDefault(), b.simulated = !0) : (Sh = null, a.doMouseDown(), a.Pi = a.Pi.copy(), 1 === b.button ? b.preventDefault() :
                        am(c, b))
                }
            }
        };
        a.Sn = function (b)
        {
            if (a.isEnabled)
                if (a.gk && 2 === b.button) b.preventDefault();
                else if (a.gk && 0 === b.button && (a.gk = !1), a.wp) b.preventDefault();
                else
                {
                    a.dh = !0;
                    var c = a.wd;
                    if (w.Gn)
                    {
                        if (400 > b.timeStamp - a.jk)
                        {
                            b.preventDefault();
                            return
                        }
                        a.jk = b.timeStamp
                    }
                    if (w.Gn && null !== a.pt) a.pt = null, b.preventDefault();
                    else
                    {
                        a.wd = a.Rb;
                        a.Rb = c;
                        Wl(a, a, b, c, !0);
                        c.up = !0;
                        c.te = b.detail;
                        if (w.cq || w.dq) c.te = a.Vh;
                        c.bubbles = b.bubbles;
                        c.If = Yl(b);
                        a.simulatedMouseUp(b, null, new y, c.If) || (a.doMouseUp(), Yh(a), am(c, b))
                    }
                }
        };
        a.Tn = function (b)
        {
            if (a.isEnabled)
            {
                var c =
                    a.wd;
                a.wd = a.Rb;
                a.Rb = c;
                Wl(a, a, b, c, !0);
                c.bubbles = !0;
                var d = 0,
                    e = 0;
                void 0 !== b.wheelDeltaX ? (d = 0 < b.wheelDeltaX ? 1 : -1, e = 0 < b.wheelDeltaY ? 1 : -1, c.oi = Math.abs(b.wheelDeltaX) > Math.abs(b.wheelDeltaY) ? -d : -e) : void 0 !== b.deltaX ? (d = 0 < b.deltaX ? 1 : -1, e = 0 < b.deltaY ? 1 : -1, c.oi = Math.abs(b.deltaX) > Math.abs(b.deltaY) ? -d : -e) : c.oi = void 0 !== b.wheelDelta ? 0 < b.wheelDelta ? 1 : -1 : 0;
                a.doMouseWheel();
                am(c, b)
            }
        };
        a.Rn = function ()
        {
            if (a.isEnabled)
            {
                a.dh = !1;
                var b = a.Xa;
                b.cancelWaitAfter();
                b.standardMouseOver()
            }
        };
        a.QB = function (b)
        {
            if (a.isEnabled)
            {
                a.wp = !1;
                a.gk = !0;
                var c = Zl(a, b, b.targetTouches[0], 1 < b.touches.length);
                a.doMouseDown();
                am(c, b)
            }
        };
        a.PB = function (b)
        {
            if (a.isEnabled)
            {
                var c = null;
                0 < b.targetTouches.length ? c = b.targetTouches[0] : 0 < b.changedTouches.length && (c = b.changedTouches[0]);
                var d = $l(a, b, c, 1 < b.touches.length);
                a.simulatedMouseMove(c ? c : b, null, d.If) || a.doMouseMove();
                am(d, b)
            }
        };
        a.OB = function (b)
        {
            if (a.isEnabled)
                if (a.wp) b.preventDefault();
                else if (!(1 < b.touches.length))
                {
                    var c = null,
                        d = null;
                    0 < b.targetTouches.length ? d = b.targetTouches[0] : 0 < b.changedTouches.length &&
                        (d = b.changedTouches[0]);
                    var e = a.wd;
                    a.wd = a.Rb;
                    a.Rb = e;
                    e.g = a;
                    e.te = 1;
                    if (null !== d)
                    {
                        c = window.document.elementFromPoint(d.clientX, d.clientY);
                        null !== c && c.aa instanceof D && c.aa !== a && Xl(c.aa, d, e);
                        Xl(a, d, e);
                        var m = d.screenX,
                            n = d.screenY,
                            p = a.fw;
                        b.timeStamp - a.jk < a.bA && !(25 < Math.abs(p.x - m) || 25 < Math.abs(p.y - n)) ? a.Vh++ : a.Vh = 1;
                        e.te = a.Vh;
                        a.jk = b.timeStamp;
                        a.fw.m(m, n)
                    }
                    m = 0;
                    b.ctrlKey && (m += 1);
                    b.altKey && (m += 2);
                    b.shiftKey && (m += 4);
                    b.metaKey && (m += 8);
                    e.md = m;
                    e.button = 0;
                    e.buttons = 1;
                    e.Hk = !1;
                    e.up = !0;
                    e.oi = 0;
                    e.tc = !1;
                    e.bubbles = !1;
                    e.event =
                        b;
                    e.timestamp = Date.now();
                    e.If = null === c ? Yl(b) : c.aa ? c.aa : null;
                    e.Be = null;
                    a.simulatedMouseUp(d ? d : b, null, new y, e.If) || a.doMouseUp();
                    am(e, b);
                    a.gk = !1
                }
        };
        a.nq = function (b)
        {
            if (a.isEnabled)
            {
                a.dh = !0;
                var c = a.Nz;
                void 0 === c[b.pointerId] && (c[b.pointerId] = b);
                var c = a.gp,
                    d = !1;
                if (null !== c[0] && c[0].pointerId === b.pointerId) c[0] = b;
                else if (null !== c[1] && c[1].pointerId === b.pointerId) c[1] = b, d = !0;
                else if (null === c[0]) c[0] = b;
                else if (null === c[1]) c[1] = b, d = !0;
                else
                {
                    b.preventDefault();
                    return
                }
                if ("touch" === b.pointerType || "pen" === b.pointerType) a.wp = !1, a.gk = !0;
                c = Zl(a, b, b, d);
                "touch" !== b.pointerType && (c.button = b.button, void 0 === b.buttons || w.uu || (c.buttons = b.buttons), w.yh && 0 === b.button && b.ctrlKey && (c.button = 2));
                a.doMouseDown();
                1 === b.button ? b.preventDefault() : am(c, b)
            }
        };
        a.oq = function (b)
        {
            if (a.isEnabled)
            {
                a.dh = !0;
                var c = a.gp;
                if (null !== c[0] && c[0].pointerId === b.pointerId) c[0] = b;
                else
                {
                    if (null !== c[1] && c[1].pointerId === b.pointerId)
                    {
                        c[1] = b;
                        return
                    }
                    if (null === c[0]) c[0] = b;
                    else return
                }
                c[0].pointerId === b.pointerId && (c = $l(a, b, b, null !== c[1]), "touch" !== b.pointerType &&
                (c.button = b.button, void 0 === b.buttons || w.uu || (c.buttons = b.buttons), w.yh && 0 === b.button && b.ctrlKey && (c.button = 2)), a.simulatedMouseMove(b, null, c.If) || (a.doMouseMove(), am(c, b)))
            }
        };
        a.qq = function (b)
        {
            if (a.isEnabled)
            {
                a.dh = !0;
                var c = "touch" === b.pointerType || "pen" === b.pointerType,
                    d = a.Nz;
                if (c && a.wp) delete d[b.pointerId], b.preventDefault();
                else if (d = a.gp, null !== d[0] && d[0].pointerId === b.pointerId)
                {
                    d[0] = null;
                    d = a.wd;
                    a.wd = a.Rb;
                    a.Rb = d;
                    var e = window.document.elementFromPoint(b.clientX, b.clientY);
                    null !== e && e.aa instanceof
                    D && e.aa !== a && Xl(e.aa, b, d);
                    Xl(a, b, d);
                    d.g = a;
                    var m = a.fw,
                        n = c ? 25 : 10;
                    b.timeStamp - a.jk < a.bA && !(Math.abs(m.x - b.screenX) > n || Math.abs(m.y - b.screenY) > n) ? a.Vh++ : a.Vh = 1;
                    d.te = a.Vh;
                    a.jk = b.timeStamp;
                    a.fw.m(b.screenX, b.screenY);
                    m = 0;
                    b.ctrlKey && (m += 1);
                    b.altKey && (m += 2);
                    b.shiftKey && (m += 4);
                    b.metaKey && (m += 8);
                    d.md = m;
                    d.button = b.button;
                    void 0 === b.buttons || w.uu || (d.buttons = b.buttons);
                    w.yh && 0 === b.button && b.ctrlKey && (d.button = 2);
                    d.Hk = !1;
                    d.up = !0;
                    d.oi = 0;
                    d.tc = !1;
                    d.bubbles = !0;
                    d.event = b;
                    d.timestamp = Date.now();
                    d.If = null === e ? Yl(b) :
                        e.aa ? e.aa : null;
                    d.Be = null;
                    a.simulatedMouseUp(b, null, new y, d.If) || (a.doMouseUp(), Yh(a), am(d, b), c && (a.gk = !1))
                }
                else null !== d[1] && d[1].pointerId === b.pointerId && (d[1] = null)
            }
        };
        a.pq = function (b)
        {
            if (a.isEnabled)
            {
                a.dh = !1;
                var c = a.Nz;
                c[b.pointerId] && delete c[b.pointerId];
                c = a.gp;
                null !== c[0] && c[0].pointerId === b.pointerId && (c[0] = null);
                null !== c[1] && c[1].pointerId === b.pointerId && (c[1] = null);
                "touch" !== b.pointerType && "pen" !== b.pointerType && (b = a.Xa, b.cancelWaitAfter(), b.standardMouseOver())
            }
        };
        d.Ke(!0);
        Il(a)
    }

    function Pn(a)
    {
        1 < arguments.length && w.k("Palette constructor can only take one optional argument, the DIV HTML element or its id.");
        D.call(this, a);
        this.Nt = !0;
        this.Pl = !1;
        this.ib = !0;
        this.qA = Bb;
        this.Tb = new Qn
    }
    w.La(Pn, D);
    w.ga("Palette", Pn);

    function Al(a)
    {
        1 < arguments.length && w.k("Overview constructor can only take one optional argument, the DIV HTML element or its id.");
        D.call(this, a);
        this.Ka.isEnabled = !1;
        this.Vc = !0;
        this.qk = null;
        this.Kv = !0;
        this.IJ("drawShadows", !1);
        var b = new R,
            c = new X;
        c.stroke = "magenta";
        c.mb = 2;
        c.fill = "transparent";
        c.name = "BOXSHAPE";
        b.lm = !0;
        b.yB = "BOXSHAPE";
        b.$A = "BOXSHAPE";
        b.iG = "BOXSHAPE";
        b.cursor = "move";
        b.add(c);
        this.Am = b;
        c = new jh;
        c.type = Oj;
        c.Ff = Jb;
        var d = new Pj;
        d.ff = !0;
        c.add(d);
        d = new X;
        d.oh = Jb;
        d.Gb = "Rectangle";
        d.Ca = new ia(64,
            64);
        d.cursor = "se-resize";
        d.alignment = Sb;
        c.add(d);
        b.gG = c;
        this.ln = this.Ck = !1;
        this.Af = this.Pt = !0;
        this.FE = new hb(0, 0, 0, 0);
        this.Xz = new Vc(null);
        this.dH = this.Xz.Gk;
        this.Va.ce = new Rn;
        this.Va.jG = new Sn;
        var e = this;
        this.click = function ()
        {
            var a = e.qk;
            if (null !== a)
            {
                var b = a.sb,
                    c = e.Q.da;
                a.position = new y(c.x - b.width / 2, c.y - b.height / 2)
            }
        };
        this.VF = function ()
        {
            Tn(e)
        };
        this.UF = function ()
        {
            null !== e.qk && (e.Fc(), e.oa())
        };
        this.Rl = Ul;
        this.Vc = !1
    }
    w.La(Al, D);
    w.ga("Overview", Al);

    function Un(a)
    {
        a.Vc || a.Zd || !1 !== a.Tf || (a.Tf = !0, requestAnimationFrame(function ()
        {
            if (a.Tf && !a.Zd && (a.Tf = !1, null !== a.Ob))
            {
                a.Zd = !0;
                Ii(a);
                a.be.I() || Tl(a, a.sh());
                null === a.Ob && w.k("No div specified");
                null === a.yb && w.k("No canvas specified");
                if (a.Fe)
                {
                    var b = a.qk;
                    if (null !== b && !b.Ka.df && !b.Ka.rc)
                    {
                        var b = a.hf,
                            c = a.Xz;
                        b.setTransform(1, 0, 0, 1, 0, 0);
                        b.clearRect(0, 0, a.yb.width, a.yb.height);
                        b.drawImage(c.Od, 0, 0);
                        c = a.kd;
                        c.reset();
                        1 !== a.scale && c.scale(a.scale);
                        0 === a.position.x && 0 === a.position.y || c.translate(-a.position.x, -a.position.y);
                        b.scale(a.Jd, a.Jd);
                        b.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy);
                        for (var c = a.dc.n, d = c.length, e = 0; e < d; e++) c[e].ve(b, a);
                        a.tl = !1;
                        a.Fe = !1
                    }
                }
                a.Zd = !1
            }
        }))
    }
    Al.prototype.computePixelRatio = function ()
    {
        return 1
    };
    Al.prototype.ve = function ()
    {
        null === this.Ob && w.k("No div specified");
        null === this.yb && w.k("No canvas specified");
        if (this.Fe)
        {
            var a = this.qk;
            if (null !== a && !a.Ka.df)
            {
                Im(this);
                var b = a.En;
                (null !== b && b.visible && isNaN(b.width) || isNaN(b.height)) && em(a);
                var c = this.yb,
                    b = this.hf,
                    d = this.Xz,
                    e = this.dH;
                d.width = c.width;
                d.height = c.height;
                b.Ke(!0);
                b.setTransform(1, 0, 0, 1, 0, 0);
                b.clearRect(0, 0, c.width, c.height);
                d = this.kd;
                d.reset();
                1 !== this.scale && d.scale(this.scale);
                0 === this.position.x && 0 === this.position.y || d.translate(-this.position.x, -this.position.y);
                b.scale(this.Jd, this.Jd);
                b.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
                for (var d = this.Kv, f = this.sb, h = a.dc.n, k = h.length, a = 0; a < k; a++)
                {
                    var l = h[a],
                        m = b,
                        n = f,
                        p = d;
                    if (l.visible && 0 !== l.Bc && (void 0 === p && (p = !0), p || !l.Pc))
                    {
                        1 !== l.Bc && (m.globalAlpha = l.Bc);
                        for (var p = this.scale, l = l.Ab.n, q = l.length, r = 0; r < q; r++)
                        {
                            var s = l[r],
                                u = s.U;
                            u.Zf(n) && (1 < u.width * p || 1 < u.height * p ? s.ve(m, this) : ml(s, m))
                        }
                        m.globalAlpha = 1
                    }
                }
                e.drawImage(c.Od, 0, 0);
                c = this.dc.n;
                e = c.length;
                for (a = 0; a < e; a++) c[a].ve(b, this);
                this.Fe = this.tl = !1
            }
        }
    };
    w.defineProperty(Al,
        {
            lB: "observed"
        }, function ()
        {
            return this.qk
        }, function (a)
        {
            var b = this.qk;
            null !== a && w.G(a, D, Al, "observed");
            a instanceof Al && w.k("Overview.observed Diagram may not be an Overview itself: " + a);
            b !== a && (null !== b && (this.remove(this.rh), b.rB("ViewportBoundsChanged", this.VF), b.rB("DocumentBoundsChanged", this.UF), b.xw.remove(this)), this.qk = a, null !== a && (a.Zw("ViewportBoundsChanged", this.VF), a.Zw("DocumentBoundsChanged", this.UF), a.xw.add(this), this.add(this.rh), Tn(this)), this.Fc(), this.h("observed",
                b, a))
        });
    w.defineProperty(Al,
        {
            rh: "box"
        }, function ()
        {
            return this.Am
        }, function (a)
        {
            var b = this.Am;
            b !== a && (this.Am = a, this.remove(b), this.add(this.Am), Tn(this), this.h("box", b, a))
        });
    w.defineProperty(Al,
        {
            bL: "drawsTemporaryLayers"
        }, function ()
        {
            return this.Kv
        }, function (a)
        {
            this.Kv !== a && (this.Kv = a, this.Pu())
        });

    function Tn(a)
    {
        var b = a.rh;
        if (null !== b)
        {
            var c = a.qk;
            if (null !== c)
            {
                a.Fe = !0;
                var c = c.sb,
                    d = b.zq,
                    e = w.rm();
                e.m(c.width, c.height);
                d.Ca = e;
                w.Lk(e);
                a = 2 / a.scale;
                d instanceof X && (d.mb = a);
                b.location = new y(c.x - a / 2, c.y - a / 2)
            }
        }
    }
    Al.prototype.sh = function ()
    {
        var a = this.qk;
        return null === a ? dd : a.be
    };
    Al.prototype.wF = function ()
    {
        !0 !== this.Fe && (this.Fe = !0, Un(this))
    };
    Al.prototype.Mu = function (a, b, c, d, e)
    {
        this.Vc || (Ol(this), this.oa(), bm(this), this.Fc(), Tn(this), this.nh.scale = c, this.nh.position.x = a.x, this.nh.position.y = a.y, this.nh.bounds.set(a), this.nh.isScroll = e, this.Aa("ViewportBoundsChanged", this.nh, a))
    };

    function Rn()
    {
        nh.call(this);
        this.Cl = null
    }
    w.La(Rn, nh);
    Rn.prototype.canStart = function ()
    {
        if (!this.isEnabled) return !1;
        var a = this.g;
        if (null === a || !a.Pl || !a.Af) return !1;
        var b = a.lB;
        if (null === b) return !1;
        if (null === this.findDraggablePart())
        {
            var c = b.sb;
            this.Cl = new y(c.width / 2, c.height / 2);
            a = a.Ec.da;
            b.position = new y(a.x - this.Cl.x, a.y - this.Cl.y)
        }
        return !0
    };
    Rn.prototype.doActivate = function ()
    {
        this.Cl = null;
        nh.prototype.doActivate.call(this)
    };
    Rn.prototype.moveParts = function ()
    {
        var a = this.g,
            b = a.lB;
        if (null !== b)
        {
            var c = a.rh;
            if (null !== c)
            {
                if (null === this.Cl)
                {
                    var d = a.Ec.da,
                        c = c.location;
                    this.Cl = new y(d.x - c.x, d.y - c.y)
                }
                a = a.Q.da;
                b.position = new y(a.x - this.Cl.x, a.y - this.Cl.y)
            }
        }
    };

    function Sn()
    {
        Nj.call(this)
    }
    w.La(Sn, Nj);
    Sn.prototype.resize = function (a)
    {
        var b = this.g.lB;
        if (null !== b)
        {
            var c = b.sb.copy();
            b.position = a.position;
            (c.width !== a.width || c.height !== a.height) && 0 < a.width && 0 < a.height && (b.scale = Math.min(c.width / a.width, c.height / a.height))
        }
    };

    function Vn()
    {
        this.gg = this.bd = this.Ed = this.Gc = 0
    }

    function ga(a)
    {
        1 < arguments.length && w.k("Brush constructor can take at most one optional argument, the Brush type.");
        w.nc(this);
        this.P = !1;
        void 0 === a ? (this.na = cg, this.ro = "black") : "string" === typeof a ? (this.na = cg, this.ro = a) : (this.na = a, this.ro = "black");
        var b = this.na;
        b === og ? (this.pp = Bb, this.Eo = Rb) : this.Eo = b === Xc ? this.pp = Jb : this.pp = yb;
        this.Ow = 0;
        this.Lv = NaN;
        this.$g = this.zw = this.Zg = null;
        this.$y = this.so = 0
    }
    w.ga("Brush", ga);
    var cg;
    ga.Solid = cg = w.p(ga, "Solid", 0);
    var og;
    ga.Linear = og = w.p(ga, "Linear", 1);
    var Xc;
    ga.Radial = Xc = w.p(ga, "Radial", 2);
    var Wn;
    ga.Pattern = Wn = w.p(ga, "Pattern", 4);
    var Xn;
    ga.Lab = Xn = w.p(ga, "Lab", 5);
    var Yn;
    ga.HSL = Yn = w.p(ga, "HSL", 6);
    ga.prototype.copy = function ()
    {
        var a = new ga;
        a.na = this.na;
        a.ro = this.ro;
        a.pp = this.pp.S();
        a.Eo = this.Eo.S();
        a.Ow = this.Ow;
        a.Lv = this.Lv;
        null !== this.Zg && (a.Zg = this.Zg.copy());
        a.zw = this.zw;
        return a
    };
    g = ga.prototype;
    g.Ha = function ()
    {
        this.freeze();
        Object.freeze(this);
        return this
    };
    g.freeze = function ()
    {
        this.P = !0;
        null !== this.Zg && this.Zg.freeze();
        return this
    };
    g.Qa = function ()
    {
        Object.isFrozen(this) && w.k("cannot thaw constant: " + this);
        this.P = !1;
        null !== this.Zg && this.Zg.Qa();
        return this
    };
    g.gc = function (a)
    {
        a.Je === ga ? this.type = a : w.Mj(this, a)
    };
    g.toString = function ()
    {
        var a = "Brush(";
        if (this.type === cg) a += this.color;
        else if (a = this.type === og ? a + "Linear " : this.type === Xc ? a + "Radial " : this.type === Wn ? a + "Pattern " : a + "(unknown) ", a += this.start + " " + this.end, null !== this.Dk)
            for (var b = this.Dk.i; b.next();) a += " " + b.key + ":" + b.value;
        return a + ")"
    };
    ga.prototype.addColorStop = ga.prototype.addColorStop = function (a, b)
    {
        this.P && w.ma(this);
        ("number" !== typeof a || !isFinite(a) || 1 < a || 0 > a) && w.Fa(a, "0 <= loc <= 1", ga, "addColorStop:loc");
        w.j(b, "string", ga, "addColorStop:color");
        null === this.Zg && (this.Zg = new ma("number", "string"));
        this.Zg.add(a, b);
        this.na === cg && (this.type = og);
        this.$g = null
    };
    w.defineProperty(ga,
        {
            type: "type"
        }, function ()
        {
            return this.na
        }, function (a)
        {
            this.P && w.ma(this, a);
            w.ob(a, ga, ga, "type");
            this.na = a;
            this.start.Td() && (a === og ? this.start = Bb : a === Xc && (this.start = Jb));
            this.end.Td() && (a === og ? this.end = Rb : a === Xc && (this.end = Jb));
            this.$g = null
        });
    w.defineProperty(ga,
        {
            color: "color"
        }, function ()
        {
            return this.ro
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.ro = a;
            this.$g = null
        });
    w.defineProperty(ga,
        {
            start: "start"
        }, function ()
        {
            return this.pp
        }, function (a)
        {
            this.P && w.ma(this, a);
            w.G(a, K, ga, "start");
            this.pp = a.S();
            this.$g = null
        });
    w.defineProperty(ga,
        {
            end: "end"
        }, function ()
        {
            return this.Eo
        }, function (a)
        {
            this.P && w.ma(this, a);
            w.G(a, K, ga, "end");
            this.Eo = a.S();
            this.$g = null
        });
    w.defineProperty(ga,
        {
            bv: "startRadius"
        }, function ()
        {
            return this.Ow
        }, function (a)
        {
            this.P && w.ma(this, a);
            w.Ad(a, ga, "startRadius");
            0 > a && w.Fa(a, ">= zero", ga, "startRadius");
            this.Ow = a;
            this.$g = null
        });
    w.defineProperty(ga,
        {
            Wt: "endRadius"
        }, function ()
        {
            return this.Lv
        }, function (a)
        {
            this.P && w.ma(this, a);
            w.Ad(a, ga, "endRadius");
            0 > a && w.Fa(a, ">= zero", ga, "endRadius");
            this.Lv = a;
            this.$g = null
        });
    w.defineProperty(ga,
        {
            Dk: "colorStops"
        }, function ()
        {
            return this.Zg
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.Zg = a;
            this.$g = null
        });
    w.defineProperty(ga,
        {
            pattern: "pattern"
        }, function ()
        {
            return this.zw
        }, function (a)
        {
            this.P && w.ma(this, a);
            this.zw = a;
            this.$g = null
        });
    ga.randomColor = function (a, b)
    {
        void 0 === a && (a = 128);
        void 0 === b && (b = Math.max(a, 255));
        var c = Math.abs(b - a),
            d = Math.floor(a + Math.random() * c).toString(16),
            e = Math.floor(a + Math.random() * c).toString(16),
            c = Math.floor(a + Math.random() * c).toString(16);
        2 > d.length && (d = "0" + d);
        2 > e.length && (e = "0" + e);
        2 > c.length && (c = "0" + c);
        return "#" + d + e + c
    };
    var Zn = (new Vc(null)).Gk,
        fa;
    ga.isValidColor = fa = function (a)
    {
        if ("black" === a) return !0;
        if ("" === a) return !1;
        Zn.fillStyle = "#000000";
        var b = Zn.fillStyle;
        Zn.fillStyle = a;
        if (Zn.fillStyle !== b) return !0;
        Zn.fillStyle = "#FFFFFF";
        b = Zn.fillStyle;
        Zn.fillStyle = a;
        return Zn.fillStyle !== b
    };
    var $n = new Vn,
        ao = new Vn,
        bo = new Vn,
        co = new Vn;
    ga.lighten = function (a)
    {
        return eo(a)
    };
    ga.prototype.lightenBy = function (a, b)
    {
        this.P && w.ma(this);
        var c = void 0 === a || "number" !== typeof a ? .2 : a,
            d = void 0 === b ? Xn : b;
        if (this.type === cg) fo(this.color), this.color = ho(c, d);
        else if ((this.type === og || this.type === Xc) && null !== this.Dk)
            for (var e = this.Dk.i; e.next();) fo(e.value), this.addColorStop(e.key, ho(c, d));
        return this
    };
    var eo;
    ga.lightenBy = eo = function (a, b, c)
    {
        b = void 0 === b || "number" !== typeof b ? .2 : b;
        c = void 0 === c ? Xn : c;
        fo(a);
        return ho(b, c)
    };
    ga.darken = function (a)
    {
        return io(a)
    };
    ga.prototype.darkenBy = function (a, b)
    {
        this.P && w.ma(this);
        var c = void 0 === a || "number" !== typeof a ? .2 : a,
            d = void 0 === b ? Xn : b;
        if (this.type === cg) fo(this.color), this.color = ho(-c, d);
        else if ((this.type === og || this.type === Xc) && null !== this.Dk)
            for (var e = this.Dk.i; e.next();) fo(e.value), this.addColorStop(e.key, ho(-c, d));
        return this
    };
    var io;
    ga.darkenBy = io = function (a, b, c)
    {
        b = void 0 === b || "number" !== typeof b ? .2 : b;
        c = void 0 === c ? Xn : c;
        fo(a);
        return ho(-b, c)
    };

    function ho(a, b)
    {
        switch (b)
        {
            case Xn:
                var c = 100 * jo($n.Gc),
                    d = 100 * jo($n.Ed),
                    e = 100 * jo($n.bd);
                bo.Gc = .4124564 * c + .3575761 * d + .1804375 * e;
                bo.Ed = .2126729 * c + .7151522 * d + .072175 * e;
                bo.bd = .0193339 * c + .119192 * d + .9503041 * e;
                bo.gg = $n.gg;
                c = ko(bo.Gc / lo[0]);
                d = ko(bo.Ed / lo[1]);
                e = ko(bo.bd / lo[2]);
                co.Gc = 116 * d - 16;
                co.Ed = 500 * (c - d);
                co.bd = 200 * (d - e);
                co.gg = bo.gg;
                co.Gc = Math.min(100, Math.max(0, co.Gc + 100 * a));
                c = (co.Gc + 16) / 116;
                d = c - co.bd / 200;
                bo.Gc = lo[0] * mo(co.Ed / 500 + c);
                bo.Ed = lo[1] * (co.Gc > no * oo ? Math.pow(c, 3) : co.Gc / no);
                bo.bd = lo[2] * mo(d);
                bo.gg =
                    co.gg;
                c = -.969266 * bo.Gc + 1.8760108 * bo.Ed + .041556 * bo.bd;
                d = .0556434 * bo.Gc + -.2040259 * bo.Ed + 1.0572252 * bo.bd;
                $n.Gc = 255 * po((3.2404542 * bo.Gc + -1.5371385 * bo.Ed + -.4985314 * bo.bd) / 100);
                $n.Ed = 255 * po(c / 100);
                $n.bd = 255 * po(d / 100);
                $n.gg = bo.gg;
                $n.Gc = Math.round($n.Gc);
                255 < $n.Gc ? $n.Gc = 255 : 0 > $n.Gc && ($n.Gc = 0);
                $n.Ed = Math.round($n.Ed);
                255 < $n.Ed ? $n.Ed = 255 : 0 > $n.Ed && ($n.Ed = 0);
                $n.bd = Math.round($n.bd);
                255 < $n.bd ? $n.bd = 255 : 0 > $n.bd && ($n.bd = 0);
                return "rgba(" + $n.Gc + ", " + $n.Ed + ", " + $n.bd + ", " + $n.gg + ")";
            case Yn:
                var e = $n.Gc / 255,
                    f = $n.Ed /
                        255,
                    h = $n.bd / 255,
                    k = Math.max(e, f, h),
                    d = Math.min(e, f, h),
                    l = k - d,
                    d = (k + d) / 2;
                if (0 === l) c = e = 0;
                else
                {
                    switch (k)
                    {
                        case e:
                            c = (f - h) / l % 6;
                            break;
                        case f:
                            c = (h - e) / l + 2;
                            break;
                        case h:
                            c = (e - f) / l + 4
                    }
                    c *= 60;
                    0 > c && (c += 360);
                    e = l / (1 - Math.abs(2 * d - 1))
                }
                ao.Gc = Math.round(c);
                ao.Ed = Math.round(100 * e);
                ao.bd = Math.round(100 * d);
                ao.gg = $n.gg;
                ao.bd = Math.min(100, Math.max(0, ao.bd + 100 * a));
                return "hsla(" + ao.Gc + ", " + ao.Ed + "%, " + ao.bd + "%, " + ao.gg + ")";
            default:
                return w.k("Unknown color space: " + b), "rgba(0, 0, 0, 1)"
        }
    }

    function fo(a)
    {
        Zn.clearRect(0, 0, 1, 1);
        Zn.fillStyle = "#000000";
        var b = Zn.fillStyle;
        Zn.fillStyle = a;
        Zn.fillStyle !== b ? (Zn.fillRect(0, 0, 1, 1), a = Zn.getImageData(0, 0, 1, 1).data, $n.Gc = a[0], $n.Ed = a[1], $n.bd = a[2], $n.gg = a[3] / 255) : (Zn.fillStyle = "#FFFFFF", Zn.fillStyle = a, $n.Gc = 0, $n.Ed = 0, $n.bd = 0, $n.gg = 1)
    }

    function jo(a)
    {
        a /= 255;
        return .04045 >= a ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4)
    }

    function po(a)
    {
        return .0031308 >= a ? 12.92 * a : 1.055 * Math.pow(a, 1 / 2.4) - .055
    }
    var oo = 216 / 24389,
        no = 24389 / 27,
        lo = [95.047, 100, 108.883];

    function ko(a)
    {
        return a > oo ? Math.pow(a, 1 / 3) : (no * a + 16) / 116
    }

    function mo(a)
    {
        var b = a * a * a;
        return b > oo ? b : (116 * a - 16) / no
    }

    function G()
    {
        w.nc(this);
        this.M = 4225027;
        this.Bc = 1;
        this.ej = null;
        this.Sb = "";
        this.cc = this.Ib = null;
        this.$a = (new y(NaN, NaN)).freeze();
        this.Te = Fd;
        this.Zh = qd;
        this.Yh = Dd;
        this.kd = new ka;
        this.wm = new ka;
        this.Wi = new ka;
        this.qb = this.Co = 1;
        this.lg = 0;
        this.Eg = qo;
        this.Qm = ed;
        this.ud = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.oc = (new B(NaN, NaN, NaN, NaN)).freeze();
        this.Wc = (new B(0, 0, NaN, NaN)).freeze();
        this.W = this.Rs = this.Ss = null;
        this.vm = this.me = qc;
        this.dt = 0;
        this.gj = 1;
        this.br = 0;
        this.Fi = 1;
        this.tt = null;
        this.ht = -Infinity;
        this.an =
            0;
        this.bn = cd;
        this.cn = mj;
        this.kr = "";
        this.yc = this.ia = null;
        this.po = -1;
        this.gn = this.ng = this.jl = this.op = null;
        this.Oz = pj;
        this.Xm = null
    }
    w.ni(G);
    w.ga("GraphObject", G);
    G.prototype.cloneProtected = function (a)
    {
        a.M = this.M | 6144;
        a.Bc = this.Bc;
        a.Sb = this.Sb;
        a.Ib = this.Ib;
        a.cc = this.cc;
        a.$a.assign(this.$a);
        a.Te = this.Te.S();
        a.Zh = this.Zh.S();
        a.Yh = this.Yh.S();
        a.Wi = this.Wi.copy();
        a.qb = this.qb;
        a.lg = this.lg;
        a.Eg = this.Eg;
        a.Qm = this.Qm.S();
        a.ud.assign(this.ud);
        a.oc.assign(this.oc);
        a.Wc.assign(this.Wc);
        a.Rs = this.Rs;
        null !== this.W && (a.W = this.W.copy());
        a.me = this.me.S();
        a.vm = this.vm.S();
        a.dt = this.dt;
        a.gj = this.gj;
        a.br = this.br;
        a.Fi = this.Fi;
        a.tt = this.tt;
        a.ht = this.ht;
        a.an = this.an;
        a.bn = this.bn.S();
        a.cn = this.cn;
        a.kr = this.kr;
        null !== this.ia && (a.ia = this.ia.copy());
        a.yc = this.yc;
        a.po = this.po;
        null !== this.jl && (a.jl = w.Tl(this.jl));
        null !== this.ng && (a.ng = this.ng.copy());
        a.gn = this.gn
    };
    G.prototype.addCopyProperty = G.prototype.jH = function (a)
    {
        var b = this.jl;
        if (w.isArray(b))
            for (var c = 0; c < b.length; c++)
            {
                if (b[c] === a) return
            }
        else this.jl = b = [];
        b.push(a)
    };
    G.prototype.pi = function (a)
    {
        a.Ss = null;
        a.Xm = null;
        a.H()
    };
    G.prototype.clone = function ()
    {
        var a = new this.constructor;
        this.cloneProtected(a);
        if (null !== this.jl)
            for (var b = 0; b < this.jl.length; b++)
            {
                var c = this.jl[b];
                a[c] = this[c]
            }
        return a
    };
    G.prototype.copy = function ()
    {
        return this.clone()
    };
    G.prototype.gc = function (a)
    {
        a.Je === W ? 0 === a.name.indexOf("Orient") ? this.yq = a : w.k("Unknown Link enum value for GraphObject.segmentOrientation property: " + a) : a.Je === G ? this.stretch = a : w.Mj(this, a)
    };
    G.prototype.toString = function ()
    {
        return w.pf(Object.getPrototypeOf(this)) + "#" + w.Pd(this)
    };
    var Qj;
    G.None = Qj = w.p(G, "None", 0);
    var qo;
    G.Default = qo = w.p(G, "Default", 0);
    var ro;
    G.Vertical = ro = w.p(G, "Vertical", 4);
    var so;
    G.Horizontal = so = w.p(G, "Horizontal", 5);
    var Ee;
    G.Fill = Ee = w.p(G, "Fill", 3);
    var Sj;
    G.Uniform = Sj = w.p(G, "Uniform", 1);
    var to;
    G.UniformToFill = to = w.p(G, "UniformToFill", 2);
    var uo;
    G.FlipVertical = uo = w.p(G, "FlipVertical", 1);
    var vo;
    G.FlipHorizontal = vo = w.p(G, "FlipHorizontal", 2);
    var wo;
    G.FlipBoth = wo = w.p(G, "FlipBoth", 3);

    function xo(a)
    {
        null === a.ia && (a.ia = new yo)
    }
    G.prototype.Qd = function ()
    {
        if (null === this.W)
        {
            var a = new zo;
            a.ak = yb;
            a.zk = yb;
            a.Zj = 10;
            a.xk = 10;
            a.Yj = Ao;
            a.wk = Ao;
            a.$j = 0;
            a.yk = 0;
            this.W = a
        }
    };

    function Bo(a, b, c, d, e, f, h)
    {
        var k = .001,
            l = f.length;
        a.moveTo(b, c);
        d -= b;
        k = e - c;
        0 === d && (d = .001);
        e = k / d;
        for (var m = Math.sqrt(d * d + k * k), n = 0, p = !0, q = 0 === h ? !1 : !0; .1 <= m;)
        {
            if (q)
            {
                k = f[n++ % l];
                for (k -= h; 0 > k;) k += f[n++ % l], p = !p;
                q = !1
            }
            else k = f[n++ % l];
            k > m && (k = m);
            var r = Math.sqrt(k * k / (1 + e * e));
            0 > d && (r = -r);
            b += r;
            c += e * r;
            p ? a.lineTo(b, c) : a.moveTo(b, c);
            m -= k;
            p = !p
        }
    }
    G.prototype.raiseChangedEvent = G.prototype.cd = function (a, b, c, d, e, f, h)
    {
        var k = this.V;
        if (null !== k && (k.Xn(a, b, c, d, e, f, h), Co(this) && c === this && a === Cf && Do(this, k, b), c === k && 0 !== (k.M & 16777216) && null !== k.data))
            for (a = this.xa.n, c = a.length, d = 0; d < c; d++) e = a[d], e instanceof C && Pm(e, function (a)
            {
                null !== a.data && 0 !== (a.M & 16777216) && a.Lb(b)
            })
    };

    function Do(a, b, c)
    {
        var d = a.Yl();
        if (null !== d)
            for (var e = a.yc.i; e.next();)
            {
                var f = e.value,
                    h = null;
                if (null !== f.Fq)
                {
                    h = dh(f, d, a);
                    if (null === h) continue;
                    f.Dy(a, h, c, null)
                }
                else if (f.Nx)
                {
                    var k = b.g;
                    null === k || k.Qe || f.Dy(a, k.$.Sk, c, d)
                }
                else
                {
                    var l = d.data;
                    if (null === l) continue;
                    k = b.g;
                    null === k || k.Qe || f.Dy(a, l, c, d)
                }
                h === a && (k = d.Bx(f.qm), null !== k && f.JG(k, h, c))
            }
    }
    G.prototype.Bx = function (a)
    {
        return this.po === a ? this : null
    };
    G.prototype.raiseChanged = G.prototype.h = function (a, b, c)
    {
        this.cd(Cf, a, this, b, c)
    };

    function Eo(a, b, c, d, e)
    {
        var f = a.ud,
            h = a.Wi;
        h.reset();
        Fo(a, h, b, c, d, e);
        a.Wi = h;
        f.x = b;
        f.y = c;
        f.width = d;
        f.height = e;
        h.vu() || h.GG(f)
    }

    function Go(a, b, c, d)
    {
        if (!1 === a.Tg) return !1;
        d.multiply(a.transform);
        return c ? a.Zf(b, d) : a.sn(b, d)
    }
    G.prototype.cF = function (a, b, c)
    {
        if (!1 === this.Tg) return !1;
        var d = this.Ja;
        b = a.Bf(b);
        var e = !1;
        c && (e = Ra(a.x, a.y, 0, 0, 0, d.height) < b || Ra(a.x, a.y, 0, d.height, d.width, d.height) < b || Ra(a.x, a.y, d.width, d.height, d.width, 0) < b || Ra(a.x, a.y, d.width, 0, 0, 0) < b);
        c || (e = Ra(a.x, a.y, 0, 0, 0, d.height) < b && Ra(a.x, a.y, 0, d.height, d.width, d.height) < b && Ra(a.x, a.y, d.width, d.height, d.width, 0) < b && Ra(a.x, a.y, d.width, 0, 0, 0) < b);
        return e
    };
    G.prototype.Xg = function ()
    {
        return !0
    };
    G.prototype.containsPoint = G.prototype.Ia = function (a)
    {
        var b = w.K();
        b.assign(a);
        this.transform.nb(b);
        var c = this.U;
        if (!c.I()) return w.v(b), !1;
        var d = this.g;
        if (null !== d && d.gk)
        {
            var e = d.ku("extraTouchThreshold"),
                f = d.ku("extraTouchArea"),
                h = f / 2,
                k = this.Ja,
                d = this.vj() * d.scale,
                l = 1 / d;
            if (k.width * d < e && k.height * d < e) return a = db(c.x - h * l, c.y - h * l, c.width + f * l, c.height + f * l, b.x, b.y), w.v(b), a
        }
        if (this instanceof jh || this instanceof X ? db(c.x - 5, c.y - 5, c.width + 10, c.height + 10, b.x, b.y) : c.Ia(b)) return e = !1, e = this.ng && !this.ng.Ia(b) ?
            !1 : null !== this.cc && c.Ia(b) ? !0 : null !== this.Ib && this.Wc.Ia(a) ? !0 : this.Ek(a), w.v(b), e;
        w.v(b);
        return !1
    };
    G.prototype.Ek = function (a)
    {
        var b = this.Ja;
        return db(0, 0, b.width, b.height, a.x, a.y)
    };
    G.prototype.containsRect = G.prototype.Fk = function (a)
    {
        if (0 === this.angle) return this.U.Fk(a);
        var b = this.Ja,
            b = w.kg(0, 0, b.width, b.height),
            c = this.transform,
            d = !1,
            e = w.xb(a.x, a.y);
        b.Ia(c.wh(e)) && (e.m(a.x, a.bottom), b.Ia(c.wh(e)) && (e.m(a.right, a.bottom), b.Ia(c.wh(e)) && (e.m(a.right, a.y), b.Ia(c.wh(e)) && (d = !0))));
        w.v(e);
        w.Hb(b);
        return d
    };
    G.prototype.containedInRect = G.prototype.sn = function (a, b)
    {
        if (void 0 === b) return a.Fk(this.U);
        var c = this.Ja,
            d = !1,
            e = w.xb(0, 0);
        a.Ia(b.nb(e)) && (e.m(0, c.height), a.Ia(b.nb(e)) && (e.m(c.width, c.height), a.Ia(b.nb(e)) && (e.m(c.width, 0), a.Ia(b.nb(e)) && (d = !0))));
        w.v(e);
        return d
    };
    G.prototype.intersectsRect = G.prototype.Zf = function (a, b)
    {
        if (void 0 === b && (b = this.transform, 0 === this.angle)) return a.Zf(this.U);
        var c = this.Ja,
            d = b,
            e = w.xb(0, 0),
            f = w.xb(0, c.height),
            h = w.xb(c.width, c.height),
            k = w.xb(c.width, 0),
            l = !1;
        if (a.Ia(d.nb(e)) || a.Ia(d.nb(f)) || a.Ia(d.nb(h)) || a.Ia(d.nb(k))) l = !0;
        else
        {
            var c = w.kg(0, 0, c.width, c.height),
                m = w.xb(a.x, a.y);
            c.Ia(d.wh(m)) ? l = !0 : (m.m(a.x, a.bottom), c.Ia(d.wh(m)) ? l = !0 : (m.m(a.right, a.bottom), c.Ia(d.wh(m)) ? l = !0 : (m.m(a.right, a.y), c.Ia(d.wh(m)) && (l = !0))));
            w.v(m);
            w.Hb(c);
            !l &&
            (me(a, e, f) || me(a, f, h) || me(a, h, k) || me(a, k, e)) && (l = !0)
        }
        w.v(e);
        w.v(f);
        w.v(h);
        w.v(k);
        return l
    };
    G.prototype.getDocumentPoint = G.prototype.Ya = function (a, b)
    {
        void 0 === b && (b = new y);
        if (a instanceof K)
        {
            a.Td() && w.k("getDocumentPoint:s Spot must be specific: " + a.toString());
            var c = this.Ja;
            b.m(a.x * c.width + a.offsetX, a.y * c.height + a.offsetY)
        }
        else b.set(a);
        this.ph.nb(b);
        return b
    };
    G.prototype.getDocumentAngle = G.prototype.$l = function ()
    {
        var a;
        a = this.ph;
        1 === a.m11 && 0 === a.m12 ? a = 0 : (a = 180 * Math.atan2(a.m12, a.m11) / Math.PI, 0 > a && (a += 360));
        return a
    };
    G.prototype.getDocumentScale = G.prototype.vj = function ()
    {
        if (0 !== (this.M & 4096) === !1) return this.Co;
        var a = this.qb;
        return null !== this.R ? a * this.R.vj() : a
    };
    G.prototype.getLocalPoint = G.prototype.iF = function (a, b)
    {
        void 0 === b && (b = new y);
        b.assign(a);
        this.ph.wh(b);
        return b
    };
    G.prototype.getNearestIntersectionPoint = G.prototype.jF = function (a, b, c)
    {
        return this.Cn(a.x, a.y, b.x, b.y, c)
    };
    g = G.prototype;
    g.Cn = function (a, b, c, d, e)
    {
        var f = this.transform,
            h = 1 / (f.m11 * f.m22 - f.m12 * f.m21),
            k = f.m22 * h,
            l = -f.m12 * h,
            m = -f.m21 * h,
            n = f.m11 * h,
            p = h * (f.m21 * f.dy - f.m22 * f.dx),
            q = h * (f.m12 * f.dx - f.m11 * f.dy);
        if (null !== this.nn) return f = this.U, ke(f.left, f.top, f.right, f.bottom, a, b, c, d, e);
        h = a * k + b * m + p;
        a = a * l + b * n + q;
        b = c * k + d * m + p;
        c = c * l + d * n + q;
        e.m(0, 0);
        d = this.Ja;
        c = ke(0, 0, d.width, d.height, h, a, b, c, e);
        e.transform(f);
        return c
    };

    function yk(a, b, c, d, e)
    {
        if (!1 !== sm(a))
        {
            var f = a.margin,
                h = f.right + f.left,
                f = f.top + f.bottom;
            b = Math.max(b - h, 0);
            c = Math.max(c - f, 0);
            e = e || 0;
            d = Math.max((d || 0) - h, 0);
            e = Math.max(e - f, 0);
            var h = a.angle,
                f = 0,
                f = a.Ca,
                k = 0;
            a instanceof X && (k = a.mb);
            90 === h || 270 === h ? (b = isFinite(f.height) ? f.height + k : b, c = isFinite(f.width) ? f.width + k : c) : (b = isFinite(f.width) ? f.width + k : b, c = isFinite(f.height) ? f.height + k : c);
            var f = d || 0,
                k = e || 0,
                l = a instanceof C;
            switch (Ho(a, !0))
            {
                case Qj:
                    k = f = 0;
                    l && (c = b = Infinity);
                    break;
                case Ee:
                    isFinite(b) && b > d && (f = b);
                    isFinite(c) &&
                    c > e && (k = c);
                    break;
                case so:
                    isFinite(b) && b > d && (f = b);
                    k = 0;
                    l && (c = Infinity);
                    break;
                case ro:
                    isFinite(c) && c > e && (k = c), f = 0, l && (b = Infinity)
            }
            var l = a.Gf,
                m = a.si;
            f > l.width && m.width < l.width && (f = l.width);
            k > l.height && m.height < l.height && (k = l.height);
            d = Math.max(f / a.scale, m.width);
            e = Math.max(k / a.scale, m.height);
            l.width < d && (d = Math.min(m.width, d));
            l.height < e && (e = Math.min(m.height, e));
            b = Math.min(l.width, b);
            c = Math.min(l.height, c);
            b = Math.max(d, b);
            c = Math.max(e, c);
            if (90 === h || 270 === h) f = b, b = c, c = f, f = d, d = e, e = f;
            a.ud.Qa();
            a.On(b, c,
                d, e);
            a.ud.freeze();
            a.ud.I() || w.k("Non-real measuredBounds has been set. Object " + a + ", measuredBounds: " + a.ud.toString());
            dm(a, !1)
        }
    }
    g.On = function () {};
    g.zj = function ()
    {
        return !1
    };
    g.hc = function (a, b, c, d, e)
    {
        this.Ri();
        var f = w.Kf();
        f.assign(this.oc);
        this.oc.Qa();
        if (!1 === Gm(this))
        {
            var h = this.oc;
            h.x = a;
            h.y = b;
            h.width = c;
            h.height = d
        }
        else this.pj(a, b, c, d);
        this.oc.freeze();
        this.ng = void 0 === e ? null : e;
        c = !1;
        void 0 !== e ? c = !0 : null !== this.R && (e = this.R.Wc, d = this.za, null !== this.nn && (d = this.oc), c = b + d.height, d = a + d.width, c = !(0 <= a + .05 && d <= e.width + .05 && 0 <= b + .05 && c <= e.height + .05), this instanceof Lh && (a = this.Wc, this.lw > a.height || this.yf.Ge > a.width)) && (c = !0);
        this.M = c ? this.M | 256 : this.M & -257;
        this.oc.I() ||
        w.k("Non-real actualBounds has been set. Object " + this + ", actualBounds: " + this.oc.toString());
        this.ay(f, this.oc);
        Io(this, !1);
        w.Hb(f)
    };
    g.pj = function () {};

    function Jo(a, b, c, d, e)
    {
        var f = a.U;
        f.x = b;
        f.y = c;
        f.width = d;
        f.height = e;
        if (!a.Ca.I())
        {
            f = a.ud;
            c = a.margin;
            b = c.right + c.left;
            var h = c.top + c.bottom;
            c = f.width + b;
            f = f.height + h;
            d += b;
            e += h;
            b = Ho(a, !0);
            c === d && f === e && (b = Qj);
            switch (b)
            {
                case Qj:
                    if (c > d || f > e) dm(a, !0), yk(a, c > d ? d : c, f > e ? e : f);
                    break;
                case Ee:
                    dm(a, !0);
                    yk(a, d, e, 0, 0);
                    break;
                case so:
                    dm(a, !0);
                    yk(a, d, f, 0, 0);
                    break;
                case ro:
                    dm(a, !0), yk(a, c, e, 0, 0)
            }
        }
    }
    g.ay = function (a, b)
    {
        var c = this.V;
        null !== c && null !== c.g && (c.zq !== this && c.hG !== this && c.uB !== this || Ko(c, !0), this.oa(), Va(a, b) || (c.Qk(), this.Gs(c)))
    };
    g.Gs = function (a)
    {
        null !== this.le && (Ko(a, !0), a instanceof T && Lo(a, this))
    };
    w.defineProperty(G,
        {
            $n: "shadowVisible"
        }, function ()
        {
            return this.gn
        }, function (a)
        {
            var b = this.gn;
            b !== a && (this.gn = a, this.oa(), this.h("shadowVisible", b, a))
        });
    G.prototype.ve = function (a, b)
    {
        if (this.visible)
        {
            var c = this.oc;
            if (0 !== c.width && 0 !== c.height && !isNaN(c.x) && !isNaN(c.y))
            {
                var d = this.opacity,
                    e = 1;
                if (1 !== d)
                {
                    if (0 === d) return;
                    e = a.globalAlpha;
                    a.globalAlpha = e * d
                }
                if (a instanceof Oc) a:
                {
                    if (this.visible)
                    {
                        var f = null,
                            h = a.Px;
                        if (this instanceof C && (this.type === Mo || this.type === No)) Oo(this, a, b);
                        else
                        {
                            var k = this.oc;
                            if (0 !== k.width && 0 !== k.height && !isNaN(k.x) && !isNaN(k.y))
                            {
                                var l = this.transform,
                                    m = this.R;
                                0 !== (this.M & 4096) === !0 && Po(this);
                                var c = 0 !== (this.M & 256),
                                    n = !1;
                                this instanceof
                                Lh && (a.font = this.font);
                                if (c)
                                {
                                    n = m.Xg() ? m.Ja : m.U;
                                    if (null !== this.ng) var p = this.ng,
                                        q = p.x,
                                        r = p.y,
                                        s = p.width,
                                        p = p.height;
                                    else q = Math.max(k.x, n.x), r = Math.max(k.y, n.y), s = Math.min(k.right, n.right) - q, p = Math.min(k.bottom, n.bottom) - r;
                                    if (q > k.width + k.x || k.x > n.width + n.x || r > k.height + k.y || k.y > n.height + n.y) break a;
                                    n = !0;
                                    Qc(a, 1, 0, 0, 1, 0, 0);
                                    a.save();
                                    a.beginPath();
                                    a.rect(q, r, s, p);
                                    a.clip()
                                }
                                if (this.zj())
                                {
                                    var u = this;
                                    if (!u.isVisible()) break a
                                }
                                a.uh.Ub = [1, 0, 0, 1, 0, 0];
                                this instanceof Lh && 1 < this.Tx && Qc(a, 1, 0, 0, 1, 0, 0);
                                q = !1;
                                this.zj() &&
                                this.hm && b.wj("drawShadows") && (r = this.fn, a.HB(r.x * b.scale * b.Jd, r.y * b.scale * b.Jd, u.Dg), a.ao(), a.shadowColor = u.en);
                                u = !1;
                                this.V && b.wj("drawShadows") && (u = this.V.hm);
                                !0 === this.$n ? (a.ao(), !1 === q && u && (Qc(a, 1, 0, 0, 1, 0, 0), a.eb(), q = !0)) : !1 === this.$n && a.nm();
                                null !== this.cc && (Qo(this, a, this.cc, !0, !0), !1 === q && u && (Qc(a, 1, 0, 0, 1, 0, 0), a.eb(), q = !0), this.cc instanceof ga && this.cc.type === Xc ? (a.beginPath(), a.rect(k.x, k.y, k.width, k.height), a.Kg(this.cc)) : a.fillRect(k.x, k.y, k.width, k.height));
                                this instanceof C ? Qc(a, l.m11,
                                    l.m12, l.m21, l.m22, l.dx, l.dy) : a.uh.Ub = [l.m11, l.m12, l.m21, l.m22, l.dx, l.dy];
                                null !== this.Ib && (!1 === q && u && (Qc(a, 1, 0, 0, 1, 0, 0), a.eb(), q = !0), s = this.Ja, l = k = 0, r = s.width, s = s.height, p = 0, this instanceof X && (s = this.Sa.cb, k = s.x, l = s.y, r = s.width, s = s.height, p = this.ji), Qo(this, a, this.Ib, !0, !1), this.Ib instanceof ga && this.Ib.type === Xc ? (a.beginPath(), a.rect(k - p / 2, l - p / 2, r + p, s + p), a.Kg(this.Ib)) : a.fillRect(k - p / 2, l - p / 2, r + p, s + p));
                                u && (null !== this.Ib || null !== this.cc || null !== m && 0 !== (m.M & 512) || null !== m && (m.type === Hl || m.type ===
                                    Oj) && m.Bd() !== this) ? (Ro(this, !0), null === this.$n && a.nm()) : Ro(this, !1);
                                this.Ik(a, b);
                                u && 0 !== (this.M & 512) === !0 && a.ao();
                                this.zj() && u && a.nm();
                                c && (a.restore(), n && a.qf.pop());
                                this instanceof C && (f = a.qf.pop());
                                !0 === q && a.qf.pop();
                                this instanceof Lh && 1 < this.Tx && (f = a.qf.pop());
                                null !== a.VE && (null === f && (h === a.Px ? (Qc(a, 1, 0, 0, 1, 0, 0), f = a.qf.pop()) : f = a.Px), a.VE(this, f))
                            }
                        }
                    }
                }
                else
                {
                    if (this instanceof C && (this.type === Mo || this.type === No))
                    {
                        Oo(this, a, b);
                        1 !== d && (a.globalAlpha = e);
                        return
                    }
                    this instanceof W && this.Eu(!1);
                    f = this.transform;
                    h = this.R;
                    0 !== (this.M & 4096) === !0 && Po(this);
                    m = 0 !== (this.M & 256);
                    a.Lp && (m = !1);
                    this instanceof Lh && (a.font = this.font);
                    if (m)
                    {
                        n = h.Xg() ? h.Ja : h.U;
                        null !== this.ng ? (q = this.ng, k = q.x, l = q.y, u = q.width, q = q.height) : (k = Math.max(c.x, n.x), l = Math.max(c.y, n.y), u = Math.min(c.right, n.right) - k, q = Math.min(c.bottom, n.bottom) - l);
                        if (k > c.width + c.x || c.x > n.width + n.x)
                        {
                            1 !== d && (a.globalAlpha = e);
                            return
                        }
                        a.save();
                        a.beginPath();
                        a.rect(k, l, u, q);
                        a.clip()
                    }
                    if (this.zj())
                    {
                        if (!this.isVisible())
                        {
                            1 !== d && (a.globalAlpha = e);
                            return
                        }
                        this.hm && b.wj("drawShadows") &&
                        (n = this.fn, a.HB(n.x * b.scale * b.Jd, n.y * b.scale * b.Jd, this.Dg), a.ao(), a.shadowColor = this.en)
                    }
                    n = !1;
                    this.V && b.wj("drawShadows") && (n = this.V.hm);
                    !0 === this.$n ? a.ao() : !1 === this.$n && a.nm();
                    null !== this.cc && (Qo(this, a, this.cc, !0, !0), this.cc instanceof ga && this.cc.type === Xc ? (a.beginPath(), a.rect(c.x, c.y, c.width, c.height), a.Kg(this.cc)) : a.fillRect(c.x, c.y, c.width, c.height));
                    f.vu() || a.transform(f.m11, f.m12, f.m21, f.m22, f.dx, f.dy);
                    n && (null !== h && 0 !== (h.M & 512) || null !== h && (h.type === Hl || h.type === Oj) && h.Bd() !== this) && null ===
                    this.$n && a.nm();
                    null !== this.Ib && (u = this.Ja, k = c = 0, l = u.width, u = u.height, q = 0, this instanceof X && (u = this.Sa.cb, c = u.x, k = u.y, l = u.width, u = u.height, q = this.ji), Qo(this, a, this.Ib, !0, !1), this.Ib instanceof ga && this.Ib.type === Xc ? (a.beginPath(), a.rect(c - q / 2, k - q / 2, l + q, u + q), a.Kg(this.Ib)) : a.fillRect(c - q / 2, k - q / 2, l + q, u + q));
                    n && (null !== this.Ib || null !== this.cc || null !== h && 0 !== (h.M & 512) || null !== h && (h.type === Hl || h.type === Oj) && h.Bd() !== this) ? (Ro(this, !0), null === this.$n && a.nm()) : Ro(this, !1);
                    this.Ik(a, b);
                    n && 0 !== (this.M & 512) ===
                    !0 && a.ao();
                    this.zj() && n && a.nm();
                    m ? (a.restore(), this instanceof C ? a.Ke(!0) : a.Ke(!1)) : f.vu() || (h = 1 / (f.m11 * f.m22 - f.m12 * f.m21), a.transform(f.m22 * h, -f.m12 * h, -f.m21 * h, f.m11 * h, h * (f.m21 * f.dy - f.m22 * f.dx), h * (f.m12 * f.dx - f.m11 * f.dy)))
                }
                1 !== d && (a.globalAlpha = e)
            }
        }
    };

    function Oo(a, b, c)
    {
        var d = a.oc;
        0 === d.width || 0 === d.height || isNaN(d.x) || isNaN(d.y) || (null !== a.cc && (Qo(a, b, a.cc, !0, !0), a.cc instanceof ga && a.cc.type === Xc ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Kg(a.cc)) : b.fillRect(d.x, d.y, d.width, d.height)), null !== a.Ib && (Qo(a, b, a.Ib, !0, !1), a.Ib instanceof ga && a.Ib.type === Xc ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Kg(a.Ib)) : b.fillRect(d.x, d.y, d.width, d.height)), a.Ik(b, c))
    }
    G.prototype.Ik = function () {};

    function Qo(a, b, c, d, e)
    {
        if (null !== c)
        {
            var f = 1,
                h = 1;
            if ("string" === typeof c) d ? b.fillStyle = c : b.strokeStyle = c;
            else if (c.type === cg) d ? b.fillStyle = c.color : b.strokeStyle = c.color;
            else
            {
                var k, h = a.Ja,
                    f = h.width,
                    h = h.height;
                if (e) var l = a.U,
                    f = l.width,
                    h = l.height;
                var m = b instanceof Wc;
                if (m && c.$g && (c.type === Wn || c.so === f && c.$y === h)) k = c.$g;
                else
                {
                    var n = l = 0,
                        p = 0,
                        q = 0,
                        r = 0,
                        s = 0,
                        s = r = 0;
                    e && (l = a.U, f = l.width, h = l.height, r = l.x, s = l.y);
                    l = c.start.x * f + c.start.offsetX;
                    n = c.start.y * h + c.start.offsetY;
                    p = c.end.x * f + c.end.offsetX;
                    q = c.end.y * h + c.end.offsetY;
                    l += r;
                    p += r;
                    n += s;
                    q += s;
                    if (c.type === og) k = b.createLinearGradient(l, n, p, q);
                    else if (c.type === Xc) s = isNaN(c.Wt) ? Math.max(f, h) / 2 : c.Wt, isNaN(c.bv) ? (r = 0, s = Math.max(f, h) / 2) : r = c.bv, k = b.createRadialGradient(l, n, r, p, q, s);
                    else if (c.type === Wn) try
                    {
                        k = b.createPattern(c.pattern, "repeat")
                    }
                    catch (u)
                    {
                        k = null
                    }
                    else w.Fd(c.type, "Brush type");
                    if (c.type !== Wn && (e = c.Dk, null !== e))
                        for (e = e.i; e.next();) k.addColorStop(e.key, e.value);
                    if (m && (c.$g = k, null !== k && (c.so = f, c.$y = h), null === k && c.type === Wn && -1 !== c.so))
                    {
                        c.so = -1;
                        var t = a.g;
                        null !== t &&
                        -1 === c.so && w.setTimeout(function ()
                        {
                            t.Pu()
                        }, 600)
                    }
                }
                d ? b.fillStyle = k : b.strokeStyle = k
            }
        }
    }
    G.prototype.isContainedBy = G.prototype.fm = function (a)
    {
        if (a instanceof C) a:
        {
            if (this !== a && null !== a)
                for (var b = this.R; null !== b;)
                {
                    if (b === a)
                    {
                        a = !0;
                        break a
                    }
                    b = b.R
                }
            a = !1
        }
        else a = !1;
        return a
    };
    G.prototype.isVisibleObject = G.prototype.Dj = function ()
    {
        if (!this.visible) return !1;
        var a = this.R;
        return null !== a ? a.Dj() : !0
    };
    G.prototype.isEnabledObject = G.prototype.su = function ()
    {
        for (var a = this instanceof C ? this : this.R; null !== a && a.isEnabled;) a = a.R;
        return null === a
    };
    w.defineProperty(G,
        {
            WE: "enabledChanged"
        }, function ()
        {
            return null !== this.ia ? this.ia.Cr : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Cr;
            b !== a && (null !== a && w.j(a, "function", G, "enabledChanged"), this.ia.Cr = a, this.h("enabledChanged", b, a))
        });

    function Po(a)
    {
        if (0 !== (a.M & 2048) === !0)
        {
            var b = a.kd;
            b.reset();
            if (!a.oc.I() || !a.ud.I())
            {
                So(a, !1);
                return
            }
            b.translate(a.oc.x, a.oc.y);
            b.translate(-a.za.x, -a.za.y);
            var c = a.Ja;
            Fo(a, b, c.x, c.y, c.width, c.height);
            So(a, !1);
            To(a, !0)
        }
        0 !== (a.M & 4096) === !0 && (b = a.R, null === b ? (a.wm.set(a.kd), a.Co = a.scale, To(a, !1)) : null !== b.ph && (c = a.wm, c.reset(), b.Xg() ? c.multiply(b.wm) : null !== b.R && c.multiply(b.R.wm), c.multiply(a.kd), a.Co = a.scale * b.Co, To(a, !1)))
    }

    function Fo(a, b, c, d, e, f)
    {
        1 !== a.scale && b.scale(a.scale);
        if (0 !== a.angle)
        {
            var h = Jb;
            a.zj() && a.Ff.$c() && (h = a.Ff);
            var k = w.K();
            if (a instanceof R && a.bg !== a)
                for (c = a.bg, d = c.Ja, k.Zu(d.x, d.y, d.width, d.height, h), c.Wi.nb(k), k.offset(-c.za.x, -c.za.y), h = c.R; null !== h && h !== a;) h.Wi.nb(k), k.offset(-h.za.x, -h.za.y), h = h.R;
            else k.Zu(c, d, e, f, h);
            b.rotate(a.angle, k.x, k.y);
            w.v(k)
        }
    }
    g = G.prototype;
    g.H = function (a)
    {
        void 0 === a && (a = !1);
        if (!0 !== sm(this))
        {
            dm(this, !0);
            Io(this, !0);
            var b = this.R;
            null === b || a || b.H()
        }
    };
    g.bq = function ()
    {
        !0 !== sm(this) && (dm(this, !0), Io(this, !0))
    };

    function Uo(a)
    {
        if (!1 === Gm(a))
        {
            var b = a.R;
            null !== b ? b.H() : a.zj() && (b = a.g, null !== b && (b.ug.add(a), a instanceof T && a.$f(), b.ye()));
            Io(a, !0)
        }
    }
    g.Ri = function ()
    {
        0 !== (this.M & 2048) === !1 && (So(this, !0), To(this, !0))
    };
    g.PA = function ()
    {
        To(this, !0)
    };
    g.oa = function ()
    {
        var a = this.V;
        null !== a && a.oa()
    };

    function Ho(a, b)
    {
        var c = a.stretch,
            d = a.R;
        if (null !== d && d.na === Vo) return Wo(a, d.ee(a.Vb), d.de(a.column), b);
        if (null !== d && d.na === Hl && d.Bd() === a) return Xo(a, Ee, b);
        if (c === qo)
        {
            if (null !== d)
            {
                if (d.na === Oj && d.Bd() === a) return Xo(a, Ee, b);
                c = d.$d;
                return c === qo ? Xo(a, Qj, b) : Xo(a, c, b)
            }
            return Xo(a, Qj, b)
        }
        return Xo(a, c, b)
    }

    function Wo(a, b, c, d)
    {
        var e = a.stretch;
        if (e !== qo) return Xo(a, e, d);
        var f = e = null;
        switch (b.stretch)
        {
            case ro:
                f = !0;
                break;
            case Ee:
                f = !0
        }
        switch (c.stretch)
        {
            case so:
                e = !0;
                break;
            case Ee:
                e = !0
        }
        b = a.R.$d;
        null === e && (e = b === so || b === Ee);
        null === f && (f = b === ro || b === Ee);
        return !0 === e && !0 === f ? Xo(a, Ee, d) : !0 === e ? Xo(a, so, d) : !0 === f ? Xo(a, ro, d) : Xo(a, Qj, d)
    }

    function Xo(a, b, c)
    {
        if (c) return b;
        if (b === Qj) return Qj;
        c = a.Ca;
        if (c.I()) return Qj;
        a = a.angle;
        if (!isNaN(c.width))
            if (90 !== a && 270 !== a)
            {
                if (b === so) return Qj;
                if (b === Ee) return ro
            }
            else
            {
                if (b === ro) return Qj;
                if (b === Ee) return so
            }
        if (!isNaN(c.height))
            if (90 !== a && 270 !== a)
            {
                if (b === ro) return Qj;
                if (b === Ee) return so
            }
            else
            {
                if (b === so) return Qj;
                if (b === Ee) return ro
            }
        return b
    }
    w.defineProperty(G,
        {
            yq: "segmentOrientation"
        }, function ()
        {
            return this.cn
        }, function (a)
        {
            var b = this.cn;
            b !== a && (this.cn = a, this.H(), this.h("segmentOrientation", b, a), a === mj && (this.angle = 0))
        });
    w.defineProperty(G,
        {
            Pe: "segmentIndex"
        }, function ()
        {
            return this.ht
        }, function (a)
        {
            a = Math.round(a);
            var b = this.ht;
            b !== a && (this.ht = a, this.H(), this.h("segmentIndex", b, a))
        });
    w.defineProperty(G,
        {
            wB: "segmentFraction"
        }, function ()
        {
            return this.an
        }, function (a)
        {
            isNaN(a) ? a = 0 : 0 > a ? a = 0 : 1 < a && (a = 1);
            var b = this.an;
            b !== a && (this.an = a, this.H(), this.h("segmentFraction", b, a))
        });
    w.defineProperty(G,
        {
            xB: "segmentOffset"
        }, function ()
        {
            return this.bn
        }, function (a)
        {
            var b = this.bn;
            b.L(a) || (this.bn = a = a.S(), this.H(), this.h("segmentOffset", b, a))
        });
    w.defineProperty(G,
        {
            stretch: "stretch"
        }, function ()
        {
            return this.Eg
        }, function (a)
        {
            var b = this.Eg;
            b !== a && (this.Eg = a, this.H(), this.h("stretch", b, a))
        });
    w.defineProperty(G,
        {
            name: "name"
        }, function ()
        {
            return this.Sb
        }, function (a)
        {
            var b = this.Sb;
            b !== a && (this.Sb = a, null !== this.V && (this.V.Sm = null), this.h("name", b, a))
        });
    w.defineProperty(G,
        {
            opacity: "opacity"
        }, function ()
        {
            return this.Bc
        }, function (a)
        {
            var b = this.Bc;
            b !== a && (w.j(a, "number", G, "opacity"), (0 > a || 1 < a) && w.Fa(a, "0 <= value <= 1", G, "opacity"), this.Bc = a, this.h("opacity", b, a), a = this.g, b = this.V, null !== a && null !== b && a.oa(ol(b, b.U)))
        });
    w.defineProperty(G,
        {
            visible: "visible"
        }, function ()
        {
            return 0 !== (this.M & 1)
        }, function (a)
        {
            var b = 0 !== (this.M & 1);
            b !== a && (this.M ^= 1, this.h("visible", b, a), b = this.R, null !== b ? b.H() : this.zj() && this.Dd(a), this.oa(), Yo(this))
        });
    w.defineProperty(G,
        {
            Tg: "pickable"
        }, function ()
        {
            return 0 !== (this.M & 2)
        }, function (a)
        {
            var b = 0 !== (this.M & 2);
            b !== a && (this.M ^= 2, this.h("pickable", b, a))
        });
    w.defineProperty(G,
        {
            ZH: "fromLinkableDuplicates"
        }, function ()
        {
            return 0 !== (this.M & 4)
        }, function (a)
        {
            var b = 0 !== (this.M & 4);
            b !== a && (this.M ^= 4, this.h("fromLinkableDuplicates", b, a))
        });
    w.defineProperty(G,
        {
            $H: "fromLinkableSelfNode"
        }, function ()
        {
            return 0 !== (this.M & 8)
        }, function (a)
        {
            var b = 0 !== (this.M & 8);
            b !== a && (this.M ^= 8, this.h("fromLinkableSelfNode", b, a))
        });
    w.defineProperty(G,
        {
            TJ: "toLinkableDuplicates"
        }, function ()
        {
            return 0 !== (this.M & 16)
        }, function (a)
        {
            var b = 0 !== (this.M & 16);
            b !== a && (this.M ^= 16, this.h("toLinkableDuplicates", b, a))
        });
    w.defineProperty(G,
        {
            UJ: "toLinkableSelfNode"
        }, function ()
        {
            return 0 !== (this.M & 32)
        }, function (a)
        {
            var b = 0 !== (this.M & 32);
            b !== a && (this.M ^= 32, this.h("toLinkableSelfNode", b, a))
        });
    w.defineProperty(G,
        {
            ff: "isPanelMain"
        }, function ()
        {
            return 0 !== (this.M & 64)
        }, function (a)
        {
            var b = 0 !== (this.M & 64);
            b !== a && (this.M ^= 64, this.H(), this.h("isPanelMain", b, a))
        });
    w.defineProperty(G,
        {
            Ix: "isActionable"
        }, function ()
        {
            return 0 !== (this.M & 128)
        }, function (a)
        {
            var b = 0 !== (this.M & 128);
            b !== a && (this.M ^= 128, this.h("isActionable", b, a))
        });
    w.defineProperty(G,
        {
            nn: "areaBackground"
        }, function ()
        {
            return this.cc
        }, function (a)
        {
            var b = this.cc;
            b !== a && (a instanceof ga && a.freeze(), this.cc = a, this.oa(), this.h("areaBackground", b, a))
        });
    w.defineProperty(G,
        {
            background: "background"
        }, function ()
        {
            return this.Ib
        }, function (a)
        {
            var b = this.Ib;
            b !== a && (a instanceof ga && a.freeze(), this.Ib = a, this.oa(), this.h("background", b, a))
        });

    function Ro(a, b)
    {
        a.M = b ? a.M | 512 : a.M & -513
    }

    function Co(a)
    {
        return 0 !== (a.M & 1024)
    }

    function Zo(a, b)
    {
        a.M = b ? a.M | 1024 : a.M & -1025
    }

    function So(a, b)
    {
        a.M = b ? a.M | 2048 : a.M & -2049
    }

    function To(a, b)
    {
        a.M = b ? a.M | 4096 : a.M & -4097
    }

    function sm(a)
    {
        return 0 !== (a.M & 8192)
    }

    function dm(a, b)
    {
        a.M = b ? a.M | 8192 : a.M & -8193
    }

    function Gm(a)
    {
        return 0 !== (a.M & 16384)
    }

    function Io(a, b)
    {
        a.M = b ? a.M | 16384 : a.M & -16385
    }
    w.u(G,
        {
            V: "part"
        }, function ()
        {
            if (this.zj()) return this;
            if (null !== this.Xm) return this.Xm;
            var a;
            for (a = this.R; a;)
            {
                if (a instanceof R) return this.Xm = a;
                a = a.R
            }
            return null
        });
    w.u(G,
        {
            R: "panel"
        }, function ()
        {
            return this.ej
        });
    G.prototype.mm = function (a)
    {
        this.ej = a
    };
    w.u(G,
        {
            layer: "layer"
        }, function ()
        {
            var a = this.V;
            return null !== a ? a.layer : null
        },
        {
            configurable: !0
        });
    w.u(G,
        {
            g: "diagram"
        }, function ()
        {
            var a = this.V;
            return null !== a ? a.g : null
        },
        {
            configurable: !0
        });
    w.defineProperty(G,
        {
            position: "position"
        }, function ()
        {
            return this.$a
        }, function (a)
        {
            var b = a.x,
                c = a.y,
                d = this.$a,
                e = d.x,
                f = d.y;
            (e === b || isNaN(e) && isNaN(b)) && (f === c || isNaN(f) && isNaN(c)) ? this.EB(): (a = a.S(), this.DB(a, d) && this.h("position", d, a))
        });
    G.prototype.EB = function () {};
    G.prototype.DB = function (a)
    {
        this.$a = a;
        Uo(this);
        this.Ri();
        return !0
    };
    G.prototype.zy = function (a, b)
    {
        this.$a.m(a, b);
        this.Ri()
    };
    w.u(G,
        {
            U: "actualBounds"
        }, function ()
        {
            return this.oc
        });
    w.defineProperty(G,
        {
            scale: "scale"
        }, function ()
        {
            return this.qb
        }, function (a)
        {
            var b = this.qb;
            b !== a && (0 >= a && w.k("GraphObject.scale for " + this + " must be greater than zero, not: " + a), this.qb = a, this.Ri(), this.H(), this.h("scale", b, a))
        });
    w.defineProperty(G,
        {
            angle: "angle"
        }, function ()
        {
            return this.lg
        }, function (a)
        {
            var b = this.lg;
            b !== a && (a %= 360, 0 > a && (a += 360), b !== a && (this.lg = a, Yo(this), this.H(), this.Ri(), this.h("angle", b, a)))
        });
    w.defineProperty(G,
        {
            Ca: "desiredSize"
        }, function ()
        {
            return this.Te
        }, function (a)
        {
            var b = a.width,
                c = a.height,
                d = this.Te,
                e = d.width,
                f = d.height;
            (e === b || isNaN(e) && isNaN(b)) && (f === c || isNaN(f) && isNaN(c)) || (this.Te = a = a.S(), this.H(), this instanceof X && this.ge(), this.h("desiredSize", d, a), Co(this) && (a = this.V, null !== a && (Do(this, a, "width"), Do(this, a, "height"))))
        });
    w.defineProperty(G,
        {
            width: "width"
        }, function ()
        {
            return this.Te.width
        }, function (a)
        {
            var b = this.Te.width;
            b === a || isNaN(b) && isNaN(a) || (b = this.Te, this.Te = a = (new ia(a, this.Te.height)).freeze(), this.H(), this instanceof X && this.ge(), this.h("desiredSize", b, a), Co(this) && (a = this.V, null !== a && Do(this, a, "width")))
        });
    w.defineProperty(G,
        {
            height: "height"
        }, function ()
        {
            return this.Te.height
        }, function (a)
        {
            var b = this.Te.height;
            b === a || isNaN(b) && isNaN(a) || (b = this.Te, this.Te = a = (new ia(this.Te.width, a)).freeze(), this.H(), this instanceof X && this.ge(), this.h("desiredSize", b, a), Co(this) && (a = this.V, null !== a && Do(this, a, "height")))
        });
    w.defineProperty(G,
        {
            si: "minSize"
        }, function ()
        {
            return this.Zh
        }, function (a)
        {
            var b = this.Zh;
            b.L(a) || (a = a.copy(), isNaN(a.width) && (a.width = 0), isNaN(a.height) && (a.height = 0), a.freeze(), this.Zh = a, this.H(), this.h("minSize", b, a))
        });
    w.defineProperty(G,
        {
            Gf: "maxSize"
        }, function ()
        {
            return this.Yh
        }, function (a)
        {
            var b = this.Yh;
            b.L(a) || (a = a.copy(), isNaN(a.width) && (a.width = Infinity), isNaN(a.height) && (a.height = Infinity), a.freeze(), this.Yh = a, this.H(), this.h("maxSize", b, a))
        });
    w.u(G,
        {
            za: "measuredBounds"
        }, function ()
        {
            return this.ud
        });
    w.u(G,
        {
            Ja: "naturalBounds"
        }, function ()
        {
            return this.Wc
        },
        {
            configurable: !0
        });
    w.defineProperty(G,
        {
            margin: "margin"
        }, function ()
        {
            return this.Qm
        }, function (a)
        {
            "number" === typeof a && (a = new hb(a));
            var b = this.Qm;
            b.L(a) || (this.Qm = a = a.S(), this.H(), this.h("margin", b, a))
        });
    w.u(G,
        {
            transform: null
        }, function ()
        {
            0 !== (this.M & 2048) === !0 && Po(this);
            return this.kd
        });
    w.u(G,
        {
            ph: null
        }, function ()
        {
            0 !== (this.M & 4096) === !0 && Po(this);
            return this.wm
        });
    w.defineProperty(G,
        {
            alignment: "alignment"
        }, function ()
        {
            return this.me
        }, function (a)
        {
            var b = this.me;
            b.L(a) || (a.Td() && !a.Zc() && w.k("GraphObject.alignment for " + this + " must be a real Spot or Spot.Default, not: " + a), this.me = a = a.S(), Uo(this), this.h("alignment", b, a))
        });
    w.defineProperty(G,
        {
            column: "column"
        }, function ()
        {
            return this.br
        }, function (a)
        {
            a = Math.round(a);
            var b = this.br;
            b !== a && (0 > a && w.Fa(a, ">= 0", G, "column"), this.br = a, this.H(), this.h("column", b, a))
        });
    w.defineProperty(G,
        {
            yH: "columnSpan"
        }, function ()
        {
            return this.Fi
        }, function (a)
        {
            a = Math.round(a);
            var b = this.Fi;
            b !== a && (1 > a && w.Fa(a, ">= 1", G, "columnSpan"), this.Fi = a, this.H(), this.h("columnSpan", b, a))
        });
    w.defineProperty(G,
        {
            Vb: "row"
        }, function ()
        {
            return this.dt
        }, function (a)
        {
            a = Math.round(a);
            var b = this.dt;
            b !== a && (0 > a && w.Fa(a, ">= 0", G, "row"), this.dt = a, this.H(), this.h("row", b, a))
        });
    w.defineProperty(G,
        {
            rowSpan: "rowSpan"
        }, function ()
        {
            return this.gj
        }, function (a)
        {
            a = Math.round(a);
            var b = this.gj;
            b !== a && (1 > a && w.Fa(a, ">= 1", G, "rowSpan"), this.gj = a, this.H(), this.h("rowSpan", b, a))
        });
    w.defineProperty(G,
        {
            Ay: "spanAllocation"
        }, function ()
        {
            return this.tt
        }, function (a)
        {
            var b = this.tt;
            b !== a && (null !== a && w.j(a, "function", G, "spanAllocation"), this.tt = a, this.H(), this.h("spanAllocation", b, a))
        });
    w.defineProperty(G,
        {
            oh: "alignmentFocus"
        }, function ()
        {
            return this.vm
        }, function (a)
        {
            var b = this.vm;
            b.L(a) || (!a.Td() || a.Zc() || a.L(yb) && this instanceof T || w.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: " + a), this.vm = a = a.S(), this.H(), this.h("alignmentFocus", b, a))
        });
    w.defineProperty(G,
        {
            le: "portId"
        }, function ()
        {
            return this.Rs
        }, function (a)
        {
            var b = this.Rs;
            if (b !== a)
            {
                var c = this.V;
                null === c || c instanceof T || (w.k("Cannot set portID on a Link: " + a), c = null);
                null !== b && null !== c && $o(c, this);
                this.Rs = a;
                null !== a && null !== c && (c.Pk = !0, ap(c, this));
                this.h("portId", b, a)
            }
        });

    function bp(a)
    {
        var b = a.V;
        if (b instanceof T && (null !== a.le || a === b.port))
        {
            var c = b.g;
            null === c || c.ja.lb || Lo(b, a)
        }
    }

    function Yo(a)
    {
        var b = a.g;
        null === b || b.ja.lb || (a instanceof C ? a instanceof T ? a.$f() : cp(a, a, function (a)
        {
            bp(a)
        }) : bp(a))
    }
    w.defineProperty(G,
        {
            Cb: "toSpot"
        }, function ()
        {
            return null !== this.W ? this.W.zk : yb
        }, function (a)
        {
            this.Qd();
            var b = this.W.zk;
            b.L(a) || (a = a.S(), this.W.zk = a, this.h("toSpot", b, a), bp(this))
        });
    w.defineProperty(G,
        {
            sm: "toEndSegmentLength"
        }, function ()
        {
            return null !== this.W ? this.W.xk : 10
        }, function (a)
        {
            this.Qd();
            var b = this.W.xk;
            b !== a && (0 > a && w.Fa(a, ">= 0", G, "toEndSegmentLength"), this.W.xk = a, this.h("toEndSegmentLength", b, a), bp(this))
        });
    w.defineProperty(G,
        {
            cv: "toEndSegmentDirection"
        }, function ()
        {
            return null !== this.W ? this.W.wk : Ao
        }, function (a)
        {
            this.Qd();
            var b = this.W.wk;
            b !== a && (w.Ut("GraphObject.toEndSegmentDirection", "2.0"), this.W.wk = a, this.h("toEndSegmentDirection", b, a), bp(this))
        });
    w.defineProperty(G,
        {
            dv: "toShortLength"
        }, function ()
        {
            return null !== this.W ? this.W.yk : 0
        }, function (a)
        {
            this.Qd();
            var b = this.W.yk;
            b !== a && (this.W.yk = a, this.h("toShortLength", b, a), bp(this))
        });
    w.defineProperty(G,
        {
            BG: "toLinkable"
        }, function ()
        {
            return null !== this.W ? this.W.At : null
        }, function (a)
        {
            this.Qd();
            var b = this.W.At;
            b !== a && (this.W.At = a, this.h("toLinkable", b, a))
        });
    w.defineProperty(G,
        {
            VJ: "toMaxLinks"
        }, function ()
        {
            return null !== this.W ? this.W.Bt : Infinity
        }, function (a)
        {
            this.Qd();
            var b = this.W.Bt;
            b !== a && (0 > a && w.Fa(a, ">= 0", G, "toMaxLinks"), this.W.Bt = a, this.h("toMaxLinks", b, a))
        });
    w.defineProperty(G,
        {
            Bb: "fromSpot"
        }, function ()
        {
            return null !== this.W ? this.W.ak : yb
        }, function (a)
        {
            this.Qd();
            var b = this.W.ak;
            b.L(a) || (a = a.S(), this.W.ak = a, this.h("fromSpot", b, a), bp(this))
        });
    w.defineProperty(G,
        {
            Zl: "fromEndSegmentLength"
        }, function ()
        {
            return null !== this.W ? this.W.Zj : 10
        }, function (a)
        {
            this.Qd();
            var b = this.W.Zj;
            b !== a && (0 > a && w.Fa(a, ">= 0", G, "fromEndSegmentLength"), this.W.Zj = a, this.h("fromEndSegmentLength", b, a), bp(this))
        });
    w.defineProperty(G,
        {
            hu: "fromEndSegmentDirection"
        }, function ()
        {
            return null !== this.W ? this.W.Yj : Ao
        }, function (a)
        {
            this.Qd();
            var b = this.W.Yj;
            b !== a && (w.Ut("GraphObject.fromEndSegmentDirection", "2.0"), this.W.Yj = a, this.h("fromEndSegmentDirection", b, a), bp(this))
        });
    w.defineProperty(G,
        {
            iu: "fromShortLength"
        }, function ()
        {
            return null !== this.W ? this.W.$j : 0
        }, function (a)
        {
            this.Qd();
            var b = this.W.$j;
            b !== a && (this.W.$j = a, this.h("fromShortLength", b, a), bp(this))
        });
    w.defineProperty(G,
        {
            fF: "fromLinkable"
        }, function ()
        {
            return null !== this.W ? this.W.Fr : null
        }, function (a)
        {
            this.Qd();
            var b = this.W.Fr;
            b !== a && (this.W.Fr = a, this.h("fromLinkable", b, a))
        });
    w.defineProperty(G,
        {
            EA: "fromMaxLinks"
        }, function ()
        {
            return null !== this.W ? this.W.Gr : Infinity
        }, function (a)
        {
            this.Qd();
            var b = this.W.Gr;
            b !== a && (0 > a && w.Fa(a, ">= 0", G, "fromMaxLinks"), this.W.Gr = a, this.h("fromMaxLinks", b, a))
        });
    w.defineProperty(G,
        {
            cursor: "cursor"
        }, function ()
        {
            return this.kr
        }, function (a)
        {
            var b = this.kr;
            b !== a && (w.j(a, "string", G, "cursor"), this.kr = a, this.h("cursor", b, a))
        });
    w.defineProperty(G,
        {
            click: "click"
        }, function ()
        {
            return null !== this.ia ? this.ia.Ei : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Ei;
            b !== a && (null !== a && w.j(a, "function", G, "click"), this.ia.Ei = a, this.h("click", b, a))
        });
    w.defineProperty(G,
        {
            Vt: "doubleClick"
        }, function ()
        {
            return null !== this.ia ? this.ia.Mi : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Mi;
            b !== a && (null !== a && w.j(a, "function", G, "doubleClick"), this.ia.Mi = a, this.h("doubleClick", b, a))
        });
    w.defineProperty(G,
        {
            rA: "contextClick"
        }, function ()
        {
            return null !== this.ia ? this.ia.Gi : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Gi;
            b !== a && (null !== a && w.j(a, "function", G, "contextClick"), this.ia.Gi = a, this.h("contextClick", b, a))
        });
    w.defineProperty(G,
        {
            Gu: "mouseEnter"
        }, function ()
        {
            return null !== this.ia ? this.ia.xs : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.xs;
            b !== a && (null !== a && w.j(a, "function", G, "mouseEnter"), this.ia.xs = a, this.h("mouseEnter", b, a))
        });
    w.defineProperty(G,
        {
            Hu: "mouseLeave"
        }, function ()
        {
            return null !== this.ia ? this.ia.ys : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.ys;
            b !== a && (null !== a && w.j(a, "function", G, "mouseLeave"), this.ia.ys = a, this.h("mouseLeave", b, a))
        });
    w.defineProperty(G,
        {
            hB: "mouseOver"
        }, function ()
        {
            return null !== this.ia ? this.ia.aj : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.aj;
            b !== a && (null !== a && w.j(a, "function", G, "mouseOver"), this.ia.aj = a, this.h("mouseOver", b, a))
        });
    w.defineProperty(G,
        {
            gB: "mouseHover"
        }, function ()
        {
            return null !== this.ia ? this.ia.$i : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.$i;
            b !== a && (null !== a && w.j(a, "function", G, "mouseHover"), this.ia.$i = a, this.h("mouseHover", b, a))
        });
    w.defineProperty(G,
        {
            fB: "mouseHold"
        }, function ()
        {
            return null !== this.ia ? this.ia.Zi : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Zi;
            b !== a && (null !== a && w.j(a, "function", G, "mouseHold"), this.ia.Zi = a, this.h("mouseHold", b, a))
        });
    w.defineProperty(G,
        {
            aJ: "mouseDragEnter"
        }, function ()
        {
            return null !== this.ia ? this.ia.vs : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.vs;
            b !== a && (null !== a && w.j(a, "function", G, "mouseDragEnter"), this.ia.vs = a, this.h("mouseDragEnter", b, a))
        });
    w.defineProperty(G,
        {
            bJ: "mouseDragLeave"
        }, function ()
        {
            return null !== this.ia ? this.ia.ws : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.ws;
            b !== a && (null !== a && w.j(a, "function", G, "mouseDragLeave"), this.ia.ws = a, this.h("mouseDragLeave", b, a))
        });
    w.defineProperty(G,
        {
            eB: "mouseDrop"
        }, function ()
        {
            return null !== this.ia ? this.ia.Yi : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Yi;
            b !== a && (null !== a && w.j(a, "function", G, "mouseDrop"), this.ia.Yi = a, this.h("mouseDrop", b, a))
        });
    w.defineProperty(G,
        {
            sE: "actionDown"
        }, function ()
        {
            return null !== this.ia ? this.ia.Kq : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Kq;
            b !== a && (null !== a && w.j(a, "function", G, "actionDown"), this.ia.Kq = a, this.h("actionDown", b, a))
        });
    w.defineProperty(G,
        {
            tE: "actionMove"
        }, function ()
        {
            return null !== this.ia ? this.ia.Lq : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Lq;
            b !== a && (null !== a && w.j(a, "function", G, "actionMove"), this.ia.Lq = a, this.h("actionMove", b, a))
        });
    w.defineProperty(G,
        {
            uE: "actionUp"
        }, function ()
        {
            return null !== this.ia ? this.ia.Mq : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Mq;
            b !== a && (null !== a && w.j(a, "function", G, "actionUp"), this.ia.Mq = a, this.h("actionUp", b, a))
        });
    w.defineProperty(G,
        {
            rE: "actionCancel"
        }, function ()
        {
            return null !== this.ia ? this.ia.Jq : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Jq;
            b !== a && (null !== a && w.j(a, "function", G, "actionCancel"), this.ia.Jq = a, this.h("actionCancel", b, a))
        });
    w.defineProperty(G,
        {
            NB: "toolTip"
        }, function ()
        {
            return null !== this.ia ? this.ia.jj : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.jj;
            b !== a && (this.ia.jj = a, this.h("toolTip", b, a))
        });
    w.defineProperty(G,
        {
            contextMenu: "contextMenu"
        }, function ()
        {
            return null !== this.ia ? this.ia.Hi : null
        }, function (a)
        {
            xo(this);
            var b = this.ia.Hi;
            b !== a && (this.ia.Hi = a, this.h("contextMenu", b, a))
        });
    G.prototype.bind = G.prototype.bind = function (a)
    {
        a.Fg = this;
        var b = this.Yl();
        null !== b && dp(b) && w.k("Cannot add a Binding to a template that has already been copied: " + a);
        null === this.yc && (this.yc = new H(ah));
        this.yc.add(a)
    };
    G.prototype.findTemplateBinder = G.prototype.Yl = function ()
    {
        for (var a = this instanceof C ? this : this.R; null !== a;)
        {
            if (null !== a.hl) return a;
            a = a.R
        }
        return null
    };
    G.prototype.setProperties = function (a)
    {
        w.Xu(this, a)
    };
    var ep;
    G.make = ep = function (a, b)
    {
        var c = arguments,
            d = null,
            e = null;
        if ("function" === typeof a) e = a;
        else if ("string" === typeof a)
        {
            var f = fp.ka(a);
            "function" === typeof f ? (c = w.Tl(arguments), d = f(c), w.Pa(d) || w.k('GraphObject.make invoked object builder "' + a + '", but it did not return an Object')) : e = ca[a]
        }
        null === d && (void 0 !== e && null !== e && e.constructor || w.k("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: " + a), d = new e);
        f = 1;
        if (d instanceof D && 1 < c.length)
        {
            var h = d,
                e = c[1];
            if ("string" ===
                typeof e || e instanceof HTMLDivElement) El(h, e), f++
        }
        for (; f < c.length; f++) e = c[f], void 0 === e ? w.k("Undefined value at argument " + f + " for object being constructed by GraphObject.make: " + d) : gp(d, e);
        return d
    };

    function gp(a, b)
    {
        if ("string" === typeof b)
            if (a instanceof Lh) a.text = b;
            else if (a instanceof X) a.Gb = b;
            else if (a instanceof yl) a.source = b;
            else if (a instanceof C)
            {
                var c = pa(C, b);
                null !== c ? a.type = c : w.k("Unknown Panel type as an argument to GraphObject.make: " + b)
            }
            else a instanceof ga ? (c = pa(ga, b), null !== c ? a.type = c : w.k("Unknown Brush type as an argument to GraphObject.make: " + b)) : a instanceof Be ? (c = pa(Be, b), null !== c ? a.type = c : w.k("Unknown Geometry type as an argument to GraphObject.make: " + b)) : a instanceof wf ?
                    (c = pa(wf, b), null !== c ? a.type = c : w.k("Unknown PathSegment type as an argument to GraphObject.make: " + b)) : w.k("Unable to use a string as an argument to GraphObject.make: " + b);
        else if (b instanceof G) c = b, a instanceof C || w.k("A GraphObject can only be added to a Panel, not to: " + a), a.add(c);
        else if (b instanceof Vg)
        {
            var d = b,
                c = a,
                e;
            d.xe && c.getRowDefinition ? e = c.getRowDefinition(d.index) : !d.xe && c.getColumnDefinition ? e = c.getColumnDefinition(d.index) : w.k("A RowColumnDefinition can only be added to a Panel, not to: " +
                a);
            e.Np(d)
        }
        else if (b instanceof da) "function" === typeof a.gc ? a.gc(b) : w.Mj(a, b);
        else if (b instanceof ah) a instanceof G ? a.bind(b) : a instanceof Vg ? a.bind(b) : w.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: " + a);
        else if (b instanceof De) a instanceof Be ? a.fc.add(b) : w.k("A PathFigure can only be added to a Geometry, not to: " + a);
        else if (b instanceof wf) a instanceof De ? a.wb.add(b) : w.k("A PathSegment can only be added to a PathFigure, not to: " + a);
        else if (b instanceof sg) a instanceof
        D ? a.Tb = b : a instanceof V ? a.Tb = b : w.k("A Layout can only be assigned to a Diagram or a Group, not to: " + a);
        else if (Array.isArray(b))
            for (c = 0; c < b.length; c++) gp(a, b[c]);
        else if ("object" === typeof b && null !== b)
            if (a instanceof ga)
            {
                e = new ra;
                for (c in b) d = parseFloat(c), isNaN(d) ? e[c] = b[c] : a.addColorStop(d, b[c]);
                w.Xu(a, e)
            }
            else if (a instanceof Vg)
            {
                void 0 !== b.row ? (e = b.row, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && w.k("Must specify non-negative integer row for RowColumnDefinition " + b + ", not: " + e), a.xe = !0,
                    a.index = e) : void 0 !== b.column && (e = b.column, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && w.k("Must specify non-negative integer column for RowColumnDefinition " + b + ", not: " + e), a.xe = !1, a.index = e);
                e = new ra;
                for (c in b) "row" !== c && "column" !== c && (e[c] = b[c]);
                w.Xu(a, e)
            }
            else w.Xu(a, b);
        else w.k('Unknown initializer "' + b + '" for object being constructed by GraphObject.make: ' + a)
    }
    var fp = new ma("string", "function");
    G.getBuilders = function ()
    {
        var a = new ma("string", "function"),
            b;
        for (b in fp)
            if (b !== b.toLowerCase())
            {
                var c = fp.ka(b);
                "function" === typeof c && a.add(b, c)
            }
        a.freeze();
        return a
    };
    var hp;
    G.defineBuilder = hp = function (a, b)
    {
        w.j(a, "string", G, "defineBuilder:name");
        w.j(b, "function", G, "defineBuilder:func");
        var c = a.toLowerCase();
        "" !== a && "none" !== c && a !== c || w.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: " + a);
        fp.add(a, b)
    };
    var ip;
    G.takeBuilderArgument = ip = function (a, b, c)
    {
        void 0 === c && (c = null);
        var d = a[1];
        if ("function" === typeof c ? c(d) : "string" === typeof d) return a.splice(1, 1), d;
        if (void 0 === b) throw Error("no " + ("function" === typeof c ? "satisfactory" : "string") + " argument for GraphObject builder " + a[0]);
        return b
    };
    hp("Button", function ()
    {
        var a = new ga(og);
        a.addColorStop(0, "white");
        a.addColorStop(1, "lightgray");
        var b = new ga(og);
        b.addColorStop(0, "white");
        b.addColorStop(1, "dodgerblue");
        a = ep(C, Hl,
            {
                Ix: !0,
                WE: function (a, b)
                {
                    var e = a.Cd("ButtonBorder");
                    null !== e && (e.fill = b ? a._buttonFillNormal : a._buttonFillDisabled)
                },
                _buttonFillNormal: a,
                _buttonStrokeNormal: "gray",
                _buttonFillOver: b,
                _buttonStrokeOver: "blue",
                _buttonFillDisabled: "darkgray"
            }, ep(X,
                {
                    name: "ButtonBorder",
                    Gb: "Rectangle",
                    A: new K(0, 0, 2.761423749153968, 2.761423749153968),
                    B: new K(1, 1, -2.761423749153968, -2.761423749153968),
                    fill: a,
                    stroke: "gray"
                }));
        a.Gu = function (a, b)
        {
            if (b.su())
            {
                var e = b.Cd("ButtonBorder");
                if (e instanceof X)
                {
                    var f = b._buttonFillOver;
                    b._buttonFillNormal = e.fill;
                    e.fill = f;
                    f = b._buttonStrokeOver;
                    b._buttonStrokeNormal = e.stroke;
                    e.stroke = f
                }
            }
        };
        a.Hu = function (a, b)
        {
            if (b.su())
            {
                var e = b.Cd("ButtonBorder");
                e instanceof X && (e.fill = b._buttonFillNormal, e.stroke = b._buttonStrokeNormal)
            }
        };
        return a
    });
    hp("TreeExpanderButton", function ()
    {
        var a = ep("Button",
            {
                _treeExpandedFigure: "MinusLine",
                _treeCollapsedFigure: "PlusLine"
            }, ep(X,
                {
                    name: "ButtonIcon",
                    Gb: "MinusLine",
                    Ca: sd
                }, (new ah("figure", "isTreeExpanded", function (a, c)
                {
                    var d = c.R;
                    return a ? d._treeExpandedFigure : d._treeCollapsedFigure
                })).$x()),
            {
                visible: !1
            }, (new ah("visible", "isTreeLeaf", function (a)
            {
                return !a
            })).$x());
        a.click = function (a, c)
        {
            var d = c.V;
            d instanceof jh && (d = d.Ye);
            if (d instanceof T)
            {
                var e = d.g;
                if (null !== e)
                {
                    e = e.pb;
                    if (d.uc)
                    {
                        if (!e.canCollapseTree(d)) return
                    }
                    else if (!e.canExpandTree(d)) return;
                    a.tc = !0;
                    d.uc ? e.collapseTree(d) : e.expandTree(d)
                }
            }
        };
        return a
    });
    hp("SubGraphExpanderButton", function ()
    {
        var a = ep("Button",
            {
                _subGraphExpandedFigure: "MinusLine",
                _subGraphCollapsedFigure: "PlusLine"
            }, ep(X,
                {
                    name: "ButtonIcon",
                    Gb: "MinusLine",
                    Ca: sd
                }, (new ah("figure", "isSubGraphExpanded", function (a, c)
                {
                    var d = c.R;
                    return a ? d._subGraphExpandedFigure : d._subGraphCollapsedFigure
                })).$x()));
        a.click = function (a, c)
        {
            var d = c.V;
            d instanceof jh && (d = d.Ye);
            if (d instanceof V)
            {
                var e = d.g;
                if (null !== e)
                {
                    e = e.pb;
                    if (d.ad)
                    {
                        if (!e.canCollapseSubGraph(d)) return
                    }
                    else if (!e.canExpandSubGraph(d)) return;
                    a.tc = !0;
                    d.ad ? e.collapseSubGraph(d) : e.expandSubGraph(d)
                }
            }
        };
        return a
    });
    hp("ToolTip", function ()
    {
        var a = new jh(Hl),
            b = new X;
        b.name = "Border";
        b.fill = "#FFFFE0";
        b.stroke = "#CCCCCC";
        a.add(b);
        return a
    });
    hp("ContextMenu", function ()
    {
        return new jh(Gl)
    });
    hp("ContextMenuButton", function ()
    {
        var a = ep("Button");
        a.stretch = so;
        var b = a.Cd("ButtonBorder");
        b instanceof X && (b.Gb = "Rectangle", b.A = new K(0, 0, 2, 3), b.B = new K(1, 1, -2, -2));
        return a
    });
    hp("PanelExpanderButton", function (a)
    {
        var b = ip(a, "COLLAPSIBLE"),
            c = ep("Button",
                {
                    _buttonExpandedFigure: "TriangleUp",
                    _buttonCollapsedFigure: "TriangleDown"
                }, ep(X, "TriangleUp",
                    {
                        name: "ButtonIcon",
                        Ca: new ia(6, 4)
                    }, (new ah("figure", "visible", function (a)
                    {
                        return a ? c._buttonExpandedFigure : c._buttonCollapsedFigure
                    })).$x(b)));
        a = c.Cd("ButtonBorder");
        a instanceof X && (a.stroke = null, a.fill = "transparent");
        c.click = function (a, c)
        {
            var f = c.g;
            if (null !== f && !f.ib)
            {
                var h = c.Yl();
                null === h && (h = c.V);
                null !== h && (h = h.Cd(b), null !== h &&
                (f.Kb("Collapse/Expand Panel"), h.visible = !h.visible, f.Yc("Collapse/Expand Panel")))
            }
        };
        return c
    });
    hp("CheckBoxButton", function (a)
    {
        var b = ip(a);
        a = ep("Button",
            {
                "ButtonBorder.fill": "white",
                "ButtonBorder.stroke": "gray",
                width: 14,
                height: 14
            }, ep(X,
                {
                    name: "ButtonIcon",
                    aI: "M0 4 L3 9 9 0",
                    mb: 2,
                    stretch: Ee,
                    FA: Sj,
                    visible: !1
                }, "" !== b ? (new ah("visible", b)).QI() : []));
        a.click = function (a, d)
        {
            var e = a.g;
            if (!(null === e || e.ib || "" !== b && e.$.ib))
            {
                a.tc = !0;
                var f = d.Cd("ButtonIcon");
                e.Kb("checkbox");
                f.visible = !f.visible;
                "function" === typeof d._doClick && d._doClick(a, d);
                e.Yc("checkbox")
            }
        };
        return a
    });
    hp("CheckBox", function (a)
    {
        a = ip(a);
        a = ep("CheckBoxButton", a,
            {
                name: "Button",
                margin: new hb(0, 1, 0, 0)
            });
        var b = ep(C, "Horizontal", a,
            {
                Ix: !0,
                margin: 1,
                _buttonFillNormal: a._buttonFillNormal,
                _buttonStrokeNormal: a._buttonStrokeNormal,
                _buttonFillOver: a._buttonFillOver,
                _buttonStrokeOver: a._buttonStrokeOver,
                _buttonFillDisabled: a._buttonFillDisabled,
                Gu: a.Gu,
                Hu: a.Hu,
                click: a.click,
                _buttonClick: a.click
            });
        a.Gu = null;
        a.Hu = null;
        a.click = null;
        return b
    });

    function yo()
    {
        this.Cr = this.Hi = this.jj = this.Jq = this.Mq = this.Lq = this.Kq = this.Yi = this.ws = this.vs = this.Zi = this.$i = this.aj = this.ys = this.xs = this.Gi = this.Mi = this.Ei = null
    }
    yo.prototype.copy = function ()
    {
        var a = new yo;
        a.Ei = this.Ei;
        a.Mi = this.Mi;
        a.Gi = this.Gi;
        a.xs = this.xs;
        a.ys = this.ys;
        a.aj = this.aj;
        a.$i = this.$i;
        a.Zi = this.Zi;
        a.vs = this.vs;
        a.ws = this.ws;
        a.Yi = this.Yi;
        a.Kq = this.Kq;
        a.Lq = this.Lq;
        a.Mq = this.Mq;
        a.Jq = this.Jq;
        a.jj = this.jj;
        a.Hi = this.Hi;
        a.Cr = this.Cr;
        return a
    };

    function C(a)
    {
        G.call(this);
        void 0 === a ? this.na = Uj : (w.ob(a, C, C, "type"), this.na = a);
        this.xa = new H(G);
        this.lf = ed;
        this.na === Kl && (this.Hn = !0);
        this.or = qc;
        this.Ki = qo;
        this.na === Vo && jp(this);
        this.Cp = Sj;
        this.Pr = Cd;
        this.Qr = cd;
        this.Lr = 0;
        this.Kr = 100;
        this.Nr = 10;
        this.Mr = 0;
        this.hl = this.Yd = this.bk = this.Em = this.Gm = null;
        this.cs = NaN;
        this.wg = this.ik = null;
        this.So = "category";
        this.vg = null;
        this.lj = new B(NaN, NaN, NaN, NaN);
        this.vk = this.et = this.Gl = null;
        this.Pj = ""
    }
    w.La(C, G);
    w.ni(C);
    w.ga("Panel", C);

    function jp(a)
    {
        a.Uj = ed;
        a.Qh = 1;
        a.Ji = null;
        a.ll = null;
        a.Ph = 1;
        a.Oh = null;
        a.kl = null;
        a.Xc = [];
        a.Uc = [];
        a.$m = kp;
        a.Bm = kp;
        a.kj = 0;
        a.Ui = 0
    }
    C.prototype.cloneProtected = function (a)
    {
        G.prototype.cloneProtected.call(this, a);
        a.na = this.na;
        a.lf = this.lf.S();
        a.or = this.or.S();
        a.Ki = this.Ki;
        if (a.na === Vo)
        {
            a.Uj = this.Uj.S();
            a.Qh = this.Qh;
            a.Ji = this.Ji;
            a.ll = this.ll;
            a.Ph = this.Ph;
            a.Oh = this.Oh;
            a.kl = this.kl;
            var b = [];
            if (0 < this.Xc.length)
                for (var c = this.Xc, d = c.length, e = 0; e < d; e++)
                    if (void 0 !== c[e])
                    {
                        var f = c[e].copy();
                        f.mm(a);
                        b[e] = f
                    }
            a.Xc = b;
            b = [];
            if (0 < this.Uc.length)
                for (c = this.Uc, d = c.length, e = 0; e < d; e++) void 0 !== c[e] && (f = c[e].copy(), f.mm(a), b[e] = f);
            a.Uc = b;
            a.$m = this.$m;
            a.Bm = this.Bm;
            a.kj = this.kj;
            a.Ui = this.Ui
        }
        a.Cp = this.Cp;
        a.Pr = this.Pr.S();
        a.Qr = this.Qr.S();
        a.Lr = this.Lr;
        a.Kr = this.Kr;
        a.Nr = this.Nr;
        a.Mr = this.Mr;
        a.Gm = this.Gm;
        a.bk = this.bk;
        a.Yd = this.Yd;
        a.hl = this.hl;
        a.cs = this.cs;
        a.ik = this.ik;
        a.wg = this.wg;
        a.So = this.So;
        a.lj.assign(this.lj);
        a.Pj = this.Pj;
        null !== this.et && (a.et = this.et)
    };
    C.prototype.pi = function (a)
    {
        G.prototype.pi.call(this, a);
        a.xa = this.xa;
        for (var b = a.xa.n, c = b.length, d = 0; d < c; d++) b[d].ej = a;
        a.Gl = null
    };
    C.prototype.copy = function ()
    {
        var a = G.prototype.copy.call(this);
        if (null !== a)
        {
            for (var b = this.xa.n, c = b.length, d = 0; d < c; d++)
            {
                var e = b[d].copy(),
                    f = a;
                e.mm(f);
                e.Xm = null;
                var h = f.xa,
                    k = h.count;
                h.Rd(k, e);
                h = f.V;
                if (null !== h)
                {
                    h.Sm = null;
                    null !== e.le && h instanceof T && (h.Pk = !0);
                    var l = f.g;
                    null !== l && l.ja.lb || h.cd(Ef, "elements", f, null, e, null, k)
                }
            }
            return a
        }
        return null
    };
    C.prototype.gc = function (a)
    {
        a.Je === C ? this.type = a : G.prototype.gc.call(this, a)
    };
    C.prototype.toString = function ()
    {
        return "Panel(" + this.type + ")#" + w.Pd(this)
    };
    var Uj;
    C.Position = Uj = w.p(C, "Position", 0);
    C.Horizontal = w.p(C, "Horizontal", 1);
    var Gl;
    C.Vertical = Gl = w.p(C, "Vertical", 2);
    var Oj;
    C.Spot = Oj = w.p(C, "Spot", 3);
    var Hl;
    C.Auto = Hl = w.p(C, "Auto", 4);
    var Vo;
    C.Table = Vo = w.p(C, "Table", 5);
    C.Viewbox = w.p(C, "Viewbox", 6);
    var Mo;
    C.TableRow = Mo = w.p(C, "TableRow", 7);
    var No;
    C.TableColumn = No = w.p(C, "TableColumn", 8);
    var jj;
    C.Link = jj = w.p(C, "Link", 9);
    var Kl;
    C.Grid = Kl = w.p(C, "Grid", 10);
    var lp;
    C.Graduated = lp = w.p(C, "Graduated", 11);
    w.defineProperty(C,
        {
            type: "type"
        }, function ()
        {
            return this.na
        }, function (a)
        {
            var b = this.na;
            b !== a && (b !== Mo && b !== No || w.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: " + a), this.na = a, this.na === Kl ? this.Hn = !0 : this.na === Vo && jp(this), this.H(), this.h("type", b, a))
        });
    w.u(C,
        {
            elements: "elements"
        }, function ()
        {
            return this.xa.i
        });
    w.u(C,
        {
            Ja: "naturalBounds"
        }, function ()
        {
            return this.Wc
        });
    w.defineProperty(C,
        {
            padding: "padding"
        }, function ()
        {
            return this.lf
        }, function (a)
        {
            "number" === typeof a ? (0 > a && w.Fa(a, ">= 0", C, "padding"), a = new hb(a)) : (w.G(a, hb, C, "padding"), 0 > a.left && w.Fa(a.left, ">= 0", C, "padding:value.left"), 0 > a.right && w.Fa(a.right, ">= 0", C, "padding:value.right"), 0 > a.top && w.Fa(a.top, ">= 0", C, "padding:value.top"), 0 > a.bottom && w.Fa(a.bottom, ">= 0", C, "padding:value.bottom"));
            var b = this.lf;
            b.L(a) || (this.lf = a = a.S(), this.H(), this.h("padding", b, a))
        });
    w.defineProperty(C,
        {
            Xl: "defaultAlignment"
        }, function ()
        {
            return this.or
        }, function (a)
        {
            var b = this.or;
            b.L(a) || (this.or = a = a.S(), this.H(), this.h("defaultAlignment", b, a))
        });
    w.defineProperty(C,
        {
            $d: "defaultStretch"
        }, function ()
        {
            return this.Ki
        }, function (a)
        {
            var b = this.Ki;
            b !== a && (w.ob(a, G, C, "defaultStretch"), this.Ki = a, this.H(), this.h("defaultStretch", b, a))
        });
    w.defineProperty(C,
        {
            XK: "defaultSeparatorPadding"
        }, function ()
        {
            return void 0 === this.Uj ? ed : this.Uj
        }, function (a)
        {
            if (void 0 !== this.Uj)
            {
                "number" === typeof a && (a = new hb(a));
                var b = this.Uj;
                b.L(a) || (this.Uj = a = a.S(), this.H(), this.h("defaultSeparatorPadding", b, a))
            }
        });
    w.defineProperty(C,
        {
            VK: "defaultRowSeparatorStroke"
        }, function ()
        {
            return void 0 === this.Ji ? null : this.Ji
        }, function (a)
        {
            var b = this.Ji;
            b !== a && (null === a || "string" === typeof a || a instanceof ga) && (a instanceof ga && a.freeze(), this.Ji = a, this.oa(), this.h("defaultRowSeparatorStroke", b, a))
        });
    w.defineProperty(C,
        {
            WK: "defaultRowSeparatorStrokeWidth"
        }, function ()
        {
            return void 0 === this.Qh ? 1 : this.Qh
        }, function (a)
        {
            if (void 0 !== this.Qh)
            {
                var b = this.Qh;
                b !== a && isFinite(a) && 0 <= a && (this.Qh = a, this.H(), this.h("defaultRowSeparatorStrokeWidth", b, a))
            }
        });
    w.defineProperty(C,
        {
            UK: "defaultRowSeparatorDashArray"
        }, function ()
        {
            return void 0 === this.ll ? null : this.ll
        }, function (a)
        {
            if (void 0 !== this.ll)
            {
                var b = this.ll;
                if (b !== a)
                {
                    null === a || Array.isArray(a) || w.Fd(a, "Array", C, "defaultRowSeparatorDashArray:value");
                    if (null !== a)
                    {
                        for (var c = a.length, d = 0, e = 0; e < c; e++)
                        {
                            var f = a[e];
                            "number" === typeof f && 0 <= f && isFinite(f) || w.k("defaultRowSeparatorDashArray value " + f + " at index " + e + " must be a positive number or zero.");
                            d += f
                        }
                        if (0 === d)
                        {
                            if (null === b) return;
                            a = null
                        }
                    }
                    this.ll = a;
                    this.oa();
                    this.h("defaultRowSeparatorDashArray", b, a)
                }
            }
        });
    w.defineProperty(C,
        {
            PK: "defaultColumnSeparatorStroke"
        }, function ()
        {
            return void 0 === this.Oh ? null : this.Oh
        }, function (a)
        {
            if (void 0 !== this.Oh)
            {
                var b = this.Oh;
                b !== a && (null === a || "string" === typeof a || a instanceof ga) && (a instanceof ga && a.freeze(), this.Oh = a, this.oa(), this.h("defaultColumnSeparatorStroke", b, a))
            }
        });
    w.defineProperty(C,
        {
            QK: "defaultColumnSeparatorStrokeWidth"
        }, function ()
        {
            return void 0 === this.Ph ? 1 : this.Ph
        }, function (a)
        {
            if (void 0 !== this.Ph)
            {
                var b = this.Ph;
                b !== a && isFinite(a) && 0 <= a && (this.Ph = a, this.H(), this.h("defaultColumnSeparatorStrokeWidth", b, a))
            }
        });
    w.defineProperty(C,
        {
            OK: "defaultColumnSeparatorDashArray"
        }, function ()
        {
            return void 0 === this.kl ? null : this.kl
        }, function (a)
        {
            if (void 0 !== this.kl)
            {
                var b = this.kl;
                if (b !== a)
                {
                    null === a || Array.isArray(a) || w.Fd(a, "Array", C, "defaultColumnSeparatorDashArray:value");
                    if (null !== a)
                    {
                        for (var c = a.length, d = 0, e = 0; e < c; e++)
                        {
                            var f = a[e];
                            "number" === typeof f && 0 <= f && isFinite(f) || w.k("defaultColumnSeparatorDashArray value " + f + " at index " + e + " must be a positive number or zero.");
                            d += f
                        }
                        if (0 === d)
                        {
                            if (null === b) return;
                            a = null
                        }
                    }
                    this.kl =
                        a;
                    this.oa();
                    this.h("defaultColumnSeparatorDashArray", b, a)
                }
            }
        });
    w.defineProperty(C,
        {
            cM: "viewboxStretch"
        }, function ()
        {
            return this.Cp
        }, function (a)
        {
            var b = this.Cp;
            b !== a && (w.ob(a, G, C, "viewboxStretch"), this.Cp = a, this.H(), this.h("viewboxStretch", b, a))
        });
    w.defineProperty(C,
        {
            Hx: "gridCellSize"
        }, function ()
        {
            return this.Pr
        }, function (a)
        {
            var b = this.Pr;
            if (!b.L(a))
            {
                w.G(a, ia, C, "gridCellSize");
                a.I() && 0 !== a.width && 0 !== a.height || w.k("Invalid Panel.gridCellSize: " + a);
                this.Pr = a.S();
                var c = this.g;
                null !== c && this === c.En && em(c);
                this.oa();
                this.h("gridCellSize", b, a)
            }
        });
    w.defineProperty(C,
        {
            pF: "gridOrigin"
        }, function ()
        {
            return this.Qr
        }, function (a)
        {
            var b = this.Qr;
            if (!b.L(a))
            {
                w.G(a, y, C, "gridOrigin");
                a.I() || w.k("Invalid Panel.gridOrigin: " + a);
                this.Qr = a.S();
                var c = this.g;
                null !== c && this === c.En && em(c);
                this.oa();
                this.h("gridOrigin", b, a)
            }
        });
    w.defineProperty(C,
        {
            Ok: "graduatedMin"
        }, function ()
        {
            return this.Lr
        }, function (a)
        {
            w.Ad(a, C, "graduatedMin");
            var b = this.Lr;
            b !== a && (this.Lr = a, this.H(), this.h("graduatedMin", b, a), Co(this) && (a = this.V, null !== a && Do(this, a, "graduatedRange")))
        });
    w.defineProperty(C,
        {
            IA: "graduatedMax"
        }, function ()
        {
            return this.Kr
        }, function (a)
        {
            w.Ad(a, C, "graduatedMax");
            var b = this.Kr;
            b !== a && (this.Kr = a, this.H(), this.h("graduatedMax", b, a), Co(this) && (a = this.V, null !== a && Do(this, a, "graduatedRange")))
        });
    w.u(C,
        {
            lu: "graduatedRange"
        }, function ()
        {
            return this.IA - this.Ok
        });
    w.defineProperty(C,
        {
            JA: "graduatedTickUnit"
        }, function ()
        {
            return this.Nr
        }, function (a)
        {
            w.Ad(a, C, "graduatedTickUnit");
            var b = this.Nr;
            b !== a && 0 < a && (this.Nr = a, this.H(), this.h("graduatedTickUnit", b, a))
        });
    w.defineProperty(C,
        {
            oF: "graduatedTickBase"
        }, function ()
        {
            return this.Mr
        }, function (a)
        {
            w.Ad(a, C, "graduatedTickBase");
            var b = this.Mr;
            b !== a && (this.Mr = a, this.H(), this.h("graduatedTickBase", b, a))
        });
    g = C.prototype;
    g.Gs = function (a)
    {
        G.prototype.Gs.call(this, a);
        for (var b = this.xa.n, c = b.length, d = 0; d < c; d++) b[d].Gs(a)
    };
    g.Ik = function (a, b)
    {
        if (this.na === Kl)
        {
            var c = this.vj() * b.scale;
            0 >= c && (c = 1);
            var d = this.Hx,
                e = d.width,
                d = d.height,
                f = this.Ja,
                h = f.width,
                f = f.height,
                k = Math.ceil(h / e),
                l = Math.ceil(f / d),
                m = this.pF;
            a.save();
            a.beginPath();
            a.rect(0, 0, h, f);
            a.clip();
            for (var n = [], p = this.xa.n, q = p.length, r = 0; r < q; r++)
            {
                var s = p[r],
                    u = [];
                n.push(u);
                if (s.visible)
                    for (var s = $m(s.Gb), t = r + 1; t < q; t++)
                    {
                        var x = p[t];
                        x.visible && $m(x.Gb) === s && (x = x.interval, 2 <= x && u.push(x))
                    }
            }
            p = this.xa.n;
            q = p.length;
            for (r = 0; r < q; r++)
            {
                var v = p[r];
                if (v.visible && (u = v.interval, !(2 >
                    e * u * c)))
                {
                    s = v.opacity;
                    t = 1;
                    if (1 !== s)
                    {
                        if (0 === s) continue;
                        t = a.globalAlpha;
                        a.globalAlpha = t * s
                    }
                    var x = n[r],
                        z = !1,
                        A = !0,
                        L = v.yG;
                    null !== L && (z = !0, A = a.xx(L, v.zf));
                    if ("LineV" === v.Gb && null !== v.stroke)
                    {
                        a.lineWidth = v.mb;
                        Qo(this, a, v.stroke, !1, !1);
                        a.beginPath();
                        for (var E = Math.floor(-m.x / e), P = E; P <= E + k; P++)
                        {
                            var $ = P * e + m.x;
                            0 <= $ && $ <= h && mp(P, u, x) && (z && !A ? Bo(a, $, 0, $, f, L, v.zf) : (a.moveTo($, 0), a.lineTo($, f)))
                        }
                        a.stroke()
                    }
                    else if ("LineH" === v.Gb && null !== v.stroke)
                    {
                        a.lineWidth = v.mb;
                        Qo(this, a, v.stroke, !1, !1);
                        a.beginPath();
                        for (P = E = Math.floor(-m.y /
                            d); P <= E + l; P++) $ = P * d + m.y, 0 <= $ && $ <= f && mp(P, u, x) && (z && !A ? Bo(a, 0, $, h, $, L, v.zf) : (a.moveTo(0, $), a.lineTo(h, $)));
                        a.stroke()
                    }
                    else if ("BarV" === v.Gb && null !== v.fill)
                        for (Qo(this, a, v.fill, !0, !1), v = v.width, isNaN(v) && (v = e), P = E = Math.floor(-m.x / e); P <= E + k; P++) $ = P * e + m.x, 0 <= $ && $ <= h && mp(P, u, x) && a.fillRect($, 0, v, f);
                    else if ("BarH" === v.Gb && null !== v.fill)
                        for (Qo(this, a, v.fill, !0, !1), v = v.height, isNaN(v) && (v = d), P = E = Math.floor(-m.y / d); P <= E + l; P++) $ = P * d + m.y, 0 <= $ && $ <= f && mp(P, u, x) && a.fillRect(0, $, h, v);
                    z && a.ux();
                    1 !== s && (a.globalAlpha =
                        t)
                }
            }
            a.restore();
            a.Ke(!1)
        }
        else if (this.na === lp)
        {
            e = this.Ja;
            c = e.width;
            e = e.height;
            a.save();
            a.beginPath();
            a.rect(-1, -1, c + 1, e + 1);
            a.clip();
            c = this.Bd();
            c.ve(a, b);
            e = this.vj() * b.scale;
            0 >= e && (e = 1);
            d = c.U;
            h = this.xa.n;
            f = this.Gm;
            k = h.length;
            for (l = 0; l < k; l++)
                if (q = h[l], m = f[l], n = m.length, q.visible && q !== c && 0 !== m.length)
                    if (q instanceof X)
                    {
                        if (!(2 > this.JA * q.interval * c.of.du / this.lu * e))
                            for (r = q.za, u = q.mb * q.scale, s = q.oh, s.Td() && (s = Bb), p = 0; p < n; p++) t = q, x = m[p][0], z = d, E = m[p][1], P = r, v = u, A = s, L = t.kd, L.reset(), L.translate(x.x + z.x,
                                x.y + z.y), L.rotate(E + t.angle, 0, 0), L.translate(-P.width * A.x + A.offsetX + v / 2, -P.height * A.y + A.offsetY + v / 2), L.scale(t.scale, t.scale), So(t, !1), t.wm.set(t.kd), t.Co = t.scale, To(t, !1), q.ve(a, b), q.kd.reset()
                    }
                    else if (q instanceof Lh)
                        for (null === this.vk && (this.vk = new Lh), r = this.vk, np(q, r), p = 0; p < n; p++) x = m[p], 3 < x.length && (s = x[6], r.Md = x[2], r.lg = x[3], r.pe = x[4], r.yf = x[5], r.Wc = x[8], r.hc(s.x, s.y, s.width, s.height), q = r, u = d, t = x[7], x = x[8], z = q.kd, z.reset(), z.translate(s.x + u.x, s.y + u.y), z.translate(-t.x, -t.y), Fo(q, z, x.x, x.y, x.width,
                            x.height), So(q, !1), q.wm.set(q.kd), q.Co = q.scale, To(q, !1), r.ve(a, b));
            a.restore();
            a.Ke(!0)
        }
        else
        {
            this.na === Vo && (a.lineCap = "butt", op(this, a, !0, this.Xc, !0), op(this, a, !1, this.Uc, !0), Mp(this, a, !0, this.Xc), Mp(this, a, !1, this.Uc), op(this, a, !0, this.Xc, !1), op(this, a, !1, this.Uc, !1));
            (c = this.qu) && a.save();
            e = this.Bd();
            d = this.xa.n;
            h = d.length;
            for (f = 0; f < h; f++) k = d[f], c && k === e && (a.Lp = !0), k.ve(a, b), c && k === e && (a.Lp = !1);
            c && (a.restore(), a.Ke(!0))
        }
    };

    function np(a, b)
    {
        b.M = a.M | 6144;
        b.Bc = a.Bc;
        b.Ib = a.Ib;
        b.cc = a.cc;
        b.Te = a.Te.S();
        b.Zh = a.Zh.S();
        b.Yh = a.Yh.S();
        b.Wi = a.Wi.copy();
        b.qb = a.qb;
        b.lg = a.lg;
        b.Eg = a.Eg;
        b.Qm = a.Qm.S();
        b.me = a.me.S();
        b.vm = a.vm.S();
        b.an = a.an;
        b.bn = a.bn.S();
        b.cn = a.cn;
        null !== a.ng && (b.ng = a.ng.copy());
        b.gn = a.gn;
        a instanceof Lh && (b.Md = a.Md, b.sc = a.sc, b.pg = a.pg, b.Hl = a.Hl, b.og = a.og, b.Ll = a.Ll, b.Jm = a.Jm, b.hk = a.hk, b.fk = a.fk, b.cj = a.cj, b.nj = a.nj, b.yf.Xj = null, b.fi = a.fi, b.gi = a.gi, b.gh = a.gh, b.Vo = a.Vo, b.tg = a.tg, b.sg = a.sg, b.rg = a.rg, b.Fm = a.Fm)
    }

    function Mp(a, b, c, d)
    {
        for (var e = d.length, f = a.U, h = !0, k = 0; k < e; k++)
        {
            var l = d[k];
            if (void 0 !== l)
                if (h) h = !1;
                else if (0 !== l.ab)
                {
                    if (c)
                    {
                        if (l.position > f.height) continue
                    }
                    else if (l.position > f.width) continue;
                    var m = l.Bq;
                    isNaN(m) && (m = c ? a.Qh : a.Ph);
                    var n = l.Aq;
                    null === n && (n = c ? a.Ji : a.Oh);
                    if (0 !== m && null !== n)
                    {
                        Qo(a, b, n, !1, !1);
                        var n = !1,
                            p = !0,
                            q = l.GJ;
                        null === q && (q = c ? a.ll : a.kl);
                        null !== q && (n = !0, p = b.xx(q, 0));
                        b.beginPath();
                        var r = l.position + m;
                        c ? r > f.height && (m -= r - f.height) : r > f.width && (m -= r - f.width);
                        l = l.position + m / 2;
                        b.lineWidth = m;
                        r = a.padding;
                        c ? (l += r.top, m = r.left, r = f.width - r.right, n && !p ? Bo(b, m, l, r, l, q, 0) : (b.moveTo(m, l), b.lineTo(r, l))) : (l += r.left, m = r.top, r = f.height - r.bottom, n && !p ? Bo(b, l, m, l, r, q, 0) : (b.moveTo(l, m), b.lineTo(l, r)));
                        b.stroke();
                        n && b.ux()
                    }
                }
        }
    }

    function op(a, b, c, d, e)
    {
        for (var f = d.length, h = a.U, k = 0; k < f; k++)
        {
            var l = d[k];
            if (void 0 !== l && null !== l.background && l.wA !== e && 0 !== l.ab)
            {
                var m = c ? h.height : h.width;
                if (!(l.position > m))
                {
                    var n = l.$e(),
                        p = l.Bq;
                    isNaN(p) && (p = c ? a.Qh : a.Ph);
                    var q = l.Aq;
                    null === q && (q = c ? a.Ji : a.Oh);
                    null === q && (p = 0);
                    n -= p;
                    p = l.position + p;
                    n += l.ab;
                    p + n > m && (n = m - p);
                    0 >= n || (m = a.padding, Qo(a, b, l.background, !0, !1), c ? b.fillRect(m.left, p + m.top, h.width - (m.left + m.right), n) : b.fillRect(p + m.left, m.top, n, h.height - (m.top + m.bottom)))
                }
            }
        }
    }

    function mp(a, b, c)
    {
        if (0 !== a % b) return !1;
        b = c.length;
        for (var d = 0; d < b; d++)
            if (0 === a % c[d]) return !1;
        return !0
    }

    function $m(a)
    {
        return "LineV" === a || "BarV" === a
    }
    g.Cn = function (a, b, c, d, e)
    {
        var f = this.Xg(),
            h = this.transform,
            k = 1 / (h.m11 * h.m22 - h.m12 * h.m21),
            l = h.m22 * k,
            m = -h.m12 * k,
            n = -h.m21 * k,
            p = h.m11 * k,
            q = k * (h.m21 * h.dy - h.m22 * h.dx),
            r = k * (h.m12 * h.dx - h.m11 * h.dy);
        if (null !== this.nn) return h = this.U, ke(h.left, h.top, h.right, h.bottom, a, b, c, d, e);
        if (null !== this.background) f = a * l + b * n + q, k = a * m + b * p + r, a = c * l + d * n + q, l = c * m + d * p + r, e.m(0, 0), c = this.Ja, c = ke(0, 0, c.width, c.height, f, k, a, l, e), e.transform(h);
        else
        {
            f || (l = 1, n = m = 0, p = 1, r = q = 0);
            k = a * l + b * n + q;
            a = a * m + b * p + r;
            l = c * l + d * n + q;
            d = c * m + d * p + r;
            e.m(l, d);
            m = (l -
                k) * (l - k) + (d - a) * (d - a);
            c = !1;
            p = this.xa.n;
            r = p.length;
            n = w.K();
            q = null;
            b = Infinity;
            var s = null;
            this.qu && (s = w.K(), q = this.Bd(), (c = q.Cn(k, a, l, d, s)) && (b = (k - s.x) * (k - s.x) + (a - s.y) * (a - s.y)));
            for (var u = 0; u < r; u++)
            {
                var t = p[u];
                t.visible && t !== q && t.Cn(k, a, l, d, n) && (c = !0, t = (k - n.x) * (k - n.x) + (a - n.y) * (a - n.y), t < m && (m = t, e.set(n)))
            }
            this.qu && (b > m && e.set(s), w.v(s));
            w.v(n);
            f && e.transform(h)
        }
        return c
    };
    g.H = function (a)
    {
        G.prototype.H.call(this, a);
        a = null;
        if (this.na === Hl || this.na === jj) a = this.Bd();
        for (var b = this.xa.n, c = b.length, d = 0; d < c; d++)
        {
            var e = b[d];
            (e === a || e.ff) && e.H(!0);
            if (!e.Ca.I())
            {
                var f = Ho(e, !1);
                (e instanceof Pj || e instanceof C || e instanceof Lh || f !== Qj) && e.H(!0)
            }
        }
    };
    g.bq = function ()
    {
        if (!1 === sm(this))
        {
            dm(this, !0);
            Io(this, !0);
            for (var a = this.xa.n, b = a.length, c = 0; c < b; c++) a[c].bq()
        }
    };
    g.Ri = function ()
    {
        if (0 !== (this.M & 2048) === !1)
        {
            So(this, !0);
            To(this, !0);
            for (var a = this.xa.n, b = a.length, c = 0; c < b; c++) a[c].PA()
        }
    };
    g.PA = function ()
    {
        To(this, !0);
        for (var a = this.xa.n, b = a.length, c = 0; c < b; c++) a[c].PA()
    };
    g.On = function (a, b, c, d)
    {
        var e = this.lj;
        e.width = 0;
        e.height = 0;
        var f = this.Ca,
            h = this.si;
        void 0 === c && (c = h.width, d = h.height);
        c = Math.max(c, h.width);
        d = Math.max(d, h.height);
        var k = this.Gf;
        isNaN(f.width) || (a = Math.min(f.width, k.width));
        isNaN(f.height) || (b = Math.min(f.height, k.height));
        a = Math.max(c, a);
        b = Math.max(d, b);
        var l = this.padding;
        a = Math.max(a - l.left - l.right, 0);
        b = Math.max(b - l.top - l.bottom, 0);
        var m = this.xa.n;
        if (0 !== m.length)
        {
            var n = this.na.Sb;
            switch (n)
            {
                case "Position":
                    var p = a,
                        q = b,
                        r = c,
                        s = d,
                        u = m.length;
                    e.x = 0;
                    e.y =
                        0;
                    e.width = 0;
                    e.height = 0;
                    for (var t = Np(this), x = 0; x < u; x++)
                    {
                        var v = m[x];
                        if (v.visible || v === t)
                        {
                            var z = v.margin,
                                A = z.right + z.left,
                                L = z.top + z.bottom;
                            yk(v, p, q, r, s);
                            var E = v.za,
                                P = Math.max(E.width + A, 0),
                                $ = Math.max(E.height + L, 0),
                                S = v.position.x,
                                ba = v.position.y;
                            isFinite(S) || (S = 0);
                            isFinite(ba) || (ba = 0);
                            if (v instanceof X)
                            {
                                var ha = v;
                                if (ha.AF) var ya = ha.mb / 2,
                                    S = S - ya,
                                    ba = ba - ya
                            }
                            ab(e, S, ba, P, $)
                        }
                    }
                    break;
                case "Vertical":
                    for (var Ga = a, eb = c, va = m.length, U = w.gb(), sb = Np(this), Lb = 0; Lb < va; Lb++)
                    {
                        var Oa = m[Lb];
                        if (Oa.visible || Oa === sb)
                        {
                            var Lc = Ho(Oa, !1);
                            if (Lc !== Qj && Lc !== ro) U.push(Oa);
                            else
                            {
                                var Ma = Oa.margin,
                                    dg = Ma.right + Ma.left,
                                    eg = Ma.top + Ma.bottom;
                                yk(Oa, Ga, Infinity, eb, 0);
                                var td = Oa.za,
                                    ud = Math.max(td.width + dg, 0),
                                    Mc = Math.max(td.height + eg, 0);
                                e.width = Math.max(e.width, ud);
                                e.height += Mc
                            }
                        }
                    }
                    var rh = U.length;
                    if (0 !== rh)
                    {
                        this.Ca.width ? Ga = Math.min(this.Ca.width, this.Gf.width) : 0 !== e.width && (Ga = Math.min(e.width, this.Gf.width));
                        for (Lb = 0; Lb < rh; Lb++)
                            if (Oa = U[Lb], Oa.visible || Oa === sb) Ma = Oa.margin, dg = Ma.right + Ma.left, eg = Ma.top + Ma.bottom, yk(Oa, Ga, Infinity, eb, 0), td = Oa.za,
                                ud = Math.max(td.width + dg, 0), Mc = Math.max(td.height + eg, 0), e.width = Math.max(e.width, ud), e.height += Mc;
                        w.ta(U)
                    }
                    break;
                case "Horizontal":
                    for (var Xe = b, fb = d, pb = m.length, na = w.gb(), ja = Np(this), Za = 0; Za < pb; Za++)
                    {
                        var Ia = m[Za];
                        if (Ia.visible || Ia === ja)
                        {
                            var kb = Ho(Ia, !1);
                            if (kb !== Qj && kb !== so) na.push(Ia);
                            else
                            {
                                var Hd = Ia.margin,
                                    Gf = Hd.right + Hd.left,
                                    qe = Hd.top + Hd.bottom;
                                yk(Ia, Infinity, Xe, 0, fb);
                                var Yd = Ia.za,
                                    gd = Math.max(Yd.width + Gf, 0),
                                    sh = Math.max(Yd.height + qe, 0);
                                e.width += gd;
                                e.height = Math.max(e.height, sh)
                            }
                        }
                    }
                    var Hf = na.length;
                    if (0 !==
                        Hf)
                    {
                        this.Ca.height ? Xe = Math.min(this.Ca.height, this.Gf.height) : 0 !== e.height && (Xe = Math.min(e.height, this.Gf.height));
                        for (Za = 0; Za < Hf; Za++)
                            if (Ia = na[Za], Ia.visible || Ia === ja) Hd = Ia.margin, Gf = Hd.right + Hd.left, qe = Hd.top + Hd.bottom, yk(Ia, Infinity, Xe, 0, fb), Yd = Ia.za, gd = Math.max(Yd.width + Gf, 0), sh = Math.max(Yd.height + qe, 0), e.width += gd, e.height = Math.max(e.height, sh);
                        w.ta(na)
                    }
                    break;
                case "Spot":
                    a:
                    {
                        var Dg = a,
                            Db = b,
                            Ac = c,
                            Zd = d,
                            th = m.length,
                            qb = this.Bd(),
                            Ja = qb.margin,
                            Mb = 0,
                            If = 0,
                            Eg = Ja.right + Ja.left,
                            uh = Ja.top + Ja.bottom;yk(qb, Dg,
                        Db, Ac, Zd);
                        for (var gb = qb.za, tc = gb.width, Vb = gb.height, re = Math.max(tc + Eg, 0), uc = Math.max(Vb + uh, 0), vc = this.qu, rb = w.kg(-Ja.left, -Ja.top, re, uc), kc = !0, tb = Np(this), Bc = 0; Bc < th; Bc++)
                        {
                            var bb = m[Bc];
                            if (bb !== qb && (bb.visible || bb === tb))
                            {
                                Ja = bb.margin;
                                Mb = Ja.right + Ja.left;
                                If = Ja.top + Ja.bottom;
                                yk(bb, Dg, Db, 0, 0);
                                var gb = bb.za,
                                    re = Math.max(gb.width + Mb, 0),
                                    uc = Math.max(gb.height + If, 0),
                                    Qa = bb.alignment;
                                Qa.Zc() && (Qa = this.Xl);
                                Qa.$c() || (Qa = Jb);
                                var Ib = bb.oh;
                                Ib.Zc() && (Ib = Jb);
                                var vd = null;
                                bb instanceof C && "" !== bb.Pj && (bb.hc(0, 0, gb.width,
                                    gb.height), vd = bb.Cd(bb.Pj), vd === bb && (vd = null));
                                var fg, Ye;
                                if (null !== vd)
                                {
                                    for (var gg = vd.Ja, uj = vd.margin, Nb = w.xb(Ib.x * gg.width + Ib.offsetX - uj.left, Ib.y * gg.height + Ib.offsetY - uj.top); vd !== bb;) vd.transform.nb(Nb), vd = vd.R;
                                    fg = Qa.x * tc + Qa.offsetX - Nb.x;
                                    Ye = Qa.y * Vb + Qa.offsetY - Nb.y;
                                    w.v(Nb)
                                }
                                else fg = Qa.x * tc + Qa.offsetX - (Ib.x * gb.width - Ib.offsetX) - Ja.left, Ye = Qa.y * Vb + Qa.offsetY - (Ib.y * gb.height - Ib.offsetY) - Ja.top;
                                kc ? (kc = !1, e.x = fg, e.y = Ye, e.width = re, e.height = uc) : ab(e, fg, Ye, re, uc)
                            }
                        }
                        kc ? e.assign(rb) : vc ? e.uF(rb.x, rb.y, rb.width,
                            rb.height) : ab(e, rb.x, rb.y, rb.width, rb.height);w.Hb(rb);
                        var Cc = qb.stretch;Cc === qo && (Cc = Ho(qb, !1));
                        switch (Cc)
                        {
                            case Qj:
                                break a;
                            case Ee:
                                if (!isFinite(Dg) && !isFinite(Db)) break a;
                                break;
                            case so:
                                if (!isFinite(Dg)) break a;
                                break;
                            case ro:
                                if (!isFinite(Db)) break a
                        }
                        gb = qb.za;tc = gb.width;Vb = gb.height;re = Math.max(tc + Eg, 0);uc = Math.max(Vb + uh, 0);Ja = qb.margin;rb = w.kg(-Ja.left, -Ja.top, re, uc);
                        for (Bc = 0; Bc < th; Bc++) bb = m[Bc],
                        bb === qb || !bb.visible && bb !== tb || (Ja = bb.margin, Mb = Ja.right + Ja.left, If = Ja.top + Ja.bottom, gb = bb.za, re = Math.max(gb.width +
                            Mb, 0), uc = Math.max(gb.height + If, 0), Qa = bb.alignment, Qa.Zc() && (Qa = this.Xl), Qa.$c() || (Qa = Jb), Ib = bb.oh, Ib.Zc() && (Ib = Jb), kc ? (kc = !1, e.x = Qa.x * tc + Qa.offsetX - (Ib.x * gb.width - Ib.offsetX) - Ja.left, e.y = Qa.y * Vb + Qa.offsetY - (Ib.y * gb.height - Ib.offsetY) - Ja.top, e.width = re, e.height = uc) : ab(e, Qa.x * tc + Qa.offsetX - (Ib.x * gb.width - Ib.offsetX) - Ja.left, Qa.y * Vb + Qa.offsetY - (Ib.y * gb.height - Ib.offsetY) - Ja.top, re, uc));kc ? e.assign(rb) : vc ? e.uF(rb.x, rb.y, rb.width, rb.height) : ab(e, rb.x, rb.y, rb.width, rb.height);w.Hb(rb)
                    }
                    break;
                case "Auto":
                    var wc =
                            a,
                        hd = b,
                        lb = c,
                        Ob = d,
                        se = m.length,
                        ub = this.Bd(),
                        $d = ub.margin,
                        vh = wc,
                        wh = hd,
                        Fg = $d.right + $d.left,
                        id = $d.top + $d.bottom;
                    yk(ub, wc, hd, lb, Ob);
                    var Id = ub.za,
                        cc = 0,
                        vb = null;
                    ub instanceof X && (vb = ub, cc = vb.mb * vb.scale);
                    var wd = Math.max(Id.width + Fg, 0),
                        jb = Math.max(Id.height + id, 0),
                        dc = Op(ub),
                        ii = dc.x * wd + dc.offsetX,
                        Yc = dc.y * jb + dc.offsetY,
                        Eb = Pp(ub),
                        te = Eb.x * wd + Eb.offsetX,
                        Ze = Eb.y * jb + Eb.offsetY;
                    isFinite(wc) && (vh = Math.max(Math.abs(ii - te) - cc, 0));
                    isFinite(hd) && (wh = Math.max(Math.abs(Yc - Ze) - cc, 0));
                    var Zc = w.rm();
                    Zc.m(0, 0);
                    for (var Jf = Np(this),
                             Gg = 0; Gg < se; Gg++)
                    {
                        var xh = m[Gg];
                        if (xh !== ub && (xh.visible || xh === Jf))
                        {
                            var $d = xh.margin,
                                Ik = $d.right + $d.left,
                                wb = $d.top + $d.bottom;
                            yk(xh, vh, wh, 0, 0);
                            Id = xh.za;
                            wd = Math.max(Id.width + Ik, 0);
                            jb = Math.max(Id.height + wb, 0);
                            Zc.m(Math.max(wd, Zc.width), Math.max(jb, Zc.height))
                        }
                    }
                    if (1 === se) e.width = wd, e.height = jb, w.Lk(Zc);
                    else
                    {
                        var dc = Op(ub),
                            Eb = Pp(ub),
                            ae = 0,
                            jd = 0;
                        Eb.x !== dc.x && Eb.y !== dc.y && (ae = Zc.width / Math.abs(Eb.x - dc.x), jd = Zc.height / Math.abs(Eb.y - dc.y));
                        w.Lk(Zc);
                        cc = 0;
                        null !== vb && (cc = vb.mb * vb.scale, Rj(vb) === Sj && (ae = jd = Math.max(ae,
                            jd)));
                        var ae = ae + (Math.abs(dc.offsetX) + Math.abs(Eb.offsetX) + cc),
                            jd = jd + (Math.abs(dc.offsetY) + Math.abs(Eb.offsetY) + cc),
                            Ke = ub.stretch;
                        Ke === qo && (Ke = Ho(ub, !1));
                        switch (Ke)
                        {
                            case Qj:
                                Ob = lb = 0;
                                break;
                            case Ee:
                                isFinite(wc) && (ae = wc);
                                isFinite(hd) && (jd = hd);
                                break;
                            case so:
                                isFinite(wc) && (ae = wc);
                                Ob = 0;
                                break;
                            case ro:
                                lb = 0, isFinite(hd) && (jd = hd)
                        }
                        ub.bq();
                        yk(ub, ae, jd, lb, Ob);
                        e.width = ub.za.width + Fg;
                        e.height = ub.za.height + id
                    }
                    break;
                case "Table":
                    for (var ji = a, ki = b, vj = c, wj = d, Fb = m.length, yh = w.gb(), zh = w.gb(), ea = 0; ea < Fb; ea++)
                    {
                        var aa = m[ea],
                            be = aa instanceof C ? aa : null;
                        if (null === be || be.type !== Mo && be.type !== No || !aa.visible) yh.push(aa);
                        else
                        {
                            zh.push(be);
                            for (var hg = be.xa.n, li = hg.length, Gb = 0; Gb < li; Gb++)
                            {
                                var mi = hg[Gb];
                                be.type === Mo ? mi.Vb = aa.Vb : be.type === No && (mi.column = aa.column);
                                yh.push(mi)
                            }
                        }
                    }
                    Fb = yh.length;
                    0 === Fb && (this.ee(0), this.de(0));
                    for (var Tb = [], ea = 0; ea < Fb; ea++) aa = yh[ea], dm(aa, !0), Io(aa, !0), Tb[aa.Vb] || (Tb[aa.Vb] = []), Tb[aa.Vb][aa.column] || (Tb[aa.Vb][aa.column] = []), Tb[aa.Vb][aa.column].push(aa);
                    w.ta(yh);
                    for (var $e = w.gb(), Le = w.gb(), af = w.gb(),
                             ue = {
                                 count: 0
                             }, ve = {
                            count: 0
                        }, $c = ji, Jd = ki, Ah = this.Xc, Fb = Ah.length, ea = 0; ea < Fb; ea++)
                    {
                        var Y = Ah[ea];
                        void 0 !== Y && (Y.ab = 0)
                    }
                    Ah = this.Uc;
                    Fb = Ah.length;
                    for (ea = 0; ea < Fb; ea++) Y = Ah[ea], void 0 !== Y && (Y.ab = 0);
                    for (var kd = Tb.length, ig = 0, ea = 0; ea < kd; ea++) Tb[ea] && (ig = Math.max(ig, Tb[ea].length));
                    for (var ni = Math.min(this.kj, kd - 1), Bh = Math.min(this.Ui, ig - 1), lc = 0, kd = Tb.length, Ch = Np(this), ea = 0; ea < kd; ea++)
                        if (Tb[ea])
                            for (var ig = Tb[ea].length, mb = this.ee(ea), Gb = mb.ab = 0; Gb < ig; Gb++)
                                if (Tb[ea][Gb])
                                {
                                    var nb = this.de(Gb);
                                    void 0 === $e[Gb] && (nb.ab =
                                        0, $e[Gb] = !0);
                                    for (var im = Tb[ea][Gb], bf = im.length, Jk = 0; Jk < bf; Jk++)
                                        if (aa = im[Jk], aa.visible || aa === Ch)
                                        {
                                            var oi = 1 < aa.gj || 1 < aa.Fi;
                                            oi && (ea < ni || Gb < Bh || Le.push(aa));
                                            var xc = aa.margin,
                                                Kf = xc.right + xc.left,
                                                jg = xc.top + xc.bottom,
                                                Pb = Wo(aa, mb, nb, !1),
                                                cf = aa.Ca,
                                                Kk = !isNaN(cf.height),
                                                jm = !isNaN(cf.width) && Kk;
                                            oi || Pb === Qj || jm || ea < ni || Gb < Bh || (void 0 !== ue[Gb] || Pb !== Ee && Pb !== so || (ue[Gb] = -1, ue.count++), void 0 !== ve[ea] || Pb !== Ee && Pb !== ro || (ve[ea] = -1, ve.count++), af.push(aa));
                                            yk(aa, Infinity, Infinity, 0, 0);
                                            if (!(ea < ni || Gb < Bh))
                                            {
                                                var Lf =
                                                        aa.za,
                                                    df = Math.max(Lf.width + Kf, 0),
                                                    ef = Math.max(Lf.height + jg, 0);
                                                if (1 === aa.gj && (Pb === Qj || Pb === so))
                                                {
                                                    var Y = this.ee(ea),
                                                        mc = Y.$e(),
                                                        lc = Math.max(ef - Y.ab, 0);
                                                    lc + mc > Jd && (lc = Math.max(Jd - mc, 0));
                                                    var kg = 0 === Y.ab;
                                                    Y.ab += lc;
                                                    Jd = Math.max(Jd - (lc + (kg ? mc : 0)), 0)
                                                }
                                                1 !== aa.Fi || Pb !== Qj && Pb !== ro || (Y = this.de(Gb), mc = Y.$e(), lc = Math.max(df - Y.ab, 0), lc + mc > $c && (lc = Math.max($c - mc, 0)), kg = 0 === Y.ab, Y.ab += lc, $c = Math.max($c - (lc + (kg ? mc : 0)), 0));
                                                oi && aa.bq()
                                            }
                                        }
                                }
                    w.ta($e);
                    for (var Dc = 0, Ab = 0, Fb = this.Mp, ea = 0; ea < Fb; ea++)
                    {
                        var pi = this.Uc[ea];
                        void 0 !== pi &&
                        (Dc += pi.Ra, 0 !== pi.Ra && (Dc += pi.$e()))
                    }
                    Fb = this.xq;
                    for (ea = 0; ea < Fb; ea++)
                    {
                        var Hg = this.Xc[ea];
                        void 0 !== Hg && (Ab += Hg.Ra, 0 !== Hg.Ra && (Ab += Hg.$e()))
                    }
                    for (var $c = Math.max(ji - Dc, 0), xj = Jd = Math.max(ki - Ab, 0), pp = $c, Fb = af.length, ea = 0; ea < Fb; ea++)
                    {
                        var aa = af[ea],
                            mb = this.ee(aa.Vb),
                            nb = this.de(aa.column),
                            Ig = aa.za,
                            xc = aa.margin,
                            Kf = xc.right + xc.left,
                            jg = xc.top + xc.bottom;
                        ue[aa.column] = 0 === nb.ab && void 0 !== ue[aa.column] ? Math.max(Ig.width + Kf, ue[aa.column]) : null;
                        ve[aa.Vb] = 0 === mb.ab && void 0 !== ve[aa.Vb] ? Math.max(Ig.height + jg, ve[aa.Vb]) :
                            null
                    }
                    var Mf = 0,
                        Jg = 0,
                        Kg;
                    for (Kg in ve) "count" !== Kg && (Mf += ve[Kg]);
                    for (Kg in ue) "count" !== Kg && (Jg += ue[Kg]);
                    for (var ob = w.rm(), ea = 0; ea < Fb; ea++)
                        if (aa = af[ea], aa.visible || aa === Ch)
                        {
                            var mb = this.ee(aa.Vb),
                                nb = this.de(aa.column),
                                Wb = 0;
                            isFinite(nb.width) ? Wb = nb.width : (Wb = isFinite($c) && null !== ue[aa.column] ? 0 === Jg ? nb.ab + $c : ue[aa.column] / Jg * pp : null !== ue[aa.column] ? $c : nb.ab || $c, Wb = Math.max(0, Wb - nb.$e()));
                            var Ec = 0;
                            isFinite(mb.height) ? Ec = mb.height : (Ec = isFinite(Jd) && null !== ve[aa.Vb] ? 0 === Mf ? mb.ab + Jd : ve[aa.Vb] / Mf * xj : null !==
                            ve[aa.Vb] ? Jd : mb.ab || Jd, Ec = Math.max(0, Ec - mb.$e()));
                            ob.m(Math.max(nb.Ch, Math.min(Wb, nb.ke)), Math.max(mb.Ch, Math.min(Ec, mb.ke)));
                            Pb = Wo(aa, mb, nb, !1);
                            switch (Pb)
                            {
                                case so:
                                    ob.height = Math.max(ob.height, mb.ab + Jd);
                                    break;
                                case ro:
                                    ob.width = Math.max(ob.width, nb.ab + $c)
                            }
                            xc = aa.margin;
                            Kf = xc.right + xc.left;
                            jg = xc.top + xc.bottom;
                            aa.bq();
                            yk(aa, ob.width, ob.height, nb.Ch, mb.Ch);
                            Lf = aa.za;
                            df = Math.max(Lf.width + Kf, 0);
                            ef = Math.max(Lf.height + jg, 0);
                            isFinite($c) && (df = Math.min(df, ob.width));
                            isFinite(Jd) && (ef = Math.min(ef, ob.height));
                            var ff =
                                    0,
                                ff = mb.ab;
                            mb.ab = Math.max(mb.ab, ef);
                            lc = mb.ab - ff;
                            Jd = Math.max(Jd - lc, 0);
                            ff = nb.ab;
                            nb.ab = Math.max(nb.ab, df);
                            lc = nb.ab - ff;
                            $c = Math.max($c - lc, 0)
                        }
                    w.ta(af);
                    var Kd = w.rm(),
                        Fb = Le.length;
                    if (0 !== Fb)
                        for (var xd = w.gb(), gf = w.gb(), ea = 0; ea < kd; ea++)
                            if (Tb[ea])
                                for (ig = Tb[ea].length, mb = this.ee(ea), xd[ea] = mb.ab, Gb = 0; Gb < ig; Gb++) Tb[ea][Gb] && (nb = this.de(Gb), gf[Gb] = nb.ab);
                    for (ea = 0; ea < Fb; ea++)
                        if (aa = Le[ea], aa.visible || aa === Ch)
                        {
                            mb = this.ee(aa.Vb);
                            nb = this.de(aa.column);
                            ob.m(Math.max(nb.Ch, Math.min(ji, nb.ke)), Math.max(mb.Ch, Math.min(ki,
                                mb.ke)));
                            Pb = Wo(aa, mb, nb, !1);
                            switch (Pb)
                            {
                                case Ee:
                                    0 !== gf[nb.index] && (ob.width = Math.min(ob.width, gf[nb.index]));
                                    0 !== xd[mb.index] && (ob.height = Math.min(ob.height, xd[mb.index]));
                                    break;
                                case so:
                                    0 !== gf[nb.index] && (ob.width = Math.min(ob.width, gf[nb.index]));
                                    break;
                                case ro:
                                    0 !== xd[mb.index] && (ob.height = Math.min(ob.height, xd[mb.index]))
                            }
                            isFinite(nb.width) && (ob.width = nb.width);
                            isFinite(mb.height) && (ob.height = mb.height);
                            Kd.m(0, 0);
                            for (var cb = 1; cb < aa.gj && !(aa.Vb + cb >= this.xq); cb++) Y = this.ee(aa.Vb + cb), lc = Pb === Ee || Pb ===
                            ro ? Math.max(Y.Ch, 0 === xd[aa.Vb + cb] ? Y.ke : Math.min(xd[aa.Vb + cb], Y.ke)) : Math.max(Y.Ch, isNaN(Y.mf) ? Y.ke : Math.min(Y.mf, Y.ke)), Kd.height += lc;
                            for (cb = 1; cb < aa.Fi && !(aa.column + cb >= this.Mp); cb++) Y = this.de(aa.column + cb), lc = Pb === Ee || Pb === so ? Math.max(Y.Ch, 0 === gf[aa.column + cb] ? Y.ke : Math.min(gf[aa.column + cb], Y.ke)) : Math.max(Y.Ch, isNaN(Y.mf) ? Y.ke : Math.min(Y.mf, Y.ke)), Kd.width += lc;
                            ob.width += Kd.width;
                            ob.height += Kd.height;
                            xc = aa.margin;
                            Kf = xc.right + xc.left;
                            jg = xc.top + xc.bottom;
                            yk(aa, ob.width, ob.height, vj, wj);
                            for (var Lf =
                                aa.za, df = Math.max(Lf.width + Kf, 0), ef = Math.max(Lf.height + jg, 0), hf = 0, cb = 0; cb < aa.gj && !(aa.Vb + cb >= this.xq); cb++) Y = this.ee(aa.Vb + cb), hf += Y.total || 0;
                            if (hf < ef)
                            {
                                var ld = ef - hf,
                                    Lg = ef - hf;
                                if (null !== aa.Ay)
                                    for (var jf = aa.Ay, cb = 0; cb < aa.gj && !(0 >= ld) && !(aa.Vb + cb >= this.xq); cb++)
                                    {
                                        var Y = this.ee(aa.Vb + cb),
                                            Fc = Y.Ra || 0,
                                            qi = jf(aa, Y, Lg);
                                        Y.ab = Math.min(Y.ke, Fc + qi);
                                        Y.Ra !== Fc && (ld -= Y.Ra - Fc)
                                    }
                                for (; 0 < ld;)
                                {
                                    Fc = Y.Ra || 0;
                                    isNaN(Y.height) && Y.ke > Fc && (Y.ab = Math.min(Y.ke, Fc + ld), Y.Ra !== Fc && (ld -= Y.Ra - Fc));
                                    if (0 === Y.index) break;
                                    Y = this.ee(Y.index -
                                        1)
                                }
                            }
                            for (var Me = 0, cb = 0; cb < aa.Fi && !(aa.column + cb >= this.Mp); cb++) Y = this.de(aa.column + cb), Me += Y.total || 0;
                            if (Me < df)
                            {
                                ld = df - Me;
                                Lg = df - Me;
                                if (null !== aa.Ay)
                                    for (jf = aa.Ay, cb = 0; cb < aa.Fi && !(0 >= ld) && !(aa.column + cb >= this.Mp); cb++) Y = this.de(aa.column + cb), Fc = Y.Ra || 0, qi = jf(aa, Y, Lg), Y.ab = Math.min(Y.ke, Fc + qi), Y.Ra !== Fc && (ld -= Y.Ra - Fc);
                                for (; 0 < ld;)
                                {
                                    Fc = Y.Ra || 0;
                                    isNaN(Y.width) && Y.ke > Fc && (Y.ab = Math.min(Y.ke, Fc + ld), Y.Ra !== Fc && (ld -= Y.Ra - Fc));
                                    if (0 === Y.index) break;
                                    Y = this.de(Y.index - 1)
                                }
                            }
                        }
                    w.ta(Le);
                    w.Lk(Kd);
                    w.Lk(ob);
                    void 0 !== xd && w.ta(xd);
                    void 0 !== gf && w.ta(gf);
                    for (var Mg = 0, Ng = 0, Pb = Ho(this, !0), yj = this.Ca, Lk = this.Gf, we = Ab = Dc = 0, ad = 0, Fb = this.Mp, ea = 0; ea < Fb; ea++) void 0 !== this.Uc[ea] && (Y = this.de(ea), isFinite(Y.width) ? (we += Y.width, we += Y.$e()) : Qp(Y) === Rp ? (we += Y.Ra, we += Y.$e()) : 0 !== Y.Ra && (Dc += Y.Ra, Dc += Y.$e()));
                    var Mg = isFinite(yj.width) ? Math.min(yj.width, Lk.width) : Pb !== Qj && isFinite(ji) ? ji : Dc,
                        Mg = Math.max(Mg, this.si.width),
                        Mg = Math.max(Mg - we, 0),
                        Mk = Math.max(Mg / Dc, 1);
                    isFinite(Mk) || (Mk = 1);
                    for (ea = 0; ea < Fb; ea++) void 0 !== this.Uc[ea] && (Y = this.de(ea), isFinite(Y.width) ||
                    Qp(Y) === Rp || (Y.ab = Y.Ra * Mk), Y.position = e.width, 0 !== Y.Ra && (e.width += Y.Ra, e.width += Y.$e()));
                    Fb = this.xq;
                    for (ea = 0; ea < Fb; ea++) void 0 !== this.Xc[ea] && (Y = this.ee(ea), isFinite(Y.height) ? (ad += Y.height, ad += Y.$e()) : Qp(Y) === Rp ? (ad += Y.Ra, ad += Y.$e()) : 0 !== Y.Ra && (Ab += Y.Ra, 0 !== Y.Ra && (Ab += Y.$e())));
                    var Ng = isFinite(yj.height) ? Math.min(yj.height, Lk.height) : Pb !== Qj && isFinite(ki) ? ki : Ab,
                        Ng = Math.max(Ng, this.si.height),
                        Ng = Math.max(Ng - ad, 0),
                        Dh = Math.max(Ng / Ab, 1);
                    isFinite(Dh) || (Dh = 1);
                    for (ea = 0; ea < Fb; ea++) void 0 !== this.Xc[ea] &&
                    (Y = this.ee(ea), isFinite(Y.height) || Qp(Y) === Rp || (Y.ab = Y.Ra * Dh), Y.position = e.height, 0 !== Y.Ra && (e.height += Y.Ra, 0 !== Y.Ra && (e.height += Y.$e())));
                    Fb = zh.length;
                    for (ea = 0; ea < Fb; ea++)
                    {
                        var md = zh[ea];
                        md.type === Mo ? (Wb = e.width, Y = this.ee(md.Vb), Ec = Y.ab) : (Y = this.de(md.column), Wb = Y.ab, Ec = e.height);
                        md.ud.m(0, 0, Wb, Ec);
                        dm(md, !1);
                        Tb[md.Vb] || (Tb[md.Vb] = []);
                        Tb[md.Vb][md.column] || (Tb[md.Vb][md.column] = []);
                        Tb[md.Vb][md.column].push(md)
                    }
                    w.ta(zh);
                    this.et = Tb;
                    break;
                case "Viewbox":
                    var zj = a,
                        lm = b,
                        ot = c,
                        pt = d;
                    1 < m.length && w.k("Viewbox Panel cannot contain more than one GraphObject.");
                    var kf = m[0];
                    kf.qb = 1;
                    kf.bq();
                    yk(kf, Infinity, Infinity, ot, pt);
                    var Nk = kf.za,
                        mm = kf.margin,
                        qt = mm.right + mm.left,
                        rt = mm.top + mm.bottom;
                    if (isFinite(zj) || isFinite(lm))
                    {
                        var ew = kf.scale,
                            nm = Nk.width,
                            om = Nk.height,
                            st = Math.max(zj - qt, 0),
                            tt = Math.max(lm - rt, 0),
                            Ok = 1;
                        this.Cp === Sj ? 0 !== nm && 0 !== om && (Ok = Math.min(st / nm, tt / om)) : 0 !== nm && 0 !== om && (Ok = Math.max(st / nm, tt / om));
                        0 === Ok && (Ok = 1E-4);
                        kf.qb *= Ok;
                        ew !== kf.scale && (dm(kf, !0), yk(kf, Infinity, Infinity, ot, pt))
                    }
                    Nk = kf.za;
                    e.width = isFinite(zj) ? zj : Math.max(Nk.width + qt, 0);
                    e.height = isFinite(lm) ?
                        lm : Math.max(Nk.height + rt, 0);
                    break;
                case "Link":
                    var ut = m.length;
                    if (this instanceof jh || this instanceof W)
                    {
                        var si = null;
                        this instanceof W && (si = this);
                        this instanceof jh && (si = this.Ye);
                        if (si instanceof W)
                        {
                            var Pk = si;
                            if (0 === ut)
                            {
                                var pm = this.Ja;
                                Ua(pm, 0, 0);
                                var xe = this.za;
                                xe.m(0, 0, 0, 0)
                            }
                            else
                            {
                                var qm = this instanceof jh ? null : si.path,
                                    Og = si.Yn,
                                    lf = this.lj;
                                lf.assign(Og);
                                lf.x = 0;
                                lf.y = 0;
                                var Eh = Pk.points,
                                    ti = si.qa;
                                this.Eu(!1);
                                var vt = Og.width,
                                    wt = Og.height;
                                this.Xi.m(Og.x, Og.y);
                                null === this.Yg && (this.Yg = new H(B));
                                this.Yg.clear();
                                null !== qm && (Sp(qm, vt, wt, this), xe = qm.za, lf.Jh(xe), this.Yg.add(xe));
                                for (var Pg = w.Vg(), Qk = w.K(), Qg = w.K(), qp = 0; qp < ut; qp++)
                                {
                                    var Ub = m[qp];
                                    if (Ub !== qm)
                                        if (Ub.ff && Ub instanceof X) Sp(Ub, vt, wt, this), xe = Ub.za, lf.Jh(xe), this.Yg.add(xe);
                                        else if (2 > ti) yk(Ub, Infinity, Infinity), xe = Ub.za, lf.Jh(xe), this.Yg.add(xe);
                                        else
                                        {
                                            var yd = Ub.Pe,
                                                yt = Ub.wB,
                                                rp = Ub.oh;
                                            rp.Td() && (rp = Jb);
                                            var lg = Ub.yq,
                                                fw = Ub.xB,
                                                Rk = 0,
                                                Sk = 0,
                                                rm = 0;
                                            if (yd < -ti || yd >= ti)
                                            {
                                                var zt = Pk.QF,
                                                    Nf = Pk.PF;
                                                lg !== mj && (rm = Pk.computeAngle(Ub, lg, Nf), Ub.lg = rm);
                                                Rk = zt.x - Og.x;
                                                Sk = zt.y - Og.y
                                            }
                                            else
                                            {
                                                var Ld,
                                                    mf;
                                                if (0 <= yd) Ld = Eh.ea(yd), mf = yd < ti - 1 ? Eh.ea(yd + 1) : Ld;
                                                else
                                                {
                                                    var ui = ti + yd;
                                                    Ld = Eh.ea(ui);
                                                    mf = 0 < ui ? Eh.ea(ui - 1) : Ld
                                                }
                                                if (Ld.Oc(mf))
                                                {
                                                    var vi, wi;
                                                    0 <= yd ? (vi = 0 < yd ? Eh.ea(yd - 1) : Ld, wi = yd < ti - 2 ? Eh.ea(yd + 2) : mf) : (vi = ui < ti - 1 ? Eh.ea(ui + 1) : Ld, wi = 1 < ui ? Eh.ea(ui - 2) : mf);
                                                    var At = vi.Bf(Ld),
                                                        Bt = mf.Bf(wi),
                                                        Nf = At > Bt + 10 ? 0 <= yd ? vi.Qb(Ld) : Ld.Qb(vi) : Bt > At + 10 ? 0 <= yd ? mf.Qb(wi) : wi.Qb(mf) : 0 <= yd ? vi.Qb(wi) : wi.Qb(vi)
                                                }
                                                else Nf = 0 <= yd ? Ld.Qb(mf) : mf.Qb(Ld);
                                                lg !== mj && (rm = Pk.computeAngle(Ub, lg, Nf), Ub.lg = rm);
                                                Rk = Ld.x + (mf.x - Ld.x) * yt - Og.x;
                                                Sk = Ld.y + (mf.y - Ld.y) * yt - Og.y
                                            }
                                            yk(Ub,
                                                Infinity, Infinity);
                                            var xe = Ub.za,
                                                pm = Ub.Ja,
                                                Tk = 0;
                                            Ub instanceof X && (Tk = Ub.mb);
                                            var xi = pm.width + Tk,
                                                Aj = pm.height + Tk;
                                            Pg.reset();
                                            Pg.translate(-xe.x, -xe.y);
                                            Pg.scale(Ub.scale, Ub.scale);
                                            Pg.rotate(lg === mj ? Ub.angle : Nf, xi / 2, Aj / 2);
                                            lg !== Tp && lg !== Up || Pg.rotate(90, xi / 2, Aj / 2);
                                            lg !== Vp && lg !== Wp || Pg.rotate(-90, xi / 2, Aj / 2);
                                            lg === Xp && (45 < Nf && 135 > Nf || 225 < Nf && 315 > Nf) && Pg.rotate(-Nf, xi / 2, Aj / 2);
                                            var Bj = new B(0, 0, xi, Aj);
                                            Qk.Zn(Bj, rp);
                                            Pg.nb(Qk);
                                            var gw = -Qk.x + Tk / 2 * Ub.scale,
                                                hw = -Qk.y + Tk / 2 * Ub.scale;
                                            Qg.assign(fw);
                                            isNaN(Qg.x) && (Qg.x = 0 <= yd ?
                                                xi / 2 + 3 : -(xi / 2 + 3));
                                            isNaN(Qg.y) && (Qg.y = -(Aj / 2 + 3));
                                            Qg.rotate(Nf);
                                            Rk += Qg.x;
                                            Sk += Qg.y;
                                            Bj.set(xe);
                                            Bj.x = Rk + gw;
                                            Bj.y = Sk + hw;
                                            this.Yg.add(Bj);
                                            lf.Jh(Bj)
                                        }
                                }
                                if (this instanceof W)
                                    for (var Ct = this.Ef; Ct.next();) yk(Ct.value, Infinity, Infinity);
                                this.lj = lf;
                                var sp = this.Xi;
                                sp.m(sp.x + lf.x, sp.y + lf.y);
                                Ua(e, lf.width || 0, lf.height || 0);
                                w.bf(Pg);
                                w.v(Qk);
                                w.v(Qg)
                            }
                        }
                    }
                    break;
                case "Grid":
                    break;
                case "Graduated":
                    var iw = a,
                        jw = b,
                        kw = c,
                        lw = d,
                        Rg = this.Bd();
                    this.Em = [];
                    var Cj = Rg.margin,
                        mw = Cj.right + Cj.left,
                        nw = Cj.top + Cj.bottom;
                    yk(Rg, iw, jw, kw, lw);
                    var Dt =
                            Rg.za,
                        ow = Dt.height,
                        pw = Math.max(Dt.width + mw, 0),
                        qw = Math.max(ow + nw, 0),
                        Et = new B(-Cj.left, -Cj.top, pw, qw);
                    this.Em.push(Et);
                    e.assign(Et);
                    for (var Yk = Rg.of, Ft = Rg.mb, tp = Yk.Fx, Dj = Yk.cu, yi = Yk.du, rw = tp.length, up = 0, vp = 0, Ej = w.gb(), wp = 0; wp < rw; wp++)
                    {
                        for (var xp = tp[wp], Gt = [], vp = up = 0, sw = xp.length, Fj = 0; Fj < sw; Fj += 2)
                        {
                            var Ht = xp[Fj],
                                It = xp[Fj + 1];
                            if (0 !== Fj)
                            {
                                var zd = 180 * Math.atan2(It - vp, Ht - up) / Math.PI;
                                0 > zd && (zd += 360);
                                Gt.push(zd)
                            }
                            up = Ht;
                            vp = It
                        }
                        Ej.push(Gt)
                    }
                    var Jt;
                    if (null === this.bk)
                    {
                        for (var Kt = [], yp = this.xa.n, Lt = yp.length, zp = 0; zp <
                        Lt; zp++)
                        {
                            var Zk = yp[zp],
                                Mt = [];
                            Kt.push(Mt);
                            if (Zk.visible)
                                for (var tw = Zk.interval, Ap = 0; Ap < Lt; Ap++)
                                {
                                    var $k = yp[Ap];
                                    if ($k.visible && Zk !== $k && !(Zk instanceof X && !($k instanceof X) || Zk instanceof Lh && !($k instanceof Lh)))
                                    {
                                        var Nt = $k.interval;
                                        Nt > tw && Mt.push(Nt)
                                    }
                                }
                        }
                        this.bk = Kt
                    }
                    Jt = this.bk;
                    var Ot = this.xa.n,
                        uw = Ot.length,
                        Fh = 0,
                        Pt = 0,
                        Qt = yi;
                    this.Gm = [];
                    for (var tm = [], um = 0; um < uw; um++)
                    {
                        var Gh = Ot[um],
                            tm = [];
                        if (Gh.visible && Gh !== Rg)
                        {
                            var Rt = Gh.interval,
                                St = this.JA;
                            if (!(2 > St * Rt * yi / this.lu))
                            {
                                var ce = this.oF,
                                    Tt = Jt[um],
                                    zi = Dj[0][0],
                                    Of =
                                        0,
                                    Ad = 0,
                                    Pt = yi * Gh.nF - 1E-4,
                                    Qt = yi * Gh.lF + 1E-4,
                                    Gj = St * Rt;
                                if (ce < this.Ok) var Ai = (this.Ok - ce) / Gj,
                                    Ai = 0 === Ai % 1 ? Ai : Math.floor(Ai + 1),
                                    ce = ce + Ai * Gj;
                                else ce > this.Ok + Gj && (Ai = Math.floor((ce - this.Ok) / Gj), ce -= Ai * Gj);
                                for (; ce <= this.IA;)
                                {
                                    var Bp;
                                    a:
                                    {
                                        for (var vw = Tt.length, Cp = 0; Cp < vw; Cp++)
                                            if (Wa((ce - this.oF) % (Tt[Cp] * this.JA), 0))
                                            {
                                                Bp = !1;
                                                break a
                                            }
                                        Bp = !0
                                    }
                                    if (Bp && (Fh = (ce - this.Ok) * yi / this.lu, Fh > yi && (Fh = yi), Pt <= Fh && Fh <= Qt))
                                    {
                                        for (var zd = Ej[Of][Ad], Hj = Dj[Of][Ad]; Of < Dj.length;)
                                        {
                                            for (; Fh > zi && Ad < Dj[Of].length - 1;) Ad++, zd = Ej[Of][Ad], Hj = Dj[Of][Ad],
                                                zi += Hj;
                                            if (Fh <= zi) break;
                                            Of++;
                                            Ad = 0;
                                            zd = Ej[Of][Ad];
                                            Hj = Dj[Of][Ad];
                                            zi += Hj
                                        }
                                        var Md = tp[Of],
                                            Ut = Md[2 * Ad],
                                            Vt = Md[2 * Ad + 1],
                                            vm = (Fh - (zi - Hj)) / Hj,
                                            Dp = new y(Ut + (Md[2 * Ad + 2] - Ut) * vm + Ft / 2 - Yk.cb.x, Vt + (Md[2 * Ad + 3] - Vt) * vm + Ft / 2 - Yk.cb.y);
                                        Dp.scale(Rg.scale, Rg.scale);
                                        var mg = zd,
                                            Ij = Ej[Of];
                                        1E-4 > vm ? 0 < Ad ? mg = Ij[Ad - 1] : Wa(Md[0], Md[Md.length - 2]) && Wa(Md[1], Md[Md.length - 1]) && (mg = Ij[Ij.length - 1]) : .9999 < vm && (Ad + 1 < Ij.length ? mg = Ij[Ad + 1] : Wa(Md[0], Md[Md.length - 2]) && Wa(Md[1], Md[Md.length - 1]) && (mg = Ij[0]));
                                        zd !== mg && (180 < Math.abs(zd - mg) && (zd < mg ? zd +=
                                            360 : mg += 360), zd = (zd + mg) / 2 % 360);
                                        if (Gh instanceof Lh)
                                        {
                                            var Hh = "";
                                            null !== Gh.mF ? (Hh = Gh.mF(ce), Hh = null !== Hh && void 0 !== Hh ? Hh.toString() : "") : Hh = (+ce.toFixed(2)).toString();
                                            "" !== Hh && tm.push([Dp, zd, Hh])
                                        }
                                        else tm.push([Dp, zd])
                                    }
                                    ce += Gj
                                }
                            }
                        }
                        this.Gm.push(tm)
                    }
                    w.ta(Ej);
                    for (var ww = this.Gm, xw = m.length, wm = 0; wm < xw; wm++)
                    {
                        var Bi = m[wm],
                            Ep = ww[wm];
                        if (Bi.visible && Bi !== Rg && 0 !== Ep.length)
                        {
                            if (Bi instanceof X)
                            {
                                var Ih = Bi,
                                    Wt = Ep,
                                    yw = e,
                                    Fp = Ih.oh;
                                Fp.Td() && (Fp = Bb);
                                var zw = Ih.angle;
                                Ih.lg = 0;
                                yk(Ih, Infinity, Infinity);
                                Ih.lg = zw;
                                var Xt = Ih.za,
                                    Gp =
                                        Xt.width,
                                    Hp = Xt.height,
                                    Yt = w.kg(0, 0, Gp, Hp),
                                    de = w.K();
                                de.Zn(Yt, Fp);
                                w.Hb(Yt);
                                for (var xm = -de.x, ym = -de.y, Ci = new B, Aw = Wt.length, zm = 0; zm < Aw; zm++)
                                    for (var Ip = Wt[zm], Zt = Ip[0].x, $t = Ip[0].y, au = Ip[1], Am = 0; 4 > Am; Am++)
                                    {
                                        switch (Am)
                                        {
                                            case 0:
                                                de.m(xm, ym);
                                                break;
                                            case 1:
                                                de.m(xm + Gp, ym);
                                                break;
                                            case 2:
                                                de.m(xm, ym + Hp);
                                                break;
                                            case 3:
                                                de.m(xm + Gp, ym + Hp)
                                        }
                                        de.rotate(au + Ih.angle);
                                        de.offset(Zt, $t);
                                        0 === zm && 0 === Am ? Ci.m(de.x, de.y, 0, 0) : Ci.yi(de);
                                        de.offset(-Zt, -$t);
                                        de.rotate(-au - Ih.angle)
                                    }
                                w.v(de);
                                this.Em.push(Ci);
                                ab(yw, Ci.x, Ci.y, Ci.width, Ci.height)
                            }
                            else if (Bi instanceof Lh)
                            {
                                var Bm = Bi,
                                    bu = Ep,
                                    Bw = e;
                                null === this.vk && (this.vk = new Lh);
                                var Pf = this.vk;
                                np(Bm, Pf);
                                var Jp = Bm.oh;
                                Jp.Td() && (Jp = Bb);
                                for (var Jh = Bm.yq, Cw = Bm.xB, Di = null, Cm = 0, Dm = 0, Sg = 0, Kp = 0, Dw = bu.length, Em = 0; Em < Dw; Em++)
                                {
                                    var ng = bu[Em],
                                        Cm = ng[0].x,
                                        Dm = ng[0].y,
                                        Sg = ng[1];
                                    Jh !== mj && (Kp = W.computeAngle(Jh, Sg), Pf.lg = Kp);
                                    Pf.text = ng[2];
                                    yk(Pf, Infinity, Infinity);
                                    var Kh = Pf.za,
                                        Jj = Pf.Ja,
                                        Kj = Jj.width,
                                        Lj = Jj.height,
                                        Tg = w.Vg();
                                    Tg.reset();
                                    Tg.translate(-Kh.x, -Kh.y);
                                    Tg.scale(Pf.scale, Pf.scale);
                                    Tg.rotate(Jh === mj ? Pf.angle : Sg, Kj / 2, Lj / 2);
                                    Jh !== Tp && Jh !==
                                    Up || Tg.rotate(90, Kj / 2, Lj / 2);
                                    Jh !== Vp && Jh !== Wp || Tg.rotate(-90, Kj / 2, Lj / 2);
                                    Jh === Xp && (45 < Sg && 135 > Sg || 225 < Sg && 315 > Sg) && Tg.rotate(-Sg, Kj / 2, Lj / 2);
                                    var cu = w.kg(0, 0, Kj, Lj),
                                        al = w.K();
                                    al.Zn(cu, Jp);
                                    Tg.nb(al);
                                    var Ew = -al.x,
                                        Fw = -al.y,
                                        Ug = w.K();
                                    Ug.assign(Cw);
                                    isNaN(Ug.x) && (Ug.x = Kj / 2 + 3);
                                    isNaN(Ug.y) && (Ug.y = -(Lj / 2 + 3));
                                    Ug.rotate(Sg);
                                    var Cm = Cm + (Ug.x + Ew),
                                        Dm = Dm + (Ug.y + Fw),
                                        Lp = new B(Cm, Dm, Kh.width, Kh.height),
                                        Gw = new B(Kh.x, Kh.y, Kh.width, Kh.height),
                                        Hw = new B(Jj.x, Jj.y, Jj.width, Jj.height),
                                        du = new Yp;
                                    du.Np(Pf.yf);
                                    ng.push(Kp);
                                    ng.push(Pf.pe);
                                    ng.push(du);
                                    ng.push(Lp);
                                    ng.push(Gw);
                                    ng.push(Hw);
                                    0 === Em ? Di = Lp.copy() : Di.Jh(Lp);
                                    w.v(Ug);
                                    w.v(al);
                                    w.Hb(cu);
                                    w.bf(Tg)
                                }
                                this.Em.push(Di);
                                ab(Bw, Di.x, Di.y, Di.width, Di.height)
                            }
                            dm(Bi, !1)
                        }
                    }
                    break;
                case "TableRow":
                case "TableColumn":
                    w.k(this.toString() + " is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");
                    break;
                default:
                    w.k("Unknown panel type: " + n)
            }
        }
        var nf = e.width,
            of = e.height,
            Fm = this.padding,
            Iw = Fm.top + Fm.bottom,
            nf = nf + (Fm.left + Fm.right),
            of = of +Iw;
        isFinite(f.width) &&
        (nf = f.width);
        isFinite(f.height) && ( of = f.height);
        nf = Math.min(k.width, nf); of = Math.min(k.height, of );
        nf = Math.max(h.width, nf); of = Math.max(h.height, of );
        nf = Math.max(c, nf); of = Math.max(d, of );
        e.width = nf;
        e.height = of ;
        Ua(this.Wc, nf, of );
        Eo(this, 0, 0, nf, of )
    };
    C.prototype.findMainElement = C.prototype.Bd = function ()
    {
        if (null === this.Gl)
        {
            var a = this.xa.n,
                b = a.length;
            if (0 === b) return null;
            for (var c = 0; c < b; c++)
            {
                var d = a[c];
                if (!0 === d.ff) return this.Gl = d
            }
            this.Gl = a[0]
        }
        return this.Gl
    };

    function Np(a)
    {
        return null !== a.V ? a.V.bg : null
    }
    C.prototype.pj = function (a, b, c, d)
    {
        var e = this.lj,
            f = this.xa.n,
            h = w.kg(0, 0, 0, 0);
        if (0 === f.length)
        {
            var k = this.U;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d
        }
        else
        {
            if (!this.Ca.I())
            {
                var l = Ho(this, !0),
                    m = this.ud,
                    n = m.width,
                    p = m.height,
                    q = this.margin,
                    r = q.left + q.right,
                    s = q.top + q.bottom;
                n === c && p === d && (l = Qj);
                switch (l)
                {
                    case Qj:
                        if (n > c || p > d) this.H(), yk(this, n > c ? c : n, p > d ? d : p);
                        break;
                    case Ee:
                        this.H(!0);
                        yk(this, c + r, d + s, 0, 0);
                        break;
                    case so:
                        this.H(!0);
                        yk(this, c + r, p + s, 0, 0);
                        break;
                    case ro:
                        this.H(!0), yk(this, n + r, d + s, 0, 0)
                }
            }
            k = this.U;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d;
            var u = this.na.Sb;
            switch (u)
            {
                case "Position":
                    for (var t = f.length, x = e.x - this.padding.left, v = e.y - this.padding.top, z = 0; z < t; z++)
                    {
                        var A = f[z],
                            L = A.za,
                            E = A.margin,
                            P = A.position.x,
                            $ = A.position.y;
                        h.x = isNaN(P) ? -x : P - x;
                        h.y = isNaN($) ? -v : $ - v;
                        if (A instanceof X)
                        {
                            var S = A;
                            if (S.AF)
                            {
                                var ba = S.mb / 2;
                                h.x -= ba;
                                h.y -= ba
                            }
                        }
                        h.x += E.left;
                        h.y += E.top;
                        h.width = L.width;
                        h.height = L.height;
                        A.visible && A.hc(h.x, h.y, h.width, h.height)
                    }
                    break;
                case "Vertical":
                    for (var ha = f.length, ya = this.padding.left, Ga = this.GF, eb = Ga ? e.height : this.padding.top,
                             va = 0; va < ha; va++)
                    {
                        var U = ya,
                            sb = f[va];
                        if (sb.visible)
                        {
                            var Lb = sb.za,
                                Oa = sb.margin,
                                Lc = Oa.left + Oa.right,
                                Ma = ya + this.padding.right,
                                dg = Lb.width,
                                eg = Ho(sb, !1);
                            if (isNaN(sb.Ca.width) && eg === Ee || eg === so) dg = Math.max(e.width - Lc - Ma, 0);
                            var td = dg + Lc + Ma,
                                ud = sb.alignment;
                            ud.Zc() && (ud = this.Xl);
                            ud.$c() || (ud = Jb);
                            Ga && (eb -= Lb.height + Oa.bottom + Oa.top);
                            sb.hc(U + ud.offsetX + Oa.left + (e.width * ud.x - td * ud.x), eb + ud.offsetY + Oa.top, dg, Lb.height);
                            Ga || (eb += Lb.height + Oa.bottom + Oa.top)
                        }
                    }
                    break;
                case "Horizontal":
                    for (var Mc = f.length, rh = this.padding.top,
                             Xe = this.GF, fb = Xe ? e.width : this.padding.left, pb = 0; pb < Mc; pb++)
                    {
                        var na = rh,
                            ja = f[pb];
                        if (ja.visible)
                        {
                            var Za = ja.za,
                                Ia = ja.margin,
                                kb = Ia.top + Ia.bottom,
                                Hd = rh + this.padding.bottom,
                                Gf = Za.height,
                                qe = Ho(ja, !1);
                            if (isNaN(ja.Ca.height) && qe === Ee || qe === ro) Gf = Math.max(e.height - kb - Hd, 0);
                            var Yd = Gf + kb + Hd,
                                gd = ja.alignment;
                            gd.Zc() && (gd = this.Xl);
                            gd.$c() || (gd = Jb);
                            Xe && (fb -= Za.width + Ia.left + Ia.right);
                            ja.hc(fb + gd.offsetX + Ia.left, na + gd.offsetY + Ia.top + (e.height * gd.y - Yd * gd.y), Za.width, Gf);
                            Xe || (fb += Za.width + Ia.left + Ia.right)
                        }
                    }
                    break;
                case "Spot":
                    var sh =
                            f.length,
                        Hf = this.Bd(),
                        Dg = Hf.za,
                        Db = Dg.width,
                        Ac = Dg.height,
                        Zd = this.padding,
                        th = Zd.left,
                        qb = Zd.top;
                    h.x = th - e.x;
                    h.y = qb - e.y;
                    Hf.hc(h.x, h.y, Db, Ac);
                    for (var Ja = 0; Ja < sh; Ja++)
                    {
                        var Mb = f[Ja];
                        if (Mb !== Hf)
                        {
                            var If = Mb.za,
                                Eg = If.width,
                                uh = If.height,
                                gb = Mb.alignment;
                            gb.Zc() && (gb = this.Xl);
                            gb.$c() || (gb = Jb);
                            var tc = Mb.oh;
                            tc.Zc() && (tc = Jb);
                            var Vb = null;
                            Mb instanceof C && "" !== Mb.Pj && (Vb = Mb.Cd(Mb.Pj), Vb === Mb && (Vb = null));
                            if (null !== Vb)
                            {
                                for (var re = Vb.Ja, uc = w.xb(tc.x * re.width + tc.offsetX, tc.y * re.height + tc.offsetY); Vb !== Mb;) Vb.transform.nb(uc),
                                    Vb = Vb.R;
                                h.x = gb.x * Db + gb.offsetX - uc.x;
                                h.y = gb.y * Ac + gb.offsetY - uc.y;
                                w.v(uc)
                            }
                            else h.x = gb.x * Db + gb.offsetX - (tc.x * Eg - tc.offsetX), h.y = gb.y * Ac + gb.offsetY - (tc.y * uh - tc.offsetY);
                            h.x -= e.x;
                            h.y -= e.y;
                            Mb.visible && Mb.hc(th + h.x, qb + h.y, Eg, uh)
                        }
                    }
                    break;
                case "Auto":
                    var vc = f.length,
                        rb = this.Bd(),
                        kc = rb.za,
                        tb = w.Kf();
                    tb.m(0, 0, 1, 1);
                    var Bc = rb.margin,
                        bb = Bc.left,
                        Qa = Bc.top,
                        Ib = this.padding,
                        vd = Ib.left,
                        fg = Ib.top;
                    h.x = bb;
                    h.y = Qa;
                    h.width = kc.width;
                    h.height = kc.height;
                    rb.hc(vd + h.x, fg + h.y, h.width, h.height);
                    var Ye = Op(rb),
                        gg = Pp(rb),
                        uj = 0 + Ye.y * kc.height +
                            Ye.offsetY,
                        Nb = 0 + gg.x * kc.width + gg.offsetX,
                        Cc = 0 + gg.y * kc.height + gg.offsetY;
                    tb.x = 0 + Ye.x * kc.width + Ye.offsetX;
                    tb.y = uj;
                    ab(tb, Nb, Cc, 0, 0);
                    tb.x += bb + vd;
                    tb.y += Qa + fg;
                    for (var wc = 0; wc < vc; wc++)
                    {
                        var hd = f[wc];
                        if (hd !== rb)
                        {
                            var lb = hd.za,
                                Bc = hd.margin,
                                Ob = Math.max(lb.width + Bc.right + Bc.left, 0),
                                se = Math.max(lb.height + Bc.top + Bc.bottom, 0),
                                ub = hd.alignment;
                            ub.Zc() && (ub = this.Xl);
                            ub.$c() || (ub = Jb);
                            h.x = tb.width * ub.x + ub.offsetX - Ob * ub.x + Bc.left + tb.x;
                            h.y = tb.height * ub.y + ub.offsetY - se * ub.y + Bc.top + tb.y;
                            h.width = tb.width;
                            h.height = tb.height;
                            hd.visible && (db(tb.x, tb.y, tb.width, tb.height, h.x, h.y, lb.width, lb.height) ? hd.hc(h.x, h.y, lb.width, lb.height) : hd.hc(h.x, h.y, lb.width, lb.height, new B(tb.x, tb.y, tb.width, tb.height)))
                        }
                    }
                    w.Hb(tb);
                    break;
                case "Table":
                    for (var $d = f.length, vh = this.padding, wh = vh.left, Fg = vh.top, id = this.et, Id = 0, cc = 0, vb = id.length, wd = 0, jb = 0; jb < vb; jb++) id[jb] && (wd = Math.max(wd, id[jb].length));
                    for (var dc = Math.min(this.kj, vb - 1); dc !== vb && (void 0 === this.Xc[dc] || 0 === this.Xc[dc].Ra);) dc++;
                    for (var dc = Math.min(dc, vb - 1), ii = -this.Xc[dc].$a, Yc =
                        Math.min(this.Ui, wd - 1); Yc !== wd && (void 0 === this.Uc[Yc] || 0 === this.Uc[Yc].Ra);) Yc++;
                    for (var Yc = Math.min(Yc, wd - 1), Eb = -this.Uc[Yc].$a, te = w.rm(), jb = 0; jb < vb; jb++)
                        if (id[jb])
                        {
                            var wd = id[jb].length,
                                Ze = this.ee(jb),
                                cc = Ze.$a + ii + Fg;
                            0 !== Ze.Ra && (cc += Ze.KE());
                            for (var Zc = 0; Zc < wd; Zc++)
                                if (id[jb][Zc])
                                {
                                    var Jf = this.de(Zc),
                                        Id = Jf.$a + Eb + wh;
                                    0 !== Jf.Ra && (Id += Jf.KE());
                                    for (var Gg = id[jb][Zc], xh = Gg.length, Ik = 0; Ik < xh; Ik++)
                                    {
                                        var wb = Gg[Ik],
                                            ae = wb.za,
                                            jd = wb instanceof C ? wb : null;
                                        if (null === jd || jd.type !== Mo && jd.type !== No)
                                        {
                                            te.m(0, 0);
                                            for (var Ke =
                                                1; Ke < wb.rowSpan && !(jb + Ke >= this.xq); Ke++)
                                            {
                                                var ji = this.ee(jb + Ke);
                                                te.height += ji.total
                                            }
                                            for (Ke = 1; Ke < wb.yH && !(Zc + Ke >= this.Mp); Ke++)
                                            {
                                                var ki = this.de(Zc + Ke);
                                                te.width += ki.total
                                            }
                                            var vj = Jf.Ra + te.width,
                                                wj = Ze.Ra + te.height;
                                            h.x = Id;
                                            h.y = cc;
                                            h.width = vj;
                                            h.height = wj;
                                            var Fb = Id,
                                                yh = cc,
                                                zh = vj,
                                                ea = wj;
                                            Id + vj > e.width && (zh = Math.max(e.width - Id, 0));
                                            cc + wj > e.height && (ea = Math.max(e.height - cc, 0));
                                            var aa = wb.alignment,
                                                be = 0,
                                                hg = 0,
                                                li = 0,
                                                Gb = 0;
                                            if (aa.Zc())
                                            {
                                                aa = this.Xl;
                                                aa.$c() || (aa = Jb);
                                                var be = aa.x,
                                                    hg = aa.y,
                                                    li = aa.offsetX,
                                                    Gb = aa.offsetY,
                                                    mi = Jf.alignment,
                                                    Tb = Ze.alignment;
                                                mi.$c() && (be = mi.x, li = mi.offsetX);
                                                Tb.$c() && (hg = Tb.y, Gb = Tb.offsetY)
                                            }
                                            else be = aa.x, hg = aa.y, li = aa.offsetX, Gb = aa.offsetY;
                                            if (isNaN(be) || isNaN(hg)) hg = be = .5, Gb = li = 0;
                                            var $e = ae.width,
                                                Le = ae.height,
                                                af = wb.margin,
                                                ue = af.left + af.right,
                                                ve = af.top + af.bottom,
                                                $c = Wo(wb, Ze, Jf, !1);
                                            !isNaN(wb.Ca.width) || $c !== Ee && $c !== so || ($e = Math.max(vj - ue, 0));
                                            !isNaN(wb.Ca.height) || $c !== Ee && $c !== ro || (Le = Math.max(wj - ve, 0));
                                            var Jd = wb.Gf,
                                                Ah = wb.si,
                                                $e = Math.min(Jd.width, $e),
                                                Le = Math.min(Jd.height, Le),
                                                $e = Math.max(Ah.width, $e),
                                                Le = Math.max(Ah.height,
                                                    Le),
                                                Y = Le + ve;
                                            h.x += h.width * be - ($e + ue) * be + li + af.left;
                                            h.y += h.height * hg - Y * hg + Gb + af.top;
                                            wb.visible && (db(Fb, yh, zh, ea, h.x, h.y, ae.width, ae.height) ? wb.hc(h.x, h.y, $e, Le) : wb.hc(h.x, h.y, $e, Le, new B(Fb, yh, zh, ea)))
                                        }
                                        else
                                        {
                                            wb.Ri();
                                            wb.oc.Qa();
                                            var kd = wb.oc,
                                                ig = w.kg(kd.x, kd.y, kd.width, kd.height);
                                            kd.x = jd.type === Mo ? wh : Id;
                                            kd.y = jd.type === No ? Fg : cc;
                                            kd.width = ae.width;
                                            kd.height = ae.height;
                                            wb.oc.freeze();
                                            Io(wb, !1);
                                            if (!Va(ig, kd))
                                            {
                                                var ni = wb.V;
                                                null !== ni && (ni.Qk(), wb.Gs(ni))
                                            }
                                            w.Hb(ig)
                                        }
                                    }
                                }
                        }
                    w.Lk(te);
                    for (jb = 0; jb < $d; jb++) wb = f[jb], jd = wb instanceof
                    C ? wb : null, null === jd || jd.type !== Mo && jd.type !== No || (kd = wb.oc, wb.Wc.Qa(), wb.Wc.m(0, 0, kd.width, kd.height), wb.Wc.freeze());
                    break;
                case "Viewbox":
                    var Bh = f[0],
                        lc = Bh.za,
                        Ch = Bh.margin,
                        mb = Ch.top + Ch.bottom,
                        nb = Math.max(lc.width + (Ch.right + Ch.left), 0),
                        im = Math.max(lc.height + mb, 0),
                        bf = Bh.alignment;
                    bf.Zc() && (bf = this.Xl);
                    bf.$c() || (bf = Jb);
                    h.x = e.width * bf.x - nb * bf.x + bf.offsetX;
                    h.y = e.height * bf.y - im * bf.y + bf.offsetY;
                    h.width = lc.width;
                    h.height = lc.height;
                    Bh.hc(h.x, h.y, h.width, h.height);
                    break;
                case "Link":
                    var Jk = f.length;
                    if (this instanceof jh || this instanceof W)
                    {
                        var oi = null;
                        this instanceof W && (oi = this);
                        this instanceof jh && (oi = this.Ye);
                        var xc = oi,
                            Kf = this instanceof jh ? null : xc.path;
                        if (null !== this.Yg)
                        {
                            var jg = this.Yg.n,
                                Pb = 0;
                            if (null !== Kf && Pb < this.Yg.count)
                            {
                                var cf = jg[Pb];
                                Pb++;
                                Kf.hc(cf.x - this.lj.x, cf.y - this.lj.y, cf.width, cf.height)
                            }
                            for (var Kk = 0; Kk < Jk; Kk++)
                            {
                                var jm = f[Kk];
                                jm !== Kf && Pb < this.Yg.count && (cf = jg[Pb], Pb++, jm.hc(cf.x - this.lj.x, cf.y - this.lj.y, cf.width, cf.height))
                            }
                        }
                        var Lf = xc.points,
                            df = Lf.count;
                        if (2 <= df && this instanceof W)
                            for (var ef = this.Ef; ef.next();)
                            {
                                var mc =
                                        ef.value,
                                    kg = df,
                                    Dc = Lf,
                                    Ab = mc.Pe,
                                    pi = mc.wB,
                                    Hg = mc.oh,
                                    xj = mc.yq,
                                    pp = mc.xB,
                                    Ig = 0,
                                    Mf = 0,
                                    Jg = 0;
                                if (Ab < -kg || Ab >= kg)
                                {
                                    var Kg = this.QF,
                                        ob = this.PF;
                                    xj !== mj && (Jg = this.computeAngle(mc, xj, ob), mc.angle = Jg);
                                    Ig = Kg.x;
                                    Mf = Kg.y
                                }
                                else
                                {
                                    var Wb = void 0,
                                        Ec = void 0;
                                    if (0 <= Ab) Wb = Dc.n[Ab], Ec = Ab < kg - 1 ? Dc.n[Ab + 1] : Wb;
                                    else var ff = kg + Ab,
                                        Wb = Dc.n[ff],
                                        Ec = 0 < ff ? Dc.n[ff - 1] : Wb;
                                    if (Wb.Oc(Ec))
                                    {
                                        var Kd = void 0,
                                            xd = void 0;
                                        0 <= Ab ? (Kd = 0 < Ab ? Dc.n[Ab - 1] : Wb, xd = Ab < kg - 2 ? Dc.n[Ab + 2] : Ec) : (Kd = ff < kg - 1 ? Dc.n[ff + 1] : Wb, xd = 1 < ff ? Dc.n[ff - 2] : Ec);
                                        var gf = Kd.Bf(Wb),
                                            cb = Ec.Bf(xd),
                                            ob = gf >
                                            cb + 10 ? 0 <= Ab ? Kd.Qb(Wb) : Wb.Qb(Kd) : cb > gf + 10 ? 0 <= Ab ? Ec.Qb(xd) : xd.Qb(Ec) : 0 <= Ab ? Kd.Qb(xd) : xd.Qb(Kd)
                                    }
                                    else ob = 0 <= Ab ? Wb.Qb(Ec) : Ec.Qb(Wb);
                                    xj !== mj && (Jg = this.computeAngle(mc, xj, ob), mc.angle = Jg);
                                    Ig = Wb.x + (Ec.x - Wb.x) * pi;
                                    Mf = Wb.y + (Ec.y - Wb.y) * pi
                                }
                                if (Hg.L(yb)) mc.location = new y(Ig, Mf);
                                else
                                {
                                    Hg.Td() && (Hg = Jb);
                                    var hf = w.Vg();
                                    hf.reset();
                                    hf.scale(mc.scale, mc.scale);
                                    hf.rotate(mc.angle, 0, 0);
                                    var ld = mc.Ja,
                                        Lg = w.kg(0, 0, ld.width, ld.height),
                                        jf = w.K();
                                    jf.Zn(Lg, Hg);
                                    hf.nb(jf);
                                    var Fc = -jf.x,
                                        qi = -jf.y,
                                        Me = pp.copy();
                                    isNaN(Me.x) && (Me.x = 0 <= Ab ? jf.x +
                                        3 : -(jf.x + 3));
                                    isNaN(Me.y) && (Me.y = -(jf.y + 3));
                                    Me.rotate(ob);
                                    Ig += Me.x;
                                    Mf += Me.y;
                                    hf.GG(Lg);
                                    var Fc = Fc + Lg.x,
                                        qi = qi + Lg.y,
                                        Mg = w.xb(Ig + Fc, Mf + qi);
                                    mc.move(Mg);
                                    w.v(Mg);
                                    w.v(jf);
                                    w.Hb(Lg);
                                    w.bf(hf)
                                }
                            }
                        this.Eu(!1)
                    }
                    break;
                case "Grid":
                    break;
                case "Graduated":
                    if (null !== this.Em)
                    {
                        var Ng = this.Bd(),
                            yj = this.Gm,
                            Lk = this.Em,
                            we = 0,
                            ad = Lk[we];
                        we++;
                        Ng.hc(ad.x - e.x, ad.y - e.y, ad.width, ad.height);
                        for (var Mk = f.length, Dh = 0; Dh < Mk; Dh++)
                        {
                            var md = f[Dh],
                                zj = yj[Dh];
                            md.visible && md !== Ng && 0 !== zj.length && (ad = Lk[we], we++, md.hc(ad.x - e.x, ad.y - e.y, ad.width, ad.height))
                        }
                        this.Em =
                            null
                    }
                    break;
                case "TableRow":
                case "TableColumn":
                    w.k(this.toString() + " is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");
                    break;
                default:
                    w.k("Unknown panel type: " + u)
            }
            w.Hb(h)
        }
    };
    C.prototype.Ek = function (a)
    {
        var b = this.Ja,
            c = Np(this);
        if (db(0, 0, b.width, b.height, a.x, a.y))
        {
            for (var b = this.xa.n, d = b.length, e = w.xb(0, 0); d--;)
            {
                var f = b[d];
                if (f.visible || f === c)
                    if (Pa(e.set(a), f.transform), f.Ia(e)) return w.v(e), !0
            }
            w.v(e);
            return null === this.Ib && null === this.cc ? !1 : !0
        }
        return !1
    };
    C.prototype.Bx = function (a)
    {
        if (this.po === a) return this;
        for (var b = this.xa.n, c = b.length, d = 0; d < c; d++)
        {
            var e = b[d].Bx(a);
            if (null !== e) return e
        }
        return null
    };

    function cp(a, b, c)
    {
        c(a, b);
        if (b instanceof C)
        {
            b = b.xa.n;
            for (var d = b.length, e = 0; e < d; e++) cp(a, b[e], c)
        }
    }

    function Pm(a, b)
    {
        Zp(a, a, b)
    }

    function Zp(a, b, c)
    {
        c(b);
        b = b.xa.n;
        for (var d = b.length, e = 0; e < d; e++)
        {
            var f = b[e];
            f instanceof C && Zp(a, f, c)
        }
    }
    C.prototype.walkVisualTree = C.prototype.bK = function (a)
    {
        $p(this, this, a)
    };

    function $p(a, b, c)
    {
        c(b);
        if (b instanceof C)
        {
            b = b.xa.n;
            for (var d = b.length, e = 0; e < d; e++) $p(a, b[e], c)
        }
    }
    C.prototype.findInVisualTree = C.prototype.Yt = function (a)
    {
        return aq(this, this, a)
    };

    function aq(a, b, c)
    {
        if (c(b)) return b;
        if (b instanceof C)
        {
            b = b.xa.n;
            for (var d = b.length, e = 0; e < d; e++)
            {
                var f = aq(a, b[e], c);
                if (null !== f) return f
            }
        }
        return null
    }
    C.prototype.findObject = C.prototype.Cd = function (a)
    {
        if (this.name === a) return this;
        for (var b = this.xa.n, c = b.length, d = 0; d < c; d++)
        {
            var e = b[d];
            if (e.name === a) return e;
            if (e instanceof C)
                if (null === e.ik && null === e.wg)
                {
                    if (e = e.Cd(a), null !== e) return e
                }
                else if (nn(e) && (e = e.xa.first(), null !== e && (e = e.Cd(a), null !== e))) return e
        }
        return null
    };

    function bq(a)
    {
        a = a.xa.n;
        for (var b = a.length, c = 0, d = 0; d < b; d++)
        {
            var e = a[d];
            if (e instanceof C) c = Math.max(c, bq(e));
            else if (e instanceof X)
            {
                a:
                {
                    if (null !== !e.Sf) switch (e.Fo)
                    {
                        case "None":
                        case "Square":
                        case "Ellipse":
                        case "Circle":
                        case "LineH":
                        case "LineV":
                        case "FramedRectangle":
                        case "RoundedRectangle":
                        case "Line1":
                        case "Line2":
                        case "Border":
                        case "Cube1":
                        case "Cube2":
                        case "Junction":
                        case "Cylinder1":
                        case "Cylinder2":
                        case "Cylinder3":
                        case "Cylinder4":
                        case "PlusLine":
                        case "XLine":
                        case "ThinCross":
                        case "ThickCross":
                            e = 0;
                            break a
                    }
                    e = e.ji / 2 * e.hn * e.vj()
                }
                c = Math.max(c, e)
            }
        }
        return c
    }
    g = C.prototype;
    g.Xg = function ()
    {
        return !(this.type === Mo || this.type === No)
    };
    g.Oe = function (a, b, c)
    {
        if (!1 === this.Tg) return null;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        if (Gm(this)) return null;
        var d = this.Ja,
            e = 1 / this.vj(),
            f = this.Xg(),
            h = f ? a : Pa(w.xb(a.x, a.y), this.transform),
            k = this.g,
            l = 10,
            m = 5;
        null !== k && (l = k.ku("extraTouchArea"), m = l / 2);
        if (db(-(m * e), -(m * e), d.width + l * e, d.height + l * e, h.x, h.y))
        {
            if (!this.Hn)
            {
                var e = this.xa.n,
                    n = e.length,
                    k = w.K(),
                    m = (l = this.qu) ? this.Bd() : null;
                if (l && (m.Xg() ? Pa(k.set(a), m.transform) : k.set(a), !m.Ia(k))) return w.v(k), f || w.v(h), null;
                for (var p = Np(this); n--;)
                {
                    var q =
                        e[n];
                    if (q.visible || q === p)
                        if (q.Xg() ? Pa(k.set(a), q.transform) : k.set(a), !l || q !== m)
                        {
                            var r = null;
                            q instanceof C ? r = q.Oe(k, b, c) : !0 === q.Tg && q.Ia(k) && (r = q);
                            if (null !== r && (null !== b && (r = b(r)), null !== r && (null === c || c(r)))) return w.v(k), f || w.v(h), r
                        }
                }
                w.v(k)
            }
            if (null === this.background && null === this.nn) return f || w.v(h), null;
            a = db(0, 0, d.width, d.height, h.x, h.y) ? this : null;
            f || w.v(h);
            return a
        }
        f || w.v(h);
        return null
    };
    g.$t = function (a, b, c, d)
    {
        if (!1 === this.Tg) return !1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof H || d instanceof I || (d = new H(G));
        var e = this.Ja,
            f = this.Xg(),
            h = f ? a : Pa(w.xb(a.x, a.y), this.transform);
        if (db(0, 0, e.width, e.height, h.x, h.y))
        {
            if (!this.Hn)
            {
                for (var e = this.xa.n, k = e.length, l = w.K(), m = Np(this); k--;)
                {
                    var n = e[k];
                    if (n.visible || n === m)
                    {
                        n.Xg() ? Pa(l.set(a), n.transform) : l.set(a);
                        var p = n,
                            n = n instanceof C ? n : null;
                        (null !== n ? n.$t(l, b, c, d) : p.Ia(l)) && !1 !== p.Tg && (null !== b && (p = b(p)), null === p || null !== c && !c(p) ||
                        d.add(p))
                    }
                }
                w.v(l)
            }
            f || w.v(h);
            return null !== this.background || null !== this.nn
        }
        f || w.v(h);
        return !1
    };
    g.Jk = function (a, b, c, d, e, f)
    {
        if (!1 === this.Tg) return !1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var h = f;
        void 0 === f && (h = w.Vg(), h.reset());
        h.multiply(this.transform);
        if (this.sn(a, h)) return cq(this, b, c, e), void 0 === f && w.bf(h), !0;
        if (this.Zf(a, h))
        {
            if (!this.Hn)
                for (var k = Np(this), l = this.xa.n, m = l.length; m--;)
                {
                    var n = l[m];
                    if (n.visible || n === k)
                    {
                        var p = n.U,
                            q = this.Ja;
                        if (!(p.x > q.width || p.y > q.height || 0 > p.x + p.width || 0 > p.y + p.height))
                        {
                            p = n;
                            n = n instanceof C ? n : null;
                            q = w.Vg();
                            q.set(h);
                            if (null !== n ? n.Jk(a, b, c, d, e, q) : Go(p, a, d,
                                q)) null !== b && (p = b(p)), null === p || null !== c && !c(p) || e.add(p);
                            w.bf(q)
                        }
                    }
                }
            void 0 === f && w.bf(h);
            return d
        }
        void 0 === f && w.bf(h);
        return !1
    };

    function cq(a, b, c, d)
    {
        for (var e = a.xa.n, f = e.length; f--;)
        {
            var h = e[f];
            if (h.visible)
            {
                var k = h.U,
                    l = a.Ja;
                k.x > l.width || k.y > l.height || 0 > k.x + k.width || 0 > k.y + k.height || (h instanceof C && cq(h, b, c, d), null !== b && (h = b(h)), null === h || null !== c && !c(h) || d.add(h))
            }
        }
    }
    g.yn = function (a, b, c, d, e, f)
    {
        if (!1 === this.Tg) return !1;
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        var h = this.Ja,
            k = this.Xg(),
            l = k ? a : Pa(w.xb(a.x, a.y), this.transform),
            m = k ? b : Pa(w.xb(b.x, b.y), this.transform),
            n = l.Bf(m),
            p = 0 < l.x && l.x < h.width && 0 < l.y && l.y < h.height || Ra(l.x, l.y, 0, 0, 0, h.height) < n || Ra(l.x, l.y, 0, h.height, h.width, h.height) < n || Ra(l.x, l.y, h.width, h.height, h.width, 0) < n || Ra(l.x, l.y, h.width, 0, 0, 0) < n,
            h = 0 < l.x && l.x < h.width && 0 < l.y && l.y < h.height && Ra(l.x, l.y, 0, 0, 0, h.height) < n && Ra(l.x, l.y, 0, h.height, h.width, h.height) <
                n && Ra(l.x, l.y, h.width, h.height, h.width, 0) < n && Ra(l.x, l.y, h.width, 0, 0, 0) < n;
        k || (w.v(l), w.v(m));
        if (p)
        {
            if (!this.Hn)
            {
                for (var l = w.K(), m = w.K(), n = Np(this), q = this.xa.n, r = q.length; r--;)
                {
                    var s = q[r];
                    if (s.visible || s === n)
                    {
                        var u = s.U,
                            t = this.Ja;
                        if (!k || !(u.x > t.width || u.y > t.height || 0 > u.x + u.width || 0 > u.y + u.height))
                            if (s.Xg() ? (u = s.transform, Pa(l.set(a), u), Pa(m.set(b), u)) : (l.set(a), m.set(b)), u = s, s = s instanceof C ? s : null, null !== s ? s.yn(l, m, c, d, e, f) : u.cF(l, m, e)) null !== c && (u = c(u)), null === u || null !== d && !d(u) || f.add(u)
                    }
                }
                w.v(l);
                w.v(m)
            }
            return e ?
                p : h
        }
        return !1
    };

    function Op(a)
    {
        var b = null;
        a instanceof X && (b = a.A, b === qc && (b = null), a = a.of, null !== a && null === b && (b = a.A));
        null === b && (b = zb);
        return b
    }

    function Pp(a)
    {
        var b = null;
        a instanceof X && (b = a.B, b === qc && (b = null), a = a.of, null !== a && null === b && (b = a.B));
        null === b && (b = Sb);
        return b
    }
    C.prototype.add = C.prototype.add = function (a)
    {
        w.G(a, G, C, "add:element");
        this.Rd(this.xa.count, a)
    };
    C.prototype.elt = C.prototype.ea = function (a)
    {
        return this.xa.ea(a)
    };
    C.prototype.insertAt = C.prototype.Rd = function (a, b)
    {
        b instanceof R && w.k("Cannot add a Part to a Panel: " + b + "; use a Panel instead");
        if (this === b || this.fm(b)) this === b && w.k("Cannot make a Panel contain itself: " + this.toString()), w.k("Cannot make a Panel indirectly contain itself: " + this.toString() + " already contains " + b.toString());
        var c = b.R;
        null !== c && c !== this && w.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: " + b.toString() + ", already contained by " + c.toString() + ", cannot be shared by this Panel: " +
            this.toString());
        this.na !== Kl || b instanceof X || w.k("Can only add Shapes to a Grid Panel, not: " + b);
        this.na !== lp || b instanceof X || b instanceof Lh || w.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: " + b);
        b.mm(this);
        b.Xm = null;
        if (null !== this.hq)
        {
            var d = b.data;
            null !== d && "object" === typeof d && (null === this.vg && (this.vg = new ma(Object, C)), this.vg.add(d, b))
        }
        var e = this.xa,
            d = -1;
        if (c === this)
        {
            for (var f = -1, h = this.xa.n, k = h.length, l = 0; l < k; l++)
                if (h[l] === b)
                {
                    f = l;
                    break
                }
            if (-1 !== f)
            {
                if (f === a || f + 1 >= e.count &&
                    a >= e.count) return;
                e.dd(f);
                d = f
            }
            else w.k("element " + b.toString() + " has panel " + c.toString() + " but is not contained by it.")
        }
        if (0 > a || a > e.count) a = e.count;
        e.Rd(a, b);
        if (0 === a || b.ff) this.Gl = null;
        sm(this) || this.H();
        b.H(!1);
        null !== b.le ? this.Pk = !0 : b instanceof C && !0 === b.Pk && (this.Pk = !0);
        this.bk = null;
        c = this.V;
        null !== c && (c.Sm = null, c.mk = NaN, this.Pk && c instanceof T && (c.Pk = !0), c.Pk && c instanceof T && (c.Ie = null), e = this.g, null !== e && e.ja.lb || (-1 !== d && c.cd(Ff, "elements", this, b, null, d, null), c.cd(Ef, "elements", this, null,
            b, null, a), this.su() || dq(this, b, !1)))
    };
    w.defineProperty(C,
        {
            Pk: null
        }, function ()
        {
            return 0 !== (this.M & 8388608)
        }, function (a)
        {
            0 !== (this.M & 8388608) !== a && (this.M ^= 8388608)
        });

    function eq(a, b)
    {
        a.M = b ? a.M | 16777216 : a.M & -16777217
    }
    C.prototype.remove = C.prototype.remove = function (a)
    {
        w.G(a, G, C, "remove:element");
        for (var b = this.xa.n, c = b.length, d = -1, e = 0; e < c; e++)
            if (b[e] === a)
            {
                d = e;
                break
            } - 1 !== d && this.rf(d, !0)
    };
    C.prototype.removeAt = C.prototype.dd = function (a)
    {
        0 <= a && this.rf(a, !0)
    };
    C.prototype.rf = function (a, b)
    {
        var c = this.xa,
            d = c.ea(a);
        d.Xm = null;
        d.mm(null);
        if (null !== this.vg)
        {
            var e = d.data;
            "object" === typeof e && this.vg.remove(e)
        }
        c.dd(a);
        dm(this, !1);
        this.H();
        this.Gl === d && (this.Gl = null);
        this.bk = null;
        var f = this.V;
        null !== f && (f.Sm = null, f.mk = NaN, f.fe(), f instanceof T && (d instanceof C ? cp(d, d, function (a, c)
        {
            $o(f, c, b)
        }) : $o(f, d, b)), c = this.g, null !== c && c.ja.lb || f.cd(Ff, "elements", this, d, null, a, null))
    };
    w.u(C,
        {
            xq: "rowCount"
        }, function ()
        {
            return void 0 === this.Xc ? 0 : this.Xc.length
        });
    C.prototype.getRowDefinition = C.prototype.ee = function (a)
    {
        0 > a && w.Fa(a, ">= 0", C, "getRowDefinition:idx");
        a = Math.round(a);
        var b = this.Xc;
        if (void 0 === b[a])
        {
            var c = new Vg;
            c.mm(this);
            c.xe = !0;
            c.index = a;
            b[a] = c
        }
        return b[a]
    };
    C.prototype.removeRowDefinition = C.prototype.dG = function (a)
    {
        0 > a && w.Fa(a, ">= 0", C, "removeRowDefinition:idx");
        a = Math.round(a);
        var b = this.Xc;
        this.cd(Ff, "coldefs", this, b[a], null, a, null);
        b[a] && delete b[a];
        this.H()
    };
    w.u(C,
        {
            Mp: "columnCount"
        }, function ()
        {
            return void 0 === this.Uc ? 0 : this.Uc.length
        });
    C.prototype.getColumnDefinition = C.prototype.de = function (a)
    {
        0 > a && w.Fa(a, ">= 0", C, "getColumnDefinition:idx");
        a = Math.round(a);
        var b = this.Uc;
        if (void 0 === b[a])
        {
            var c = new Vg;
            c.mm(this);
            c.xe = !1;
            c.index = a;
            b[a] = c
        }
        return b[a]
    };
    C.prototype.removeColumnDefinition = C.prototype.bG = function (a)
    {
        0 > a && w.Fa(a, ">= 0", C, "removeColumnDefinition:idx");
        a = Math.round(a);
        var b = this.Uc;
        this.cd(Ff, "coldefs", this, b[a], null, a, null);
        b[a] && delete b[a];
        this.H()
    };
    w.defineProperty(C,
        {
            AJ: "rowSizing"
        }, function ()
        {
            return void 0 === this.$m ? kp : this.$m
        }, function (a)
        {
            if (void 0 !== this.$m)
            {
                var b = this.$m;
                b !== a && (a !== kp && a !== Rp && w.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: " + a), this.$m = a, this.H(), this.h("rowSizing", b, a))
            }
        });
    w.defineProperty(C,
        {
            xH: "columnSizing"
        }, function ()
        {
            return void 0 === this.Bm ? kp : this.Bm
        }, function (a)
        {
            if (void 0 !== this.Bm)
            {
                var b = this.Bm;
                b !== a && (a !== kp && a !== Rp && w.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: " + a), this.Bm = a, this.H(), this.h("columnSizing", b, a))
            }
        });
    w.defineProperty(C,
        {
            $L: "topIndex"
        }, function ()
        {
            return void 0 === this.kj ? 0 : this.kj
        }, function (a)
        {
            if (void 0 !== this.kj)
            {
                var b = this.kj;
                b !== a && ((!isFinite(a) || 0 > a) && w.k("Panel.topIndex must be greater than zero and a real number, not: " + a), this.kj = a, this.H(), this.h("topIndex", b, a))
            }
        });
    w.defineProperty(C,
        {
            oL: "leftIndex"
        }, function ()
        {
            return void 0 === this.Ui ? 0 : this.Ui
        }, function (a)
        {
            if (void 0 !== this.Ui)
            {
                var b = this.Ui;
                b !== a && ((!isFinite(a) || 0 > a) && w.k("Panel.leftIndex must be greater than zero and a real number, not: " + a), this.Ui = a, this.H(), this.h("leftIndex", b, a))
            }
        });
    C.prototype.findRowForLocalY = function (a)
    {
        if (0 > a || this.type !== Vo) return -1;
        for (var b = 0, c = this.Xc, d = c.length, e = this.kj; e < d; e++)
        {
            var f = c[e];
            if (void 0 !== f && (b += f.total, a < b)) break
        }
        return e
    };
    C.prototype.findColumnForLocalX = function (a)
    {
        if (0 > a || this.type !== Vo) return -1;
        for (var b = 0, c = this.Uc, d = c.length, e = this.Ui; e < d; e++)
        {
            var f = c[e];
            if (void 0 !== f && (b += f.total, a < b)) break
        }
        return e
    };
    C.prototype.graduatedPointForValue = function (a, b)
    {
        void 0 === b && (b = new y(NaN, NaN));
        if (this.type !== lp) return b.m(NaN, NaN), b;
        a = Math.min(Math.max(a, this.Ok), this.IA);
        var c = (a - this.Ok) / this.lu,
            d = this.Bd();
        d.of.fI(c, b);
        return d.transform.nb(b)
    };
    C.prototype.graduatedValueForPoint = function (a)
    {
        if (this.type !== lp) return NaN;
        var b = this.Bd(),
            c = b.of;
        b.transform.wh(a);
        return c.bI(a) * this.lu + this.Ok
    };
    w.defineProperty(C,
        {
            data: "data"
        }, function ()
        {
            return this.Yd
        }, function (a)
        {
            var b = this.Yd;
            if (b !== a)
            {
                var c = this instanceof R && !(this instanceof jh);
                c && w.j(a, "object", C, "data");
                lh(this);
                this.Yd = a;
                var d = this.g;
                null !== d && (c ? this instanceof W ? (null !== b && d.Tj.remove(b), null !== a && d.Tj.add(a, this)) : this instanceof R && (null !== b && d.Ii.remove(b), null !== a && d.Ii.add(a, this)) : (c = this.R, null !== c && null !== c.vg && (null !== b && c.vg.remove(b), null !== a && c.vg.add(a, this))));
                this.h("data", b, a);
                null !== d && d.ja.lb || null !== a && this.Lb()
            }
        });
    w.defineProperty(C,
        {
            yu: "itemIndex"
        }, function ()
        {
            return this.cs
        }, function (a)
        {
            var b = this.cs;
            b !== a && (this.cs = a, this.h("itemIndex", b, a))
        });

    function dp(a)
    {
        a = a.hl;
        return null !== a && a.P
    }

    function lh(a)
    {
        var b = a.hl;
        if (null === b) null !== a.data && w.k("Template cannot have .data be non-null: " + a), a.hl = b = new H(ah);
        else if (b.P) return;
        var c = new H(G);
        eq(a, !1);
        cp(a, a, function (a, d)
        {
            var e = d.yc;
            if (null !== e)
                for (Zo(d, !1), e = e.i; e.next();)
                {
                    var f = e.value;
                    f.mode === ch && Zo(d, !0);
                    var h = f.Fq;
                    null !== h && ("/" === h && eq(a, !0), h = dh(f, a, d), null !== h && (c.add(h), null === h.op && (h.op = new H(ah)), h.op.add(f)));
                    b.add(f)
                }
            if (d instanceof C && d.type === Vo)
            {
                if (0 < d.Xc.length)
                    for (e = d.Xc, f = e.length, h = 0; h < f; h++)
                    {
                        var k = e[h];
                        if (void 0 !==
                            k && null !== k.yc)
                            for (var l = k.yc.i; l.next();)
                            {
                                var t = l.value;
                                t.Fg = k;
                                t.xt = 2;
                                t.xp = k.index;
                                b.add(t)
                            }
                    }
                if (0 < d.Uc.length)
                    for (e = d.Uc, f = e.length, h = 0; h < f; h++)
                        if (k = e[h], void 0 !== k && null !== k.yc)
                            for (l = k.yc.i; l.next();) t = l.value, t.Fg = k, t.xt = 1, t.xp = k.index, b.add(t)
            }
        });
        for (var d = c.i; d.next();)
        {
            var e = d.value;
            if (null !== e.op)
            {
                Zo(e, !0);
                for (var f = e.op.i; f.next();)
                {
                    var h = f.value;
                    null === e.yc && (e.yc = new H(ah));
                    e.yc.add(h)
                }
            }
            e.op = null
        }
        for (d = b.i; d.next();)
            if (e = d.value, f = e.Fg, null !== f)
            {
                e.Fg = null;
                var k = e.By,
                    l = k.indexOf(".");
                0 < l &&
                f instanceof C && (h = k.substring(0, l), k = k.substr(l + 1), l = f.Cd(h), null !== l ? (f = l, e.By = k) : w.trace('Warning: unable to find GraphObject named "' + h + '" for Binding: ' + e.toString()));
                f instanceof Vg ? (e.qm = w.Pd(f.R), f.R.po = e.qm) : (e.qm = w.Pd(f), f.po = e.qm)
            }
        b.freeze();
        a instanceof R && a.he() && a.af()
    }
    C.prototype.copyTemplate = function ()
    {
        var a = this.copy();
        a.bK(function (a)
        {
            a instanceof C && (a.hl = null, a.Yd = null);
            var c = a.yc;
            null !== c && (a.yc = null, c.each(function (c)
            {
                a.bind(c.copy())
            }))
        });
        return a
    };
    C.prototype.updateTargetBindings = C.prototype.Lb = function (a)
    {
        var b = this.hl;
        if (null !== b)
            for (void 0 === a && (a = ""), b = b.i; b.next();)
            {
                var c = b.value,
                    d = c.vG;
                if ("" === a || "" === d || d === a)
                    if (d = c.By, null !== c.DH || "" !== d)
                    {
                        var d = this.data,
                            e = c.Fq;
                        if (null !== e) d = "" === e ? this : "/" === e ? this : "." === e ? this : ".." === e ? this : this.Cd(e);
                        else
                        {
                            var f = this.g;
                            null !== f && c.Nx && (d = f.$.Sk)
                        }
                        if (null !== d)
                        {
                            var f = this,
                                h = c.qm;
                            if (-1 !== h)
                            {
                                if (f = this.Bx(h), null === f) continue
                            }
                            else null !== c.Fg && (f = c.Fg);
                            "/" === e ? d = f.V : "." === e ? d = f : ".." === e && (d = f.R);
                            e = c.xt;
                            if (0 !== e)
                            {
                                if (!(f instanceof C)) continue;
                                h = f;
                                1 === e ? f = h.de(c.xp) : 2 === e && (f = h.ee(c.xp))
                            }
                            void 0 !== f && c.JG(f, d)
                        }
                    }
            }
    };
    w.defineProperty(C,
        {
            hq: "itemArray"
        }, function ()
        {
            return this.ik
        }, function (a)
        {
            var b = this.ik;
            if (b !== a)
            {
                var c = this.g;
                null !== c && null !== b && Vm(c, this);
                this.ik = a;
                null !== c && null !== a && Rm(c, this);
                this.h("itemArray", b, a);
                null !== c && c.ja.lb || this.qB()
            }
        });

    function nn(a)
    {
        return a.type === Oj || a.type === Hl || a.type === jj || a.type === Vo && 0 < a.xa.length && (a = a.xa.ea(0), a.ff && a instanceof C && (a.type === Mo || a.type === No)) ? !0 : !1
    }
    C.prototype.rebuildItemElements = C.prototype.qB = function ()
    {
        var a = 0;
        for (nn(this) && (a = 1); this.xa.length > a;) this.rf(this.xa.length - 1, !1);
        a = this.hq;
        if (null !== a)
            for (var b = w.bb(a), c = 0; c < b; c++) mn(this, w.Ba(a, c), c)
    };
    C.prototype.findItemPanelForData = C.prototype.WH = function (a)
    {
        if (void 0 === a || null === a || null === this.vg) return null;
        w.j(a, "object", C, "findItemPanelForData");
        return this.vg.ka(a)
    };

    function mn(a, b, c)
    {
        if (!(void 0 === b || null === b || 0 > c))
        {
            var d;
            d = fq(a, b);
            var e = a.FI,
                f = null;
            null !== e && (f = e.ka(d));
            null === f && (gq || (gq = !0, w.trace('No item template Panel found for category "' + d + '" on ' + a), w.trace("  Using default item template."), d = new C, e = new Lh, e.bind(new ah("text", "", Qf)), d.add(e), hq = d), f = hq);
            d = f;
            null !== d && (lh(d), d = d.copy(), 0 !== (d.M & 16777216) && (e = a.Yl(), null !== e && eq(e, !0)), "object" === typeof b && (null === a.vg && (a.vg = new ma(Object, C)), a.vg.add(b, d)), e = c, nn(a) && e++, a.Rd(e, d), d.Yd = b, on(a, e,
                c), d.Yd = null, d.data = b)
        }
    }

    function on(a, b, c)
    {
        for (a = a.xa; b < a.length;)
        {
            var d = a.ea(b);
            if (d instanceof C)
            {
                var e = b,
                    f = c;
                d.type === Mo ? d.Vb = e : d.type === No && (d.column = e);
                d.yu = f
            }
            b++;
            c++
        }
    }
    w.defineProperty(C,
        {
            mL: "itemTemplate"
        }, function ()
        {
            return null === this.wg ? null : this.wg.ka("")
        }, function (a)
        {
            if (null === this.wg)
            {
                if (null === a) return;
                this.wg = new ma("string", C)
            }
            var b = this.wg.ka("");
            b !== a && (w.G(a, C, C, "itemTemplate"), (a instanceof R || a.ff) && w.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: " + a), this.wg.add("", a), this.h("itemTemplate", b, a), a = this.g, null !== a && a.ja.lb || this.qB())
        });
    w.defineProperty(C,
        {
            FI: "itemTemplateMap"
        }, function ()
        {
            return this.wg
        }, function (a)
        {
            var b = this.wg;
            if (b !== a)
            {
                w.G(a, ma, C, "itemTemplateMap");
                for (var c = a.i; c.next();)
                {
                    var d = c.value;
                    (d instanceof R || d.ff) && w.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: " + d)
                }
                this.wg = a;
                this.h("itemTemplateMap", b, a);
                a = this.g;
                null !== a && a.ja.lb || this.qB()
            }
        });
    w.defineProperty(C,
        {
            lL: "itemCategoryProperty"
        }, function ()
        {
            return this.So
        }, function (a)
        {
            var b = this.So;
            b !== a && ("string" !== typeof a && "function" !== typeof a && w.Fd(a, "string or function", C, "itemCategoryProperty"), this.So = a, this.h("itemCategoryProperty", b, a))
        });

    function fq(a, b)
    {
        if (null === b) return "";
        var c = a.So,
            d = "";
        if ("function" === typeof c) d = c(b);
        else if ("string" === typeof c && "object" === typeof b)
        {
            if ("" === c) return "";
            d = w.vb(b, c)
        }
        else return "";
        if (void 0 === d) return "";
        if ("string" === typeof d) return d;
        w.k("Panel.getCategoryForItemData found a non-string category for " + b + ": " + d);
        return ""
    }
    var gq = !1,
        hq = null;
    w.defineProperty(C,
        {
            Hn: "isAtomic"
        }, function ()
        {
            return 0 !== (this.M & 1048576)
        }, function (a)
        {
            var b = 0 !== (this.M & 1048576);
            b !== a && (w.j(a, "boolean", C, "isAtomic"), this.M ^= 1048576, this.h("isAtomic", b, a))
        });
    w.defineProperty(C,
        {
            qu: "isClipping"
        }, function ()
        {
            return 0 !== (this.M & 2097152)
        }, function (a)
        {
            var b = 0 !== (this.M & 2097152);
            b !== a && (w.j(a, "boolean", C, "isClipping"), this.M ^= 2097152, this.H(), this.h("isClipping", b, a))
        });
    w.defineProperty(C,
        {
            GF: "isOpposite"
        }, function ()
        {
            return 0 !== (this.M & 33554432)
        }, function (a)
        {
            var b = 0 !== (this.M & 33554432);
            b !== a && (w.j(a, "boolean", C, "isOpposite"), this.M ^= 33554432, this.H(), this.h("isOpposite", b, a))
        });
    w.defineProperty(C,
        {
            isEnabled: "isEnabled"
        }, function ()
        {
            return 0 !== (this.M & 4194304)
        }, function (a)
        {
            var b = 0 !== (this.M & 4194304);
            if (b !== a)
            {
                w.j(a, "boolean", C, "isEnabled");
                var c = null === this.R || this.R.su();
                this.M ^= 4194304;
                this.h("isEnabled", b, a);
                b = this.g;
                null !== b && b.ja.lb || c && dq(this, this, a)
            }
        });

    function dq(a, b, c)
    {
        var d = b.WE;
        null !== d && d(b, c);
        if (b instanceof C)
        {
            b = b.xa.n;
            for (var d = b.length, e = 0; e < d; e++)
            {
                var f = b[e];
                c && f instanceof C && !f.isEnabled || dq(a, f, c)
            }
        }
    }
    w.defineProperty(C,
        {
            hK: "alignmentFocusName"
        }, function ()
        {
            return this.Pj
        }, function (a)
        {
            var b = this.Pj;
            b !== a && (this.Pj = a, this.H(), this.h("alignmentFocusName", b, a))
        });

    function Vg()
    {
        w.nc(this);
        this.ej = null;
        this.bw = !0;
        this.zc = 0;
        this.mf = NaN;
        this.ok = 0;
        this.nk = Infinity;
        this.me = qc;
        this.$a = this.Ra = 0;
        this.yc = null;
        this.qt = iq;
        this.Eg = qo;
        this.lt = this.sk = null;
        this.mt = NaN;
        this.Ib = this.ai = null;
        this.jr = !1
    }
    w.ga("RowColumnDefinition", Vg);
    Vg.prototype.copy = function ()
    {
        var a = new Vg;
        a.bw = this.bw;
        a.zc = this.zc;
        a.mf = this.mf;
        a.ok = this.ok;
        a.nk = this.nk;
        a.me = this.me;
        a.Ra = this.Ra;
        a.$a = this.$a;
        a.Eg = this.Eg;
        a.qt = this.qt;
        a.sk = null === this.sk ? null : this.sk.S();
        a.lt = this.lt;
        a.mt = this.mt;
        a.ai = null;
        null !== this.ai && (a.ai = w.Tl(this.ai));
        a.Ib = this.Ib;
        a.jr = this.jr;
        a.yc = this.yc;
        return a
    };
    Vg.prototype.Np = function (a)
    {
        w.G(a, Vg, Vg, "copyFrom:pd");
        a.xe ? this.height = a.height : this.width = a.width;
        this.Ch = a.Ch;
        this.ke = a.ke;
        this.alignment = a.alignment;
        this.stretch = a.stretch;
        this.$u = a.$u;
        this.sk = null === a.sk ? null : a.sk.S();
        this.Aq = a.Aq;
        this.Bq = a.Bq;
        this.ai = null;
        a.ai && (this.ai = w.Tl(a.ai));
        this.background = a.background;
        this.wA = a.wA;
        this.yc = a.yc
    };
    Vg.prototype.gc = function (a)
    {
        a.Je === Vg ? this.$u = a : w.Mj(this, a)
    };
    Vg.prototype.toString = function ()
    {
        return "RowColumnDefinition " + (this.xe ? "(Row " : "(Column ") + this.index + ") #" + w.Pd(this)
    };
    var iq;
    Vg.Default = iq = w.p(Vg, "Default", 0);
    var Rp;
    Vg.None = Rp = w.p(Vg, "None", 1);
    var kp;
    Vg.ProportionalExtra = kp = w.p(Vg, "ProportionalExtra", 2);
    Vg.prototype.mm = function (a)
    {
        this.ej = a
    };
    Vg.prototype.computeEffectiveSpacingTop = Vg.prototype.KE = function ()
    {
        var a = 0,
            b = this.ej,
            c = 0,
            d = this.xe;
        if (null !== b)
            for (var e = d ? b.Xc.length : b.Uc.length, f = 0; f < e; f++)
            {
                var h = d ? b.Xc[f] : b.Uc[f];
                if (void 0 !== h)
                {
                    c = h.index;
                    break
                }
            }
        this.index !== c && (c = this.Aq, null === c && null !== b && (c = this.xe ? b.Ji : b.Oh), null !== c && (a = this.Bq, isNaN(a) && (a = null !== b ? this.xe ? b.Qh : b.Ph : 0)));
        c = this.pG;
        if (null === c)
            if (null !== b) c = b.Uj;
            else return a;
        return a + (this.xe ? c.top : c.left)
    };
    Vg.prototype.computeEffectiveSpacing = Vg.prototype.$e = function ()
    {
        var a = 0,
            b = this.ej,
            c = 0,
            d = this.xe;
        if (null !== b)
            for (var e = d ? b.Xc.length : b.Uc.length, f = 0; f < e; f++)
            {
                var h = d ? b.Xc[f] : b.Uc[f];
                if (void 0 !== h)
                {
                    c = h.index;
                    break
                }
            }
        this.index !== c && (c = this.Aq, null === c && null !== b && (c = d ? b.Ji : b.Oh), null !== c && (a = this.Bq, isNaN(a) && (a = null !== b ? d ? b.Qh : b.Ph : 0)));
        d = this.pG;
        if (null === d)
            if (null !== b) d = b.Uj;
            else return a;
        return a + (this.xe ? d.top + d.bottom : d.left + d.right)
    };
    Vg.prototype.jd = function (a, b, c, d, e)
    {
        var f = this.ej;
        if (null !== f && (f.cd(Cf, a, this, b, c, d, e), null !== this.yc && (b = f.g, null !== b && !b.Qe && (f = f.Yl(), null !== f && (b = f.data, null !== b)))))
            for (c = this.yc.i; c.next();) c.value.Dy(this, b, a, f)
    };
    w.u(Vg,
        {
            R: "panel"
        }, function ()
        {
            return this.ej
        });
    w.defineProperty(Vg,
        {
            xe: "isRow"
        }, function ()
        {
            return this.bw
        }, function (a)
        {
            this.bw = a
        });
    w.defineProperty(Vg,
        {
            index: "index"
        }, function ()
        {
            return this.zc
        }, function (a)
        {
            this.zc = a
        });
    w.defineProperty(Vg,
        {
            height: "height"
        }, function ()
        {
            return this.mf
        }, function (a)
        {
            var b = this.mf;
            b !== a && (0 > a && w.Fa(a, ">= 0", Vg, "height"), this.mf = a, this.ab = this.Ra, null !== this.R && this.R.H(), this.jd("height", b, a))
        });
    w.defineProperty(Vg,
        {
            width: "width"
        }, function ()
        {
            return this.mf
        }, function (a)
        {
            var b = this.mf;
            b !== a && (0 > a && w.Fa(a, ">= 0", Vg, "width"), this.mf = a, this.ab = this.Ra, null !== this.R && this.R.H(), this.jd("width", b, a))
        });
    w.defineProperty(Vg,
        {
            Ch: "minimum"
        }, function ()
        {
            return this.ok
        }, function (a)
        {
            var b = this.ok;
            b !== a && ((0 > a || !isFinite(a)) && w.Fa(a, ">= 0", Vg, "minimum"), this.ok = a, this.ab = this.Ra, null !== this.R && this.R.H(), this.jd("minimum", b, a))
        });
    w.defineProperty(Vg,
        {
            ke: "maximum"
        }, function ()
        {
            return this.nk
        }, function (a)
        {
            var b = this.nk;
            b !== a && (0 > a && w.Fa(a, ">= 0", Vg, "maximum"), this.nk = a, this.ab = this.Ra, null !== this.R && this.R.H(), this.jd("maximum", b, a))
        });
    w.defineProperty(Vg,
        {
            alignment: "alignment"
        }, function ()
        {
            return this.me
        }, function (a)
        {
            var b = this.me;
            b.L(a) || (this.me = a.S(), null !== this.R && this.R.H(), this.jd("alignment", b, a))
        });
    w.defineProperty(Vg,
        {
            stretch: "stretch"
        }, function ()
        {
            return this.Eg
        }, function (a)
        {
            var b = this.Eg;
            b !== a && (this.Eg = a, null !== this.R && this.R.H(), this.jd("stretch", b, a))
        });
    w.defineProperty(Vg,
        {
            pG: "separatorPadding"
        }, function ()
        {
            return this.sk
        }, function (a)
        {
            "number" === typeof a && (a = new hb(a));
            var b = this.sk;
            null !== a && null !== b && b.L(a) || (null !== a && (a = a.S()), this.sk = a, null !== this.R && this.R.H(), this.jd("separatorPadding", b, a))
        });
    w.defineProperty(Vg,
        {
            Aq: "separatorStroke"
        }, function ()
        {
            return this.lt
        }, function (a)
        {
            var b = this.lt;
            b !== a && (null === a || "string" === typeof a || a instanceof ga) && (a instanceof ga && a.freeze(), this.lt = a, null !== this.R && this.R.H(), this.jd("separatorStroke", b, a))
        });
    w.defineProperty(Vg,
        {
            Bq: "separatorStrokeWidth"
        }, function ()
        {
            return this.mt
        }, function (a)
        {
            var b = this.mt;
            b !== a && (this.mt = a, null !== this.R && this.R.H(), this.jd("separatorStrokeWidth", b, a))
        });
    w.defineProperty(Vg,
        {
            GJ: "separatorDashArray"
        }, function ()
        {
            return this.ai
        }, function (a)
        {
            var b = this.ai;
            if (b !== a)
            {
                null === a || Array.isArray(a) || w.Fd(a, "Array", Vg, "separatorDashArray:value");
                if (null !== a)
                {
                    for (var c = a.length, d = 0, e = 0; e < c; e++)
                    {
                        var f = a[e];
                        "number" === typeof f && 0 <= f && isFinite(f) || w.k("separatorDashArray value " + f + " at index " + e + " must be a positive number or zero.");
                        d += f
                    }
                    if (0 === d)
                    {
                        if (null === b) return;
                        a = null
                    }
                }
                this.ai = a;
                null !== this.R && this.R.oa();
                this.jd("separatorDashArray", b, a)
            }
        });
    w.defineProperty(Vg,
        {
            background: "background"
        }, function ()
        {
            return this.Ib
        }, function (a)
        {
            var b = this.Ib;
            b !== a && (null === a || "string" === typeof a || a instanceof ga) && (a instanceof ga && a.freeze(), this.Ib = a, null !== this.R && this.R.oa(), this.jd("background", b, a))
        });
    w.defineProperty(Vg,
        {
            wA: "coversSeparators"
        }, function ()
        {
            return this.jr
        }, function (a)
        {
            var b = this.jr;
            b !== a && (w.j(a, "boolean", Vg, "coversSeparators"), this.jr = a, null !== this.R && this.R.oa(), this.jd("coversSeparators", b, a))
        });
    w.defineProperty(Vg,
        {
            $u: "sizing"
        }, function ()
        {
            return this.qt
        }, function (a)
        {
            var b = this.qt;
            b !== a && (this.qt = a, null !== this.R && this.R.H(), this.jd("sizing", b, a))
        });

    function Qp(a)
    {
        if (a.$u === iq)
        {
            var b = a.ej;
            return a.xe ? b.AJ : b.xH
        }
        return a.$u
    }
    w.defineProperty(Vg,
        {
            ab: "actual"
        }, function ()
        {
            return this.Ra
        }, function (a)
        {
            this.Ra = isNaN(this.mf) ? Math.max(Math.min(this.nk, a), this.ok) : Math.max(Math.min(this.nk, this.mf), this.ok)
        });
    w.defineProperty(Vg,
        {
            total: "total"
        }, function ()
        {
            return this.Ra + this.$e()
        }, function (a)
        {
            this.Ra = isNaN(this.mf) ? Math.max(Math.min(this.nk, a), this.ok) : Math.max(Math.min(this.nk, this.mf), this.ok);
            this.Ra = Math.max(0, this.Ra - this.$e())
        });
    w.defineProperty(Vg,
        {
            position: "position"
        }, function ()
        {
            return this.$a
        }, function (a)
        {
            this.$a = a
        });
    Vg.prototype.bind = Vg.prototype.bind = function (a)
    {
        a.Fg = this;
        var b = this.R;
        if (null !== b)
        {
            var c = b.Yl();
            null !== c && dp(c) && w.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: " + a + " on " + b)
        }
        null === this.yc && (this.yc = new H(ah));
        this.yc.add(a)
    };

    function X()
    {
        G.call(this);
        this.Sf = this.Sa = null;
        this.Fo = "None";
        this.Ir = qo;
        this.sc = this.Hd = "black";
        this.ji = 1;
        this.rp = "butt";
        this.tp = "miter";
        this.hn = 10;
        this.sp = null;
        this.zf = 0;
        this.ii = this.hi = qc;
        this.Os = this.Ns = NaN;
        this.Tr = !1;
        this.Qs = null;
        this.Ho = this.zp = "None";
        this.tg = 1;
        this.sg = 0;
        this.rg = 1
    }
    w.La(X, G);
    w.ga("Shape", X);
    X.prototype.cloneProtected = function (a)
    {
        G.prototype.cloneProtected.call(this, a);
        a.Sa = this.Sa;
        a.Fo = this.Fo;
        a.Ir = this.Ir;
        a.Sf = this.Sf;
        a.Hd = this.Hd;
        a.sc = this.sc;
        a.ji = this.ji;
        a.rp = this.rp;
        a.tp = this.tp;
        a.hn = this.hn;
        null !== this.sp && (a.sp = w.Tl(this.sp));
        a.zf = this.zf;
        a.hi = this.hi.S();
        a.ii = this.ii.S();
        a.Ns = this.Ns;
        a.Os = this.Os;
        a.Tr = this.Tr;
        a.Qs = this.Qs;
        a.zp = this.zp;
        a.Ho = this.Ho;
        a.tg = this.tg;
        a.sg = this.sg;
        a.rg = this.rg
    };
    X.prototype.gc = function (a)
    {
        a === Qj || a === Sj || a === to || a === qo ? this.FA = a : G.prototype.gc.call(this, a)
    };
    X.prototype.toString = function ()
    {
        return "Shape(" + ("None" !== this.Gb ? this.Gb : "None" !== this.Gq ? this.Gq : this.DA) + ")#" + w.Pd(this)
    };

    function jq(a, b, c, d)
    {
        var e = c.length;
        if (!(4 > e))
        {
            for (var f = d.za, h = Math.max(1, f.width), f = f.height, k = c[0], l = c[1], m = 0, n = 0, p = 0, q = 0, r = 0, s = 0, u = q = 0, t = w.gb(), x = 2; x < e; x += 2) m = c[x], n = c[x + 1], p = m - k, q = n - l, 0 === p && (p = .001), r = q / p, s = Math.atan2(q, p), q = Math.sqrt(p * p + q * q), t.push([p, s, r, q]), u += q, k = m, l = n;
            k = c[0];
            l = c[1];
            p = d.za.width;
            d instanceof X && (p -= d.mb);
            1 > p && (p = 1);
            for (var e = c = p, m = h / 2, n = 0 === m ? !1 : !0, x = 0, q = t[x], p = q[0], s = q[1], r = q[2], q = q[3], v = 0; .1 <= u;)
            {
                0 === v && (n ? (e = c, e -= m, u -= m, n = !1) : e = c, 0 === e && (e = 1));
                if (e > u)
                {
                    w.ta(t);
                    return
                }
                e >
                q ? (v = e - q, e = q) : v = 0;
                var z = Math.sqrt(e * e / (1 + r * r));
                0 > p && (z = -z);
                k += z;
                l += r * z;
                a.translate(k, l);
                a.rotate(s);
                a.translate(-(h / 2), -(f / 2));
                0 === v && d.Ik(a, b);
                a.translate(h / 2, f / 2);
                a.rotate(-s);
                a.translate(-k, -l);
                u -= e;
                q -= e;
                if (0 !== v)
                {
                    x++;
                    if (x === t.length)
                    {
                        w.ta(t);
                        return
                    }
                    q = t[x];
                    p = q[0];
                    s = q[1];
                    r = q[2];
                    q = q[3];
                    e = v
                }
            }
            w.ta(t)
        }
    }
    X.prototype.Ik = function (a, b)
    {
        if (null !== this.sc || null !== this.Hd)
        {
            null !== this.Hd && Qo(this, a, this.Hd, !0, !1);
            null !== this.sc && Qo(this, a, this.sc, !1, !1);
            var c = this.ji;
            if (0 === c)
            {
                var d = this.V;
                d instanceof jh && d.type === jj && "Selection" === d.zd && d.ub instanceof X && d.Ye.Bd() === d.ub && (c = d.ub.mb)
            }
            a.lineWidth = c;
            a.lineJoin = this.tp;
            a.lineCap = this.rp;
            a.miterLimit = this.hn;
            var e = !1;
            this.V && b.wj("drawShadows") && (e = this.V.hm);
            var f = !0;
            null !== this.sc && null === this.Hd && (f = !1);
            var d = !1,
                h = !0,
                k = this.yG;
            null !== k && (d = !0, h = a.xx(k,
                this.zf));
            var l = this.Sa;
            if (null !== l)
            {
                if (l.na === Fe) a.beginPath(), d && !h ? Bo(a, l.Cc, l.Mc, l.zb, l.Jb, k, this.zf) : (a.moveTo(l.Cc, l.Mc), a.lineTo(l.zb, l.Jb)), null !== this.Hd && a.Kg(this.Hd), 0 !== c && null !== this.sc && a.Lj();
                else if (l.na === Ge)
                {
                    var m = l.Cc,
                        n = l.Mc,
                        p = l.zb,
                        q = l.Jb,
                        l = Math.min(m, p),
                        r = Math.min(n, q),
                        m = Math.abs(p - m),
                        n = Math.abs(q - n);
                    null !== this.Hd && (a.beginPath(), a.rect(l, r, m, n), a.Kg(this.Hd));
                    if (null !== this.sc)
                    {
                        var s = p = 0,
                            u = 0;
                        f && e && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY =
                            0, a.shadowBlur = 0);
                        d && !h ? (h = w.gb(), h.push(l), h.push(r), h.push(l + m), h.push(r), h.push(l + m), h.push(r + n), h.push(l), h.push(r + n), h.push(l), h.push(r), a.beginPath(), kq(a, h, k, this.zf), a.Lj(), w.ta(h)) : 0 !== c && (a.beginPath(), a.rect(l, r, m, n), a.Lj());
                        f && e && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u)
                    }
                }
                else if (l.na === He) m = l.Cc, n = l.Mc, p = l.zb, q = l.Jb, l = Math.abs(p - m) / 2, r = Math.abs(q - n) / 2, m = Math.min(m, p) + l, n = Math.min(n, q) + r, a.beginPath(), a.moveTo(m, n - r), a.bezierCurveTo(m + bd * l, n - r, m + l, n - bd * r, m + l, n), a.bezierCurveTo(m +
                    l, n + bd * r, m + bd * l, n + r, m, n + r), a.bezierCurveTo(m - bd * l, n + r, m - l, n + bd * r, m - l, n), a.bezierCurveTo(m - l, n - bd * r, m - bd * l, n - r, m, n - r), a.closePath(), null !== this.Hd && a.Kg(this.Hd), d && !h && (h = w.gb(), Wd(m, n - r, m + bd * l, n - r, m + l, n - bd * r, m + l, n, .5, h), Wd(m + l, n, m + l, n + bd * r, m + bd * l, n + r, m, n + r, .5, h), Wd(m, n + r, m - bd * l, n + r, m - l, n + bd * r, m - l, n, .5, h), Wd(m - l, n, m - l, n - bd * r, m - bd * l, n - r, m, n - r, .5, h), a.beginPath(), kq(a, h, k, this.zf), w.ta(h)), 0 !== c && null !== this.sc && (f && e ? (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY =
                    0, a.shadowBlur = 0, a.Lj(), a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u) : a.Lj());
                else if (l.na === Ce)
                {
                    r = l.Wj;
                    n = r.length;
                    for (q = 0; q < n; q++)
                    {
                        m = r.n[q];
                        a.beginPath();
                        a.moveTo(m.ha, m.fa);
                        for (var p = m.wb.n, s = p.length, t = null, u = 0; u < s; u++)
                        {
                            var x = p[u];
                            switch (x.na)
                            {
                                case Ue:
                                    a.moveTo(x.C, x.D);
                                    break;
                                case Je:
                                    a.lineTo(x.C, x.D);
                                    break;
                                case Ve:
                                    a.bezierCurveTo(x.Kd, x.Xe, x.mh, x.Cg, x.zb, x.Jb);
                                    break;
                                case We:
                                    a.quadraticCurveTo(x.Kd, x.Xe, x.zb, x.Jb);
                                    break;
                                case pf:
                                    if (x.radiusX === x.radiusY) t = Math.PI / 180, a.arc(x.Kd, x.Xe, x.radiusX,
                                        x.Ae * t, (x.Ae + x.uf) * t, 0 > x.uf);
                                    else
                                    {
                                        var t = rf(x, m),
                                            v = t.length;
                                        if (0 === v)
                                        {
                                            a.lineTo(x.la, x.ra);
                                            break
                                        }
                                        for (var z = 0; z < v; z++)
                                        {
                                            var A = t[z];
                                            0 === z && a.lineTo(A[0], A[1]);
                                            a.bezierCurveTo(A[2], A[3], A[4], A[5], A[6], A[7])
                                        }
                                    }
                                    break;
                                case qf:
                                    z = v = 0;
                                    if (null !== t && t.type === pf)
                                    {
                                        t = rf(t, m);
                                        A = t.length;
                                        if (0 === A)
                                        {
                                            a.lineTo(x.la, x.ra);
                                            break
                                        }
                                        t = t[A - 1] || null;
                                        null !== t && (v = t[6], z = t[7])
                                    }
                                    else v = null !== t ? t.C : m.ha, z = null !== t ? t.D : m.fa;
                                    t = sf(x, m, v, z);
                                    v = t.length;
                                    if (0 === v)
                                    {
                                        a.lineTo(x.la, x.ra);
                                        break
                                    }
                                    for (z = 0; z < v; z++) A = t[z], a.bezierCurveTo(A[2], A[3],
                                        A[4], A[5], A[6], A[7]);
                                    break;
                                default:
                                    w.k("Segment not of valid type: " + x.na)
                            }
                            x.Sh && a.closePath();
                            t = x
                        }
                        e ? (u = s = p = 0, m.Qo ? (!0 === m.Im && null !== this.Hd ? (a.Kg(this.Hd), f = !0) : f = !1, 0 !== c && null !== this.sc && (f && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), d && !h || a.Lj(), f && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u))) : (f && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), !0 === m.Im && null !== this.Hd &&
                        a.Kg(this.Hd), 0 !== c && null !== this.sc && (d && !h || a.Lj()), f && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u))) : (!0 === m.Im && null !== this.Hd && a.Kg(this.Hd), 0 === c || null === this.sc || d && !h || a.Lj())
                    }
                    if (d && !h)
                        for (c = f, f = l.Wj, h = f.length, l = 0; l < h; l++)
                        {
                            r = f.n[l];
                            a.beginPath();
                            n = w.gb();
                            n.push(r.ha);
                            n.push(r.fa);
                            q = r.ha;
                            m = r.fa;
                            p = q;
                            s = m;
                            u = r.wb.n;
                            x = u.length;
                            for (t = 0; t < x; t++)
                            {
                                v = u[t];
                                switch (v.na)
                                {
                                    case Ue:
                                        kq(a, n, k, this.zf);
                                        n.length = 0;
                                        n.push(v.C);
                                        n.push(v.D);
                                        q = v.C;
                                        m = v.D;
                                        p = q;
                                        s = m;
                                        break;
                                    case Je:
                                        n.push(v.C);
                                        n.push(v.D);
                                        q = v.C;
                                        m = v.D;
                                        break;
                                    case Ve:
                                        Wd(q, m, v.Kd, v.Xe, v.mh, v.Cg, v.zb, v.Jb, .5, n);
                                        q = v.C;
                                        m = v.D;
                                        break;
                                    case We:
                                        ge(q, m, v.Kd, v.Xe, v.zb, v.Jb, .5, n);
                                        q = v.C;
                                        m = v.D;
                                        break;
                                    case pf:
                                        z = rf(v, r);
                                        A = z.length;
                                        if (0 === A)
                                        {
                                            n.push(v.la);
                                            n.push(v.ra);
                                            q = v.la;
                                            m = v.ra;
                                            break
                                        }
                                        for (var L = 0; L < A; L++)
                                        {
                                            var E = z[L];
                                            Wd(q, m, E[2], E[3], E[4], E[5], E[6], E[7], .5, n);
                                            q = E[6];
                                            m = E[7]
                                        }
                                        break;
                                    case qf:
                                        z = sf(v, r, q, m);
                                        A = z.length;
                                        if (0 === A)
                                        {
                                            n.push(v.la);
                                            n.push(v.ra);
                                            q = v.la;
                                            m = v.ra;
                                            break
                                        }
                                        for (L = 0; L < A; L++) E = z[L], Wd(q, m, E[2], E[3], E[4], E[5], E[6], E[7], .5, n), q = E[6], m = E[7];
                                        break;
                                    default:
                                        w.k("Segment not of valid type: " +
                                            v.na)
                                }
                                v.Sh && (n.push(p), n.push(s), kq(a, n, k, this.zf))
                            }
                            kq(a, n, k, this.zf);
                            w.ta(n);
                            null !== this.sc && (q = n = r = 0, c && e && (r = a.shadowOffsetX, n = a.shadowOffsetY, q = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), a.Lj(), c && e && (a.shadowOffsetX = r, a.shadowOffsetY = n, a.shadowBlur = q))
                        }
                }
                d && a.ux();
                if (null !== this.ey)
                {
                    d = this.ey;
                    yk(d, Infinity, Infinity);
                    k = d.za;
                    d.hc(0, 0, k.width, k.height);
                    c = this.of;
                    a.save();
                    a.beginPath();
                    k = w.gb();
                    if (c.type === Fe) k.push(c.ha), k.push(c.fa), k.push(c.C), k.push(c.D), jq(a, b, k, d);
                    else if (c.type ===
                        Ce)
                        for (h = c.fc.i; h.next();)
                        {
                            l = h.value;
                            k.length = 0;
                            k.push(l.ha);
                            k.push(l.fa);
                            f = l.ha;
                            r = l.fa;
                            n = f;
                            q = r;
                            m = l.wb.n;
                            p = m.length;
                            for (s = 0; s < p; s++)
                            {
                                u = m[s];
                                switch (u.na)
                                {
                                    case Ue:
                                        jq(a, b, k, d);
                                        k.length = 0;
                                        k.push(u.C);
                                        k.push(u.D);
                                        f = u.C;
                                        r = u.D;
                                        n = f;
                                        q = r;
                                        break;
                                    case Je:
                                        k.push(u.C);
                                        k.push(u.D);
                                        f = u.C;
                                        r = u.D;
                                        break;
                                    case Ve:
                                        Wd(f, r, u.Kd, u.Xe, u.mh, u.Cg, u.zb, u.Jb, .5, k);
                                        f = u.C;
                                        r = u.D;
                                        break;
                                    case We:
                                        ge(f, r, u.Kd, u.Xe, u.zb, u.Jb, .5, k);
                                        f = u.C;
                                        r = u.D;
                                        break;
                                    case pf:
                                        c = rf(u, l);
                                        e = c.length;
                                        if (0 === e)
                                        {
                                            k.push(u.la);
                                            k.push(u.ra);
                                            f = u.la;
                                            r = u.ra;
                                            break
                                        }
                                        for (x =
                                                 0; x < e; x++) t = c[x], Wd(f, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k), f = t[6], r = t[7];
                                        break;
                                    case qf:
                                        c = sf(u, l, f, r);
                                        e = c.length;
                                        if (0 === e)
                                        {
                                            k.push(u.la);
                                            k.push(u.ra);
                                            f = u.la;
                                            r = u.ra;
                                            break
                                        }
                                        for (x = 0; x < e; x++) t = c[x], Wd(f, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k), f = t[6], r = t[7];
                                        break;
                                    default:
                                        w.k("Segment not of valid type: " + u.na)
                                }
                                u.Sh && (k.push(n), k.push(q), jq(a, b, k, d))
                            }
                            jq(a, b, k, d)
                        }
                    else if (c.type === Ge) k.push(c.ha), k.push(c.fa), k.push(c.C), k.push(c.fa), k.push(c.C), k.push(c.D), k.push(c.ha), k.push(c.D), k.push(c.ha), k.push(c.fa),
                        jq(a, b, k, d);
                    else if (c.type === He)
                    {
                        h = new De;
                        h.ha = c.C;
                        h.fa = (c.fa + c.D) / 2;
                        f = new wf(pf);
                        f.Ae = 0;
                        f.uf = 360;
                        f.la = (c.ha + c.C) / 2;
                        f.ra = (c.fa + c.D) / 2;
                        f.radiusX = Math.abs(c.ha - c.C) / 2;
                        f.radiusY = Math.abs(c.fa - c.D) / 2;
                        h.add(f);
                        c = rf(f, h);
                        e = c.length;
                        if (0 === e) k.push(f.la), k.push(f.ra);
                        else
                            for (f = h.ha, r = h.fa, x = 0; x < e; x++) t = c[x], Wd(f, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k), f = t[6], r = t[7];
                        jq(a, b, k, d)
                    }
                    w.ta(k);
                    a.restore();
                    a.Ke(!1)
                }
            }
        }
    };

    function kq(a, b, c, d)
    {
        var e = b.length;
        if (!(4 > e))
        {
            var f = .001,
                h = c.length,
                k = b[0],
                l = b[1];
            if (4 === e) Bo(a, k, l, b[2], b[3], c, d);
            else
            {
                a.moveTo(k, l);
                for (var m = f = 0, n = 0, p = 0, q = 0, r = p = 0, s = w.gb(), u = 2; u < e; u += 2) f = b[u], m = b[u + 1], n = f - k, p = m - l, 0 === n && (n = .001), q = p / n, p = Math.sqrt(n * n + p * p), s.push([n, q, p]), r += p, k = f, l = m;
                k = b[0];
                l = b[1];
                b = 0;
                for (var e = !0, f = c[b % h], m = 0 !== d, u = 0, p = s[u], n = p[0], q = p[1], p = p[2], t = 0; .1 <= r;)
                {
                    0 === t && (f = c[b % h], b++, m && (d %= f, f -= d, m = !1));
                    f > r && (f = r);
                    f > p ? (t = f - p, f = p) : t = 0;
                    var x = Math.sqrt(f * f / (1 + q * q));
                    0 > n && (x = -x);
                    k += x;
                    l +=
                        q * x;
                    e ? a.lineTo(k, l) : a.moveTo(k, l);
                    r -= f;
                    p -= f;
                    if (0 !== t)
                    {
                        u++;
                        if (u === s.length)
                        {
                            w.ta(s);
                            return
                        }
                        p = s[u];
                        n = p[0];
                        q = p[1];
                        p = p[2];
                        f = t
                    }
                    else e = !e
                }
                w.ta(s)
            }
        }
    }
    X.prototype.getDocumentPoint = X.prototype.Ya = function (a, b)
    {
        void 0 === b && (b = new y);
        if (a instanceof K)
        {
            a.Td() && w.k("getDocumentPoint Spot must be a real, specific Spot, not: " + a.toString());
            var c = this.Ja,
                d = this.mb;
            b.m(a.x * (c.width + d) - d / 2 + c.x + a.offsetX, a.y * (c.height + d) - d / 2 + c.y + a.offsetY)
        }
        else b.set(a);
        this.ph.nb(b);
        return b
    };
    X.prototype.Ek = function (a, b)
    {
        var c = this.of;
        if (null === c || null === this.fill && null === this.stroke) return !1;
        var d = c.cb,
            e = this.mb / 2;
        c.type !== Fe || b || (e += 2);
        var f = w.Kf();
        f.assign(d);
        f.Yf(e + 2, e + 2);
        if (!f.Ia(a)) return w.Hb(f), !1;
        d = e + 1E-4;
        if (c.type === Fe)
        {
            if (null === this.stroke) return !1;
            d = (c.C - c.ha) * (a.x - c.ha) + (c.D - c.fa) * (a.y - c.fa);
            if (0 > (c.ha - c.C) * (a.x - c.C) + (c.fa - c.D) * (a.y - c.D) || 0 > d) return !1;
            w.Hb(f);
            return Td(c.ha, c.fa, c.C, c.D, e, a.x, a.y)
        }
        if (c.type === Ge)
        {
            var h = c.ha,
                k = c.fa,
                l = c.C,
                c = c.D;
            f.x = Math.min(h, l);
            f.y = Math.min(k,
                c);
            f.width = Math.abs(l - h);
            f.height = Math.abs(c - k);
            if (null === this.fill)
            {
                f.Yf(-d, -d);
                if (f.Ia(a)) return w.Hb(f), !1;
                f.Yf(d, d)
            }
            null !== this.stroke && f.Yf(e, e);
            d = f.Ia(a);
            w.Hb(f);
            return d
        }
        if (c.type === He)
        {
            var h = c.ha,
                k = c.fa,
                l = c.C,
                c = c.D,
                e = Math.min(h, l),
                m = Math.min(k, c),
                h = Math.abs(l - h) / 2,
                k = Math.abs(c - k) / 2,
                e = a.x - (e + h),
                m = a.y - (m + k);
            if (null === this.fill)
            {
                h -= d;
                k -= d;
                if (0 >= h || 0 >= k || 1 >= e * e / (h * h) + m * m / (k * k)) return w.Hb(f), !1;
                h += d;
                k += d
            }
            null !== this.stroke && (h += d, k += d);
            w.Hb(f);
            return 0 >= h || 0 >= k ? !1 : 1 >= e * e / (h * h) + m * m / (k * k)
        }
        if (c.type ===
            Ce) return w.Hb(f), null === this.fill ? uf(c, a.x, a.y, e) : c.Ia(a, e, 1 < this.mb, b);
        w.k("Unknown Geometry type: " + c.type);
        return !1
    };
    X.prototype.On = function (a, b, c, d)
    {
        var e = this.Ca,
            f = this.ji;
        a = Math.max(a, 0);
        b = Math.max(b, 0);
        var h;
        if (null !== this.Sf) h = this.of.cb;
        else
        {
            var k = this.Gb,
                l = Pd[k];
            if (void 0 === l)
            {
                var m = lq[k];
                "string" === typeof m && (m = lq[m]);
                "function" === typeof m ? (l = m(null, 100, 100), Pd[k] = l) : w.k("Unsupported Figure: " + k)
            }
            h = l.cb
        }
        var k = h.width,
            l = h.height,
            m = h.width,
            n = h.height;
        switch (Ho(this, !0))
        {
            case Qj:
                d = c = 0;
                break;
            case Ee:
                m = Math.max(a - f, 0);
                n = Math.max(b - f, 0);
                break;
            case so:
                m = Math.max(a - f, 0);
                d = 0;
                break;
            case ro:
                c = 0, n = Math.max(b - f, 0)
        }
        isFinite(e.width) &&
        (m = e.width);
        isFinite(e.height) && (n = e.height);
        e = this.Gf;
        h = this.si;
        c = Math.max(c - f, h.width);
        d = Math.max(d - f, h.height);
        m = Math.min(e.width, m);
        n = Math.min(e.height, n);
        m = isFinite(m) ? Math.max(c, m) : Math.max(k, c);
        n = isFinite(n) ? Math.max(d, n) : Math.max(l, d);
        c = Rj(this);
        switch (c)
        {
            case Qj:
                break;
            case Ee:
                k = m;
                l = n;
                break;
            case Sj:
                c = Math.min(m / k, n / l);
                isFinite(c) || (c = 1);
                k *= c;
                l *= c;
                break;
            default:
                w.k(c + " is not a valid geometryStretch.")
        }
        null !== this.Sf ? (k = Math.max(k, .01), l = Math.max(l, .01), h = null !== this.Sf ? this.Sf : this.Sa, e = k,
            d = l, c = h.copy(), h = h.cb, e /= h.width, d /= h.height, isFinite(e) || (e = 1), isFinite(d) || (d = 1), 1 === e && 1 === d || c.scale(e, d), this.Sa = c) : null !== this.Sa && Wa(this.Sa.Po, a - f) && Wa(this.Sa.No, b - f) || (this.Sa = X.makeGeometry(this, k, l));
        h = this.Sa.cb;
        Infinity === a || Infinity === b ? Eo(this, h.x - f / 2, h.y - f / 2, 0 === a && 0 === k ? 0 : h.width + f, 0 === b && 0 === l ? 0 : h.height + f) : Eo(this, -(f / 2), -(f / 2), m + f, n + f)
    };

    function Sp(a, b, c, d)
    {
        if (!1 !== sm(a))
        {
            a.ud.Qa();
            var e = a.ji;
            0 === e && d instanceof jh && d.ub instanceof X && (e = d.ub.mb);
            e *= a.qb;
            d instanceof W && null !== d.Sa ? (b = d.Sa.cb, Eo(a, b.x - e / 2, b.y - e / 2, b.width + e, b.height + e)) : d instanceof jh && null !== d.Ye.Sa ? (b = d.Ye.Sa.cb, Eo(a, b.x - e / 2, b.y - e / 2, b.width + e, b.height + e)) : Eo(a, -(e / 2), -(e / 2), b + e, c + e);
            a.ud.freeze();
            a.ud.I() || w.k("Non-real measuredBounds has been set. Object " + a + ", measuredBounds: " + a.ud.toString());
            dm(a, !1)
        }
    }

    function Rj(a)
    {
        var b = a.FA;
        return null !== a.Sf ? b === qo ? Ee : b : b === qo ? Pd[a.Gb].$d : b
    }
    X.prototype.pj = function (a, b, c, d)
    {
        Jo(this, a, b, c, d)
    };
    X.prototype.getNearestIntersectionPoint = X.prototype.jF = function (a, b, c)
    {
        return this.Cn(a.x, a.y, b.x, b.y, c)
    };
    X.prototype.Cn = function (a, b, c, d, e)
    {
        var f = this.transform,
            h = 1 / (f.m11 * f.m22 - f.m12 * f.m21),
            k = f.m22 * h,
            l = -f.m12 * h,
            m = -f.m21 * h,
            n = f.m11 * h,
            p = h * (f.m21 * f.dy - f.m22 * f.dx),
            q = h * (f.m12 * f.dx - f.m11 * f.dy),
            f = a * k + b * m + p,
            h = a * l + b * n + q,
            k = c * k + d * m + p,
            l = c * l + d * n + q,
            m = this.mb / 2,
            p = this.Sa;
        null === p && (yk(this, Infinity, Infinity), p = this.Sa);
        q = p.cb;
        n = !1;
        if (p.type === Fe)
            if (1.5 >= this.mb) n = je(p.Cc, p.Mc, p.zb, p.Jb, f, h, k, l, e);
            else
            {
                var r = 0,
                    s = 0;
                p.Cc === p.zb ? (r = m, s = 0) : (b = (p.Jb - p.Mc) / (p.zb - p.Cc), s = m / Math.sqrt(1 + b * b), r = s * b);
                d = w.gb();
                b = new y;
                je(p.Cc +
                    r, p.Mc + s, p.zb + r, p.Jb + s, f, h, k, l, b) && d.push(b);
                b = new y;
                je(p.Cc - r, p.Mc - s, p.zb - r, p.Jb - s, f, h, k, l, b) && d.push(b);
                b = new y;
                je(p.Cc + r, p.Mc + s, p.Cc - r, p.Mc - s, f, h, k, l, b) && d.push(b);
                b = new y;
                je(p.zb + r, p.Jb + s, p.zb - r, p.Jb - s, f, h, k, l, b) && d.push(b);
                b = d.length;
                if (0 === b) return w.ta(d), !1;
                n = !0;
                s = Infinity;
                for (r = 0; r < b; r++)
                {
                    var k = d[r],
                        u = (k.x - f) * (k.x - f) + (k.y - h) * (k.y - h);
                    u < s && (s = u, e.x = k.x, e.y = k.y)
                }
                w.ta(d)
            }
        else if (p.type === Ge) b = q.x - m, n = ke(b, q.y - m, q.x + q.width + m, q.y + q.height + m, f, h, k, l, e);
        else if (p.type === He) a: if (b = q.copy().Yf(m,
            m), 0 === b.width) n = je(b.x, b.y, b.x, b.y + b.height, f, h, k, l, e);
        else if (0 === b.height) n = je(b.x, b.y, b.x + b.width, b.y, f, h, k, l, e);
        else
        {
            a = b.width / 2;
            var t = b.height / 2;
            d = b.x + a;
            b = b.y + t;
            c = 9999;
            f !== k && (c = (h - l) / (f - k));
            if (9999 > Math.abs(c))
            {
                n = h - b - c * (f - d);
                if (0 > a * a * c * c + t * t - n * n)
                {
                    e.x = NaN;
                    e.y = NaN;
                    n = !1;
                    break a
                }
                m = Math.sqrt(a * a * c * c + t * t - n * n);
                k = (-(a * a * c * n) + a * t * m) / (t * t + a * a * c * c) + d;
                a = (-(a * a * c * n) - a * t * m) / (t * t + a * a * c * c) + d;
                l = c * (k - d) + n + b;
                b = c * (a - d) + n + b;
                d = Math.abs((f - k) * (f - k)) + Math.abs((h - l) * (h - l));
                h = Math.abs((f - a) * (f - a)) + Math.abs((h - b) * (h -
                    b));
                d < h ? (e.x = k, e.y = l) : (e.x = a, e.y = b)
            }
            else
            {
                k = t * t;
                l = f - d;
                k -= k / (a * a) * l * l;
                if (0 > k)
                {
                    e.x = NaN;
                    e.y = NaN;
                    n = !1;
                    break a
                }
                m = Math.sqrt(k);
                l = b + m;
                b -= m;
                d = Math.abs(l - h);
                h = Math.abs(b - h);
                d < h ? (e.x = f, e.y = l) : (e.x = f, e.y = b)
            }
            n = !0
        }
        else if (p.type === Ce)
        {
            var x = 0,
                v = 0,
                z = u = 0,
                q = w.K(),
                r = k - f,
                s = l - h,
                s = r * r + s * s;
            e.x = k;
            e.y = l;
            for (r = 0; r < p.fc.count; r++)
                for (var A = p.fc.n[r], L = A.wb, x = A.ha, v = A.fa, E = x, P = v, $ = 0; $ < L.count; $++)
                {
                    var S = L.n[$],
                        ba = S.type,
                        u = S.C,
                        z = S.D,
                        ha = !1;
                    switch (ba)
                    {
                        case Ue:
                            E = u;
                            P = z;
                            break;
                        case Je:
                            ha = mq(x, v, u, z, f, h, k, l, q);
                            break;
                        case Ve:
                            var ha =
                                    S.wc,
                                ba = S.Rc,
                                ya = S.Dh,
                                Ga = S.Eh,
                                ha = he(x, v, ha, ba, ya, Ga, u, z, f, h, k, l, .5, q);
                            break;
                        case We:
                            ha = (x + 2 * S.wc) / 3;
                            ba = (v + 2 * S.Rc) / 3;
                            ya = (2 * S.wc + u) / 3;
                            Ga = (2 * S.wc + u) / 3;
                            ha = he(x, v, ha, ba, ya, Ga, u, z, f, h, k, l, .5, q);
                            break;
                        case pf:
                        case qf:
                            ba = S.type === pf ? rf(S, A) : sf(S, A, x, v);
                            ya = ba.length;
                            if (0 === ya)
                            {
                                ha = mq(x, v, S.la, S.ra, f, h, k, l, q);
                                break
                            }
                            for (z = 0; z < ya; z++) t = ba[z], 0 === z && mq(x, v, t[0], t[1], f, h, k, l, q) && (u = nq(f, h, q, s, e), u < s && (s = u, n = !0)), he(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], f, h, k, l, .5, q) && (u = nq(f, h, q, s, e), u < s && (s = u, n = !0));
                            u = t[6];
                            z =
                                t[7];
                            break;
                        default:
                            w.k("Unknown Segment type: " + ba)
                    }
                    x = u;
                    v = z;
                    ha && (u = nq(f, h, q, s, e), u < s && (s = u, n = !0));
                    S.Jx && (u = E, z = P, mq(x, v, u, z, f, h, k, l, q) && (u = nq(f, h, q, s, e), u < s && (s = u, n = !0)))
                }
            f = c - a;
            h = d - b;
            b = Math.sqrt(f * f + h * h);
            0 !== b && (f /= b, h /= b);
            e.x -= f * m;
            e.y -= h * m;
            w.v(q)
        }
        else w.k("Unknown Geometry type: " + p.type);
        if (!n) return !1;
        this.transform.nb(e);
        return !0
    };

    function nq(a, b, c, d, e)
    {
        a = c.x - a;
        b = c.y - b;
        b = a * a + b * b;
        return b < d ? (e.x = c.x, e.y = c.y, b) : d
    }

    function mq(a, b, c, d, e, f, h, k, l)
    {
        var m = !1,
            n = (e - h) * (b - d) - (f - k) * (a - c);
        if (0 === n) return !1;
        l.x = ((e * k - f * h) * (a - c) - (e - h) * (a * d - b * c)) / n;
        l.y = ((e * k - f * h) * (b - d) - (f - k) * (a * d - b * c)) / n;
        (a > c ? a - c : c - a) < (b > d ? b - d : d - b) ? (e = b < d ? b : d, a = b < d ? d : b, (l.y > e || Wa(l.y, e)) && (l.y < a || Wa(l.y, a)) && (m = !0)) : (e = a < c ? a : c, a = a < c ? c : a, (l.x > e || Wa(l.x, e)) && (l.x < a || Wa(l.x, a)) && (m = !0));
        return m
    }
    X.prototype.containedInRect = X.prototype.sn = function (a, b)
    {
        if (void 0 === b) return a.Fk(this.U);
        var c = this.Sa;
        null === c && (yk(this, Infinity, Infinity), c = this.Sa);
        var c = c.cb,
            d = this.mb / 2,
            e = !1,
            f = w.K();
        f.m(c.x - d, c.y - d);
        a.Ia(b.nb(f)) && (f.m(c.x - d, c.bottom + d), a.Ia(b.nb(f)) && (f.m(c.right + d, c.bottom + d), a.Ia(b.nb(f)) && (f.m(c.right + d, c.y - d), a.Ia(b.nb(f)) && (e = !0))));
        w.v(f);
        return e
    };
    X.prototype.intersectsRect = X.prototype.Zf = function (a, b)
    {
        if (this.sn(a, b) || void 0 === b && (b = this.transform, a.Fk(this.U))) return !0;
        var c = w.Vg();
        c.set(b);
        c.RA();
        var d = a.left,
            e = a.right,
            f = a.top,
            h = a.bottom,
            k = w.K();
        k.m(d, f);
        c.nb(k);
        if (this.Ek(k, !0)) return w.v(k), !0;
        k.m(e, f);
        c.nb(k);
        if (this.Ek(k, !0)) return w.v(k), !0;
        k.m(d, h);
        c.nb(k);
        if (this.Ek(k, !0)) return w.v(k), !0;
        k.m(e, h);
        c.nb(k);
        if (this.Ek(k, !0)) return w.v(k), !0;
        var l = w.K(),
            m = w.K();
        c.set(b);
        c.SF(this.transform);
        c.RA();
        l.x = e;
        l.y = f;
        l.transform(c);
        k.x = d;
        k.y =
            f;
        k.transform(c);
        var n = !1;
        oq(this, k, l, m) ? n = !0 : (k.x = e, k.y = h, k.transform(c), oq(this, k, l, m) ? n = !0 : (l.x = d, l.y = h, l.transform(c), oq(this, k, l, m) ? n = !0 : (k.x = d, k.y = f, k.transform(c), oq(this, k, l, m) && (n = !0))));
        w.v(k);
        w.bf(c);
        w.v(l);
        w.v(m);
        return n
    };

    function oq(a, b, c, d)
    {
        if (!a.jF(b, c, d)) return !1;
        a = b.x;
        b = b.y;
        var e = c.x;
        c = c.y;
        var f = d.x;
        d = d.y;
        if (a === e)
        {
            var h = 0;
            a = 0;
            b < c ? (h = b, a = c) : (h = c, a = b);
            return d >= h && d <= a
        }
        a < e ? (h = a, a = e) : h = e;
        return f >= h && f <= a
    }
    X.prototype.cF = function (a, b, c)
    {
        function d(a, b)
        {
            for (var c = a.length, d = 0; d < c; d += 2)
                if (b.Tp(a[d], a[d + 1]) > e) return !0;
            return !1
        }
        if (c && null !== this.fill && this.Ek(a, !0)) return !0;
        var e = a.Bf(b);
        b = e;
        1.5 < this.mb && (e = this.mb / 2 + Math.sqrt(e), e *= e);
        var f = this.Sa;
        if (null === f && (yk(this, Infinity, Infinity), f = this.Sa, null === f)) return !1;
        if (!c)
        {
            var h = f.cb,
                k = h.x,
                l = h.y,
                m = h.x + h.width,
                h = h.y + h.height;
            if (Sa(a.x, a.y, k, l) <= e && Sa(a.x, a.y, m, l) <= e && Sa(a.x, a.y, k, h) <= e && Sa(a.x, a.y, m, h) <= e) return !0
        }
        k = f.Cc;
        l = f.Mc;
        m = f.zb;
        h = f.Jb;
        if (f.type ===
            Fe)
        {
            if (c = Ra(a.x, a.y, k, l, m, h), f = (k - m) * (a.x - m) + (l - h) * (a.y - h), c <= (0 <= (m - k) * (a.x - k) + (h - l) * (a.y - l) && 0 <= f ? e : b)) return !0
        }
        else
        {
            if (f.type === Ge) return b = !1, c && (b = Ra(a.x, a.y, k, l, k, h) <= e || Ra(a.x, a.y, k, l, m, l) <= e || Ra(a.x, a.y, m, l, m, h) <= e || Ra(a.x, a.y, k, h, m, h) <= e), b;
            if (f.type === He)
            {
                b = a.x - (k + m) / 2;
                var f = a.y - (l + h) / 2,
                    n = Math.abs(m - k) / 2,
                    p = Math.abs(h - l) / 2;
                if (0 === n || 0 === p) return c = Ra(a.x, a.y, k, l, m, h), c <= e ? !0 : !1;
                if (c)
                {
                    if (a = Ae(n, p, b, f), a * a <= e) return !0
                }
                else return Sa(b, f, -n, 0) >= e || Sa(b, f, 0, -p) >= e || Sa(b, f, 0, p) >= e || Sa(b, f, n, 0) >=
                e ? !1 : !0
            }
            else if (f.type === Ce)
            {
                h = f.cb;
                k = h.x;
                l = h.y;
                m = h.x + h.width;
                h = h.y + h.height;
                if (a.x > m && a.x < k && a.y > h && a.y < l && Ra(a.x, a.y, k, l, k, h) > e && Ra(a.x, a.y, k, l, m, l) > e && Ra(a.x, a.y, m, h, k, h) > e && Ra(a.x, a.y, m, h, m, l) > e) return !1;
                b = Math.sqrt(e);
                if (c)
                {
                    if (null === this.fill ? uf(f, a.x, a.y, b) : f.Ia(a, b, !0)) return !0
                }
                else
                {
                    c = f.fc;
                    for (b = 0; b < c.count; b++)
                    {
                        k = c.n[b];
                        n = k.ha;
                        p = k.fa;
                        if (a.Tp(n, p) > e) return !1;
                        l = k.wb.n;
                        m = l.length;
                        for (h = 0; h < m; h++)
                        {
                            var q = l[h];
                            switch (q.type)
                            {
                                case Ue:
                                case Je:
                                    n = q.C;
                                    p = q.D;
                                    if (a.Tp(n, p) > e) return !1;
                                    break;
                                case Ve:
                                    f = w.gb();
                                    Wd(n, p, q.wc, q.Rc, q.Dh, q.Eh, q.C, q.D, .8, f);
                                    n = d(f, a);
                                    w.ta(f);
                                    if (n) return !1;
                                    n = q.C;
                                    p = q.D;
                                    if (a.Tp(n, p) > e) return !1;
                                    break;
                                case We:
                                    f = w.gb();
                                    ge(n, p, q.wc, q.Rc, q.C, q.D, .8, f);
                                    n = d(f, a);
                                    w.ta(f);
                                    if (n) return !1;
                                    n = q.C;
                                    p = q.D;
                                    if (a.Tp(n, p) > e) return !1;
                                    break;
                                case pf:
                                case qf:
                                    var r = q.type === pf ? rf(q, k) : sf(q, k, n, p),
                                        s = r.length;
                                    if (0 === s)
                                    {
                                        n = q.la;
                                        p = q.ra;
                                        if (a.Tp(n, p) > e) return !1;
                                        break
                                    }
                                    q = null;
                                    f = w.gb();
                                    for (b = 0; b < s; b++)
                                        if (q = r[b], f.length = 0, Wd(q[0], q[1], q[2], q[3], q[4], q[5], q[6], q[7], .8, f), d(f, a)) return w.ta(f), !1;
                                    w.ta(f);
                                    null !== q && (n =
                                        q[6], p = q[7]);
                                    break;
                                default:
                                    w.k("Unknown Segment type: " + q.type)
                            }
                        }
                    }
                    return !0
                }
            }
        }
        return !1
    };
    w.defineProperty(X,
        { of: "geometry"
        }, function ()
        {
            return null !== this.Sa ? this.Sa : this.Sf
        }, function (a)
        {
            var b = this.Sa;
            if (b !== a)
            {
                this.Sf = null !== a ? this.Sa = a.freeze() : this.Sa = null;
                var c = this.V;
                null !== c && (c.mk = NaN);
                this.H();
                this.h("geometry", b, a);
                Co(this) && (a = this.V, null !== a && Do(this, a, "geometryString"))
            }
        });
    w.defineProperty(X,
        {
            aI: "geometryString"
        }, function ()
        {
            return null === this.of ? "" : this.of.toString()
        }, function (a)
        {
            a = Oe(a);
            var b = a.normalize();
            this.of = a;
            this.position = a = w.xb(-b.x, -b.y);
            w.v(a)
        });
    w.defineProperty(X,
        {
            AF: "isGeometryPositioned"
        }, function ()
        {
            return this.Tr
        }, function (a)
        {
            var b = this.Tr;
            b !== a && (this.Tr = a, this.H(), this.h("isGeometryPositioned", b, a))
        });
    X.prototype.ge = function ()
    {
        this.Sa = null
    };
    w.defineProperty(X,
        {
            fill: "fill"
        }, function ()
        {
            return this.Hd
        }, function (a)
        {
            var b = this.Hd;
            b !== a && (a instanceof ga && a.freeze(), this.Hd = a, this.oa(), this.h("fill", b, a))
        });
    w.defineProperty(X,
        {
            stroke: "stroke"
        }, function ()
        {
            return this.sc
        }, function (a)
        {
            var b = this.sc;
            b !== a && (a instanceof ga && a.freeze(), this.sc = a, this.oa(), this.h("stroke", b, a))
        });
    w.defineProperty(X,
        {
            mb: "strokeWidth"
        }, function ()
        {
            return this.ji
        }, function (a)
        {
            var b = this.ji;
            if (b !== a)
                if (0 <= a)
                {
                    this.ji = a;
                    this.H();
                    var c = this.V;
                    null !== c && (c.mk = NaN);
                    this.h("strokeWidth", b, a)
                }
                else w.Fa(a, "value >= 0", X, "strokeWidth:value")
        });
    w.defineProperty(X,
        {
            TL: "strokeCap"
        }, function ()
        {
            return this.rp
        }, function (a)
        {
            var b = this.rp;
            b !== a && ("string" !== typeof a || "butt" !== a && "round" !== a && "square" !== a ? w.Fa(a, '"butt", "round", or "square"', X, "strokeCap") : (this.rp = a, this.oa(), this.h("strokeCap", b, a)))
        });
    w.defineProperty(X,
        {
            VL: "strokeJoin"
        }, function ()
        {
            return this.tp
        }, function (a)
        {
            var b = this.tp;
            b !== a && ("string" !== typeof a || "miter" !== a && "bevel" !== a && "round" !== a ? w.Fa(a, '"miter", "bevel", or "round"', X, "strokeJoin") : (this.tp = a, this.oa(), this.h("strokeJoin", b, a)))
        });
    w.defineProperty(X,
        {
            WL: "strokeMiterLimit"
        }, function ()
        {
            return this.hn
        }, function (a)
        {
            var b = this.hn;
            if (b !== a)
                if (1 <= a)
                {
                    this.hn = a;
                    this.oa();
                    var c = this.V;
                    null !== c && (c.mk = NaN);
                    this.h("strokeMiterLimit", b, a)
                }
                else w.Fa(a, "value >= 1", X, "strokeWidth:value")
        });
    w.defineProperty(X,
        {
            yG: "strokeDashArray"
        }, function ()
        {
            return this.sp
        }, function (a)
        {
            var b = this.sp;
            if (b !== a)
            {
                null === a || Array.isArray(a) || w.Fd(a, "Array", X, "strokeDashArray:value");
                if (null !== a)
                {
                    for (var c = a.length, d = 0, e = 0; e < c; e++)
                    {
                        var f = a[e];
                        "number" === typeof f && 0 <= f && isFinite(f) || w.k("strokeDashArray:value " + f + " at index " + e + " must be a positive number or zero.");
                        d += f
                    }
                    if (0 === d)
                    {
                        if (null === b) return;
                        a = null
                    }
                }
                this.sp = a;
                this.oa();
                this.h("strokeDashArray", b, a)
            }
        });
    w.defineProperty(X,
        {
            UL: "strokeDashOffset"
        }, function ()
        {
            return this.zf
        }, function (a)
        {
            var b = this.zf;
            b !== a && 0 <= a && (this.zf = a, this.oa(), this.h("strokeDashOffset", b, a))
        });
    w.defineProperty(X,
        {
            Gb: "figure"
        }, function ()
        {
            return this.Fo
        }, function (a)
        {
            var b = this.Fo;
            if (b !== a)
            {
                var c = lq[a];
                "function" === typeof c ? c = a : (c = lq[a.toLowerCase()]) || w.k("Unknown Shape.figure: " + a);
                b !== c && (a = this.V, null !== a && (a.mk = NaN), this.Fo = c, this.Sf = null, this.ge(), this.H(), this.h("figure", b, c))
            }
        });
    w.defineProperty(X,
        {
            Gq: "toArrow"
        }, function ()
        {
            return this.zp
        }, function (a)
        {
            var b = this.zp;
            !0 === a ? a = "Standard" : !1 === a && (a = "");
            if (b !== a)
            {
                var c = pq(a);
                null === c ? w.k("Unknown Shape.toArrow: " + a) : b !== c && (this.zp = c, this.Sf = null, this.ge(), this.H(), qq(this), this.h("toArrow", b, c))
            }
        });
    w.defineProperty(X,
        {
            DA: "fromArrow"
        }, function ()
        {
            return this.Ho
        }, function (a)
        {
            var b = this.Ho;
            !0 === a ? a = "Standard" : !1 === a && (a = "");
            if (b !== a)
            {
                var c = pq(a);
                null === c ? w.k("Unknown Shape.fromArrow: " + a) : b !== c && (this.Ho = c, this.Sf = null, this.ge(), this.H(), qq(this), this.h("fromArrow", b, c))
            }
        });

    function qq(a)
    {
        var b = a.g;
        null !== b && b.ja.lb || (a.yq = rq, "None" !== a.zp ? (a.Pe = -1, a.oh = Ic) : "None" !== a.Ho && (a.Pe = 0, a.oh = new K(1 - Ic.x, Ic.y)))
    }
    w.defineProperty(X,
        {
            A: "spot1"
        }, function ()
        {
            return this.hi
        }, function (a)
        {
            w.G(a, K, X, "spot1");
            var b = this.hi;
            b.L(a) || (this.hi = a = a.S(), this.H(), this.h("spot1", b, a))
        });
    w.defineProperty(X,
        {
            B: "spot2"
        }, function ()
        {
            return this.ii
        }, function (a)
        {
            w.G(a, K, X, "spot2");
            var b = this.ii;
            b.L(a) || (this.ii = a = a.S(), this.H(), this.h("spot2", b, a))
        });
    w.defineProperty(X,
        {
            Hc: "parameter1"
        }, function ()
        {
            return this.Ns
        }, function (a)
        {
            var b = this.Ns;
            b !== a && (this.Ns = a, this.ge(), this.H(), this.h("parameter1", b, a))
        });
    w.defineProperty(X,
        {
            Nu: "parameter2"
        }, function ()
        {
            return this.Os
        }, function (a)
        {
            var b = this.Os;
            b !== a && (this.Os = a, this.ge(), this.H(), this.h("parameter2", b, a))
        });
    w.u(X,
        {
            Ja: "naturalBounds"
        }, function ()
        {
            if (null !== this.Sa) return this.Wc.assign(this.Sa.cb), this.Wc;
            var a = this.Ca;
            return new B(0, 0, a.width, a.height)
        });
    w.defineProperty(X,
        {
            ey: "pathPattern"
        }, function ()
        {
            return this.Qs
        }, function (a)
        {
            var b = this.Qs;
            b !== a && (this.Qs = a, this.oa(), this.h("pathPattern", b, a))
        });
    w.defineProperty(X,
        {
            KL: "pathObject"
        }, function ()
        {
            return this.ey
        }, function (a)
        {
            this.ey = a
        });
    w.defineProperty(X,
        {
            FA: "geometryStretch"
        }, function ()
        {
            return this.Ir
        }, function (a)
        {
            var b = this.Ir;
            b !== a && (w.ob(a, G, X, "geometryStretch"), this.Ir = a, this.h("geometryStretch", b, a))
        });
    w.defineProperty(X,
        {
            interval: "interval"
        }, function ()
        {
            return this.tg
        }, function (a)
        {
            var b = this.tg;
            a = Math.floor(a);
            if (b !== a && 0 <= a)
            {
                this.tg = a;
                var c = this.g;
                null !== c && this.R === c.En && em(c);
                this.H();
                c = this.R;
                null !== c && c.type === lp && (c.bk = null);
                this.h("interval", b, a)
            }
        });
    w.defineProperty(X,
        {
            nF: "graduatedStart"
        }, function ()
        {
            return this.sg
        }, function (a)
        {
            var b = this.sg;
            b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.sg = a, this.H(), this.h("graduatedStart", b, a))
        });
    w.defineProperty(X,
        {
            lF: "graduatedEnd"
        }, function ()
        {
            return this.rg
        }, function (a)
        {
            var b = this.rg;
            b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.rg = a, this.H(), this.h("graduatedEnd", b, a))
        });
    X.makeGeometry = function (a, b, c)
    {
        var d = null;
        if ("None" !== a.Gq) d = Qd[a.Gq];
        else if ("None" !== a.DA) d = Qd[a.DA];
        else
        {
            var e = lq[a.Gb];
            "string" === typeof e && (e = lq[e]);
            void 0 === e && w.k("Unknown Shape.figure: " + a.Gb);
            d = e(a, b, c);
            d.Po = b;
            d.No = c
        }
        null === d && (e = lq.Rectangle, "function" === typeof e && (d = e(a, b, c)));
        return d
    };
    X.getFigureGenerators = function ()
    {
        var a = new ma("string", "function"),
            b;
        for (b in lq)
            if (b !== b.toLowerCase())
            {
                var c = lq[b];
                "function" === typeof c && a.add(b, c)
            }
        a.freeze();
        return a
    };
    X.defineFigureGenerator = function (a, b)
    {
        w.j(a, "string", X, "defineFigureGenerator:name");
        "string" === typeof b ? "" !== b && lq[b] || w.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: " + b) : w.j(b, "function", X, "defineFigureGenerator:func");
        var c = a.toLowerCase();
        "" !== a && "none" !== c && a !== c || w.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: " + a);
        lq[a] = b;
        lq[c] = a
    };
    X.getArrowheadGeometries = function ()
    {
        var a = new ma("string", Be),
            b;
        for (b in sq)
            if (void 0 === Qd[b])
            {
                var c = Oe(sq[b], !1);
                Qd[b] = c;
                c = b.toLowerCase();
                c !== b && (Qd[c] = b)
            }
        for (b in Qd) b !== b.toLowerCase() && (c = Qd[b], c instanceof Be && a.add(b, c));
        a.freeze();
        return a
    };
    X.defineArrowheadGeometry = function (a, b)
    {
        w.j(a, "string", X, "defineArrowheadGeometry:name");
        var c = null;
        "string" === typeof b ? (w.j(b, "string", X, "defineArrowheadGeometry:pathstr"), c = Oe(b, !1)) : (w.G(b, Be, X, "defineArrowheadGeometry:pathstr"), c = b);
        var d = a.toLowerCase();
        "" !== a && "none" !== d && a !== d || w.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: " + a);
        Qd[a] = c;
        Qd[d] = a
    };

    function Lh()
    {
        G.call(this);
        this.Md = "";
        this.sc = "black";
        this.pg = "13px sans-serif";
        this.Hl = "start";
        this.og = Qj;
        this.Ll = yc;
        this.Jm = !0;
        this.fk = this.hk = !1;
        this.cj = tq;
        this.nj = uq;
        this.lw = this.pe = 0;
        this.Fz = this.Gz = null;
        this.yf = new Yp;
        this.Br = !1;
        this.Ve = this.$q = this.yt = this.Il = this.zt = null;
        this.gi = this.fi = 0;
        this.gh = Infinity;
        this.Vo = 0;
        this.tg = 1;
        this.sg = 0;
        this.rg = 1;
        this.Fm = null
    }
    w.La(Lh, G);
    w.ga("TextBlock", Lh);
    var vq = /[ \u200b\u00ad]/;
    Lh.prototype.cloneProtected = function (a)
    {
        G.prototype.cloneProtected.call(this, a);
        a.Md = this.Md;
        a.sc = this.sc;
        a.pg = this.pg;
        a.Hl = this.Hl;
        a.og = this.og;
        a.Ll = this.Ll;
        a.Jm = this.Jm;
        a.hk = this.hk;
        a.fk = this.fk;
        a.cj = this.cj;
        a.nj = this.nj;
        a.pe = this.pe;
        a.lw = this.lw;
        a.Gz = this.Gz;
        a.Fz = this.Fz;
        a.yf.Np(this.yf);
        a.Br = this.Br;
        a.zt = this.zt;
        a.Il = this.Il;
        a.yt = this.yt;
        a.$q = this.$q;
        a.Ve = this.Ve;
        a.fi = this.fi;
        a.gi = this.gi;
        a.gh = this.gh;
        a.Vo = this.Vo;
        a.tg = this.tg;
        a.sg = this.sg;
        a.rg = this.rg;
        a.Fm = this.Fm
    };
    Lh.prototype.gc = function (a)
    {
        a.Je === Lh ? this.LG = a : G.prototype.gc.call(this, a)
    };
    Lh.prototype.toString = function ()
    {
        return 22 < this.Md.length ? 'TextBlock("' + this.Md.substring(0, 20) + '"...)' : 'TextBlock("' + this.Md + '")'
    };
    var wq = new ra,
        xq = 0,
        yq = new ra,
        zq = 0,
        Aq = "...",
        Bq = "",
        Cq = (new Vc(null)).Gk;
    Lh.getEllipsis = function ()
    {
        return Aq
    };
    Lh.setEllipsis = function (a)
    {
        Aq = a;
        yq = new ra;
        zq = 0
    };
    var Dq;
    Lh.None = Dq = w.p(Lh, "None", 0);
    var Eq;
    Lh.WrapFit = Eq = w.p(Lh, "WrapFit", 1);
    var uq;
    Lh.WrapDesiredSize = uq = w.p(Lh, "WrapDesiredSize", 2);
    var Fq;
    Lh.WrapBreakAll = Fq = w.p(Lh, "WrapBreakAll", 3);
    var tq;
    Lh.OverflowClip = tq = w.p(Lh, "OverflowClip", 0);
    var Gq;
    Lh.OverflowEllipsis = Gq = w.p(Lh, "OverflowEllipsis", 1);
    Lh.prototype.H = function ()
    {
        G.prototype.H.call(this);
        this.Fz = this.Gz = null
    };
    w.defineProperty(Lh,
        {
            font: "font"
        }, function ()
        {
            return this.pg
        }, function (a)
        {
            var b = this.pg;
            b !== a && (this.pg = a, this.yf.Xj = null, this.H(), this.h("font", b, a))
        });
    Lh.isValidFont = function (a)
    {
        var b = Cq.font;
        if (a === b || "10px sans-serif" === a) return !0;
        Cq.font = "10px sans-serif";
        var c;
        Cq.font = a;
        var d = Cq.font;
        if ("10px sans-serif" !== d) return Cq.font = b, !0;
        Cq.font = "19px serif";
        c = Cq.font;
        Cq.font = a;
        d = Cq.font;
        Cq.font = b;
        return d !== c
    };
    w.defineProperty(Lh,
        {
            text: "text"
        }, function ()
        {
            return this.Md
        }, function (a)
        {
            var b = this.Md;
            a = null !== a && void 0 !== a ? a.toString() : "";
            b !== a && (this.Md = a, this.H(), this.h("text", b, a))
        });
    w.defineProperty(Lh,
        {
            textAlign: "textAlign"
        }, function ()
        {
            return this.Hl
        }, function (a)
        {
            var b = this.Hl;
            b !== a && ("start" === a || "end" === a || "left" === a || "right" === a || "center" === a ? (this.Hl = a, this.oa(), this.h("textAlign", b, a)) : w.Fa(a, '"start", "end", "left", "right", or "center"', Lh, "textAlign"))
        });
    w.defineProperty(Lh,
        {
            eu: "flip"
        }, function ()
        {
            return this.og
        }, function (a)
        {
            var b = this.og;
            b !== a && (w.ob(a, G, Lh, "flip"), this.og = a, this.oa(), this.h("flip", b, a))
        });
    w.defineProperty(Lh,
        {
            bM: "verticalAlignment"
        }, function ()
        {
            return this.Ll
        }, function (a)
        {
            var b = this.Ll;
            b.L(a) || (a.Td() && w.k("TextBlock.verticalAlignment for " + this + " must be a real Spot, not:" + a), this.Ll = a = a.S(), Uo(this), this.h("verticalAlignment", b, a))
        });
    w.u(Lh,
        {
            Ja: "naturalBounds"
        }, function ()
        {
            if (!this.Wc.I())
            {
                var a = Hq(this, this.Md, this.yf, 999999).width,
                    b = Iq(this, a, this.yf),
                    c = this.Ca;
                isNaN(c.width) || (a = c.width);
                isNaN(c.height) || (b = c.height);
                Ua(this.Wc, a, b)
            }
            return this.Wc
        });
    w.defineProperty(Lh,
        {
            Mx: "isMultiline"
        }, function ()
        {
            return this.Jm
        }, function (a)
        {
            var b = this.Jm;
            b !== a && (this.Jm = a, this.H(), this.h("isMultiline", b, a))
        });
    w.defineProperty(Lh,
        {
            kL: "isUnderline"
        }, function ()
        {
            return this.hk
        }, function (a)
        {
            var b = this.hk;
            b !== a && (this.hk = a, this.oa(), this.h("isUnderline", b, a))
        });
    w.defineProperty(Lh,
        {
            jL: "isStrikethrough"
        }, function ()
        {
            return this.fk
        }, function (a)
        {
            var b = this.fk;
            b !== a && (this.fk = a, this.oa(), this.h("isStrikethrough", b, a))
        });
    w.defineProperty(Lh,
        {
            LG: "wrap"
        }, function ()
        {
            return this.nj
        }, function (a)
        {
            var b = this.nj;
            b !== a && (this.nj = a, this.H(), this.h("wrap", b, a))
        });
    w.defineProperty(Lh,
        {
            overflow: "overflow"
        }, function ()
        {
            return this.cj
        }, function (a)
        {
            var b = this.cj;
            b !== a && (this.cj = a, this.H(), this.h("overflow", b, a))
        });
    w.defineProperty(Lh,
        {
            stroke: "stroke"
        }, function ()
        {
            return this.sc
        }, function (a)
        {
            var b = this.sc;
            b !== a && (a instanceof ga && a.freeze(), this.sc = a, this.oa(), this.h("stroke", b, a))
        });
    w.u(Lh,
        {
            Tx: "lineCount"
        }, function ()
        {
            return this.pe
        });
    w.defineProperty(Lh,
        {
            zA: "editable"
        }, function ()
        {
            return this.Br
        }, function (a)
        {
            var b = this.Br;
            b !== a && (this.Br = a, this.h("editable", b, a))
        });
    w.defineProperty(Lh,
        {
            AG: "textEditor"
        }, function ()
        {
            return this.zt
        }, function (a)
        {
            var b = this.zt;
            b !== a && (this.zt = a, this.h("textEditor", b, a))
        });
    w.defineProperty(Lh,
        {
            AA: "errorFunction"
        }, function ()
        {
            return this.Ve
        }, function (a)
        {
            var b = this.Ve;
            b !== a && (null !== a && w.j(a, "function", Lh, "errorFunction"), this.Ve = a, this.h("errorFunction", b, a))
        });
    w.defineProperty(Lh,
        {
            interval: "interval"
        }, function ()
        {
            return this.tg
        }, function (a)
        {
            var b = this.tg;
            a = Math.floor(a);
            if (b !== a && 0 <= a)
            {
                this.tg = a;
                this.H();
                var c = this.R;
                null !== c && c.type === lp && (c.bk = null);
                this.h("interval", b, a)
            }
        });
    w.defineProperty(Lh,
        {
            nF: "graduatedStart"
        }, function ()
        {
            return this.sg
        }, function (a)
        {
            var b = this.sg;
            b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.sg = a, this.H(), this.h("graduatedStart", b, a))
        });
    w.defineProperty(Lh,
        {
            lF: "graduatedEnd"
        }, function ()
        {
            return this.rg
        }, function (a)
        {
            var b = this.rg;
            b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.rg = a, this.H(), this.h("graduatedEnd", b, a))
        });
    w.defineProperty(Lh,
        {
            mF: "graduatedFunction"
        }, function ()
        {
            return this.Fm
        }, function (a)
        {
            var b = this.Fm;
            b !== a && (null !== a && w.j(a, "function", Lh, "graduatedFunction"), this.Fm = a, this.H(), this.h("graduatedFunction", b, a))
        });
    Lh.prototype.Ik = function (a, b)
    {
        if (null !== this.sc && 0 !== this.Md.length && null !== this.pg)
        {
            var c = this.Ja.width,
                d = this.Ja.height,
                e = Jq(this),
                f = a.textAlign = this.Hl,
                h = b.Xr;
            "start" === f && (f = h ? "right" : "left");
            "end" === f && (f = h ? "left" : "right");
            Qo(this, a, this.sc, !0, !1);
            (this.hk || this.fk) && Qo(this, a, this.sc, !1, !1);
            var k = 0,
                h = !1,
                l = w.xb(0, 0);
            this.ph.nb(l);
            var m = w.xb(0, e);
            this.ph.nb(m);
            var n = l.Bf(m);
            w.v(l);
            w.v(m);
            l = b.scale;
            8 > n * l * l && (h = !0);
            b.hf !== a && (h = !1);
            !1 === b.wj("textGreeking") && (h = !1);
            n = this.fi;
            l = this.gi;
            switch (this.eu)
            {
                case vo:
                    a.translate(c,
                        0);
                    a.scale(-1, 1);
                    break;
                case uo:
                    a.translate(0, d);
                    a.scale(1, -1);
                    break;
                case wo:
                    a.translate(c, d), a.scale(-1, -1)
            }
            var m = this.pe,
                p = (n + e + l) * m;
            d > p && (k = this.Ll, k = k.y * d - k.y * p + k.offsetY);
            for (var p = this.yf, q = 0; q < m; q++)
            {
                var r = p.wf[q],
                    s = p.Se[q];
                r > c && (r = c);
                var k = k + n,
                    u = s,
                    s = a,
                    t = k,
                    x = c,
                    v = e,
                    z = f,
                    A = 0;
                h ? ("left" === z ? A = 0 : "right" === z ? A = x - r : "center" === z && (A = (x - r) / 2), s.fillRect(0 + A, t + .25 * v, r, 1)) : ("left" === z ? A = 0 : "right" === z ? A = x : "center" === z && (A = x / 2), s.fillText(u, 0 + A, t + v - .25 * v), u = v / 20 | 0, 0 === u && (u = 1), "right" === z ? A -= r : "center" ===
                    z && (A -= r / 2), this.hk && (s.beginPath(), s.lineWidth = u, s.moveTo(0 + A, t + v - .2 * v), s.lineTo(0 + A + r, t + v - .2 * v), s.stroke()), this.fk && (s.beginPath(), s.lineWidth = u, t = t + v - v / 2.2 | 0, 0 !== u % 2 && (t += .5), s.moveTo(0 + A, t), s.lineTo(0 + A + r, t), s.stroke()));
                k += e + l
            }
            switch (this.eu)
            {
                case vo:
                    a.scale(-1, 1);
                    a.translate(-c, 0);
                    break;
                case uo:
                    a.scale(1, -1);
                    a.translate(0, -d);
                    break;
                case wo:
                    a.scale(-1, -1), a.translate(-c, -d)
            }
        }
    };
    Lh.prototype.On = function (a, b, c, d)
    {
        this.Vo = a;
        var e = this.yf;
        e.reset();
        var f = 0,
            h = 0;
        if (isNaN(this.Ca.width))
        {
            f = this.Md.replace(/\r\n/g, "\n").replace(/\r/g, "\n");
            if (0 === f.length) f = 0;
            else if (this.Mx)
            {
                for (var k = h = 0, l = !1; !l;)
                {
                    var m = f.indexOf("\n", k); - 1 === m && (m = f.length, l = !0);
                    k = Kq(f.substr(k, m - k).replace(/^\s+|\s+$/g, ""), this.pg);
                    k > h && (h = k);
                    k = m + 1
                }
                f = h
            }
            else h = f.indexOf("\n", 0), 0 <= h && (f = f.substr(0, h)), f = k = Kq(f, this.pg);
            f = Math.min(f, a / this.scale);
            f = Math.max(8, f)
        }
        else f = this.Ca.width;
        null !== this.R && (f = Math.min(f,
            this.R.Gf.width));
        h = Iq(this, f, e);
        m = h = isNaN(this.Ca.height) ? Math.min(h, b / this.scale) : this.Ca.height;
        if (0 !== e.Ge && 1 !== e.Se.length && this.cj === Gq && (b = this.pg, l = this.cj === Gq ? Lq(b) : 0, k = this.fi + this.gi, k = Math.max(0, Jq(this) + k), m = Math.min(this.SI - 1, Math.max(Math.floor(m / k + .01) - 1, 0)), !(m + 1 >= e.Se.length)))
        {
            k = e.Se[m];
            for (l = Math.max(1, a - l); Kq(k, b) > l && 1 < k.length;) k = k.substr(0, k.length - 1);
            k += Aq;
            b = Kq(k, b);
            e.Se[m] = k;
            e.Se = e.Se.slice(0, m + 1);
            e.wf[m] = b;
            e.wf = e.wf.slice(0, m + 1);
            e.mj = e.Se.length;
            e.Ge = Math.max(e.Ge, b);
            this.pe =
                e.mj
        }
        if (this.LG === Eq || isNaN(this.Ca.width)) f = isNaN(a) ? e.Ge : Math.min(a, e.Ge), isNaN(this.Ca.width) && (f = Math.max(8, f));
        f = Math.max(c, f);
        h = Math.max(d, h);
        Ua(this.Wc, f, h);
        Eo(this, 0, 0, f, h)
    };
    Lh.prototype.pj = function (a, b, c, d)
    {
        Jo(this, a, b, c, d)
    };

    function Hq(a, b, c, d)
    {
        b = b.replace(/^\s+|\s+$/g, "");
        var e = 0,
            f = 0,
            h = 0,
            k = a.pg,
            f = a.fi + a.gi,
            l = Math.max(0, Jq(a) + f),
            h = a.cj === Gq ? Lq(k) : 0;
        if (a.pe >= a.gh) return new ia(0, l);
        if (a.nj === Dq)
        {
            c.mj = 1;
            f = Kq(b, k);
            if (0 === h || f <= d) return c.Ge = Math.max(c.Ge, f), c.wf.push(c.Ge), c.Se.push(b), new ia(f, l);
            var m = Mq(a, b);
            b = b.substr(m.length);
            for (var n = Mq(a, b), f = Kq(m + n, k); 0 < n.length && f <= d;) m += n, b = b.substr(n.length), n = Mq(a, b), f = Kq((m + n).replace(/^\s+|\s+$/g, ""), k);
            m += n.replace(/^\s+|\s+$/g, "");
            for (d = Math.max(1, d - h); Kq(m, k) > d && 1 < m.length;) m =
                m.substr(0, m.length - 1);
            m += Aq;
            h = Kq(m, k);
            c.wf.push(h);
            c.Ge = h;
            c.Se.push(m);
            return new ia(h, l)
        }
        var p = 0;
        0 === b.length && (p = 1, c.wf.push(0), c.Se.push(b));
        for (; 0 < b.length;)
        {
            m = Mq(a, b);
            for (b = b.substr(m.length); Kq(m, k) > d;)
            {
                n = 1;
                f = Kq(m.substr(0, n), k);
                for (h = 0; f <= d;) n++, h = f, f = Kq(m.substr(0, n), k);
                1 === n ? (c.wf[a.pe + p] = f, e = Math.max(e, f)) : (c.wf[a.pe + p] = h, e = Math.max(e, h));
                n--;
                1 > n && (n = 1);
                c.Se[a.pe + p] = m.substr(0, n);
                p++;
                m = m.substr(n);
                if (a.pe + p > a.gh) break
            }
            n = Mq(a, b);
            for (f = Kq(m + n, k); 0 < n.length && f <= d;) m += n, b = b.substr(n.length),
                n = Mq(a, b), f = Kq((m + n).replace(/^\s+|\s+$/g, ""), k);
            m = m.replace(/^\s+|\s+$/g, "");
            if ("" !== m && ("\u00ad" === m[m.length - 1] && (m = m.substring(0, m.length - 1) + "\u2010"), 0 === n.length ? (c.wf.push(f), e = Math.max(e, f)) : (h = Kq(m, k), c.wf.push(h), e = Math.max(e, h)), c.Se.push(m), p++, a.pe + p > a.gh)) break
        }
        c.mj = Math.min(a.gh, p);
        c.Ge = Math.max(c.Ge, e);
        return new ia(c.Ge, l * c.mj)
    }

    function Mq(a, b)
    {
        if (a.nj === Fq) return b.substr(0, 1);
        for (var c = b.length, d = 0; d < c && !vq.test(b.charAt(d));) d++;
        for (; d < c && vq.test(b.charAt(d));) d++;
        return d >= c ? b : b.substr(0, d)
    }

    function Kq(a, b)
    {
        Bq !== b && (Bq = Cq.font = b);
        return Cq.measureText(a).width
    }

    function Jq(a)
    {
        if (null !== a.yf.Xj) return a.yf.Xj;
        var b = a.pg;
        Bq !== b && (Bq = Cq.font = b);
        var c = 0;
        void 0 !== wq[b] && 5E3 > xq ? c = wq[b] : (c = 1.3 * Cq.measureText("M").width, wq[b] = c, xq++);
        return a.yf.Xj = c
    }

    function Lq(a)
    {
        Bq !== a && (Bq = Cq.font = a);
        var b = 0;
        void 0 !== yq[a] && 5E3 > zq ? b = yq[a] : (b = Cq.measureText(Aq).width, yq[a] = b, zq++);
        return b
    }

    function Iq(a, b, c)
    {
        var d = a.Md.replace(/\r\n/g, "\n").replace(/\r/g, "\n"),
            e = a.fi + a.gi,
            e = Math.max(0, Jq(a) + e);
        if (0 === d.length) return c.Ge = 0, a.pe = 1, e;
        if (!a.Mx)
        {
            var f = d.indexOf("\n", 0);
            0 <= f && (d = d.substr(0, f))
        }
        for (var f = 0, h = a.pe = 0, k = -1, l = !1; !l;) k = d.indexOf("\n", h), -1 === k && (k = d.length, l = !0), h <= k && (h = d.substr(h, k - h), a.nj !== Dq ? (c.mj = 0, h = Hq(a, h, c, b), f += h.height, a.pe += c.mj) : (Hq(a, h, c, b), f += e, a.pe++), a.pe === a.gh && (l = !0)), h = k + 1;
        return a.lw = f
    }
    w.defineProperty(Lh,
        {
            LB: "textValidation"
        }, function ()
        {
            return this.Il
        }, function (a)
        {
            var b = this.Il;
            b !== a && (null !== a && w.j(a, "function", Lh, "textValidation"), this.Il = a, this.h("textValidation", b, a))
        });
    w.defineProperty(Lh,
        {
            zG: "textEdited"
        }, function ()
        {
            return this.yt
        }, function (a)
        {
            var b = this.yt;
            b !== a && (null !== a && w.j(a, "function", Lh, "textEdited"), this.yt = a, this.h("textEdited", b, a))
        });
    w.defineProperty(Lh,
        {
            QL: "spacingAbove"
        }, function ()
        {
            return this.fi
        }, function (a)
        {
            var b = this.fi;
            b !== a && (this.fi = a, this.h("spacingAbove", b, a))
        });
    w.defineProperty(Lh,
        {
            RL: "spacingBelow"
        }, function ()
        {
            return this.gi
        }, function (a)
        {
            var b = this.gi;
            b !== a && (this.gi = a, this.h("spacingBelow", b, a))
        });
    w.defineProperty(Lh,
        {
            SI: "maxLines"
        }, function ()
        {
            return this.gh
        }, function (a)
        {
            var b = this.gh;
            b !== a && (a = Math.floor(a), 0 >= a && w.Fa(a, "> 0", Lh, "maxLines"), this.gh = a, this.h("maxLines", b, a), this.H())
        });
    w.u(Lh,
        {
            wL: "metrics"
        }, function ()
        {
            return this.yf
        });
    w.defineProperty(Lh,
        {
            HK: "choices"
        }, function ()
        {
            return this.$q
        }, function (a)
        {
            var b = this.$q;
            b !== a && (null === a || Array.isArray(a) || w.Fd(a, "Array", Lh, "choices:value"), this.$q = a, this.h("choices", b, a))
        });

    function Yp()
    {
        this.Ge = this.mj = 0;
        this.wf = [];
        this.Se = [];
        this.Xj = null
    }
    Yp.prototype.reset = function ()
    {
        this.Ge = this.mj = 0;
        this.Xj = null;
        this.wf = [];
        this.Se = []
    };
    Yp.prototype.Np = function (a)
    {
        this.mj = a.mj;
        this.Xj = a.Xj;
        this.Ge = a.Ge;
        this.wf = w.Tl(a.wf);
        this.Se = w.Tl(a.Se)
    };
    w.u(Yp,
        {
            DK: "arrSize"
        }, function ()
        {
            return this.wf
        });
    w.u(Yp,
        {
            EK: "arrText"
        }, function ()
        {
            return this.Se
        });
    w.u(Yp,
        {
            vL: "maxLineWidth"
        }, function ()
        {
            return this.Ge
        });
    w.u(Yp,
        {
            dL: "fontHeight"
        }, function ()
        {
            return this.Xj
        });

    function yl()
    {
        G.call(this);
        this.Ue = null;
        this.st = "";
        this.tk = Gd;
        this.Ko = Ee;
        this.ki = this.Ve = null;
        this.Jo = Jb;
        this.og = Qj;
        this.vp = null;
        this.Az = !1;
        this.Nv = !0;
        this.jw = !1;
        this.mp = null
    }
    w.La(yl, G);
    w.ga("Picture", yl);
    yl.prototype.cloneProtected = function (a)
    {
        G.prototype.cloneProtected.call(this, a);
        a.element = this.Ue;
        a.st = this.st;
        a.tk = this.tk.S();
        a.Ko = this.Ko;
        a.og = this.og;
        a.Ve = this.Ve;
        a.ki = this.ki;
        a.Jo = this.Jo.S();
        a.Nv = this.Nv;
        a.mp = this.mp
    };
    yl.prototype.gc = function (a)
    {
        a === Qj || a === Sj || a === to ? this.qI = a : G.prototype.gc.call(this, a)
    };
    yl.prototype.toString = function ()
    {
        return "Picture(" + this.source + ")#" + w.Pd(this)
    };
    var Nq = new ra,
        Oq = 0,
        sl = [];

    function Pq()
    {
        var a = sl;
        if (0 === a.length)
            for (var b = window.document.getElementsByTagName("canvas"), c = b.length, d = 0; d < c; d++)
            {
                var e = b[d];
                e.parentElement && e.parentElement.aa && a.push(e.parentElement.aa)
            }
        return a
    }
    var rn;
    yl.clearCache = rn = function (a)
    {
        void 0 === a && (a = "");
        w.j(a, "string", yl, "clearCache:url");
        "" !== a ? Nq[a] && (delete Nq[a], Oq--) : (Nq = new ra, Oq = 0)
    };
    w.defineProperty(yl,
        {
            element: "element"
        }, function ()
        {
            return this.Ue
        }, function (a)
        {
            var b = this.Ue;
            if (b !== a)
            {
                null === a || a instanceof HTMLImageElement || a instanceof HTMLVideoElement || a instanceof HTMLCanvasElement || w.k("Picture.element must be an instance of Image, Canvas, or Video, not: " + a);
                this.Az = a instanceof HTMLCanvasElement;
                this.Ue = a;
                if (null !== a)
                    if (a instanceof HTMLCanvasElement || !0 === a.complete) a.Io instanceof Event && null !== this.Ve && this.Ve(this, a.Io), !0 === a.Vr && null !== this.ki && this.ki(this, a.Qz),
                        a.Vr = !0, this.Ca.I() || (dm(this, !1), this.H());
                    else
                    {
                        var c = this;
                        a.$C || (a.addEventListener("load", function (b)
                        {
                            Qq(a, b);
                            c.Ca.I() || (dm(c, !1), c.H())
                        }), a.addEventListener("error", function (b)
                        {
                            Rq(a, b)
                        }), a.$C = !0)
                    }
                this.h("element", b, a);
                this.oa()
            }
        });
    w.defineProperty(yl,
        {
            source: "source"
        }, function ()
        {
            return this.st
        }, function (a)
        {
            var b = this.st;
            if (b !== a)
            {
                w.j(a, "string", yl, "source");
                this.st = a;
                var c = Nq,
                    d = this.g;
                if (void 0 !== c[a]) var e = c[a].Gp[0].source;
                else
                {
                    30 < Oq && (rn(), c = Nq);
                    var e = w.createElement("img"),
                        f = this;
                    e.addEventListener("load", function (a)
                    {
                        Qq(e, a);
                        f.Ca.I() || (dm(f, !1), f.H())
                    });
                    e.addEventListener("error", function (a)
                    {
                        Rq(e, a)
                    });
                    e.$C = !0;
                    var h = this.mp;
                    null !== h && (e.crossOrigin = h(this));
                    e.src = a;
                    c[a] = new Sq(e);
                    Oq++
                }
                null !== d && qn(d, this);
                this.element = e;
                null !== d && pn(d, this);
                this.H();
                this.oa();
                this.h("source", b, a)
            }
        });

    function Qq(a, b)
    {
        a.Vr = !0;
        a.Io = !1;
        for (var c = null, d = Pq(), e = d.length, f = 0; f < e; f++)
        {
            var h = d[f],
                k = h.fp.ka(a.src);
            if (null !== k)
                for (var l = k.length, m = 0; m < l; m++) c = k[m], h.Mz.add(c), h.ye(), null === a.Qz && (a.Qz = b, null !== c.ki && c.ki(c, b))
        }
    }

    function Rq(a, b)
    {
        a.Io = b;
        for (var c = null, d = Pq(), e = d.length, f = 0; f < e; f++)
            if (c = d[f].fp.ka(a.src), null !== c)
            {
                for (var h = c.length, k = w.gb(), l = 0; l < h; l++) k.push(c[l]);
                for (l = 0; l < h; l++) c = k[l], null !== c.Ve && c.Ve(c, b);
                w.ta(k)
            }
    }
    w.defineProperty(yl,
        {
            PL: "sourceCrossOrigin"
        }, function ()
        {
            return this.mp
        }, function (a)
        {
            if (this.mp !== a && (null !== a && w.j(a, "function", yl, "sourceCrossOrigin"), this.mp = a, null !== this.element))
            {
                var b = this.element.src;
                null === a && "string" === typeof b ? this.element.crossOrigin = null : null !== a && (this.element.crossOrigin = a(this));
                this.element.src = b
            }
        });
    w.defineProperty(yl,
        {
            Kj: "sourceRect"
        }, function ()
        {
            return this.tk
        }, function (a)
        {
            var b = this.tk;
            b.L(a) || (w.G(a, B, yl, "sourceRect"), this.tk = a = a.S(), this.oa(), this.h("sourceRect", b, a))
        });
    w.defineProperty(yl,
        {
            qI: "imageStretch"
        }, function ()
        {
            return this.Ko
        }, function (a)
        {
            var b = this.Ko;
            b !== a && (w.ob(a, G, yl, "imageStretch"), this.Ko = a, this.oa(), this.h("imageStretch", b, a))
        });
    w.defineProperty(yl,
        {
            eu: "flip"
        }, function ()
        {
            return this.og
        }, function (a)
        {
            var b = this.og;
            b !== a && (w.ob(a, G, yl, "flip"), this.og = a, this.oa(), this.h("flip", b, a))
        });
    w.defineProperty(yl,
        {
            fL: "imageAlignment"
        }, function ()
        {
            return this.Jo
        }, function (a)
        {
            w.G(a, K, yl, "imageAlignment");
            var b = this.Jo;
            b.L(a) || (this.Jo = a = a.S(), this.H(), this.h("imageAlignment", b, a))
        });
    w.defineProperty(yl,
        {
            AA: "errorFunction"
        }, function ()
        {
            return this.Ve
        }, function (a)
        {
            var b = this.Ve;
            b !== a && (null !== a && w.j(a, "function", yl, "errorFunction"), this.Ve = a, this.h("errorFunction", b, a))
        });
    w.defineProperty(yl,
        {
            ZL: "successFunction"
        }, function ()
        {
            return this.ki
        }, function (a)
        {
            var b = this.ki;
            b !== a && (null !== a && w.j(a, "function", yl, "successFunction"), this.ki = a, this.h("successFunction", b, a))
        });
    yl.prototype.Ik = function (a, b)
    {
        var c = this.Ue;
        if (null !== c)
        {
            var d = c.src;
            null !== d && "" !== d || w.k('Element has no source ("src") attribute: ' + c);
            if (!(c.Io instanceof Event) && !1 !== c.Vr)
            {
                var d = this.Ja,
                    e = 0,
                    f = 0,
                    h = this.Az,
                    k = h ? +c.width : c.naturalWidth,
                    h = h ? +c.height : c.naturalHeight;
                void 0 === k && c.videoWidth && (k = c.videoWidth);
                void 0 === h && c.videoHeight && (h = c.videoHeight);
                k = k || d.width;
                h = h || d.height;
                if (0 !== k && 0 !== h)
                {
                    var l = k,
                        m = h;
                    this.Kj.I() && (e = this.tk.x, f = this.tk.y, k = this.tk.width, h = this.tk.height);
                    var n = k,
                        p = h,
                        q = this.Ko,
                        r = this.Jo;
                    switch (q)
                    {
                        case Qj:
                            if (this.Kj.I()) break;
                            n >= d.width && (e = e + r.offsetX + (n * r.x - d.width * r.x));
                            p >= d.height && (f = f + r.offsetY + (p * r.y - d.height * r.y));
                            k = Math.min(d.width, n);
                            h = Math.min(d.height, p);
                            break;
                        case Ee:
                            n = d.width;
                            p = d.height;
                            break;
                        case Sj:
                        case to:
                            var s = 0;
                            q === Sj ? (s = Math.min(d.height / p, d.width / n), n *= s, p *= s) : q === to && (s = Math.max(d.height / p, d.width / n), n *= s, p *= s, n >= d.width && (e = (e + r.offsetX + (n * r.x - d.width * r.x) / n) * k), p >= d.height && (f = (f + r.offsetY + (p * r.y - d.height * r.y) / p) * h), k *= 1 / (n / d.width), h *= 1 / (p / d.height),
                                n = d.width, p = d.height)
                    }
                    var q = this.vj() * b.scale,
                        u = k * h / (n * q * p * q),
                        s = Nq[this.source],
                        q = null;
                    if (c.Vr && void 0 !== s && 16 < u)
                    {
                        2 > s.Gp.length && (Tq(s, 4, l, m), Tq(s, 16, l, m));
                        for (var l = s.Gp, m = l.length, q = l[0], t = 0; t < m; t++)
                            if (l[t].sq * l[t].sq < u) q = l[t];
                            else break
                    }
                    if (!b.yr)
                    {
                        if (null === this.vp)
                            if (null === this.Ue) this.vp = !1;
                            else
                            {
                                l = (new Vc(null)).Gk;
                                l.drawImage(this.Ue, 0, 0);
                                try
                                {
                                    l.getImageData(0, 0, 1, 1).data[3] && (this.vp = !1), this.vp = !1
                                }
                                catch (x)
                                {
                                    this.vp = !0
                                }
                            }
                        if (this.vp) return
                    }
                    l = 0;
                    n < d.width && (l = r.offsetX + (d.width * r.x - n * r.x));
                    m = 0;
                    p <
                    d.height && (m = r.offsetY + (d.height * r.y - p * r.y));
                    switch (this.eu)
                    {
                        case vo:
                            a.translate(Math.min(d.width, n), 0);
                            a.scale(-1, 1);
                            break;
                        case uo:
                            a.translate(0, Math.min(d.height, p));
                            a.scale(1, -1);
                            break;
                        case wo:
                            a.translate(Math.min(d.width, n), Math.min(d.height, p)), a.scale(-1, -1)
                    }
                    if (b.wj("pictureRatioOptimization") && !b.Bz && void 0 !== s && null !== q && 1 !== q.sq)
                    {
                        a.save();
                        s = q.sq;
                        try
                        {
                            a.drawImage(q.source, e / s, f / s, Math.min(q.source.width, k / s), Math.min(q.source.height, h / s), l, m, Math.min(d.width, n), Math.min(d.height, p))
                        }
                        catch (v)
                        {
                            this.Nv = !1
                        }
                        a.restore()
                    }
                    else try
                    {
                        a.drawImage(c, e, f, k, h, l, m, Math.min(d.width, n), Math.min(d.height, p))
                    }
                    catch (z)
                    {
                        this.Nv = !1
                    }
                    switch (this.eu)
                    {
                        case vo:
                            a.scale(-1, 1);
                            a.translate(-Math.min(d.width, n), 0);
                            break;
                        case uo:
                            a.scale(1, -1);
                            a.translate(0, -Math.min(d.height, p));
                            break;
                        case wo:
                            a.scale(-1, -1), a.translate(-Math.min(d.width, n), -Math.min(d.height, p))
                    }
                }
            }
        }
    };
    w.u(yl,
        {
            Ja: "naturalBounds"
        }, function ()
        {
            return this.Wc
        });
    yl.prototype.On = function (a, b, c, d)
    {
        var e = this.Ca,
            f = Ho(this, !0),
            h = this.Ue,
            k = this.Az;
        if (k || !this.jw && h && h.complete) this.jw = !0;
        null === h && (isFinite(e.width) || (a = 0), isFinite(e.height) || (b = 0));
        isFinite(e.width) || f === Ee || f === so ? (isFinite(a) || (a = this.Kj.I() ? this.Kj.width : k ? +h.width : h.naturalWidth), c = 0) : null !== h && !1 !== this.jw && (a = this.Kj.I() ? this.Kj.width : k ? +h.width : h.naturalWidth);
        isFinite(e.height) || f === Ee || f === ro ? (isFinite(b) || (b = this.Kj.I() ? this.Kj.height : k ? +h.height : h.naturalHeight), d = 0) : null !== h && !1 !==
            this.jw && (b = this.Kj.I() ? this.Kj.height : k ? +h.height : h.naturalHeight);
        isFinite(e.width) && (a = e.width);
        isFinite(e.height) && (b = e.height);
        e = this.Gf;
        f = this.si;
        c = Math.max(c, f.width);
        d = Math.max(d, f.height);
        a = Math.min(e.width, a);
        b = Math.min(e.height, b);
        a = Math.max(c, a);
        b = Math.max(d, b);
        null === h || h.complete || (isFinite(a) || (a = 0), isFinite(b) || (b = 0));
        Ua(this.Wc, a, b);
        Eo(this, 0, 0, a, b)
    };
    yl.prototype.pj = function (a, b, c, d)
    {
        Jo(this, a, b, c, d)
    };

    function Sq(a)
    {
        this.Gp = [new Uq(a, 1)]
    }

    function Tq(a, b, c, d)
    {
        var e = new Vc(null),
            f = e.Gk,
            h = 1 / b;
        e.width = c / b;
        e.height = d / b;
        b = new Uq(e.Od, b);
        c = a.Gp[a.Gp.length - 1];
        f.setTransform(h * c.sq, 0, 0, h * c.sq, 0, 0);
        f.drawImage(c.source, 0, 0);
        a.Gp.push(b)
    }

    function Uq(a, b)
    {
        this.source = a;
        this.sq = b
    }

    function la()
    {
        this.o = new Be;
        this.Yb = null
    }
    g = la.prototype;
    g.reset = function ()
    {
        this.o = new Be;
        this.Yb = null
    };

    function M(a, b, c, d, e, f)
    {
        null === a.o && w.k("StreamGeometryContext has been closed");
        void 0 !== e && !0 === e ? (null === a.Yb && w.k("Need to call beginFigure first"), d = new wf(Ue), d.C = b, d.D = c, a.Yb.wb.add(d)) : (a.Yb = new De, a.Yb.ha = b, a.Yb.fa = c, a.Yb.tu = d, a.o.fc.add(a.Yb));
        void 0 !== f && (a.Yb.Qo = f)
    }

    function O(a)
    {
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Yb && w.k("Need to call beginFigure first");
        var b = a.Yb.wb.length;
        0 < b && a.Yb.wb.ea(b - 1).close()
    }

    function Re(a)
    {
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Yb && w.k("Need to call beginFigure first");
        0 < a.Yb.wb.length && (a.Yb.tu = !0)
    }
    g.eb = function (a)
    {
        null === this.o && w.k("StreamGeometryContext has been closed");
        null === this.Yb && w.k("Need to call beginFigure first");
        this.Yb.hm = a
    };
    g.moveTo = function (a, b, c)
    {
        void 0 === c && (c = !1);
        null === this.o && w.k("StreamGeometryContext has been closed");
        null === this.Yb && w.k("Need to call beginFigure first");
        var d = new wf(Ue);
        d.C = a;
        d.D = b;
        c && d.close();
        this.Yb.wb.add(d)
    };
    g.lineTo = function (a, b, c)
    {
        void 0 === c && (c = !1);
        null === this.o && w.k("StreamGeometryContext has been closed");
        null === this.Yb && w.k("Need to call beginFigure first");
        var d = new wf(Je);
        d.C = a;
        d.D = b;
        c && d.close();
        this.Yb.wb.add(d)
    };

    function N(a, b, c, d, e, f, h, k)
    {
        void 0 === k && (k = !1);
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Yb && w.k("Need to call beginFigure first");
        var l = new wf(Ve);
        l.wc = b;
        l.Rc = c;
        l.Dh = d;
        l.Eh = e;
        l.C = f;
        l.D = h;
        k && l.close();
        a.Yb.wb.add(l)
    }

    function Pe(a, b, c, d, e)
    {
        var f;
        void 0 === f && (f = !1);
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Yb && w.k("Need to call beginFigure first");
        var h = new wf(We);
        h.wc = b;
        h.Rc = c;
        h.C = d;
        h.D = e;
        f && h.close();
        a.Yb.wb.add(h)
    }
    g.arcTo = function (a, b, c, d, e, f, h)
    {
        void 0 === f && (f = 0);
        void 0 === h && (h = !1);
        null === this.o && w.k("StreamGeometryContext has been closed");
        null === this.Yb && w.k("Need to call beginFigure first");
        var k = new wf(pf);
        k.Ae = a;
        k.uf = b;
        k.la = c;
        k.ra = d;
        k.radiusX = e;
        k.radiusY = 0 !== f ? f : e;
        h && k.close();
        this.Yb.wb.add(k)
    };

    function Qe(a, b, c, d, e, f, h, k)
    {
        var l;
        void 0 === l && (l = !1);
        null === a.o && w.k("StreamGeometryContext has been closed");
        null === a.Yb && w.k("Need to call beginFigure first");
        b = new wf(qf, h, k, b, c, d, e, f);
        l && b.close();
        a.Yb.wb.add(b)
    }

    function Vq(a)
    {
        a = Wq(a);
        var b = w.gb();
        b[0] = a[0];
        for (var c = 1, d = 1; d < a.length;) b[c] = a[d], b[c + 1] = a[d], b[c + 2] = a[d + 1], d += 2, c += 3;
        w.ta(a);
        return b
    }

    function Wq(a)
    {
        var b = Xq(a),
            c = w.gb(),
            d = Math.floor(b.length / 2),
            e = b.length - 1;
        a = 0 === a % 2 ? 2 : 1;
        for (var f = 0; f < e; f++)
        {
            var h = b[f],
                k = b[f + 1],
                l = b[(d + f - 1) % e],
                m = b[(d + f + a) % e];
            c[2 * f] = h;
            c[2 * f + 1] = le(h.x, h.y, l.x, l.y, k.x, k.y, m.x, m.y, new y)
        }
        c[c.length] = c[0];
        w.ta(b);
        return c
    }

    function Xq(a)
    {
        for (var b = w.gb(), c = 1.5 * Math.PI, d = 0, e = 0; e < a; e++) d = 2 * Math.PI / a * e + c, b[e] = new y(.5 + .5 * Math.cos(d), .5 + .5 * Math.sin(d));
        b.push(b[0]);
        return b
    }
    var lq = {
            None: "Rectangle",
            Rectangle: function (a, b, c)
            {
                a = new Be;
                a.type = Ge;
                a.ha = 0;
                a.fa = 0;
                a.C = b;
                a.D = c;
                return a
            },
            Square: function (a, b, c)
            {
                a = new Be;
                a.$d = Sj;
                a.type = Ge;
                a.ha = 0;
                a.fa = 0;
                a.C = Math.min(b, c);
                a.D = Math.min(b, c);
                return a
            },
            Ellipse: function (a, b, c)
            {
                a = new Be;
                a.type = He;
                a.ha = 0;
                a.fa = 0;
                a.C = b;
                a.D = c;
                a.A = Nd;
                a.B = Od;
                return a
            },
            Circle: function (a, b, c)
            {
                a = new Be;
                a.$d = Sj;
                a.type = He;
                a.ha = 0;
                a.fa = 0;
                a.C = Math.min(b, c);
                a.D = Math.min(b, c);
                a.A = Nd;
                a.B = Od;
                return a
            },
            Connector: "Ellipse",
            TriangleRight: function (a, b, c)
            {
                a = new Be;
                var d = new De,
                    e = new wf;
                e.C = b;
                e.D = .5 * c;
                d.wb.add(e);
                b = new wf;
                b.C = 0;
                b.D = c;
                d.wb.add(b.close());
                a.fc.add(d);
                a.A = new K(0, .25);
                a.B = new K(.5, .75);
                return a
            },
            TriangleDown: function (a, b, c)
            {
                a = new Be;
                var d = new De,
                    e = new wf;
                e.C = b;
                e.D = 0;
                d.wb.add(e);
                e = new wf;
                e.C = .5 * b;
                e.D = c;
                d.wb.add(e.close());
                a.fc.add(d);
                a.A = new K(.25, 0);
                a.B = new K(.75, .5);
                return a
            },
            TriangleLeft: function (a, b, c)
            {
                a = new Be;
                var d = new De;
                d.ha = b;
                d.fa = c;
                var e = new wf;
                e.C = 0;
                e.D = .5 * c;
                d.wb.add(e);
                c = new wf;
                c.C = b;
                c.D = 0;
                d.wb.add(c.close());
                a.fc.add(d);
                a.A = new K(.5, .25);
                a.B = new K(1,
                    .75);
                return a
            },
            TriangleUp: function (a, b, c)
            {
                a = new Be;
                var d = new De;
                d.ha = b;
                d.fa = c;
                var e = new wf;
                e.C = 0;
                e.D = c;
                d.wb.add(e);
                c = new wf;
                c.C = .5 * b;
                c.D = 0;
                d.wb.add(c.close());
                a.fc.add(d);
                a.A = new K(.25, .5);
                a.B = new K(.75, 1);
                return a
            },
            Line1: function (a, b, c)
            {
                a = new Be;
                a.type = Fe;
                a.ha = 0;
                a.fa = 0;
                a.C = b;
                a.D = c;
                return a
            },
            Line2: function (a, b, c)
            {
                a = new Be;
                a.type = Fe;
                a.ha = b;
                a.fa = 0;
                a.C = 0;
                a.D = c;
                return a
            },
            MinusLine: "LineH",
            LineH: function (a, b, c)
            {
                a = new Be;
                a.type = Fe;
                a.ha = 0;
                a.fa = c / 2;
                a.C = b;
                a.D = c / 2;
                return a
            },
            LineV: function (a, b, c)
            {
                a = new Be;
                a.type =
                    Fe;
                a.ha = b / 2;
                a.fa = 0;
                a.C = b / 2;
                a.D = c;
                return a
            },
            BarH: "Rectangle",
            BarV: "Rectangle",
            Curve1: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                N(a, bd * b, 0, 1 * b, (1 - bd) * c, b, c);
                b = a.o;
                w.q(a);
                return b
            },
            Curve2: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                N(a, 0, bd * c, (1 - bd) * b, c, b, c);
                b = a.o;
                w.q(a);
                return b
            },
            Curve3: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, 0, !1);
                N(a, 1 * b, bd * c, bd * b, 1 * c, 0, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            Curve4: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, 0, !1);
                N(a, (1 - bd) * b, 0, 0, (1 - bd) * c, 0, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            Alternative: "Triangle",
            Merge: "Triangle",
            Triangle: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 0 * c, !0);
                a.lineTo(0 * b, 1 * c);
                a.lineTo(1 * b, 1 * c, !0);
                b = a.o;
                b.A = new K(.25, .5);
                b.B = new K(.75, 1);
                w.q(a);
                return b
            },
            Decision: "Diamond",
            Diamond: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 0, !0);
                a.lineTo(0, .5 * c);
                a.lineTo(.5 * b, 1 * c);
                a.lineTo(1 * b, .5 * c, !0);
                b = a.o;
                b.A = new K(.25, .25);
                b.B = new K(.75, .75);
                w.q(a);
                return b
            },
            Pentagon: function (a, b, c)
            {
                var d = Xq(5);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 5 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.2, .22);
                b.B = new K(.8,
                    .9);
                w.q(a);
                return b
            },
            DataTransmission: "Hexagon",
            Hexagon: function (a, b, c)
            {
                var d = Xq(6);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 6 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.07, .25);
                b.B = new K(.93, .75);
                w.q(a);
                return b
            },
            Heptagon: function (a, b, c)
            {
                var d = Xq(7);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 7 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.2, .15);
                b.B = new K(.8, .85);
                w.q(a);
                return b
            },
            Octagon: function (a, b, c)
            {
                var d = Xq(8);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 8 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.15, .15);
                b.B = new K(.85, .85);
                w.q(a);
                return b
            },
            Nonagon: function (a, b, c)
            {
                var d = Xq(9);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 9 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.17, .13);
                b.B = new K(.82, .82);
                w.q(a);
                return b
            },
            Decagon: function (a, b, c)
            {
                var d = Xq(10);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 10 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.16, .16);
                b.B = new K(.84, .84);
                w.q(a);
                return b
            },
            Dodecagon: function (a, b, c)
            {
                var d = Xq(12);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 12 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.16, .16);
                b.B = new K(.84, .84);
                w.q(a);
                return b
            },
            FivePointedStar: function (a, b, c)
            {
                var d = Wq(5);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 10 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.312, .383);
                b.B = new K(.693, .765);
                w.q(a);
                return b
            },
            SixPointedStar: function (a, b, c)
            {
                var d = Wq(6);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 12 > e; e++) a.lineTo(d[e].x *
                    b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.17, .251);
                b.B = new K(.833, .755);
                w.q(a);
                return b
            },
            SevenPointedStar: function (a, b, c)
            {
                var d = Wq(7);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 14 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.363, .361);
                b.B = new K(.641, .709);
                w.q(a);
                return b
            },
            EightPointedStar: function (a, b, c)
            {
                var d = Wq(8);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 16 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.252, .255);
                b.B = new K(.75, .75);
                w.q(a);
                return b
            },
            NinePointedStar: function (a,
                                       b, c)
            {
                var d = Wq(9);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 18 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.355, .361);
                b.B = new K(.645, .651);
                w.q(a);
                return b
            },
            TenPointedStar: function (a, b, c)
            {
                var d = Wq(10);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; 20 > e; e++) a.lineTo(d[e].x * b, d[e].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.281, .261);
                b.B = new K(.723, .748);
                w.q(a);
                return b
            },
            FivePointedBurst: function (a, b, c)
            {
                var d = Vq(5);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; e < d.length; e += 3) N(a, d[e].x *
                    b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.312, .383);
                b.B = new K(.693, .765);
                w.q(a);
                return b
            },
            SixPointedBurst: function (a, b, c)
            {
                var d = Vq(6);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; e < d.length; e += 3) N(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.17, .251);
                b.B = new K(.833, .755);
                w.q(a);
                return b
            },
            SevenPointedBurst: function (a, b, c)
            {
                var d = Vq(7);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; e < d.length; e += 3) N(a, d[e].x *
                    b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.363, .361);
                b.B = new K(.641, .709);
                w.q(a);
                return b
            },
            EightPointedBurst: function (a, b, c)
            {
                var d = Vq(8);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; e < d.length; e += 3) N(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.252, .255);
                b.B = new K(.75, .75);
                w.q(a);
                return b
            },
            NinePointedBurst: function (a, b, c)
            {
                var d = Vq(9);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; e < d.length; e += 3) N(a, d[e].x *
                    b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.355, .361);
                b.B = new K(.645, .651);
                w.q(a);
                return b
            },
            TenPointedBurst: function (a, b, c)
            {
                var d = Vq(10);
                a = w.s();
                M(a, d[0].x * b, d[0].y * c, !0);
                for (var e = 1; e < d.length; e += 3) N(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
                w.ta(d);
                O(a);
                b = a.o;
                b.A = new K(.281, .261);
                b.B = new K(.723, .748);
                w.q(a);
                return b
            },
            Cloud: function (a, b, c)
            {
                a = w.s();
                M(a, .08034461 * b, .1944299 * c, !0);
                N(a, -.09239631 * b, .07836421 * c, .1406031 * b, -.0542823 * c, .2008615 *
                    b, .05349299 * c);
                N(a, .2450511 * b, -.00697547 * c, .3776197 * b, -.01112067 * c, .4338609 * b, .074219 * c);
                N(a, .4539471 * b, 0, .6066018 * b, -.02526587 * c, .6558228 * b, .07004196 * c);
                N(a, .6914277 * b, -.01904177 * c, .8921095 * b, -.01220843 * c, .8921095 * b, .08370865 * c);
                N(a, 1.036446 * b, .04105738 * c, 1.020377 * b, .3022052 * c, .9147671 * b, .3194596 * c);
                N(a, 1.04448 * b, .360238 * c, .992256 * b, .5219009 * c, .9082935 * b, .562044 * c);
                N(a, 1.032337 * b, .5771781 * c, 1.018411 * b, .8120651 * c, .9212406 * b, .8217117 * c);
                N(a, 1.028411 * b, .9571472 * c, .8556702 * b, 1.052487 * c, .7592566 * b, .9156953 *
                    c);
                N(a, .7431877 * b, 1.009325 * c, .5624123 * b, 1.021761 * c, .5101666 * b, .9310455 * c);
                N(a, .4820677 * b, 1.031761 * c, .3030112 * b, 1.002796 * c, .2609328 * b, .9344623 * c);
                N(a, .2329994 * b, 1.01518 * c, .03213784 * b, 1.01518 * c, .08034461 * b, .870098 * c);
                N(a, -.02812061 * b, .9032597 * c, -.01205169 * b, .6835638 * c, .06829292 * b, .6545475 * c);
                N(a, -.01812061 * b, .6089503 * c, -.00606892 * b, .4555777 * c, .06427569 * b, .4265613 * c);
                N(a, -.01606892 * b, .3892545 * c, -.01205169 * b, .1944299 * c, .08034461 * b, .1944299 * c);
                O(a);
                b = a.o;
                b.A = new K(.1, .1);
                b.B = new K(.9, .9);
                w.q(a);
                return b
            },
            Gate: "Crescent",
            Crescent: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                N(a, 1 * b, 0, 1 * b, 1 * c, 0, 1 * c);
                N(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
                O(a);
                b = a.o;
                b.A = new K(.511, .19);
                b.B = new K(.776, .76);
                w.q(a);
                return b
            },
            FramedRectangle: function (a, b, c)
            {
                var d = w.s(),
                    e = a ? a.Hc : NaN;
                a = a ? a.Nu : NaN;
                isNaN(e) && (e = .1);
                isNaN(a) && (a = .1);
                M(d, 0, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(0, 1 * c, !0);
                M(d, e * b, a * c, !1, !0);
                d.lineTo(e * b, (1 - a) * c);
                d.lineTo((1 - e) * b, (1 - a) * c);
                d.lineTo((1 - e) * b, a * c, !0);
                b = d.o;
                b.A = new K(e, a);
                b.B = new K(1 - e, 1 - a);
                w.q(d);
                return b
            },
            Delay: "HalfEllipse",
            HalfEllipse: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                N(a, bd * b, 0, 1 * b, (.5 - bd / 2) * c, 1 * b, .5 * c);
                N(a, 1 * b, (.5 + bd / 2) * c, bd * b, 1 * c, 0, 1 * c);
                O(a);
                b = a.o;
                b.A = new K(0, .2);
                b.B = new K(.75, .8);
                w.q(a);
                return b
            },
            Heart: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 1 * c, !0);
                N(a, .1 * b, .8 * c, 0, .5 * c, 0 * b, .3 * c);
                N(a, 0 * b, 0, .45 * b, 0, .5 * b, .3 * c);
                N(a, .55 * b, 0, 1 * b, 0, 1 * b, .3 * c);
                N(a, b, .5 * c, .9 * b, .8 * c, .5 * b, 1 * c);
                O(a);
                b = a.o;
                b.A = new K(.15, .29);
                b.B = new K(.86, .68);
                w.q(a);
                return b
            },
            Spade: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 0, !0);
                a.lineTo(.51 * b, .01 * c);
                N(a, .6 * b, .2 * c, b, .25 * c, b, .5 * c);
                N(a, b, .8 * c, .6 * b, .8 * c, .55 * b, .7 * c);
                N(a, .5 * b, .75 * c, .55 * b, .95 * c, .75 * b, c);
                a.lineTo(.25 * b, c);
                N(a, .45 * b, .95 * c, .5 * b, .75 * c, .45 * b, .7 * c);
                N(a, .4 * b, .8 * c, 0, .8 * c, 0, .5 * c);
                N(a, 0, .25 * c, .4 * b, .2 * c, .49 * b, .01 * c);
                O(a);
                b = a.o;
                b.A = new K(.19, .26);
                b.B = new K(.8, .68);
                w.q(a);
                return b
            },
            Club: function (a, b, c)
            {
                a = w.s();
                M(a, .4 * b, .6 * c, !0);
                N(a, .5 * b, .75 * c, .45 * b, .95 * c, .15 * b, 1 * c);
                a.lineTo(.85 * b, c);
                N(a, .55 * b, .95 * c, .5 * b, .75 * c, .6 * b, .6 * c);
                var d = .2,
                    e = .3,
                    f = 0,
                    h = 4 * (Math.SQRT2 - 1) / 3 * d;
                N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) *
                    b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
                N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
                N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
                N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e + .05) * b, (.5 - h + f - .02) * c, .65 * b, .36771243 * c);
                d = .2;
                e = 0;
                f = -.3;
                h = 4 * (Math.SQRT2 - 1) / 3 * d;
                N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
                N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
                N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
                N(a, (.5 - d +
                    e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, .35 * b, .36771243 * c);
                d = .2;
                e = -.3;
                f = 0;
                h = 4 * (Math.SQRT2 - 1) / 3 * d;
                N(a, (.5 + d + e - .05) * b, (.5 - h + f - .02) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
                N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
                N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
                N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, .4 * b, .6 * c);
                O(a);
                b = a.o;
                b.A = new K(.06, .39);
                b.B = new K(.93, .58);
                w.q(a);
                return b
            },
            Ring: function (a, b, c)
            {
                a = w.s();
                var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
                M(a, b, .5 *
                    c, !0);
                N(a, b, (.5 - d) * c, (.5 + d) * b, 0, .5 * b, 0);
                N(a, (.5 - d) * b, 0, 0, (.5 - d) * c, 0, .5 * c);
                N(a, 0, (.5 + d) * c, (.5 - d) * b, c, .5 * b, c);
                N(a, (.5 + d) * b, c, b, (.5 + d) * c, b, .5 * c);
                d = 4 * (Math.SQRT2 - 1) / 3 * .4;
                M(a, .5 * b, .1 * c, !0, !0);
                N(a, (.5 + d) * b, .1 * c, .9 * b, (.5 - d) * c, .9 * b, .5 * c);
                N(a, .9 * b, (.5 + d) * c, (.5 + d) * b, .9 * c, .5 * b, .9 * c);
                N(a, (.5 - d) * b, .9 * c, .1 * b, (.5 + d) * c, .1 * b, .5 * c);
                N(a, .1 * b, (.5 - d) * c, (.5 - d) * b, .1 * c, .5 * b, .1 * c);
                b = a.o;
                b.A = new K(.146, .146);
                b.B = new K(.853, .853);
                b.$d = Sj;
                w.q(a);
                return b
            },
            YinYang: function (a, b, c)
            {
                var d = .5;
                a = w.s();
                d = .5;
                M(a, .5 * b, 0, !0);
                a.arcTo(270,
                    180, .5 * b, .5 * b, .5 * b);
                N(a, 1 * b, d * c, 0, d * c, d * b, 0, !0);
                var d = .1,
                    e = .25;
                M(a, (.5 + d) * b, e * c, !0, !0);
                a.arcTo(0, -360, .5 * b, c * e, d * b);
                O(a);
                M(a, .5 * b, 0, !1);
                a.arcTo(270, -180, .5 * b, .5 * b, .5 * b);
                a.eb(!1);
                e = .75;
                M(a, (.5 + d) * b, e * c, !0);
                a.arcTo(0, 360, .5 * b, c * e, d * b);
                O(a);
                b = a.o;
                b.$d = Sj;
                w.q(a);
                return b
            },
            Peace: function (a, b, c)
            {
                a = w.s();
                var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
                M(a, b, .5 * c, !0);
                N(a, b, (.5 - d) * c, (.5 + d) * b, 0, .5 * b, 0);
                N(a, (.5 - d) * b, 0, 0, (.5 - d) * c, 0, .5 * c);
                N(a, 0, (.5 + d) * c, (.5 - d) * b, c, .5 * b, c);
                N(a, (.5 + d) * b, c, b, (.5 + d) * c, b, .5 * c);
                d = 4 * (Math.SQRT2 - 1) / 3 * .4;
                M(a, .5 * b, .1 * c, !0, !0);
                N(a, (.5 + d) * b, .1 * c, .9 * b, (.5 - d) * c, .9 * b, .5 * c);
                N(a, .9 * b, (.5 + d) * c, (.5 + d) * b, .9 * c, .5 * b, .9 * c);
                N(a, (.5 - d) * b, .9 * c, .1 * b, (.5 + d) * c, .1 * b, .5 * c);
                N(a, .1 * b, (.5 - d) * c, (.5 - d) * b, .1 * c, .5 * b, .1 * c);
                var d = .07,
                    e = 0,
                    f = -.707 * .11,
                    h = 4 * (Math.SQRT2 - 1) / 3 * d;
                M(a, (.5 + d + e) * b, (.5 + f) * c, !0);
                N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
                N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
                N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
                N(a, (.5 + h + e) * b, (.5 + d + f) *
                    c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
                d = .07;
                e = -.707 * .11;
                f = .707 * .11;
                h = 4 * (Math.SQRT2 - 1) / 3 * d;
                M(a, (.5 + d + e) * b, (.5 + f) * c, !0);
                N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
                N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
                N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
                N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
                d = .07;
                e = .707 * .11;
                f = .707 * .11;
                h = 4 * (Math.SQRT2 - 1) / 3 * d;
                M(a, (.5 + d + e) * b, (.5 + f) * c, !0);
                N(a, (.5 + d + e) * b, (.5 - h +
                    f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
                N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
                N(a, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
                N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
                b = a.o;
                b.A = new K(.146, .146);
                b.B = new K(.853, .853);
                b.$d = Sj;
                w.q(a);
                return b
            },
            NotAllowed: function (a, b, c)
            {
                var d = .5 * bd,
                    e = .5;
                a = w.s();
                M(a, .5 * b, (.5 - e) * c, !0);
                N(a, (.5 - d) * b, (.5 - e) * c, (.5 - e) * b, (.5 - d) * c, (.5 - e) * b, .5 * c);
                N(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b,
                    (.5 + e) * c);
                N(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 + e) * b, .5 * c);
                N(a, (.5 + e) * b, (.5 - d) * c, (.5 + d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
                var e = .4,
                    d = .4 * bd,
                    f = w.K(),
                    h = w.K(),
                    k = w.K(),
                    l = w.K();
                Xd(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .42, f, h, k, l, l);
                var m = w.K(),
                    n = w.K(),
                    p = w.K();
                Xd(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .58, l, l, p, m, n);
                var q = w.K(),
                    r = w.K(),
                    s = w.K();
                Xd(.5, .5 + e, .5 - d, .5 + e, .5 - e, .5 + d, .5 - e, .5, .42, q, r, s, l, l);
                var u = w.K(),
                    t = w.K(),
                    x = w.K();
                Xd(.5, .5 + e, .5 - d, .5 + e, .5 - e, .5 + d, .5 - e, .5, .58, l, l, x, u, t);
                M(a, x.x * b, x.y * c, !0, !0);
                N(a, u.x * b,
                    u.y * c, t.x * b, t.y * c, (.5 - e) * b, .5 * c);
                N(a, (.5 - e) * b, (.5 - d) * c, (.5 - d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
                N(a, f.x * b, f.y * c, h.x * b, h.y * c, k.x * b, k.y * c);
                a.lineTo(x.x * b, x.y * c);
                O(a);
                M(a, s.x * b, s.y * c, !0, !0);
                a.lineTo(p.x * b, p.y * c);
                N(a, m.x * b, m.y * c, n.x * b, n.y * c, (.5 + e) * b, .5 * c);
                N(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
                N(a, q.x * b, q.y * c, r.x * b, r.y * c, s.x * b, s.y * c);
                O(a);
                w.v(f);
                w.v(h);
                w.v(k);
                w.v(l);
                w.v(m);
                w.v(n);
                w.v(p);
                w.v(q);
                w.v(r);
                w.v(s);
                w.v(u);
                w.v(t);
                w.v(x);
                b = a.o;
                w.q(a);
                b.$d = Sj;
                return b
            },
            Fragile: function (a, b, c)
            {
                a = w.s();
                M(a,
                    0, 0, !0);
                a.lineTo(.25 * b, 0);
                a.lineTo(.2 * b, .15 * c);
                a.lineTo(.3 * b, .25 * c);
                a.lineTo(.29 * b, .33 * c);
                a.lineTo(.35 * b, .25 * c);
                a.lineTo(.3 * b, .15 * c);
                a.lineTo(.4 * b, 0);
                a.lineTo(1 * b, 0);
                N(a, 1 * b, .25 * c, .75 * b, .5 * c, .55 * b, .5 * c);
                a.lineTo(.55 * b, .9 * c);
                a.lineTo(.7 * b, .9 * c);
                a.lineTo(.7 * b, 1 * c);
                a.lineTo(.3 * b, 1 * c);
                a.lineTo(.3 * b, .9 * c);
                a.lineTo(.45 * b, .9 * c);
                a.lineTo(.45 * b, .5 * c);
                N(a, .25 * b, .5 * c, 0, .25 * c, 0, 0);
                O(a);
                b = a.o;
                b.A = new K(.25, 0);
                b.B = new K(.75, .4);
                w.q(a);
                return b
            },
            HourGlass: function (a, b, c)
            {
                a = w.s();
                M(a, .65 * b, .5 * c, !0);
                a.lineTo(1 * b,
                    1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(.35 * b, .5 * c);
                a.lineTo(0, 0);
                a.lineTo(1 * b, 0);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            Lightning: function (a, b, c)
            {
                a = w.s();
                M(a, 0 * b, .55 * c, !0);
                a.lineTo(.75 * b, 0);
                a.lineTo(.25 * b, .45 * c);
                a.lineTo(.9 * b, .48 * c);
                a.lineTo(.4 * b, 1 * c);
                a.lineTo(.65 * b, .55 * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            Parallelogram1: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .1);
                var d = w.s();
                M(d, a * b, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo((1 - a) * b, 1 * c);
                d.lineTo(0, 1 * c);
                O(d);
                b = d.o;
                b.A = new K(a, 0);
                b.B = new K(1 - a, 1);
                w.q(d);
                return b
            },
            Input: "Output",
            Output: function (a,
                              b, c)
            {
                a = w.s();
                M(a, 0, 1 * c, !0);
                a.lineTo(.1 * b, 0);
                a.lineTo(1 * b, 0);
                a.lineTo(.9 * b, 1 * c);
                O(a);
                b = a.o;
                b.A = new K(.1, 0);
                b.B = new K(.9, 1);
                w.q(a);
                return b
            },
            Parallelogram2: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .25);
                var d = w.s();
                M(d, a * b, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo((1 - a) * b, 1 * c);
                d.lineTo(0, 1 * c);
                O(d);
                b = d.o;
                b.A = new K(a, 0);
                b.B = new K(1 - a, 1);
                w.q(d);
                return b
            },
            ThickCross: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .25);
                var d = w.s();
                M(d, (.5 - a / 2) * b, 0, !0);
                d.lineTo((.5 + a / 2) * b, 0);
                d.lineTo((.5 + a / 2) * b, (.5 - a / 2) * c);
                d.lineTo(1 * b, (.5 -
                    a / 2) * c);
                d.lineTo(1 * b, (.5 + a / 2) * c);
                d.lineTo((.5 + a / 2) * b, (.5 + a / 2) * c);
                d.lineTo((.5 + a / 2) * b, 1 * c);
                d.lineTo((.5 - a / 2) * b, 1 * c);
                d.lineTo((.5 - a / 2) * b, (.5 + a / 2) * c);
                d.lineTo(0, (.5 + a / 2) * c);
                d.lineTo(0, (.5 - a / 2) * c);
                d.lineTo((.5 - a / 2) * b, (.5 - a / 2) * c);
                O(d);
                b = d.o;
                b.A = new K(.5 - a / 2, .5 - a / 2);
                b.B = new K(.5 + a / 2, .5 + a / 2);
                w.q(d);
                return b
            },
            ThickX: function (a, b, c)
            {
                a = .25 / Math.SQRT2;
                var d = w.s();
                M(d, .3 * b, 0, !0);
                d.lineTo(.5 * b, .2 * c);
                d.lineTo(.7 * b, 0);
                d.lineTo(1 * b, .3 * c);
                d.lineTo(.8 * b, .5 * c);
                d.lineTo(1 * b, .7 * c);
                d.lineTo(.7 * b, 1 * c);
                d.lineTo(.5 * b, .8 *
                    c);
                d.lineTo(.3 * b, 1 * c);
                d.lineTo(0, .7 * c);
                d.lineTo(.2 * b, .5 * c);
                d.lineTo(0, .3 * c);
                O(d);
                b = d.o;
                b.A = new K(.5 - a, .5 - a);
                b.B = new K(.5 + a, .5 + a);
                w.q(d);
                return b
            },
            ThinCross: function (a, b, c)
            {
                var d = a ? a.Hc : NaN;
                isNaN(d) && (d = .1);
                a = w.s();
                M(a, (.5 - d / 2) * b, 0, !0);
                a.lineTo((.5 + d / 2) * b, 0);
                a.lineTo((.5 + d / 2) * b, (.5 - d / 2) * c);
                a.lineTo(1 * b, (.5 - d / 2) * c);
                a.lineTo(1 * b, (.5 + d / 2) * c);
                a.lineTo((.5 + d / 2) * b, (.5 + d / 2) * c);
                a.lineTo((.5 + d / 2) * b, 1 * c);
                a.lineTo((.5 - d / 2) * b, 1 * c);
                a.lineTo((.5 - d / 2) * b, (.5 + d / 2) * c);
                a.lineTo(0, (.5 + d / 2) * c);
                a.lineTo(0, (.5 - d / 2) * c);
                a.lineTo((.5 -
                    d / 2) * b, (.5 - d / 2) * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            ThinX: function (a, b, c)
            {
                a = w.s();
                M(a, .1 * b, 0, !0);
                a.lineTo(.5 * b, .4 * c);
                a.lineTo(.9 * b, 0);
                a.lineTo(1 * b, .1 * c);
                a.lineTo(.6 * b, .5 * c);
                a.lineTo(1 * b, .9 * c);
                a.lineTo(.9 * b, 1 * c);
                a.lineTo(.5 * b, .6 * c);
                a.lineTo(.1 * b, 1 * c);
                a.lineTo(0, .9 * c);
                a.lineTo(.4 * b, .5 * c);
                a.lineTo(0, .1 * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            RightTriangle: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(0, 1 * c);
                O(a);
                b = a.o;
                b.A = new K(0, .5);
                b.B = new K(.5, 1);
                w.q(a);
                return b
            },
            RoundedIBeam: function (a, b, c)
            {
                a =
                    w.s();
                M(a, 0, 0, !0);
                a.lineTo(1 * b, 0);
                N(a, .5 * b, .25 * c, .5 * b, .75 * c, 1 * b, 1 * c);
                a.lineTo(0, 1 * c);
                N(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            RoundedRectangle: function (a, b, c)
            {
                var d = a ? a.Hc : NaN;
                isNaN(d) && (d = 5);
                d = Math.min(d, b / 3);
                d = Math.min(d, c / 3);
                a = d * bd;
                var e = w.s();
                M(e, d, 0, !0);
                e.lineTo(b - d, 0);
                N(e, b - a, 0, b, a, b, d);
                e.lineTo(b, c - d);
                N(e, b, c - a, b - a, c, b - d, c);
                e.lineTo(d, c);
                N(e, a, c, 0, c - a, 0, c - d);
                e.lineTo(0, d);
                N(e, 0, a, a, 0, d, 0);
                O(e);
                b = e.o;
                1 < a ? (b.A = new K(0, 0, a, a), b.B = new K(1, 1, -a, -a)) : (b.A = zb, b.B = Sb);
                w.q(e);
                return b
            },
            Border: function (a, b, c)
            {
                var d = a ? a.Hc : NaN;
                isNaN(d) && (d = 5);
                d = Math.min(d, b / 3);
                d = Math.min(d, c / 3);
                a = w.s();
                M(a, d, 0, !0);
                a.lineTo(b - d, 0);
                N(a, b - 0, 0, b, 0, b, d);
                a.lineTo(b, c - d);
                N(a, b, c - 0, b - 0, c, b - d, c);
                a.lineTo(d, c);
                N(a, 0, c, 0, c - 0, 0, c - d);
                a.lineTo(0, d);
                N(a, 0, 0, 0, 0, d, 0);
                O(a);
                b = a.o;
                b.A = zb;
                b.B = Sb;
                w.q(a);
                return b
            },
            SquareIBeam: function (a, b, c)
            {
                var d = a ? a.Hc : NaN;
                isNaN(d) && (d = .2);
                a = w.s();
                M(a, 0, 0, !0);
                a.lineTo(1 * b, 0);
                a.lineTo(1 * b, d * c);
                a.lineTo((.5 + d / 2) * b, d * c);
                a.lineTo((.5 + d / 2) * b, (1 - d) * c);
                a.lineTo(1 * b, (1 - d) * c);
                a.lineTo(1 * b, 1 *
                    c);
                a.lineTo(0, 1 * c);
                a.lineTo(0, (1 - d) * c);
                a.lineTo((.5 - d / 2) * b, (1 - d) * c);
                a.lineTo((.5 - d / 2) * b, d * c);
                a.lineTo(0, d * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            Trapezoid: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .2);
                var d = w.s();
                M(d, a * b, 0, !0);
                d.lineTo((1 - a) * b, 0);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(0, 1 * c);
                O(d);
                b = d.o;
                b.A = new K(a, 0);
                b.B = new K(1 - a, 1);
                w.q(d);
                return b
            },
            ManualLoop: "ManualOperation",
            ManualOperation: function (a, b, c)
            {
                var d = a ? a.Hc : NaN;
                isNaN(d) && (d = 0);
                a = w.s();
                M(a, d, 0, !0);
                a.lineTo(0, 0);
                a.lineTo(1 * b, 0);
                a.lineTo(.9 * b, 1 * c);
                a.lineTo(.1 *
                    b, 1 * c);
                O(a);
                b = a.o;
                b.A = new K(.1, 0);
                b.B = new K(.9, 1);
                w.q(a);
                return b
            },
            GenderMale: function (a, b, c)
            {
                a = w.s();
                var d = .4 * bd,
                    e = .4,
                    f = w.K(),
                    h = w.K(),
                    k = w.K(),
                    l = w.K();
                M(a, (.5 - e) * b, .5 * c, !0);
                N(a, (.5 - e) * b, (.5 - d) * c, (.5 - d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
                Xd(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .44, k, l, h, f, f);
                N(a, k.x * b, k.y * c, l.x * b, l.y * c, h.x * b, h.y * c);
                var m = w.xb(h.x, h.y);
                Xd(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .56, f, f, h, k, l);
                var n = w.xb(h.x, h.y);
                a.lineTo((.1 * m.x + .855) * b, .1 * m.y * c);
                a.lineTo(.85 * b, .1 * m.y * c);
                a.lineTo(.85 * b, 0);
                a.lineTo(1 *
                    b, 0);
                a.lineTo(1 * b, .15 * c);
                a.lineTo((.1 * n.x + .9) * b, .15 * c);
                a.lineTo((.1 * n.x + .9) * b, (.1 * n.y + .05 * .9) * c);
                a.lineTo(n.x * b, n.y * c);
                N(a, k.x * b, k.y * c, l.x * b, l.y * c, (.5 + e) * b, .5 * c);
                N(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
                N(a, (.5 - d) * b, (.5 + e) * c, (.5 - e) * b, (.5 + d) * c, (.5 - e) * b, .5 * c);
                e = .35;
                d = .35 * bd;
                M(a, .5 * b, (.5 - e) * c, !0, !0);
                N(a, (.5 - d) * b, (.5 - e) * c, (.5 - e) * b, (.5 - d) * c, (.5 - e) * b, .5 * c);
                N(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
                N(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 + e) * b, .5 * c);
                N(a, (.5 + e) * b, (.5 - d) * c, (.5 +
                    d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
                M(a, (.5 - e) * b, .5 * c, !0);
                w.v(f);
                w.v(h);
                w.v(k);
                w.v(l);
                w.v(m);
                w.v(n);
                b = a.o;
                b.A = new K(.202, .257);
                b.B = new K(.692, .839);
                b.$d = Sj;
                w.q(a);
                return b
            },
            GenderFemale: function (a, b, c)
            {
                a = w.s();
                var d = .375,
                    e = 0,
                    f = -.125,
                    h = 4 * (Math.SQRT2 - 1) / 3 * d;
                M(a, (.525 + e) * b, (.5 + d + f) * c, !0);
                N(a, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
                N(a, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
                N(a, (.5 - h + e) * b, (.5 - d + f) * c, (.5 - d + e) * b, (.5 - h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
                N(a, (.5 - d + e) * b,
                    (.5 + h + f) * c, (.5 - h + e) * b, (.5 + d + f) * c, (.475 + e) * b, (.5 + d + f) * c);
                a.lineTo(.475 * b, .85 * c);
                a.lineTo(.425 * b, .85 * c);
                a.lineTo(.425 * b, .9 * c);
                a.lineTo(.475 * b, .9 * c);
                a.lineTo(.475 * b, 1 * c);
                a.lineTo(.525 * b, 1 * c);
                a.lineTo(.525 * b, .9 * c);
                a.lineTo(.575 * b, .9 * c);
                a.lineTo(.575 * b, .85 * c);
                a.lineTo(.525 * b, .85 * c);
                O(a);
                d = .325;
                e = 0;
                f = -.125;
                h = 4 * (Math.SQRT2 - 1) / 3 * d;
                M(a, (.5 + d + e) * b, (.5 + f) * c, !0, !0);
                N(a, (.5 + d + e) * b, (.5 + h + f) * c, (.5 + h + e) * b, (.5 + d + f) * c, (.5 + e) * b, (.5 + d + f) * c);
                N(a, (.5 - h + e) * b, (.5 + d + f) * c, (.5 - d + e) * b, (.5 + h + f) * c, (.5 - d + e) * b, (.5 + f) * c);
                N(a, (.5 -
                    d + e) * b, (.5 - h + f) * c, (.5 - h + e) * b, (.5 - d + f) * c, (.5 + e) * b, (.5 - d + f) * c);
                N(a, (.5 + h + e) * b, (.5 - d + f) * c, (.5 + d + e) * b, (.5 - h + f) * c, (.5 + d + e) * b, (.5 + f) * c);
                M(a, (.525 + e) * b, (.5 + d + f) * c, !0);
                b = a.o;
                b.A = new K(.232, .136);
                b.B = new K(.782, .611);
                b.$d = Sj;
                w.q(a);
                return b
            },
            PlusLine: function (a, b, c)
            {
                a = w.s();
                M(a, 0, .5 * c, !1);
                a.lineTo(1 * b, .5 * c);
                a.moveTo(.5 * b, 0);
                a.lineTo(.5 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            XLine: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 1 * c, !1);
                a.lineTo(1 * b, 0);
                a.moveTo(0, 0);
                a.lineTo(1 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            AsteriskLine: function (a, b, c)
            {
                a =
                    w.s();
                var d = .2 / Math.SQRT2;
                M(a, d * b, (1 - d) * c, !1);
                a.lineTo((1 - d) * b, d * c);
                a.moveTo(d * b, d * c);
                a.lineTo((1 - d) * b, (1 - d) * c);
                a.moveTo(0 * b, .5 * c);
                a.lineTo(1 * b, .5 * c);
                a.moveTo(.5 * b, 0 * c);
                a.lineTo(.5 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            CircleLine: function (a, b, c)
            {
                var d = .5 * bd;
                a = w.s();
                M(a, 1 * b, .5 * c, !1);
                N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
                N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                b = a.o;
                b.A = new K(.146, .146);
                b.B = new K(.853, .853);
                b.$d = Sj;
                w.q(a);
                return b
            },
            Pie: function (a,
                           b, c)
            {
                a = w.s();
                var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
                M(a, (.5 * Math.SQRT2 / 2 + .5) * b, (.5 - .5 * Math.SQRT2 / 2) * c, !0);
                N(a, .7 * b, 0 * c, .5 * b, 0 * c, .5 * b, 0 * c);
                N(a, (.5 - d + 0) * b, 0 * c, 0 * b, (.5 - d + 0) * c, 0 * b, .5 * c);
                N(a, 0 * b, (.5 + d + 0) * c, (.5 - d + 0) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 + d + 0) * b, 1 * c, 1 * b, (.5 + d + 0) * c, 1 * b, .5 * c);
                a.lineTo(.5 * b, .5 * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            PiePiece: function (a, b, c)
            {
                var d = bd / Math.SQRT2 * .5,
                    e = Math.SQRT2 / 2,
                    f = 1 - Math.SQRT2 / 2;
                a = w.s();
                M(a, b, c, !0);
                N(a, b, (1 - d) * c, (e + d) * b, (f + d) * c, e * b, f * c);
                a.lineTo(0, c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            StopSign: function (a,
                                b, c)
            {
                a = 1 / (Math.SQRT2 + 2);
                var d = w.s();
                M(d, a * b, 0, !0);
                d.lineTo((1 - a) * b, 0);
                d.lineTo(1 * b, a * c);
                d.lineTo(1 * b, (1 - a) * c);
                d.lineTo((1 - a) * b, 1 * c);
                d.lineTo(a * b, 1 * c);
                d.lineTo(0, (1 - a) * c);
                d.lineTo(0, a * c);
                O(d);
                b = d.o;
                b.A = new K(a / 2, a / 2);
                b.B = new K(1 - a / 2, 1 - a / 2);
                w.q(d);
                return b
            },
            LogicImplies: function (a, b, c)
            {
                var d = a ? a.Hc : NaN;
                isNaN(d) && (d = .2);
                a = w.s();
                M(a, (1 - d) * b, 0 * c, !1);
                a.lineTo(1 * b, .5 * c);
                a.lineTo((1 - d) * b, c);
                a.moveTo(0, .5 * c);
                a.lineTo(b, .5 * c);
                b = a.o;
                b.A = zb;
                b.B = new K(.8, .5);
                w.q(a);
                return b
            },
            LogicIff: function (a, b, c)
            {
                var d = a ? a.Hc :
                    NaN;
                isNaN(d) && (d = .2);
                a = w.s();
                M(a, (1 - d) * b, 0 * c, !1);
                a.lineTo(1 * b, .5 * c);
                a.lineTo((1 - d) * b, c);
                a.moveTo(0, .5 * c);
                a.lineTo(b, .5 * c);
                a.moveTo(d * b, 0);
                a.lineTo(0, .5 * c);
                a.lineTo(d * b, c);
                b = a.o;
                b.A = new K(.2, 0);
                b.B = new K(.8, .5);
                w.q(a);
                return b
            },
            LogicNot: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                a.lineTo(1 * b, 0);
                a.lineTo(1 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            LogicAnd: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 1 * c, !1);
                a.lineTo(.5 * b, 0);
                a.lineTo(1 * b, 1 * c);
                b = a.o;
                b.A = new K(.25, .5);
                b.B = new K(.75, 1);
                w.q(a);
                return b
            },
            LogicOr: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                a.lineTo(.5 * b, 1 * c);
                a.lineTo(1 * b, 0);
                b = a.o;
                b.A = new K(.219, 0);
                b.B = new K(.78, .409);
                w.q(a);
                return b
            },
            LogicXor: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 0, !1);
                a.lineTo(.5 * b, 1 * c);
                a.moveTo(0, .5 * c);
                a.lineTo(1 * b, .5 * c);
                var d = .5 * bd;
                N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
                N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                b = a.o;
                b.$d = Sj;
                w.q(a);
                return b
            },
            LogicTruth: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                a.lineTo(1 * b, 0);
                a.moveTo(.5 * b, 0);
                a.lineTo(.5 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            LogicFalsity: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 1 * c, !1);
                a.lineTo(1 * b, 1 * c);
                a.moveTo(.5 * b, 1 * c);
                a.lineTo(.5 * b, 0);
                b = a.o;
                w.q(a);
                return b
            },
            LogicThereExists: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                a.lineTo(1 * b, 0);
                a.lineTo(1 * b, .5 * c);
                a.lineTo(0, .5 * c);
                a.moveTo(1 * b, .5 * c);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(0, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            LogicForAll: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                a.lineTo(.5 * b, 1 * c);
                a.lineTo(1 * b, 0);
                a.moveTo(.25 * b, .5 * c);
                a.lineTo(.75 * b, .5 * c);
                b = a.o;
                b.A = new K(.25, 0);
                b.B = new K(.75, .5);
                w.q(a);
                return b
            },
            LogicIsDefinedAs: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                a.lineTo(b, 0);
                a.moveTo(0, .5 * c);
                a.lineTo(b, .5 * c);
                a.moveTo(0, c);
                a.lineTo(b, c);
                b = a.o;
                b.A = new K(.01, .01);
                b.B = new K(.99, .49);
                w.q(a);
                return b
            },
            LogicIntersect: function (a, b, c)
            {
                var d = .5 * bd;
                a = w.s();
                M(a, 0, 1 * c, !1);
                a.lineTo(0, .5 * c);
                N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                a.lineTo(1 * b, 1 * c);
                b = a.o;
                b.A = new K(0, .5);
                b.B = Sb;
                w.q(a);
                return b
            },
            LogicUnion: function (a, b, c)
            {
                var d = .5 * bd;
                a = w.s();
                M(a, 1 * b, 0, !1);
                a.lineTo(1 * b, .5 * c);
                N(a,
                    1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
                a.lineTo(0, 0);
                b = a.o;
                b.A = zb;
                b.B = new K(1, .5);
                w.q(a);
                return b
            },
            Arrow: function (a, b, c)
            {
                var d = a ? a.Hc : NaN,
                    e = a ? a.Nu : NaN;
                isNaN(d) && (d = .3);
                isNaN(e) && (e = .3);
                a = w.s();
                M(a, 0, (.5 - e / 2) * c, !0);
                a.lineTo((1 - d) * b, (.5 - e / 2) * c);
                a.lineTo((1 - d) * b, 0);
                a.lineTo(1 * b, .5 * c);
                a.lineTo((1 - d) * b, 1 * c);
                a.lineTo((1 - d) * b, (.5 + e / 2) * c);
                a.lineTo(0, (.5 + e / 2) * c);
                O(a);
                b = a.o;
                b.A = new K(0, .5 - e / 2);
                d = le(0, .5 + e / 2, 1, .5 + e / 2, 1 - d, 1, 1, .5, w.K());
                b.B = new K(d.x, d.y);
                w.v(d);
                w.q(a);
                return b
            },
            ISOProcess: "Chevron",
            Chevron: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                a.lineTo(.5 * b, 0);
                a.lineTo(1 * b, .5 * c);
                a.lineTo(.5 * b, 1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(.5 * b, .5 * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            DoubleArrow: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                a.lineTo(.3 * b, .214 * c);
                a.lineTo(.3 * b, 0);
                a.lineTo(1 * b, .5 * c);
                a.lineTo(.3 * b, 1 * c);
                a.lineTo(.3 * b, .786 * c);
                a.lineTo(0, 1 * c);
                O(a);
                M(a, .3 * b, .214 * c, !1);
                a.lineTo(.3 * b, .786 * c);
                a.eb(!1);
                b = a.o;
                w.q(a);
                return b
            },
            DoubleEndArrow: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, .5 * c, !0);
                a.lineTo(.7 * b, 1 * c);
                a.lineTo(.7 * b, .7 * c);
                a.lineTo(.3 * b, .7 * c);
                a.lineTo(.3 * b, 1 * c);
                a.lineTo(0, .5 * c);
                a.lineTo(.3 * b, 0);
                a.lineTo(.3 * b, .3 * c);
                a.lineTo(.7 * b, .3 * c);
                a.lineTo(.7 * b, 0);
                O(a);
                b = a.o;
                c = le(0, .5, .3, 0, 0, .3, .3, .3, w.K());
                b.A = new K(c.x, c.y);
                c = le(.7, 1, 1, .5, .7, .7, 1, .7, c);
                b.B = new K(c.x, c.y);
                w.v(c);
                w.q(a);
                return b
            },
            IBeamArrow: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, .5 * c, !0);
                a.lineTo(.7 * b, 1 * c);
                a.lineTo(.7 * b, .7 * c);
                a.lineTo(.2 * b, .7 * c);
                a.lineTo(.2 * b, 1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(0, 0);
                a.lineTo(.2 * b, 0);
                a.lineTo(.2 * b, .3 * c);
                a.lineTo(.7 * b, .3 * c);
                a.lineTo(.7 * b, 0);
                O(a);
                b = a.o;
                b.A = new K(0, .3);
                c = le(.7, 1, 1, .5, .7, .7, 1, .7, w.K());
                b.B = new K(c.x, c.y);
                w.v(c);
                w.q(a);
                return b
            },
            Pointer: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, .5 * c, !0);
                a.lineTo(0, 1 * c);
                a.lineTo(.2 * b, .5 * c);
                a.lineTo(0, 0);
                O(a);
                b = a.o;
                b.A = new K(.2, .35);
                c = le(.2, .65, 1, .65, 0, 1, 1, .5, w.K());
                b.B = new K(c.x, c.y);
                w.v(c);
                w.q(a);
                return b
            },
            RoundedPointer: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, .5 * c, !0);
                a.lineTo(0, 1 * c);
                N(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
                O(a);
                b = a.o;
                b.A = new K(.4, .35);
                c = le(.2, .65, 1, .65, 0, 1, 1, .5, w.K());
                b.B = new K(c.x,
                    c.y);
                w.v(c);
                w.q(a);
                return b
            },
            SplitEndArrow: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, .5 * c, !0);
                a.lineTo(.7 * b, 1 * c);
                a.lineTo(.7 * b, .7 * c);
                a.lineTo(0, .7 * c);
                a.lineTo(.2 * b, .5 * c);
                a.lineTo(0, .3 * c);
                a.lineTo(.7 * b, .3 * c);
                a.lineTo(.7 * b, 0);
                O(a);
                b = a.o;
                b.A = new K(.2, .3);
                c = le(.7, 1, 1, .5, .7, .7, 1, .7, w.K());
                b.B = new K(c.x, c.y);
                w.v(c);
                w.q(a);
                return b
            },
            MessageToUser: "SquareArrow",
            SquareArrow: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, .5 * c, !0);
                a.lineTo(.7 * b, 1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(0, 0);
                a.lineTo(.7 * b, 0);
                O(a);
                b = a.o;
                b.A = zb;
                b.B = new K(.7, 1);
                w.q(a);
                return b
            },
            Cone1: function (a, b, c)
            {
                var d = .5 * bd,
                    e = .1 * bd;
                a = w.s();
                M(a, 0, .9 * c, !0);
                a.lineTo(.5 * b, 0);
                a.lineTo(1 * b, .9 * c);
                N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
                O(a);
                b = a.o;
                b.A = new K(.25, .5);
                b.B = new K(.75, .97);
                w.q(a);
                return b
            },
            Cone2: function (a, b, c)
            {
                a = w.s();
                M(a, 0, .9 * c, !0);
                N(a, (1 - .85 / .9) * b, 1 * c, .85 / .9 * b, 1 * c, 1 * b, .9 * c);
                a.lineTo(.5 * b, 0);
                a.lineTo(0, .9 * c);
                O(a);
                M(a, 0, .9 * c, !1);
                N(a, (1 - .85 / .9) * b, .8 * c, .85 / .9 * b, .8 * c, 1 * b, .9 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.25, .5);
                b.B = new K(.75, .82);
                w.q(a);
                return b
            },
            Cube1: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 1 * c, !0);
                a.lineTo(1 * b, .85 * c);
                a.lineTo(1 * b, .15 * c);
                a.lineTo(.5 * b, 0 * c);
                a.lineTo(0 * b, .15 * c);
                a.lineTo(0 * b, .85 * c);
                O(a);
                M(a, .5 * b, 1 * c, !1);
                a.lineTo(.5 * b, .3 * c);
                a.lineTo(0, .15 * c);
                a.moveTo(.5 * b, .3 * c);
                a.lineTo(1 * b, .15 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(0, .3);
                b.B = new K(.5, .85);
                w.q(a);
                return b
            },
            Cube2: function (a, b, c)
            {
                a = w.s();
                M(a, 0, .3 * c, !0);
                a.lineTo(0 * b, 1 * c);
                a.lineTo(.7 * b, c);
                a.lineTo(1 * b, .7 * c);
                a.lineTo(1 * b, 0 * c);
                a.lineTo(.3 * b, 0 * c);
                O(a);
                M(a, 0, .3 * c, !1);
                a.lineTo(.7 * b, .3 * c);
                a.lineTo(1 * b,
                    0 * c);
                a.moveTo(.7 * b, .3 * c);
                a.lineTo(.7 * b, 1 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(0, .3);
                b.B = new K(.7, 1);
                w.q(a);
                return b
            },
            MagneticData: "Cylinder1",
            Cylinder1: function (a, b, c)
            {
                var d = .5 * bd,
                    e = .1 * bd;
                a = w.s();
                M(a, 0, .1 * c, !0);
                N(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
                a.lineTo(b, .9 * c);
                N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
                a.lineTo(0, .1 * c);
                M(a, 0, .1 * c, !1);
                N(a, 0, (.1 + e) * c, (.5 - d) * b, .2 * c, .5 * b, .2 * c);
                N(a, (.5 + d) * b, .2 * c, 1 * b, (.1 + e) * c, 1 * b, .1 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(0,
                    .2);
                b.B = new K(1, .9);
                w.q(a);
                return b
            },
            Cylinder2: function (a, b, c)
            {
                var d = .5 * bd,
                    e = .1 * bd;
                a = w.s();
                M(a, 0, .9 * c, !0);
                a.lineTo(0, .1 * c);
                N(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
                a.lineTo(1 * b, .9 * c);
                N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
                M(a, 0, .9 * c, !1);
                N(a, 0, (.9 - e) * c, (.5 - d) * b, .8 * c, .5 * b, .8 * c);
                N(a, (.5 + d) * b, .8 * c, 1 * b, (.9 - e) * c, 1 * b, .9 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(0, .1);
                b.B = new K(1, .8);
                w.q(a);
                return b
            },
            Cylinder3: function (a, b, c)
            {
                var d = .1 * bd,
                    e = .5 * bd;
                a = w.s();
                M(a, .1 * b, 0, !0);
                a.lineTo(.9 * b, 0);
                N(a, (.9 + d) * b, 0, 1 * b, (.5 - e) * c, 1 * b, .5 * c);
                N(a, 1 * b, (.5 + e) * c, (.9 + d) * b, 1 * c, .9 * b, 1 * c);
                a.lineTo(.1 * b, 1 * c);
                N(a, (.1 - d) * b, 1 * c, 0, (.5 + e) * c, 0, .5 * c);
                N(a, 0, (.5 - e) * c, (.1 - d) * b, 0, .1 * b, 0);
                M(a, .1 * b, 0, !1);
                N(a, (.1 + d) * b, 0, .2 * b, (.5 - e) * c, .2 * b, .5 * c);
                N(a, .2 * b, (.5 + e) * c, (.1 + d) * b, 1 * c, .1 * b, 1 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.2, 0);
                b.B = new K(.9, 1);
                w.q(a);
                return b
            },
            DirectData: "Cylinder4",
            Cylinder4: function (a, b, c)
            {
                var d = .1 * bd,
                    e = .5 * bd;
                a = w.s();
                M(a, .9 * b, 0, !0);
                N(a, (.9 + d) * b, 0, 1 * b, (.5 - e) * c, 1 * b, .5 * c);
                N(a, 1 * b, (.5 +
                    e) * c, (.9 + d) * b, 1 * c, .9 * b, 1 * c);
                a.lineTo(.1 * b, 1 * c);
                N(a, (.1 - d) * b, 1 * c, 0, (.5 + e) * c, 0, .5 * c);
                N(a, 0, (.5 - e) * c, (.1 - d) * b, 0, .1 * b, 0);
                a.lineTo(.9 * b, 0);
                M(a, .9 * b, 0, !1);
                N(a, (.9 - d) * b, 0, .8 * b, (.5 - e) * c, .8 * b, .5 * c);
                N(a, .8 * b, (.5 + e) * c, (.9 - d) * b, 1 * c, .9 * b, 1 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.1, 0);
                b.B = new K(.8, 1);
                w.q(a);
                return b
            },
            Prism1: function (a, b, c)
            {
                a = w.s();
                M(a, .25 * b, .25 * c, !0);
                a.lineTo(.75 * b, 0);
                a.lineTo(b, .5 * c);
                a.lineTo(.5 * b, c);
                a.lineTo(0, c);
                O(a);
                M(a, .25 * b, .25 * c, !1);
                a.lineTo(.5 * b, c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.408, .172);
                b.B = new K(.833,
                    .662);
                w.q(a);
                return b
            },
            Prism2: function (a, b, c)
            {
                a = w.s();
                M(a, 0, .25 * c, !0);
                a.lineTo(.75 * b, 0);
                a.lineTo(1 * b, .25 * c);
                a.lineTo(.75 * b, .75 * c);
                a.lineTo(0, 1 * c);
                O(a);
                M(a, 0, c, !1);
                a.lineTo(.25 * b, .5 * c);
                a.lineTo(b, .25 * c);
                a.moveTo(0, .25 * c);
                a.lineTo(.25 * b, .5 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.25, .5);
                b.B = new K(.75, .75);
                w.q(a);
                return b
            },
            Pyramid1: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 0, !0);
                a.lineTo(b, .75 * c);
                a.lineTo(.5 * b, 1 * c);
                a.lineTo(0, .75 * c);
                O(a);
                M(a, .5 * b, 0, !1);
                a.lineTo(.5 * b, 1 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.25, .367);
                b.B = new K(.75,
                    .875);
                w.q(a);
                return b
            },
            Pyramid2: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 0, !0);
                a.lineTo(b, .85 * c);
                a.lineTo(.5 * b, 1 * c);
                a.lineTo(0, .85 * c);
                O(a);
                M(a, .5 * b, 0, !1);
                a.lineTo(.5 * b, .7 * c);
                a.lineTo(0, .85 * c);
                a.moveTo(.5 * b, .7 * c);
                a.lineTo(1 * b, .85 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.25, .367);
                b.B = new K(.75, .875);
                w.q(a);
                return b
            },
            Actor: function (a, b, c)
            {
                var d = .2 * bd,
                    e = .1 * bd,
                    f = .5,
                    h = .1;
                a = w.s();
                M(a, f * b, (h + .1) * c, !0);
                N(a, (f - d) * b, (h + .1) * c, (f - .2) * b, (h + e) * c, (f - .2) * b, h * c);
                N(a, (f - .2) * b, (h - e) * c, (f - d) * b, (h - .1) * c, f * b, (h - .1) * c);
                N(a, (f + d) * b, (h - .1) * c,
                    (f + .2) * b, (h - e) * c, (f + .2) * b, h * c);
                N(a, (f + .2) * b, (h + e) * c, (f + d) * b, (h + .1) * c, f * b, (h + .1) * c);
                d = .05;
                e = bd * d;
                M(a, .5 * b, .2 * c, !0);
                a.lineTo(.95 * b, .2 * c);
                f = .95;
                h = .25;
                N(a, (f + e) * b, (h - d) * c, (f + d) * b, (h - e) * c, (f + d) * b, h * c);
                a.lineTo(1 * b, .6 * c);
                a.lineTo(.85 * b, .6 * c);
                a.lineTo(.85 * b, .35 * c);
                d = .025;
                e = bd * d;
                f = .825;
                h = .35;
                N(a, (f + d) * b, (h - e) * c, (f + e) * b, (h - d) * c, f * b, (h - d) * c);
                N(a, (f - e) * b, (h - d) * c, (f - d) * b, (h - e) * c, (f - d) * b, h * c);
                a.lineTo(.8 * b, 1 * c);
                a.lineTo(.55 * b, 1 * c);
                a.lineTo(.55 * b, .7 * c);
                d = .05;
                e = bd * d;
                f = .5;
                h = .7;
                N(a, (f + d) * b, (h - e) * c, (f + e) * b, (h - d) * c,
                    f * b, (h - d) * c);
                N(a, (f - e) * b, (h - d) * c, (f - d) * b, (h - e) * c, (f - d) * b, h * c);
                a.lineTo(.45 * b, 1 * c);
                a.lineTo(.2 * b, 1 * c);
                a.lineTo(.2 * b, .35 * c);
                d = .025;
                e = bd * d;
                f = .175;
                h = .35;
                N(a, (f + d) * b, (h - e) * c, (f + e) * b, (h - d) * c, f * b, (h - d) * c);
                N(a, (f - e) * b, (h - d) * c, (f - d) * b, (h - e) * c, (f - d) * b, h * c);
                a.lineTo(.15 * b, .6 * c);
                a.lineTo(0 * b, .6 * c);
                a.lineTo(0 * b, .25 * c);
                d = .05;
                e = bd * d;
                f = .05;
                h = .25;
                N(a, (f - d) * b, (h - e) * c, (f - e) * b, (h - d) * c, f * b, (h - d) * c);
                a.lineTo(.5 * b, .2 * c);
                b = a.o;
                b.A = new K(.2, .2);
                b.B = new K(.8, .65);
                w.q(a);
                return b
            },
            Card: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, 0 * c, !0);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(0 * b, 1 * c);
                a.lineTo(0 * b, .2 * c);
                a.lineTo(.2 * b, 0 * c);
                O(a);
                b = a.o;
                b.A = new K(0, .2);
                b.B = Sb;
                w.q(a);
                return b
            },
            Collate: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, .5 * c, !0);
                a.lineTo(0, 0);
                a.lineTo(1 * b, 0);
                a.lineTo(.5 * b, .5 * c);
                M(a, .5 * b, .5 * c, !0);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(.5 * b, .5 * c);
                b = a.o;
                b.A = new K(.25, 0);
                b.B = new K(.75, .25);
                w.q(a);
                return b
            },
            CreateRequest: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .1);
                var d = w.s();
                M(d, 0, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(0, 1 * c);
                O(d);
                M(d, 0,
                    a * c, !1);
                d.lineTo(1 * b, a * c);
                d.moveTo(0, (1 - a) * c);
                d.lineTo(1 * b, (1 - a) * c);
                d.eb(!1);
                b = d.o;
                b.A = new K(0, a);
                b.B = new K(1, 1 - a);
                w.q(d);
                return b
            },
            Database: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd,
                    e = .1 * bd;
                M(a, 1 * b, .1 * c, !0);
                a.lineTo(1 * b, .9 * c);
                N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
                a.lineTo(0, .1 * c);
                N(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
                M(a, 1 * b, .1 * c, !1);
                N(a, 1 * b, (.1 + e) * c, (.5 + d) * b, .2 * c, .5 * b, .2 * c);
                N(a, (.5 - d) * b, .2 * c, 0, (.1 + e) * c, 0, .1 * c);
                a.moveTo(1 * b, .2 * c);
                N(a, 1 * b, (.2 + e) * c, (.5 + d) * b, .3 * c, .5 * b, .3 * c);
                N(a, (.5 - d) * b, .3 * c, 0, (.2 + e) * c, 0, .2 * c);
                a.moveTo(1 * b, .3 * c);
                N(a, 1 * b, (.3 + e) * c, (.5 + d) * b, .4 * c, .5 * b, .4 * c);
                N(a, (.5 - d) * b, .4 * c, 0, (.3 + e) * c, 0, .3 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(0, .4);
                b.B = new K(1, .9);
                w.q(a);
                return b
            },
            StoredData: "DataStorage",
            DataStorage: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                a.lineTo(.75 * b, 0);
                N(a, 1 * b, 0, 1 * b, 1 * c, .75 * b, 1 * c);
                a.lineTo(0, 1 * c);
                N(a, .25 * b, .9 * c, .25 * b, .1 * c, 0, 0);
                O(a);
                b = a.o;
                b.A = new K(.226, 0);
                b.B = new K(.81, 1);
                w.q(a);
                return b
            },
            DiskStorage: function (a, b, c)
            {
                a =
                    w.s();
                var d = .5 * bd,
                    e = .1 * bd;
                M(a, 1 * b, .1 * c, !0);
                a.lineTo(1 * b, .9 * c);
                N(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
                a.lineTo(0, .1 * c);
                N(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
                M(a, 1 * b, .1 * c, !1);
                N(a, 1 * b, (.1 + e) * c, (.5 + d) * b, .2 * c, .5 * b, .2 * c);
                N(a, (.5 - d) * b, .2 * c, 0, (.1 + e) * c, 0, .1 * c);
                a.moveTo(1 * b, .2 * c);
                N(a, 1 * b, (.2 + e) * c, (.5 + d) * b, .3 * c, .5 * b, .3 * c);
                N(a, (.5 - d) * b, .3 * c, 0, (.2 + e) * c, 0, .2 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(0, .3);
                b.B = new K(1, .9);
                w.q(a);
                return b
            },
            Display: function (a,
                               b, c)
            {
                a = w.s();
                M(a, .25 * b, 0, !0);
                a.lineTo(.75 * b, 0);
                N(a, 1 * b, 0, 1 * b, 1 * c, .75 * b, 1 * c);
                a.lineTo(.25 * b, 1 * c);
                a.lineTo(0, .5 * c);
                O(a);
                b = a.o;
                b.A = new K(.25, 0);
                b.B = new K(.75, 1);
                w.q(a);
                return b
            },
            DividedEvent: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) ? a = .2 : .15 > a && (a = .15);
                var d = w.s(),
                    e = .2 * bd;
                M(d, 0, .2 * c, !0);
                N(d, 0, (.2 - e) * c, (.2 - e) * b, 0, .2 * b, 0);
                d.lineTo(.8 * b, 0);
                N(d, (.8 + e) * b, 0, 1 * b, (.2 - e) * c, 1 * b, .2 * c);
                d.lineTo(1 * b, .8 * c);
                N(d, 1 * b, (.8 + e) * c, (.8 + e) * b, 1 * c, .8 * b, 1 * c);
                d.lineTo(.2 * b, 1 * c);
                N(d, (.2 - e) * b, 1 * c, 0, (.8 + e) * c, 0, .8 * c);
                d.lineTo(0, .2 * c);
                M(d, 0, a * c, !1);
                d.lineTo(1 * b, a * c);
                d.eb(!1);
                b = d.o;
                b.A = new K(0, a);
                b.B = new K(1, 1 - a);
                w.q(d);
                return b
            },
            DividedProcess: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                if (isNaN(a) || .1 > a) a = .1;
                var d = w.s();
                M(d, 0, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(0, 1 * c);
                O(d);
                M(d, 0, a * c, !1);
                d.lineTo(1 * b, a * c);
                d.eb(!1);
                b = d.o;
                b.A = new K(0, a);
                b.B = Sb;
                w.q(d);
                return b
            },
            Document: function (a, b, c)
            {
                c /= .8;
                a = w.s();
                M(a, 0, .7 * c, !0);
                a.lineTo(0, 0);
                a.lineTo(1 * b, 0);
                a.lineTo(1 * b, .7 * c);
                N(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
                O(a);
                b = a.o;
                b.A = zb;
                b.B = new K(1, .6);
                w.q(a);
                return b
            },
            ExternalOrganization: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                if (isNaN(a) || .2 > a) a = .2;
                var d = w.s();
                M(d, 0, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(0, 1 * c);
                O(d);
                M(d, a * b, 0, !1);
                d.lineTo(0, a * c);
                d.moveTo(1 * b, a * c);
                d.lineTo((1 - a) * b, 0);
                d.moveTo(0, (1 - a) * c);
                d.lineTo(a * b, 1 * c);
                d.moveTo((1 - a) * b, 1 * c);
                d.lineTo(1 * b, (1 - a) * c);
                d.eb(!1);
                b = d.o;
                b.A = new K(a / 2, a / 2);
                b.B = new K(1 - a / 2, 1 - a / 2);
                w.q(d);
                return b
            },
            ExternalProcess: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 0, !0);
                a.lineTo(1 * b, .5 * c);
                a.lineTo(.5 * b, 1 * c);
                a.lineTo(0, .5 * c);
                O(a);
                M(a, .1 * b, .4 * c, !1);
                a.lineTo(.1 * b, .6 * c);
                a.moveTo(.9 * b, .6 * c);
                a.lineTo(.9 * b, .4 * c);
                a.moveTo(.6 * b, .1 * c);
                a.lineTo(.4 * b, .1 * c);
                a.moveTo(.4 * b, .9 * c);
                a.lineTo(.6 * b, .9 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.25, .25);
                b.B = new K(.75, .75);
                w.q(a);
                return b
            },
            File: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                a.lineTo(.75 * b, 0);
                a.lineTo(1 * b, .25 * c);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(0, 1 * c);
                O(a);
                M(a, .75 * b, 0, !1);
                a.lineTo(.75 * b, .25 * c);
                a.lineTo(1 * b, .25 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(0, .25);
                b.B = Sb;
                w.q(a);
                return b
            },
            Interrupt: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b,
                    .5 * c, !0);
                a.lineTo(0, 1 * c);
                a.lineTo(0, 0);
                a.lineTo(1 * b, .5 * c);
                M(a, 1 * b, .5 * c, !1);
                a.lineTo(1 * b, 1 * c);
                M(a, 1 * b, .5 * c, !1);
                a.lineTo(1 * b, 0);
                b = a.o;
                b.A = new K(0, .25);
                b.B = new K(.5, .75);
                w.q(a);
                return b
            },
            InternalStorage: function (a, b, c)
            {
                var d = a ? a.Hc : NaN;
                a = a ? a.Nu : NaN;
                isNaN(d) && (d = .1);
                isNaN(a) && (a = .1);
                var e = w.s();
                M(e, 0, 0, !0);
                e.lineTo(1 * b, 0);
                e.lineTo(1 * b, 1 * c);
                e.lineTo(0, 1 * c);
                O(e);
                M(e, d * b, 0, !1);
                e.lineTo(d * b, 1 * c);
                e.moveTo(0, a * c);
                e.lineTo(1 * b, a * c);
                e.eb(!1);
                b = e.o;
                b.A = new K(d, a);
                b.B = Sb;
                w.q(e);
                return b
            },
            Junction: function (a, b,
                                c)
            {
                a = w.s();
                var d = 1 / Math.SQRT2,
                    e = (1 - 1 / Math.SQRT2) / 2,
                    f = .5 * bd;
                M(a, 1 * b, .5 * c, !0);
                N(a, 1 * b, (.5 + f) * c, (.5 + f) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - f) * b, 1 * c, 0, (.5 + f) * c, 0, .5 * c);
                N(a, 0, (.5 - f) * c, (.5 - f) * b, 0, .5 * b, 0);
                N(a, (.5 + f) * b, 0, 1 * b, (.5 - f) * c, 1 * b, .5 * c);
                M(a, (e + d) * b, (e + d) * c, !1);
                a.lineTo(e * b, e * c);
                a.moveTo(e * b, (e + d) * c);
                a.lineTo((e + d) * b, e * c);
                a.eb(!1);
                b = a.o;
                b.$d = Sj;
                w.q(a);
                return b
            },
            LinedDocument: function (a, b, c)
            {
                c /= .8;
                a = w.s();
                M(a, 0, .7 * c, !0);
                a.lineTo(0, 0);
                a.lineTo(1 * b, 0);
                a.lineTo(1 * b, .7 * c);
                N(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
                O(a);
                M(a, .1 *
                    b, 0, !1);
                a.lineTo(.1 * b, .75 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.1, 0);
                b.B = new K(1, .6);
                w.q(a);
                return b
            },
            LoopLimit: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 1 * c, !0);
                a.lineTo(0, .25 * c);
                a.lineTo(.25 * b, 0);
                a.lineTo(.75 * b, 0);
                a.lineTo(1 * b, .25 * c);
                a.lineTo(1 * b, 1 * c);
                O(a);
                b = a.o;
                b.A = new K(0, .25);
                b.B = Sb;
                w.q(a);
                return b
            },
            SequentialData: "MagneticTape",
            MagneticTape: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd;
                M(a, .5 * b, 1 * c, !0);
                N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
                N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                N(a, 1 * b, (.5 +
                    d) * c, (.5 + d) * b, .9 * c, .6 * b, .9 * c);
                a.lineTo(1 * b, .9 * c);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(.5 * b, 1 * c);
                b = a.o;
                b.A = new K(.15, .15);
                b.B = new K(.85, .8);
                w.q(a);
                return b
            },
            ManualInput: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, 0, !0);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(0, .25 * c);
                O(a);
                b = a.o;
                b.A = new K(0, .25);
                b.B = Sb;
                w.q(a);
                return b
            },
            MessageFromUser: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .7);
                var d = w.s();
                M(d, 0, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo(a * b, .5 * c);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(0, 1 * c);
                O(d);
                b = d.o;
                b.A = zb;
                b.B = new K(a, 1);
                w.q(d);
                return b
            },
            MicroformProcessing: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .25);
                var d = w.s();
                M(d, 0, 0, !0);
                d.lineTo(.5 * b, a * c);
                d.lineTo(1 * b, 0);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(.5 * b, (1 - a) * c);
                d.lineTo(0, 1 * c);
                O(d);
                b = d.o;
                b.A = new K(0, a);
                b.B = new K(1, 1 - a);
                w.q(d);
                return b
            },
            MicroformRecording: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                a.lineTo(.75 * b, .25 * c);
                a.lineTo(1 * b, .15 * c);
                a.lineTo(1 * b, .85 * c);
                a.lineTo(.75 * b, .75 * c);
                a.lineTo(0, 1 * c);
                O(a);
                b = a.o;
                b.A = new K(0, .25);
                b.B = new K(1, .75);
                w.q(a);
                return b
            },
            MultiDocument: function (a, b, c)
            {
                c /= .8;
                a = w.s();
                M(a, b, 0, !0);
                a.lineTo(b, .5 * c);
                N(a, .96 * b, .47 * c, .93 * b, .45 * c, .9 * b, .44 * c);
                a.lineTo(.9 * b, .6 * c);
                N(a, .86 * b, .57 * c, .83 * b, .55 * c, .8 * b, .54 * c);
                a.lineTo(.8 * b, .7 * c);
                N(a, .4 * b, .4 * c, .4 * b, 1 * c, 0, .7 * c);
                a.lineTo(0, .2 * c);
                a.lineTo(.1 * b, .2 * c);
                a.lineTo(.1 * b, .1 * c);
                a.lineTo(.2 * b, .1 * c);
                a.lineTo(.2 * b, 0);
                O(a);
                M(a, .1 * b, .2 * c, !1);
                a.lineTo(.8 * b, .2 * c);
                a.lineTo(.8 * b, .54 * c);
                a.moveTo(.2 * b, .1 * c);
                a.lineTo(.9 * b, .1 * c);
                a.lineTo(.9 * b, .44 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(0, .25);
                b.B = new K(.8, .77);
                w.q(a);
                return b
            },
            MultiProcess: function (a, b, c)
            {
                a = w.s();
                M(a, .1 * b, .1 * c, !0);
                a.lineTo(.2 * b, .1 * c);
                a.lineTo(.2 * b, 0);
                a.lineTo(1 * b, 0);
                a.lineTo(1 * b, .8 * c);
                a.lineTo(.9 * b, .8 * c);
                a.lineTo(.9 * b, .9 * c);
                a.lineTo(.8 * b, .9 * c);
                a.lineTo(.8 * b, 1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(0, .2 * c);
                a.lineTo(.1 * b, .2 * c);
                O(a);
                M(a, .2 * b, .1 * c, !1);
                a.lineTo(.9 * b, .1 * c);
                a.lineTo(.9 * b, .8 * c);
                a.moveTo(.1 * b, .2 * c);
                a.lineTo(.8 * b, .2 * c);
                a.lineTo(.8 * b, .9 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(0, .2);
                b.B = new K(.8, 1);
                w.q(a);
                return b
            },
            OfflineStorage: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .1);
                var d = 1 - a,
                    e = w.s();
                M(e, 0, 0, !0);
                e.lineTo(1 *
                    b, 0);
                e.lineTo(.5 * b, 1 * c);
                O(e);
                M(e, .5 * a * b, a * c, !1);
                e.lineTo((1 - .5 * a) * b, a * c);
                e.eb(!1);
                b = e.o;
                b.A = new K(d / 4 + .5 * a, a);
                b.B = new K(3 * d / 4 + .5 * a, a + .5 * d);
                w.q(e);
                return b
            },
            OffPageConnector: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                a.lineTo(.75 * b, 0);
                a.lineTo(1 * b, .5 * c);
                a.lineTo(.75 * b, 1 * c);
                a.lineTo(0, 1 * c);
                O(a);
                b = a.o;
                b.A = zb;
                b.B = new K(.75, 1);
                w.q(a);
                return b
            },
            Or: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd;
                M(a, 1 * b, .5 * c, !0);
                N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
                N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a,
                    (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                M(a, 1 * b, .5 * c, !1);
                a.lineTo(0, .5 * c);
                a.moveTo(.5 * b, 1 * c);
                a.lineTo(.5 * b, 0);
                a.eb(!1);
                b = a.o;
                b.$d = Sj;
                w.q(a);
                return b
            },
            PaperTape: function (a, b, c)
            {
                c /= .8;
                a = w.s();
                M(a, 0, .7 * c, !0);
                a.lineTo(0, .3 * c);
                N(a, .5 * b, .6 * c, .5 * b, 0, 1 * b, .3 * c);
                a.lineTo(1 * b, .7 * c);
                N(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
                O(a);
                b = a.o;
                b.A = new K(0, .49);
                b.B = new K(1, .75);
                w.q(a);
                return b
            },
            PrimitiveFromCall: function (a, b, c)
            {
                var d = a ? a.Hc : NaN;
                a = a ? a.Nu : NaN;
                isNaN(d) && (d = .1);
                isNaN(a) && (a = .3);
                var e = w.s();
                M(e, 0, 0, !0);
                e.lineTo(1 * b, 0);
                e.lineTo((1 -
                    a) * b, .5 * c);
                e.lineTo(1 * b, 1 * c);
                e.lineTo(0, 1 * c);
                O(e);
                b = e.o;
                b.A = new K(d, 0);
                b.B = new K(1 - a, 1);
                w.q(e);
                return b
            },
            PrimitiveToCall: function (a, b, c)
            {
                var d = a ? a.Hc : NaN;
                a = a ? a.Nu : NaN;
                isNaN(d) && (d = .1);
                isNaN(a) && (a = .3);
                var e = w.s();
                M(e, 0, 0, !0);
                e.lineTo((1 - a) * b, 0);
                e.lineTo(1 * b, .5 * c);
                e.lineTo((1 - a) * b, 1 * c);
                e.lineTo(0, 1 * c);
                O(e);
                b = e.o;
                b.A = new K(d, 0);
                b.B = new K(1 - a, 1);
                w.q(e);
                return b
            },
            Subroutine: "Procedure",
            Procedure: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .1);
                var d = w.s();
                M(d, 0, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(0,
                    1 * c);
                O(d);
                M(d, (1 - a) * b, 0, !1);
                d.lineTo((1 - a) * b, 1 * c);
                d.moveTo(a * b, 0);
                d.lineTo(a * b, 1 * c);
                d.eb(!1);
                b = d.o;
                b.A = new K(a, 0);
                b.B = new K(1 - a, 1);
                w.q(d);
                return b
            },
            Process: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .1);
                var d = w.s();
                M(d, 0, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(0, 1 * c);
                O(d);
                M(d, a * b, 0, !1);
                d.lineTo(a * b, 1 * c);
                d.eb(!1);
                b = d.o;
                b.A = new K(a, 0);
                b.B = Sb;
                w.q(d);
                return b
            },
            Sort: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 0, !0);
                a.lineTo(1 * b, .5 * c);
                a.lineTo(.5 * b, 1 * c);
                a.lineTo(0, .5 * c);
                O(a);
                M(a, 0, .5 * c, !1);
                a.lineTo(1 * b, .5 *
                    c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.25, .25);
                b.B = new K(.75, .5);
                w.q(a);
                return b
            },
            Start: function (a, b, c)
            {
                a = w.s();
                M(a, .25 * b, 0, !0);
                M(a, .25 * b, 0, !0);
                a.arcTo(270, 180, .75 * b, .5 * c, .25 * b, .5 * c);
                a.arcTo(90, 180, .25 * b, .5 * c, .25 * b, .5 * c);
                M(a, .25 * b, 0, !1);
                a.lineTo(.25 * b, 1 * c);
                a.moveTo(.75 * b, 0);
                a.lineTo(.75 * b, 1 * c);
                a.eb(!1);
                b = a.o;
                b.A = new K(.25, 0);
                b.B = new K(.75, 1);
                w.q(a);
                return b
            },
            Terminator: function (a, b, c)
            {
                a = w.s();
                M(a, .25 * b, 0, !0);
                a.arcTo(270, 180, .75 * b, .5 * c, .25 * b, .5 * c);
                a.arcTo(90, 180, .25 * b, .5 * c, .25 * b, .5 * c);
                b = a.o;
                b.A = new K(.23, 0);
                b.B = new K(.77, 1);
                w.q(a);
                return b
            },
            TransmittalTape: function (a, b, c)
            {
                a = a ? a.Hc : NaN;
                isNaN(a) && (a = .1);
                var d = w.s();
                M(d, 0, 0, !0);
                d.lineTo(1 * b, 0);
                d.lineTo(1 * b, 1 * c);
                d.lineTo(.75 * b, (1 - a) * c);
                d.lineTo(0, (1 - a) * c);
                O(d);
                b = d.o;
                b.A = zb;
                b.B = new K(1, 1 - a);
                w.q(d);
                return b
            },
            AndGate: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd;
                M(a, 0, 0, !0);
                a.lineTo(.5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                a.lineTo(0, 1 * c);
                O(a);
                b = a.o;
                b.A = zb;
                b.B = new K(.55, 1);
                w.q(a);
                return b
            },
            Buffer: function (a, b, c)
            {
                a = w.s();
                M(a,
                    0, 0, !0);
                a.lineTo(1 * b, .5 * c);
                a.lineTo(0, 1 * c);
                O(a);
                b = a.o;
                b.A = new K(0, .25);
                b.B = new K(.5, .75);
                w.q(a);
                return b
            },
            Clock: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd;
                M(a, 1 * b, .5 * c, !0);
                N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
                N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                M(a, 1 * b, .5 * c, !1);
                a.lineTo(1 * b, .5 * c);
                M(a, .8 * b, .75 * c, !1);
                a.lineTo(.8 * b, .25 * c);
                a.lineTo(.6 * b, .25 * c);
                a.lineTo(.6 * b, .75 * c);
                a.lineTo(.4 * b, .75 * c);
                a.lineTo(.4 * b, .25 * c);
                a.lineTo(.2 * b, .25 * c);
                a.lineTo(.2 *
                    b, .75 * c);
                a.eb(!1);
                b = a.o;
                b.$d = Sj;
                w.q(a);
                return b
            },
            Ground: function (a, b, c)
            {
                a = w.s();
                M(a, .5 * b, 0, !1);
                a.lineTo(.5 * b, .4 * c);
                a.moveTo(.2 * b, .6 * c);
                a.lineTo(.8 * b, .6 * c);
                a.moveTo(.3 * b, .8 * c);
                a.lineTo(.7 * b, .8 * c);
                a.moveTo(.4 * b, 1 * c);
                a.lineTo(.6 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            Inverter: function (a, b, c)
            {
                a = w.s();
                var d = .1 * bd;
                M(a, .8 * b, .5 * c, !0);
                a.lineTo(0, 1 * c);
                a.lineTo(0, 0);
                a.lineTo(.8 * b, .5 * c);
                M(a, 1 * b, .5 * c, !0);
                N(a, 1 * b, (.5 + d) * c, (.9 + d) * b, .6 * c, .9 * b, .6 * c);
                N(a, (.9 - d) * b, .6 * c, .8 * b, (.5 + d) * c, .8 * b, .5 * c);
                N(a, .8 * b, (.5 - d) * c, (.9 - d) * b, .4 *
                    c, .9 * b, .4 * c);
                N(a, (.9 + d) * b, .4 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                b = a.o;
                b.A = new K(0, .25);
                b.B = new K(.4, .75);
                w.q(a);
                return b
            },
            NandGate: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd,
                    e = .4 * bd,
                    f = .1 * bd;
                M(a, .8 * b, .5 * c, !0);
                N(a, .8 * b, (.5 + e) * c, (.4 + d) * b, 1 * c, .4 * b, 1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(0, 0);
                a.lineTo(.4 * b, 0);
                N(a, (.4 + d) * b, 0, .8 * b, (.5 - e) * c, .8 * b, .5 * c);
                M(a, 1 * b, .5 * c, !0);
                N(a, 1 * b, (.5 + f) * c, (.9 + f) * b, .6 * c, .9 * b, .6 * c);
                N(a, (.9 - f) * b, .6 * c, .8 * b, (.5 + f) * c, .8 * b, .5 * c);
                N(a, .8 * b, (.5 - f) * c, (.9 - f) * b, .4 * c, .9 * b, .4 * c);
                N(a, (.9 + f) * b, .4 * c, 1 * b, (.5 - f) * c, 1 * b, .5 *
                    c);
                b = a.o;
                b.A = new K(0, .05);
                b.B = new K(.55, .95);
                w.q(a);
                return b
            },
            NorGate: function (a, b, c)
            {
                a = w.s();
                var d = .5,
                    e = bd * d,
                    f = 0,
                    h = .5;
                M(a, .8 * b, .5 * c, !0);
                N(a, .7 * b, (h + e) * c, (f + e) * b, (h + d) * c, 0, 1 * c);
                N(a, .25 * b, .75 * c, .25 * b, .25 * c, 0, 0);
                N(a, (f + e) * b, (h - d) * c, .7 * b, (h - e) * c, .8 * b, .5 * c);
                d = .1;
                e = .1 * bd;
                f = .9;
                h = .5;
                M(a, (f - d) * b, h * c, !0);
                N(a, (f - d) * b, (h - e) * c, (f - e) * b, (h - d) * c, f * b, (h - d) * c);
                N(a, (f + e) * b, (h - d) * c, (f + d) * b, (h - e) * c, (f + d) * b, h * c);
                N(a, (f + d) * b, (h + e) * c, (f + e) * b, (h + d) * c, f * b, (h + d) * c);
                N(a, (f - e) * b, (h + d) * c, (f - d) * b, (h + e) * c, (f - d) * b, h * c);
                b = a.o;
                b.A =
                    new K(.2, .25);
                b.B = new K(.6, .75);
                w.q(a);
                return b
            },
            OrGate: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd;
                M(a, 0, 0, !0);
                N(a, (0 + d + d) * b, 0 * c, .8 * b, (.5 - d) * c, 1 * b, .5 * c);
                N(a, .8 * b, (.5 + d) * c, (0 + d + d) * b, 1 * c, 0, 1 * c);
                N(a, .25 * b, .75 * c, .25 * b, .25 * c, 0, 0);
                O(a);
                b = a.o;
                b.A = new K(.2, .25);
                b.B = new K(.75, .75);
                w.q(a);
                return b
            },
            XnorGate: function (a, b, c)
            {
                a = w.s();
                var d = .5,
                    e = bd * d,
                    f = .2,
                    h = .5;
                M(a, .1 * b, 0, !1);
                N(a, .35 * b, .25 * c, .35 * b, .75 * c, .1 * b, 1 * c);
                M(a, .8 * b, .5 * c, !0);
                N(a, .7 * b, (h + e) * c, (f + e) * b, (h + d) * c, .2 * b, 1 * c);
                N(a, .45 * b, .75 * c, .45 * b, .25 * c, .2 * b, 0);
                N(a, (f + e) *
                    b, (h - d) * c, .7 * b, (h - e) * c, .8 * b, .5 * c);
                d = .1;
                e = .1 * bd;
                f = .9;
                h = .5;
                M(a, (f - d) * b, h * c, !0);
                N(a, (f - d) * b, (h - e) * c, (f - e) * b, (h - d) * c, f * b, (h - d) * c);
                N(a, (f + e) * b, (h - d) * c, (f + d) * b, (h - e) * c, (f + d) * b, h * c);
                N(a, (f + d) * b, (h + e) * c, (f + e) * b, (h + d) * c, f * b, (h + d) * c);
                N(a, (f - e) * b, (h + d) * c, (f - d) * b, (h + e) * c, (f - d) * b, h * c);
                b = a.o;
                b.A = new K(.4, .25);
                b.B = new K(.65, .75);
                w.q(a);
                return b
            },
            XorGate: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd;
                M(a, .1 * b, 0, !1);
                N(a, .35 * b, .25 * c, .35 * b, .75 * c, .1 * b, 1 * c);
                M(a, .2 * b, 0, !0);
                N(a, (.2 + d) * b, 0 * c, .9 * b, (.5 - d) * c, 1 * b, .5 * c);
                N(a, .9 * b, (.5 + d) *
                    c, (.2 + d) * b, 1 * c, .2 * b, 1 * c);
                N(a, .45 * b, .75 * c, .45 * b, .25 * c, .2 * b, 0);
                O(a);
                b = a.o;
                b.A = new K(.4, .25);
                b.B = new K(.8, .75);
                w.q(a);
                return b
            },
            Capacitor: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                a.lineTo(0, 1 * c);
                a.moveTo(1 * b, 0);
                a.lineTo(1 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            Resistor: function (a, b, c)
            {
                a = w.s();
                M(a, 0, .5 * c, !1);
                a.lineTo(.1 * b, 0);
                a.lineTo(.2 * b, 1 * c);
                a.lineTo(.3 * b, 0);
                a.lineTo(.4 * b, 1 * c);
                a.lineTo(.5 * b, 0);
                a.lineTo(.6 * b, 1 * c);
                a.lineTo(.7 * b, .5 * c);
                b = a.o;
                w.q(a);
                return b
            },
            Inductor: function (a, b, c)
            {
                a = w.s();
                var d = .1 * bd,
                    e = .1;
                M(a, (e - .5 *
                    d) * b, c, !1);
                N(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
                e = .3;
                N(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
                N(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
                e = .5;
                N(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
                N(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
                e = .7;
                N(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
                N(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
                e = .9;
                N(a, (e + .1) * b, 0, (e + d) * b, c, (e + .5 * d) * b, c);
                b = a.o;
                w.q(a);
                return b
            },
            ACvoltageSource: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd;
                M(a, 0 * b, .5 * c, !1);
                N(a, 0 * b, (.5 - d) * c, (.5 - d) * b, 0 * c, .5 * b, 0 * c);
                N(a, (.5 + d) * b, 0 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                N(a, 1 * b, (.5 + d) *
                    c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0 * b, (.5 + d) * c, 0 * b, .5 * c);
                a.moveTo(.1 * b, .5 * c);
                N(a, .5 * b, 0 * c, .5 * b, 1 * c, .9 * b, .5 * c);
                b = a.o;
                b.$d = Sj;
                w.q(a);
                return b
            },
            DCvoltageSource: function (a, b, c)
            {
                a = w.s();
                M(a, 0, .75 * c, !1);
                a.lineTo(0, .25 * c);
                a.moveTo(1 * b, 0);
                a.lineTo(1 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            Diode: function (a, b, c)
            {
                a = w.s();
                M(a, 1 * b, 0, !1);
                a.lineTo(1 * b, .5 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(0, 0);
                a.lineTo(1 * b, .5 * c);
                a.lineTo(1 * b, 1 * c);
                b = a.o;
                b.A = new K(0, .25);
                b.B = new K(.5, .75);
                w.q(a);
                return b
            },
            Wifi: function (a, b, c)
            {
                var d = b,
                    e = c;
                b *= .38;
                c *= .6;
                a = w.s();
                var f = .8 * bd,
                    h = .8,
                    k = 0,
                    l = .5,
                    d = (d - b) / 2,
                    e = (e - c) / 2;
                M(a, k * b + d, (l + h) * c + e, !0);
                N(a, (k - f) * b + d, (l + h) * c + e, (k - h) * b + d, (l + f) * c + e, (k - h) * b + d, l * c + e);
                N(a, (k - h) * b + d, (l - f) * c + e, (k - f) * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
                N(a, k * b + d, (l - h) * c + e, (k - h + .5 * f) * b + d, (l - f) * c + e, (k - h + .5 * f) * b + d, l * c + e);
                N(a, (k - h + .5 * f) * b + d, (l + f) * c + e, k * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
                O(a);
                f = .4 * bd;
                h = .4;
                k = .2;
                l = .5;
                M(a, k * b + d, (l + h) * c + e, !0);
                N(a, (k - f) * b + d, (l + h) * c + e, (k - h) * b + d, (l + f) * c + e, (k - h) * b + d, l * c + e);
                N(a, (k - h) * b + d, (l - f) * c + e, (k - f) * b + d, (l - h) * c + e, k *
                    b + d, (l - h) * c + e);
                N(a, k * b + d, (l - h) * c + e, (k - h + .5 * f) * b + d, (l - f) * c + e, (k - h + .5 * f) * b + d, l * c + e);
                N(a, (k - h + .5 * f) * b + d, (l + f) * c + e, k * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
                O(a);
                f = .2 * bd;
                h = .2;
                l = k = .5;
                M(a, (k - h) * b + d, l * c + e, !0);
                N(a, (k - h) * b + d, (l - f) * c + e, (k - f) * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
                N(a, (k + f) * b + d, (l - h) * c + e, (k + h) * b + d, (l - f) * c + e, (k + h) * b + d, l * c + e);
                N(a, (k + h) * b + d, (l + f) * c + e, (k + f) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
                N(a, (k - f) * b + d, (l + h) * c + e, (k - h) * b + d, (l + f) * c + e, (k - h) * b + d, l * c + e);
                f = .4 * bd;
                h = .4;
                k = .8;
                l = .5;
                M(a, k * b + d, (l - h) * c + e, !0);
                N(a, (k + f) * b + d, (l -
                    h) * c + e, (k + h) * b + d, (l - f) * c + e, (k + h) * b + d, l * c + e);
                N(a, (k + h) * b + d, (l + f) * c + e, (k + f) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
                N(a, k * b + d, (l + h) * c + e, (k + h - .5 * f) * b + d, (l + f) * c + e, (k + h - .5 * f) * b + d, l * c + e);
                N(a, (k + h - .5 * f) * b + d, (l - f) * c + e, k * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
                O(a);
                f = .8 * bd;
                h = .8;
                k = 1;
                l = .5;
                M(a, k * b + d, (l - h) * c + e, !0);
                N(a, (k + f) * b + d, (l - h) * c + e, (k + h) * b + d, (l - f) * c + e, (k + h) * b + d, l * c + e);
                N(a, (k + h) * b + d, (l + f) * c + e, (k + f) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
                N(a, k * b + d, (l + h) * c + e, (k + h - .5 * f) * b + d, (l + f) * c + e, (k + h - .5 * f) * b + d, l * c + e);
                N(a, (k + h - .5 * f) * b + d, (l - f) * c +
                    e, k * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            Email: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !0);
                a.lineTo(1 * b, 0);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(0, 0);
                O(a);
                M(a, 0, 0, !1);
                a.lineTo(.5 * b, .6 * c);
                a.lineTo(1 * b, 0);
                a.moveTo(0, 1 * c);
                a.lineTo(.45 * b, .54 * c);
                a.moveTo(1 * b, 1 * c);
                a.lineTo(.55 * b, .54 * c);
                a.eb(!1);
                b = a.o;
                w.q(a);
                return b
            },
            Ethernet: function (a, b, c)
            {
                a = w.s();
                M(a, .35 * b, 0, !0);
                a.lineTo(.65 * b, 0);
                a.lineTo(.65 * b, .4 * c);
                a.lineTo(.35 * b, .4 * c);
                a.lineTo(.35 * b, 0);
                O(a);
                M(a, .1 * b, 1 * c, !0, !0);
                a.lineTo(.4 * b, 1 * c);
                a.lineTo(.4 * b, .6 * c);
                a.lineTo(.1 * b, .6 * c);
                a.lineTo(.1 * b, 1 * c);
                O(a);
                M(a, .6 * b, 1 * c, !0, !0);
                a.lineTo(.9 * b, 1 * c);
                a.lineTo(.9 * b, .6 * c);
                a.lineTo(.6 * b, .6 * c);
                a.lineTo(.6 * b, 1 * c);
                O(a);
                M(a, 0, .5 * c, !1);
                a.lineTo(1 * b, .5 * c);
                a.moveTo(.5 * b, .5 * c);
                a.lineTo(.5 * b, .4 * c);
                a.moveTo(.75 * b, .5 * c);
                a.lineTo(.75 * b, .6 * c);
                a.moveTo(.25 * b, .5 * c);
                a.lineTo(.25 * b, .6 * c);
                a.eb(!1);
                b = a.o;
                w.q(a);
                return b
            },
            Power: function (a, b, c)
            {
                a = w.s();
                var d = .4 * bd,
                    e = .4,
                    f = w.K(),
                    h = w.K(),
                    k = w.K(),
                    l = w.K();
                Xd(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .5, f, f, h, k, l);
                var m = w.xb(h.x,
                    h.y);
                M(a, h.x * b, h.y * c, !0);
                N(a, k.x * b, k.y * c, l.x * b, l.y * c, (.5 + e) * b, .5 * c);
                N(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
                N(a, (.5 - d) * b, (.5 + e) * c, (.5 - e) * b, (.5 + d) * c, (.5 - e) * b, .5 * c);
                Xd(.5 - e, .5, .5 - e, .5 - d, .5 - d, .5 - e, .5, .5 - e, .5, k, l, h, f, f);
                N(a, k.x * b, k.y * c, l.x * b, l.y * c, h.x * b, h.y * c);
                d = .3 * bd;
                e = .3;
                Xd(.5 - e, .5, .5 - e, .5 - d, .5 - d, .5 - e, .5, .5 - e, .5, k, l, h, f, f);
                a.lineTo(h.x * b, h.y * c);
                N(a, l.x * b, l.y * c, k.x * b, k.y * c, (.5 - e) * b, .5 * c);
                N(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
                N(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 +
                    e) * b, .5 * c);
                Xd(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .5, f, f, h, k, l);
                N(a, l.x * b, l.y * c, k.x * b, k.y * c, h.x * b, h.y * c);
                O(a);
                M(a, .45 * b, 0, !0);
                a.lineTo(.45 * b, .5 * c);
                a.lineTo(.55 * b, .5 * c);
                a.lineTo(.55 * b, 0);
                O(a);
                w.v(f);
                w.v(h);
                w.v(k);
                w.v(l);
                w.v(m);
                b = a.o;
                b.A = new K(.25, .55);
                b.B = new K(.75, .8);
                w.q(a);
                return b
            },
            Fallout: function (a, b, c)
            {
                a = w.s();
                var d = .5 * bd;
                M(a, 0 * b, .5 * c, !0);
                N(a, 0 * b, (.5 - d) * c, (.5 - d) * b, 0 * c, .5 * b, 0 * c);
                N(a, (.5 + d) * b, 0 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0 * b, (.5 + d) * c, 0 * b,
                    .5 * c);
                var e = d = 0;
                M(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
                a.lineTo((.5 + d) * b, (.5 + e) * c);
                a.lineTo((.1 + d) * b, (.5 + e) * c);
                a.lineTo((.3 + d) * b, (.8 + e) * c);
                d = .4;
                e = 0;
                O(a);
                M(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
                a.lineTo((.5 + d) * b, (.5 + e) * c);
                a.lineTo((.1 + d) * b, (.5 + e) * c);
                a.lineTo((.3 + d) * b, (.8 + e) * c);
                d = .2;
                e = -.3;
                O(a);
                M(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
                a.lineTo((.5 + d) * b, (.5 + e) * c);
                a.lineTo((.1 + d) * b, (.5 + e) * c);
                a.lineTo((.3 + d) * b, (.8 + e) * c);
                O(a);
                b = a.o;
                b.$d = Sj;
                w.q(a);
                return b
            },
            IrritationHazard: function (a, b, c)
            {
                a = w.s();
                M(a, .2 * b, 0 * c, !0);
                a.lineTo(.5 * b, .3 * c);
                a.lineTo(.8 *
                    b, 0 * c);
                a.lineTo(1 * b, .2 * c);
                a.lineTo(.7 * b, .5 * c);
                a.lineTo(1 * b, .8 * c);
                a.lineTo(.8 * b, 1 * c);
                a.lineTo(.5 * b, .7 * c);
                a.lineTo(.2 * b, 1 * c);
                a.lineTo(0 * b, .8 * c);
                a.lineTo(.3 * b, .5 * c);
                a.lineTo(0 * b, .2 * c);
                O(a);
                b = a.o;
                b.A = new K(.3, .3);
                b.B = new K(.7, .7);
                w.q(a);
                return b
            },
            ElectricalHazard: function (a, b, c)
            {
                a = w.s();
                M(a, .37 * b, 0 * c, !0);
                a.lineTo(.5 * b, .11 * c);
                a.lineTo(.77 * b, .04 * c);
                a.lineTo(.33 * b, .49 * c);
                a.lineTo(1 * b, .37 * c);
                a.lineTo(.63 * b, .86 * c);
                a.lineTo(.77 * b, .91 * c);
                a.lineTo(.34 * b, 1 * c);
                a.lineTo(.34 * b, .78 * c);
                a.lineTo(.44 * b, .8 * c);
                a.lineTo(.65 *
                    b, .56 * c);
                a.lineTo(0 * b, .68 * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            FireHazard: function (a, b, c)
            {
                a = w.s();
                M(a, .1 * b, 1 * c, !0);
                N(a, -.25 * b, .63 * c, .45 * b, .44 * c, .29 * b, 0 * c);
                N(a, .48 * b, .17 * c, .54 * b, .35 * c, .51 * b, .42 * c);
                N(a, .59 * b, .29 * c, .58 * b, .28 * c, .59 * b, .18 * c);
                N(a, .8 * b, .34 * c, .88 * b, .43 * c, .75 * b, .6 * c);
                N(a, .87 * b, .48 * c, .88 * b, .43 * c, .88 * b, .31 * c);
                N(a, 1.17 * b, .76 * c, .82 * b, .8 * c, .9 * b, 1 * c);
                O(a);
                b = a.o;
                b.A = new K(.05, .645);
                b.B = new K(.884, .908);
                w.q(a);
                return b
            },
            BpmnActivityLoop: function (a, b, c)
            {
                a = w.s();
                var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
                M(a, .65 * b, 1 * c, !1);
                N(a, (1 - d + 0) * b, 1 * c, 1 * b, (.5 + d + 0) * c, 1 * b, .5 * c);
                N(a, 1 * b, (.5 - d + 0) * c, (.5 + d + 0) * b, 0 * c, .5 * b, 0 * c);
                N(a, (.5 - d + 0) * b, 0 * c, 0 * b, (.5 - d + 0) * c, 0 * b, .5 * c);
                N(a, 0 * b, (.5 + d + 0) * c, (.5 - d + 0) * b, 1 * c, .35 * b, .98 * c);
                a.moveTo(.25 * b, .8 * c);
                a.lineTo(.35 * b, 1 * c);
                a.lineTo(.1 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnActivityParallel: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                a.lineTo(0, 1 * c);
                a.moveTo(.5 * b, 0);
                a.lineTo(.5 * b, 1 * c);
                a.moveTo(1 * b, 0);
                a.lineTo(1 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnActivitySequential: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                a.lineTo(1 *
                    b, 0);
                a.moveTo(0, .5 * c);
                a.lineTo(1 * b, .5 * c);
                a.moveTo(0, 1 * c);
                a.lineTo(1 * b, 1 * c);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnActivityAdHoc: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                M(a, 1 * b, 1 * c, !1);
                M(a, 0, .5 * c, !1);
                N(a, .2 * b, .35 * c, .3 * b, .35 * c, .5 * b, .5 * c);
                N(a, .7 * b, .65 * c, .8 * b, .65 * c, 1 * b, .5 * c);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnActivityCompensation: function (a, b, c)
            {
                a = w.s();
                M(a, 0, .5 * c, !0);
                a.lineTo(.5 * b, 0);
                a.lineTo(.5 * b, .5 * c);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(1 * b, 0);
                a.lineTo(.5 * b, .5 * c);
                a.lineTo(.5 * b, 1 * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnTaskMessage: function (a,
                                       b, c)
            {
                a = w.s();
                M(a, 0, .2 * c, !0);
                a.lineTo(1 * b, .2 * c);
                a.lineTo(1 * b, .8 * c);
                a.lineTo(0, .8 * c);
                a.lineTo(0, .8 * c);
                O(a);
                M(a, 0, .2 * c, !1);
                a.lineTo(.5 * b, .5 * c);
                a.lineTo(1 * b, .2 * c);
                a.eb(!1);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnTaskScript: function (a, b, c)
            {
                a = w.s();
                M(a, .7 * b, 1 * c, !0);
                a.lineTo(.3 * b, 1 * c);
                N(a, .6 * b, .5 * c, 0, .5 * c, .3 * b, 0);
                a.lineTo(.7 * b, 0);
                N(a, .4 * b, .5 * c, 1 * b, .5 * c, .7 * b, 1 * c);
                O(a);
                M(a, .45 * b, .73 * c, !1);
                a.lineTo(.7 * b, .73 * c);
                a.moveTo(.38 * b, .5 * c);
                a.lineTo(.63 * b, .5 * c);
                a.moveTo(.31 * b, .27 * c);
                a.lineTo(.56 * b, .27 * c);
                a.eb(!1);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnTaskUser: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                M(a, .335 * b, (1 - .555) * c, !0);
                a.lineTo(.335 * b, .595 * c);
                a.lineTo(.665 * b, .595 * c);
                a.lineTo(.665 * b, (1 - .555) * c);
                N(a, .88 * b, .46 * c, .98 * b, .54 * c, 1 * b, .68 * c);
                a.lineTo(1 * b, 1 * c);
                a.lineTo(0, 1 * c);
                a.lineTo(0, .68 * c);
                N(a, .02 * b, .54 * c, .12 * b, .46 * c, .335 * b, (1 - .555) * c);
                a.lineTo(.365 * b, .405 * c);
                var d = .5 - .285,
                    e = Math.PI / 4,
                    f = 4 * (1 - Math.cos(e)) / (3 * Math.sin(e)),
                    e = f * d,
                    f = f * d;
                N(a, (.5 - (e + d) / 2) * b, (d + (d + f) / 2) * c, (.5 - d) * b, (d + f) * c, (.5 - d) * b, d * c);
                N(a, (.5 - d) * b, (d - f) * c, (.5 - e) * b, (d - d) * c, .5 * b, (d - d) * c);
                N(a, (.5 + e) * b, (d - d) * c, (.5 + d) * b, (d - f) * c, (.5 + d) * b, d * c);
                N(a, (.5 + d) * b, (d + f) * c, (.5 + (e + d) / 2) * b, (d + (d + f) / 2) * c, .635 * b, .405 * c);
                a.lineTo(.635 * b, .405 * c);
                a.lineTo(.665 * b, (1 - .555) * c);
                a.lineTo(.665 * b, .595 * c);
                a.lineTo(.335 * b, .595 * c);
                M(a, .2 * b, 1 * c, !1);
                a.lineTo(.2 * b, .8 * c);
                M(a, .8 * b, 1 * c, !1);
                a.lineTo(.8 * b, .8 * c);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnEventConditional: function (a, b, c)
            {
                a = w.s();
                M(a, .1 * b, 0, !0);
                a.lineTo(.9 * b, 0);
                a.lineTo(.9 * b, 1 * c);
                a.lineTo(.1 * b, 1 * c);
                O(a);
                M(a, .2 * b, .2 * c, !1);
                a.lineTo(.8 * b, .2 * c);
                a.moveTo(.2 * b, .4 * c);
                a.lineTo(.8 *
                    b, .4 * c);
                a.moveTo(.2 * b, .6 * c);
                a.lineTo(.8 * b, .6 * c);
                a.moveTo(.2 * b, .8 * c);
                a.lineTo(.8 * b, .8 * c);
                a.eb(!1);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnEventError: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 1 * c, !0);
                a.lineTo(.33 * b, 0);
                a.lineTo(.66 * b, .5 * c);
                a.lineTo(1 * b, 0);
                a.lineTo(.66 * b, 1 * c);
                a.lineTo(.33 * b, .5 * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnEventEscalation: function (a, b, c)
            {
                a = w.s();
                M(a, 0, 0, !1);
                M(a, 1 * b, 1 * c, !1);
                M(a, .1 * b, 1 * c, !0);
                a.lineTo(.5 * b, 0);
                a.lineTo(.9 * b, 1 * c);
                a.lineTo(.5 * b, .5 * c);
                O(a);
                b = a.o;
                w.q(a);
                return b
            },
            BpmnEventTimer: function (a, b, c)
            {
                a =
                    w.s();
                var d = .5 * bd;
                M(a, 1 * b, .5 * c, !0);
                N(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
                N(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
                N(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
                N(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
                M(a, .5 * b, 0, !1);
                a.lineTo(.5 * b, .15 * c);
                a.moveTo(.5 * b, 1 * c);
                a.lineTo(.5 * b, .85 * c);
                a.moveTo(0, .5 * c);
                a.lineTo(.15 * b, .5 * c);
                a.moveTo(1 * b, .5 * c);
                a.lineTo(.85 * b, .5 * c);
                a.moveTo(.5 * b, .5 * c);
                a.lineTo(.58 * b, .1 * c);
                a.moveTo(.5 * b, .5 * c);
                a.lineTo(.78 * b, .54 * c);
                a.eb(!1);
                b = a.o;
                b.$d = Sj;
                w.q(a);
                return b
            }
        },
        Yq;
    for (Yq in lq) lq[Yq.toLowerCase()] = Yq;
    var sq = {
        "": "",
        Standard: "F1 m 0,0 l 8,4 -8,4 2,-4 z",
        Backward: "F1 m 8,0 l -2,4 2,4 -8,-4 z",
        Triangle: "F1 m 0,0 l 8,4.62 -8,4.62 z",
        BackwardTriangle: "F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",
        Boomerang: "F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
        BackwardBoomerang: "F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",
        SidewaysV: "m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",
        BackwardV: "m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",
        OpenTriangle: "m 0,0 l 8,4 -8,4",
        BackwardOpenTriangle: "m 8,0 l -8,4 8,4",
        OpenTriangleLine: "m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",
        BackwardOpenTriangleLine: "m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
        OpenTriangleTop: "m 0,0 l 8,4 m 0,4",
        BackwardOpenTriangleTop: "m 8,0 l -8,4 m 0,4",
        OpenTriangleBottom: "m 0,8 l 8,-4",
        BackwardOpenTriangleBottom: "m 0,4 l 8,4",
        HalfTriangleTop: "F1 m 0,0 l 0,4 8,0 z m 0,8",
        BackwardHalfTriangleTop: "F1 m 8,0 l 0,4 -8,0 z m 0,8",
        HalfTriangleBottom: "F1 m 0,4 l 0,4 8,-4 z",
        BackwardHalfTriangleBottom: "F1 m 8,4 l 0,4 -8,-4 z",
        ForwardSemiCircle: "m 4,0 b 270 180 0 4 4",
        BackwardSemiCircle: "m 4,8 b 90 180 0 -4 4",
        Feather: "m 0,0 l 3,4 -3,4",
        BackwardFeather: "m 3,0 l -3,4 3,4",
        DoubleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        BackwardDoubleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",
        TripleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        BackwardTripleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",
        ForwardSlash: "m 0,8 l 5,-8",
        BackSlash: "m 0,0 l 5,8",
        DoubleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8",
        DoubleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8",
        TripleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
        TripleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",
        Fork: "m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
        BackwardFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",
        LineFork: "m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
        BackwardLineFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",
        CircleFork: "F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        BackwardCircleFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
        CircleLineFork: "F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        BackwardCircleLineFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
        Circle: "F1 m 8,4 b 0 360 -4 0 4 z",
        Block: "F1 m 0,0 l 0,8 8,0 0,-8 z",
        StretchedDiamond: "F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
        Diamond: "F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",
        Chevron: "F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",
        StretchedChevron: "F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",
        NormalArrow: "F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",
        X: "m 0,0 l 8,8 m 0,-8 l -8,8",
        TailedNormalArrow: "F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
        DoubleTriangle: "F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
        BigEndArrow: "F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",
        ConcaveTailArrow: "F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",
        RoundedTriangle: "F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",
        SimpleArrow: "F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",
        AccelerationArrow: "F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",
        BoxArrow: "F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
        TriangleLine: "F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",
        CircleEndedArrow: "F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",
        DynamicWidthArrow: "F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",
        EquilibriumArrow: "m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",
        FastForward: "F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
        Kite: "F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",
        HalfArrowTop: "F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",
        HalfArrowBottom: "F1 m 0,8 l 4,-4 4,0 -8,4 z",
        OpposingDirectionDoubleArrow: "F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",
        PartialDoubleTriangle: "F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",
        LineCircle: "F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        DoubleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        TripleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        CircleLine: "F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",
        DiamondCircle: "F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",
        PlusCircle: "F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
        OpenRightTriangleTop: "m 8,0 l 0,4 -8,0 m 0,4",
        OpenRightTriangleBottom: "m 8,8 l 0,-4 -8,0",
        Line: "m 0,0 l 0,8",
        DoubleLine: "m 0,0 l 0,8 m 2,0 l 0,-8",
        TripleLine: "m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",
        PentagonArrow: "F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"
    };

    function pq(a)
    {
        var b = Qd[a];
        if (void 0 === b)
        {
            var c = a.toLowerCase();
            if ("none" === c) return "None";
            b = Qd[c];
            if (void 0 === b)
            {
                var d = null,
                    e;
                for (e in sq)
                    if (e.toLowerCase() === c)
                    {
                        d = e;
                        break
                    }
                if (null !== d) return a = Oe(sq[d], !1), Qd[d] = a, c !== d && (Qd[c] = d), d
            }
        }
        return "string" === typeof b ? b : b instanceof Be ? a : null
    }

    function R(a)
    {
        C.call(this, a);
        this.N = 2408959;
        this.xl = this.Ci = "";
        this.$s = this.Xs = this.it = this.es = null;
        this.kt = "";
        this.Ai = this.Rr = this.jt = this.dn = null;
        this.Zs = "";
        this.ip = null;
        this.Ys = Fd;
        this.at = "";
        this.jp = null;
        this.Md = "";
        this.gw = this.cr = this.il = null;
        this.Xi = (new y(NaN, NaN)).freeze();
        this.ks = "";
        this.Al = null;
        this.ls = zb;
        this.ts = od;
        this.ms = pd;
        this.xr = null;
        this.fs = Zq;
        this.fn = nd;
        this.en = "gray";
        this.Dg = 4;
        this.rD = -1;
        this.It = NaN;
        this.RG = new B;
        this.Sm = null;
        this.mk = NaN
    }
    w.La(R, C);
    w.ga("Part", R);
    R.prototype.cloneProtected = function (a)
    {
        C.prototype.cloneProtected.call(this, a);
        a.N = this.N & -4097 | 49152;
        a.Ci = this.Ci;
        a.xl = this.xl;
        a.es = this.es;
        a.it = this.it;
        a.Xs = this.Xs;
        a.$s = this.$s;
        a.kt = this.kt;
        a.jt = this.jt;
        a.Rr = this.Rr;
        a.Ai = null;
        a.Zs = this.Zs;
        a.Ys = this.Ys.S();
        a.at = this.at;
        a.Md = this.Md;
        a.cr = this.cr;
        a.Xi.assign(this.Xi);
        a.ks = this.ks;
        a.ls = this.ls.S();
        a.ts = this.ts.S();
        a.ms = this.ms.S();
        a.xr = this.xr;
        a.fs = this.fs;
        a.fn = this.fn.S();
        a.en = this.en;
        a.Dg = this.Dg;
        a.It = this.It
    };
    R.prototype.pi = function (a)
    {
        C.prototype.pi.call(this, a);
        a.Qk();
        a.dn = null;
        a.ip = null;
        a.jp = null;
        a.Al = null;
        a.Sm = null
    };
    R.prototype.toString = function ()
    {
        var a = w.pf(Object.getPrototypeOf(this)) + "#" + w.Pd(this);
        null !== this.data && (a += "(" + Qf(this.data) + ")");
        return a
    };
    R.LayoutNone = 0;
    var Om;
    R.LayoutAdded = Om = 1;
    var Xm;
    R.LayoutRemoved = Xm = 2;
    R.LayoutShown = 4;
    R.LayoutHidden = 8;
    R.LayoutNodeSized = 16;
    var Dn;
    R.LayoutGroupLayout = Dn = 32;
    R.LayoutNodeReplaced = 64;
    var Zq;
    R.LayoutStandard = Zq = Om | Xm | 28 | Dn | 64;
    R.LayoutAll = 16777215;
    R.prototype.Xn = function (a, b, c, d, e, f, h)
    {
        var k = this.g;
        null !== k && (a === Ef && "elements" === b ? e instanceof C ? Pm(e, function (a)
        {
            Rm(k, a);
            Qm(k, a)
        }) : e instanceof yl && pn(k, e) : a === Ff && "elements" === b && (e instanceof C ? Pm(e, function (a)
        {
            Vm(k, a);
            Um(k, a)
        }) : e instanceof yl && qn(k, e)), k.cd(a, b, c, d, e, f, h))
    };
    R.prototype.updateTargetBindings = R.prototype.Lb = function (a)
    {
        C.prototype.Lb.call(this, a);
        if (null !== this.data)
        {
            a = this.xa.n;
            for (var b = a.length, c = 0; c < b; c++)
            {
                var d = a[c];
                d instanceof C && Pm(d, function (a)
                {
                    null !== a.data && a.Lb()
                })
            }
        }
    };
    R.prototype.updateRelationshipsFromData = function ()
    {
        var a = this.data;
        if (null !== a)
        {
            var b = this.g;
            if (null !== b)
            {
                var c = b.$;
                c instanceof Q && (a = c.Bn(a), b = b.XH(a), null === b || b instanceof V) && (this.Da = b)
            }
        }
    };
    w.u(R,
        {
            key: "key"
        }, function ()
        {
            var a = this.g;
            return null === a ? void 0 : a.$.rb(this.data)
        },
        {
            configurable: !0
        });
    w.u(R,
        {
            ax: "adornments"
        }, function ()
        {
            return null === this.Ai ? ua : this.Ai.KF
        });
    R.prototype.findAdornment = R.prototype.Up = function (a)
    {
        var b = this.Ai;
        return null === b ? null : b.ka(a)
    };
    R.prototype.addAdornment = R.prototype.Ml = function (a, b)
    {
        if (null !== b)
        {
            var c = null,
                d = this.Ai;
            null !== d && (c = d.ka(a));
            if (c !== b)
            {
                if (null !== c)
                {
                    var e = c.g;
                    null !== e && e.remove(c)
                }
                null === d && (this.Ai = d = new ma("string", jh));
                b.Ci !== a && (b.zd = a);
                d.add(a, b);
                c = this.g;
                null !== c && (c.add(b), b.data = this.data)
            }
        }
    };
    R.prototype.removeAdornment = R.prototype.Jj = function (a)
    {
        var b = this.Ai;
        if (null !== b)
        {
            var c = b.ka(a);
            if (null !== c)
            {
                var d = c.g;
                null !== d && d.remove(c)
            }
            b.remove(a);
            0 === b.count && (this.Ai = null)
        }
    };
    R.prototype.clearAdornments = R.prototype.Qt = function ()
    {
        var a = this.Ai;
        if (null !== a)
        {
            for (var b = w.gb(), a = a.i; a.next();) b.push(a.key);
            for (var a = b.length, c = 0; c < a; c++) this.Jj(b[c]);
            w.ta(b)
        }
    };
    R.prototype.updateAdornments = function ()
    {
        var a = this.g;
        if (null !== a)
        {
            a:
            {
                if (this.jb && this.DJ)
                {
                    var b = this.zq;
                    if (!(null !== b && this.U.I() && this.isVisible() && b.Dj() && b.U.I())) break a;
                    var c = this.Up("Selection");
                    if (null === c)
                    {
                        c = this.EJ;
                        null === c && (c = this instanceof W ? a.NI : this instanceof V ? a.kI : a.gJ);
                        if (!(c instanceof jh)) break a;
                        lh(c);
                        c = c.copy();
                        null !== c && (this instanceof W && this.zq === this.path && (c.type = jj), c.ub = b)
                    }
                    if (null !== c)
                    {
                        var d = c.placeholder;
                        if (null !== d)
                        {
                            var e = b.vj(),
                                f = 0;
                            b instanceof X && (f = b.mb);
                            var h =
                                w.rm();
                            h.m((b.Ja.width + f) * e, (b.Ja.height + f) * e);
                            d.Ca = h;
                            w.Lk(h)
                        }
                        c.angle = b.$l();
                        c.type !== jj && (d = w.K(), c.location = b.Ya(zb, d), w.v(d));
                        this.Ml("Selection", c);
                        break a
                    }
                }
                this.Jj("Selection")
            }
            $q(this, a);
            for (a = this.ax; a.next();) b = a.value,
                b.Lb(),
                b.H()
        }
    };

    function $q(a, b)
    {
        b.Va.gf.each(function (b)
        {
            b.isEnabled && b.updateAdornments(a)
        });
        b.Va.updateAdornments(a)
    }
    w.u(R,
        {
            layer: "layer"
        }, function ()
        {
            return this.gw
        });
    w.u(R,
        {
            g: "diagram"
        }, function ()
        {
            var a = this.gw;
            return null !== a ? a.g : null
        });
    w.defineProperty(R,
        {
            ag: "layerName"
        }, function ()
        {
            return this.xl
        }, function (a)
        {
            var b = this.xl;
            if (b !== a)
            {
                w.j(a, "string", R, "layerName");
                var c = this.g;
                if (null === c || null !== c.Zt(a) && !c.Nq)
                    if (this.xl = a, null !== c && c.Fc(), this.h("layerName", b, a), b = this.layer, null !== b && b.name !== a && (c = b.g, null !== c && (a = c.Zt(a), null !== a && a !== b)))
                    {
                        var d = b.rf(-1, this, !0);
                        0 <= d && c.cd(Ff, "parts", b, this, null, d, !0);
                        d = a.$p(99999999, this, !0);
                        b.visible !== a.visible && this.Dd(a.visible);
                        0 <= d && c.cd(Ef, "parts", a, null, this, !0, d);
                        d = this.Rx;
                        if (null !==
                            d)
                        {
                            var e = c.Ua;
                            c.Ua = !0;
                            d(this, b, a);
                            c.Ua = e
                        }
                    }
            }
        });
    w.defineProperty(R,
        {
            Rx: "layerChanged"
        }, function ()
        {
            return this.es
        }, function (a)
        {
            var b = this.es;
            b !== a && (null !== a && w.j(a, "function", R, "layerChanged"), this.es = a, this.h("layerChanged", b, a))
        });
    w.defineProperty(R,
        {
            io: "zOrder"
        }, function ()
        {
            return this.It
        }, function (a)
        {
            var b = this.It;
            if (b !== a)
            {
                w.j(a, "number", R, "zOrder");
                this.It = a;
                var c = this.layer;
                null !== c && pl(c, -1, this);
                this.h("zOrder", b, a);
                a = this.g;
                null !== a && a.oa()
            }
        });
    R.prototype.invalidateAdornments = R.prototype.fe = function ()
    {
        var a = this.g;
        null !== a && (Ol(a), 0 !== (this.N & 16384) !== !0 && (this.N |= 16384, a.ye()))
    };

    function ll(a)
    {
        0 !== (a.N & 16384) !== !1 && (a.updateAdornments(), a.N &= -16385)
    }

    function ar(a)
    {
        if (!1 === Hm(a))
        {
            var b = a.g;
            null !== b && (b.ug.add(a), b.ye());
            br(a, !0);
            a.Ri()
        }
    }

    function cr(a)
    {
        a.N |= 2097152;
        if (!1 !== Hm(a))
        {
            var b = a.position,
                c = a.location;
            c.I() && b.I() || dr(a, b, c);
            var c = a.oc,
                d = c.copy();
            c.Qa();
            c.x = b.x;
            c.y = b.y;
            c.freeze();
            a.ay(d, c);
            br(a, !1)
        }
    }
    w.u(R,
        {
            bg: "locationObject"
        }, function ()
        {
            if (null === this.Al)
            {
                var a = this.$A;
                "" !== a ? (a = this.Cd(a), this.Al = null !== a ? a : this) : this.Al = this instanceof jh ? this.type !== jj && null !== this.placeholder ? this.placeholder : this : this
            }
            return this.Al.visible ? this.Al : this
        });
    w.defineProperty(R,
        {
            ZI: "minLocation"
        }, function ()
        {
            return this.ts
        }, function (a)
        {
            var b = this.ts;
            b.L(a) || (this.ts = a = a.S(), this.h("minLocation", b, a))
        });
    w.defineProperty(R,
        {
            TI: "maxLocation"
        }, function ()
        {
            return this.ms
        }, function (a)
        {
            var b = this.ms;
            b.L(a) || (this.ms = a = a.S(), this.h("maxLocation", b, a))
        });
    w.defineProperty(R,
        {
            $A: "locationObjectName"
        }, function ()
        {
            return this.ks
        }, function (a)
        {
            var b = this.ks;
            b !== a && (this.ks = a, this.Al = null, this.H(), this.h("locationObjectName", b, a))
        });
    w.defineProperty(R,
        {
            Ff: "locationSpot"
        }, function ()
        {
            return this.ls
        }, function (a)
        {
            var b = this.ls;
            b.L(a) || (this.ls = a = a.S(), this.H(), this.h("locationSpot", b, a))
        });
    R.prototype.move = function (a)
    {
        this.position = a
    };
    R.prototype.moveTo = R.prototype.moveTo = function (a, b)
    {
        var c = w.xb(a, b);
        this.move(c);
        w.v(c)
    };
    R.prototype.isVisible = function ()
    {
        if (!this.visible) return !1;
        var a = this.layer;
        if (null !== a && !a.visible) return !1;
        a = this.g;
        if (null !== a && (a = a.Ka, a.df && (a = a.Um.ka(this), null !== a && a.ly))) return !0;
        a = this.Da;
        return null === a || a.ad && a.isVisible() ? !0 : !1
    };
    R.prototype.Dd = function (a)
    {
        var b = this.g;
        a ? (this.J(4), this.fe(), null !== b && b.ug.add(this)) : (this.J(8), this.Qt());
        this.Qk();
        null !== b && (b.Fc(), b.oa())
    };
    R.prototype.findObject = R.prototype.Cd = function (a)
    {
        if (this.name === a) return this;
        var b = this.Sm;
        null === b && (this.Sm = b = new ra);
        if (void 0 !== b[a]) return b[a];
        for (var c = this.xa.n, d = c.length, e = 0; e < d; e++)
        {
            var f = c[e];
            if (f.name === a) return b[a] = f;
            if (f instanceof C)
                if (null === f.ik && null === f.wg)
                {
                    if (f = f.Cd(a), null !== f) return b[a] = f
                }
                else if (nn(f) && (f = f.xa.first(), null !== f && f.name === a)) return b[a] = f
        }
        return b[a] = null
    };

    function er(a, b, c, d)
    {
        void 0 === d && (d = new y);
        c = c.Td() ? Jb : c;
        var e = b.Ja;
        d.m(e.width * c.x + c.offsetX, e.height * c.y + c.offsetY);
        if (null === b || b === a) return d;
        b.transform.nb(d);
        for (b = b.R; null !== b && b !== a;) b.transform.nb(d), b = b.R;
        a.Wi.nb(d);
        d.offset(-a.ud.x, -a.ud.y);
        return d
    }
    R.prototype.ensureBounds = R.prototype.af = function ()
    {
        yk(this, Infinity, Infinity);
        this.hc()
    };

    function ol(a, b)
    {
        var c = a.RG,
            d;
        isNaN(a.mk) && (a.mk = bq(a));
        d = a.mk;
        var e = 2 * d;
        if (!a.hm) return c.m(b.x - 1 - d, b.y - 1 - d, b.width + 2 + e, b.height + 2 + e), c;
        d = b.x;
        var e = b.y,
            f = b.width,
            h = b.height,
            k = a.shadowBlur,
            l = a.JJ,
            f = f + k,
            h = h + k;
        d -= k / 2;
        e -= k / 2;
        0 < l.x ? f += l.x : (d += l.x, f -= l.x);
        0 < l.y ? h += l.y : (e += l.y, h -= l.y);
        c.m(d - 1, e - 1, f + 2, h + 2);
        return c
    }
    R.prototype.hc = function ()
    {
        this.Ri();
        if (!1 === Gm(this)) cr(this);
        else
        {
            var a = this.oc,
                b = w.Kf();
            b.assign(a);
            a.Qa();
            var c = kl(this);
            this.pj(0, 0, this.ud.width, this.ud.height);
            var d = this.position;
            dr(this, d, this.location);
            a.x = d.x;
            a.y = d.y;
            a.freeze();
            this.ay(b, a);
            Io(this, !1);
            b.L(a) ? this.Hf(c) : !this.he() || J(b.width, a.width) && J(b.height, a.height) || 0 <= this.rD && this.J(16);
            w.Hb(b);
            br(this, !1)
        }
    };
    R.prototype.ay = function (a, b)
    {
        var c = this.g;
        if (null !== c)
        {
            var d = !1;
            if (!1 === c.dk && a.I())
            {
                var e = c.be,
                    f = c.padding,
                    h = e.x + f.left,
                    k = e.y + f.top,
                    l = e.width - 2 * f.right,
                    e = e.height - 2 * f.bottom;
                a.x > h && a.y > k && a.right < l && a.bottom < e && b.x > h && b.y > k && b.right < l && b.bottom < e && (d = !0)
            }
            0 !== (this.N & 65536) !== !0 && a.L(b) || Sm(this, d, c);
            c.oa();
            Va(a, b) || (this instanceof T && !c.ja.lb && this.$f(), this.Qk())
        }
    };
    w.defineProperty(R,
        {
            location: "location"
        }, function ()
        {
            return this.Xi
        }, function (a)
        {
            var b = a.x,
                c = a.y,
                d = this.Xi,
                e = d.x,
                f = d.y;
            (e === b || isNaN(e) && isNaN(b)) && (f === c || isNaN(f) && isNaN(c)) || (a = a.S(), b = a, this instanceof W ? b = !1 : (this.Xi = b, this.N |= 2097152, !1 === Gm(this) && (ar(this), c = this.$a, c.I() && (e = c.copy(), c.m(c.x + (b.x - d.x), c.y + (b.y - d.y)), fr(this, this.g, c, e), this.h("position", e, c))), b = !0), b && this.h("location", d, a))
        });
    g = R.prototype;
    g.DB = function (a, b)
    {
        if (this instanceof W || !a.I()) return !1;
        var c = this.g;
        if (null !== c && (fr(this, c, a, b), !0 === c.ja.lb)) return !0;
        this.$a = a;
        this.N &= -2097153;
        c = this.Xi;
        if (c.I())
        {
            var d = c.copy();
            c.m(c.x + (a.x - b.x), c.y + (a.y - b.y));
            this.h("location", d, c)
        }!1 === Hm(this) && !1 === Gm(this) && (ar(this), cr(this));
        return !0
    };

    function fr(a, b, c, d)
    {
        null === b || a instanceof jh || (b = b.Ka, b.rc && Vk(b, a, "position", d.copy(), c.copy(), !1))
    }
    g.zy = function (a, b)
    {
        var c = this.Xi,
            d = this.$a;
        Hm(this) || Gm(this) ? c.m(NaN, NaN) : c.m(c.x + a - d.x, c.y + b - d.y);
        d.m(a, b);
        ar(this)
    };
    g.EB = function ()
    {
        this.N &= -2097153;
        ar(this)
    };

    function dr(a, b, c)
    {
        var d = w.K(),
            e = a.Ff,
            f = a.bg;
        e.Td() && w.k("determineOffset: Part's locationSpot must be real: " + e.toString());
        var h = f.Ja,
            k = f instanceof X ? f.mb : 0;
        d.Zu(0, 0, h.width + k, h.height + k, e);
        if (f !== a)
            for (d.offset(-k / 2, -k / 2), f.transform.nb(d), e = f.R; null !== e && e !== a;) e.transform.nb(d), e = e.R;
        a.Wi.nb(d);
        d.offset(-a.ud.x, -a.ud.y);
        e = a.g;
        f = c.I();
        h = b.I();
        f && h ? 0 !== (a.N & 2097152) ? gr(a, b, c, e, d) : hr(a, b, c, e, d) : f ? gr(a, b, c, e, d) : h && hr(a, b, c, e, d);
        a.N |= 2097152;
        w.v(d);
        a.Ri()
    }

    function gr(a, b, c, d, e)
    {
        var f = b.x,
            h = b.y;
        b.m(c.x - e.x, c.y - e.y);
        null !== d && (c = d.Ka, (e = c.ek) || !c.rc || a instanceof jh || Vk(c, a, "position", new y(f, h), b, !1), e || b.x === f && b.y === h || (c = d.fb, d.fb = !0, a.h("position", new y(f, h), b), d.fb = c))
    }

    function hr(a, b, c, d, e)
    {
        var f = c.copy();
        c.m(b.x + e.x, b.y + e.y);
        c.L(f) || null === d || (b = d.fb, d.fb = !0, a.h("location", f, c), d.fb = b)
    }

    function Sm(a, b, c)
    {
        Ko(a, !1);
        a instanceof T && c.QA(a);
        a.layer.Pc || b || c.Fc();
        b = a.oc;
        var d = c.sb;
        d.I() ? (kl(a) ? $a(b, d) || a.Hf(!1) : b.Zf(d) && a.Hf(!0), a.updateAdornments()) : c.tl = !0
    }
    g.gm = function ()
    {
        return !0
    };

    function ml(a, b)
    {
        var c = a.oc;
        if (0 !== c.width && 0 !== c.height && !isNaN(c.x) && !isNaN(c.y) && a.isVisible())
        {
            var d = a.transform;
            null !== a.cc && (Qo(a, b, a.cc, !0, !0), b.fillRect(c.x, c.y, c.width, c.height));
            null === a.cc && null === a.Ib && (Qo(a, b, "rgba(0,0,0,0.4)", !0, !1), b.fillRect(c.x, c.y, c.width, c.height));
            null !== a.Ib && (d.vu() || b.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy), c = a.Ja, Qo(a, b, a.Ib, !0, !1), b.fillRect(0, 0, c.width, c.height), d.vu() || (c = 1 / (d.m11 * d.m22 - d.m12 * d.m21), b.transform(d.m22 * c, -d.m12 * c, -d.m21 * c, d.m11 * c, c * (d.m21 *
                d.dy - d.m22 * d.dx), c * (d.m12 * d.dx - d.m11 * d.dy))))
        }
    }
    g.he = function ()
    {
        return !0
    };
    g.zj = function ()
    {
        return !0
    };
    w.defineProperty(R,
        {
            zd: "category"
        }, function ()
        {
            return this.Ci
        }, function (a)
        {
            var b = this.Ci;
            if (b !== a)
            {
                w.j(a, "string", R, "category");
                var c = this.g,
                    d = this.data,
                    e = null;
                if (null !== c && null !== d && !(this instanceof jh))
                {
                    var f = c.$.ja;
                    f.isEnabled && !f.lb && (e = this.clone(), e.xa.Nc(this.xa))
                }
                this.Ci = a;
                this.h("category", b, a);
                null === c || null === d || this instanceof jh ? (e = this.Ye, null !== e && (a = e.Ai, null !== a && a.remove(b), e.Ml(this.zd, this))) : (f = c.$, f.ja.lb || (this instanceof W ? (f instanceof Q ? f.qG(d, a) : f instanceof Zf && f.HJ(d,
                    a), c = ij(c, a), null !== c && (lh(c), c = c.copy(), null !== c && ir(this, c, b, a))) : (null !== f && f.wy(d, a), c = vn(c, d, a), null !== c && (lh(c), c = c.copy(), null === c || c instanceof W || (c.location = this.location, ir(this, c, b, a)))), null !== e && (b = this.clone(), b.xa.Nc(this.xa), this.h("self", e, b))))
            }
        });
    w.defineProperty(R,
        {
            self: "self"
        }, function ()
        {
            return this
        }, function (a)
        {
            ir(this, a, this.zd, a.zd)
        });
    var jr = !1;

    function ir(a, b, c, d)
    {
        b.constructor === a.constructor || jr || (jr = !0, w.trace('Should not change the class of the Part when changing category from "' + c + '" to "' + d + '"'), w.trace("  Old class: " + w.pf(a) + ", new class: " + w.pf(b) + ", part: " + a.toString()));
        a.Qt();
        var e = a.data;
        c = a.ag;
        var f = a.jb,
            h = a.Ng,
            k = !0,
            l = !0,
            m = !1;
        if (a instanceof T) var n = a,
            k = n.Cj,
            l = n.uc,
            m = n.Hq;
        b.pi(a);
        b.cloneProtected(a);
        a.Ci = d;
        a.H();
        a.oa();
        b = a.g;
        d = !0;
        null !== b && (d = b.fb, b.fb = !0);
        a.Yd = e;
        null !== e && a.Lb();
        null !== b && (b.fb = d);
        e = a.ag;
        e !== c && (a.xl = c,
            a.ag = e);
        a instanceof T && (n = a, n.Cj = k, n.uc = l, n.Hq = m, n.he() && n.J(64));
        a.jb = f;
        a.Ng = h
    }
    R.prototype.canCopy = function ()
    {
        if (!this.IH) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.Ck) return !1;
        a = a.g;
        return null === a ? !0 : a.Ck ? !0 : !1
    };
    R.prototype.canDelete = function ()
    {
        if (!this.NH) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.ln) return !1;
        a = a.g;
        return null === a ? !0 : a.ln ? !0 : !1
    };
    R.prototype.canEdit = function ()
    {
        if (!this.QJ) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.hx) return !1;
        a = a.g;
        return null === a ? !0 : a.hx ? !0 : !1
    };
    R.prototype.canGroup = function ()
    {
        if (!this.lI) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.bx) return !1;
        a = a.g;
        return null === a ? !0 : a.bx ? !0 : !1
    };
    R.prototype.canMove = function ()
    {
        if (!this.dJ) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.Pl) return !1;
        a = a.g;
        return null === a ? !0 : a.Pl ? !0 : !1
    };
    R.prototype.canReshape = function ()
    {
        if (!this.rJ) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.ex) return !1;
        a = a.g;
        return null === a ? !0 : a.ex ? !0 : !1
    };
    R.prototype.canResize = function ()
    {
        if (!this.sJ) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.Pt) return !1;
        a = a.g;
        return null === a ? !0 : a.Pt ? !0 : !1
    };
    R.prototype.canRotate = function ()
    {
        if (!this.vJ) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.gx) return !1;
        a = a.g;
        return null === a ? !0 : a.gx ? !0 : !1
    };
    R.prototype.canSelect = function ()
    {
        if (!this.lm) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.Af) return !1;
        a = a.g;
        return null === a ? !0 : a.Af ? !0 : !1
    };
    w.defineProperty(R,
        {
            IH: "copyable"
        }, function ()
        {
            return 0 !== (this.N & 1)
        }, function (a)
        {
            var b = 0 !== (this.N & 1);
            b !== a && (this.N ^= 1, this.h("copyable", b, a))
        });
    w.defineProperty(R,
        {
            NH: "deletable"
        }, function ()
        {
            return 0 !== (this.N & 2)
        }, function (a)
        {
            var b = 0 !== (this.N & 2);
            b !== a && (this.N ^= 2, this.h("deletable", b, a))
        });
    w.defineProperty(R,
        {
            QJ: "textEditable"
        }, function ()
        {
            return 0 !== (this.N & 4)
        }, function (a)
        {
            var b = 0 !== (this.N & 4);
            b !== a && (this.N ^= 4, this.h("textEditable", b, a), this.fe())
        });
    w.defineProperty(R,
        {
            lI: "groupable"
        }, function ()
        {
            return 0 !== (this.N & 8)
        }, function (a)
        {
            var b = 0 !== (this.N & 8);
            b !== a && (this.N ^= 8, this.h("groupable", b, a))
        });
    w.defineProperty(R,
        {
            dJ: "movable"
        }, function ()
        {
            return 0 !== (this.N & 16)
        }, function (a)
        {
            var b = 0 !== (this.N & 16);
            b !== a && (this.N ^= 16, this.h("movable", b, a))
        });
    w.defineProperty(R,
        {
            DJ: "selectionAdorned"
        }, function ()
        {
            return 0 !== (this.N & 32)
        }, function (a)
        {
            var b = 0 !== (this.N & 32);
            b !== a && (this.N ^= 32, this.h("selectionAdorned", b, a), this.fe())
        });
    w.defineProperty(R,
        {
            VA: "isInDocumentBounds"
        }, function ()
        {
            return 0 !== (this.N & 64)
        }, function (a)
        {
            var b = 0 !== (this.N & 64);
            if (b !== a)
            {
                this.N ^= 64;
                var c = this.g;
                null !== c && c.Fc();
                this.h("isInDocumentBounds", b, a)
            }
        });
    w.defineProperty(R,
        {
            FF: "isLayoutPositioned"
        }, function ()
        {
            return 0 !== (this.N & 128)
        }, function (a)
        {
            var b = 0 !== (this.N & 128);
            b !== a && (this.N ^= 128, this.h("isLayoutPositioned", b, a), this.J(a ? 4 : 8))
        });
    w.defineProperty(R,
        {
            lm: "selectable"
        }, function ()
        {
            return 0 !== (this.N & 256)
        }, function (a)
        {
            var b = 0 !== (this.N & 256);
            b !== a && (this.N ^= 256, this.h("selectable", b, a), this.fe())
        });
    w.defineProperty(R,
        {
            rJ: "reshapable"
        }, function ()
        {
            return 0 !== (this.N & 512)
        }, function (a)
        {
            var b = 0 !== (this.N & 512);
            b !== a && (this.N ^= 512, this.h("reshapable", b, a), this.fe())
        });
    w.defineProperty(R,
        {
            sJ: "resizable"
        }, function ()
        {
            return 0 !== (this.N & 1024)
        }, function (a)
        {
            var b = 0 !== (this.N & 1024);
            b !== a && (this.N ^= 1024, this.h("resizable", b, a), this.fe())
        });
    w.defineProperty(R,
        {
            vJ: "rotatable"
        }, function ()
        {
            return 0 !== (this.N & 2048)
        }, function (a)
        {
            var b = 0 !== (this.N & 2048);
            b !== a && (this.N ^= 2048, this.h("rotatable", b, a), this.fe())
        });
    w.defineProperty(R,
        {
            jb: "isSelected"
        }, function ()
        {
            return 0 !== (this.N & 4096)
        }, function (a)
        {
            var b = 0 !== (this.N & 4096);
            if (b !== a)
            {
                var c = this.g;
                if (!a || this.canSelect() && !(null !== c && c.selection.count >= c.UI))
                {
                    this.N ^= 4096;
                    var d = !1;
                    if (null !== c)
                    {
                        d = c.fb;
                        c.fb = !0;
                        var e = c.selection;
                        e.Qa();
                        a ? e.add(this) : e.remove(this);
                        e.freeze()
                    }
                    this.h("isSelected", b, a);
                    this.fe();
                    a = this.FJ;
                    null !== a && a(this);
                    null !== c && (c.ye(), c.fb = d)
                }
            }
        });
    w.defineProperty(R,
        {
            Ng: "isHighlighted"
        }, function ()
        {
            return 0 !== (this.N & 524288)
        }, function (a)
        {
            var b = 0 !== (this.N & 524288);
            if (b !== a)
            {
                this.N ^= 524288;
                var c = this.g;
                null !== c && (c = c.cm, c.Qa(), a ? c.add(this) : c.remove(this), c.freeze());
                this.h("isHighlighted", b, a);
                this.oa();
                a = this.oI;
                null !== a && a(this)
            }
        });
    w.defineProperty(R,
        {
            hm: "isShadowed"
        }, function ()
        {
            return 0 !== (this.N & 8192)
        }, function (a)
        {
            var b = 0 !== (this.N & 8192);
            b !== a && (this.N ^= 8192, this.h("isShadowed", b, a), this.oa())
        });

    function Hm(a)
    {
        return 0 !== (a.N & 32768)
    }

    function br(a, b)
    {
        a.N = b ? a.N | 32768 : a.N & -32769
    }

    function Ko(a, b)
    {
        a.N = b ? a.N | 65536 : a.N & -65537
    }

    function kl(a)
    {
        return 0 !== (a.N & 131072)
    }
    R.prototype.Hf = function (a)
    {
        this.N = a ? this.N | 131072 : this.N & -131073
    };

    function kr(a, b)
    {
        a.N = b ? a.N | 1048576 : a.N & -1048577
    }
    w.defineProperty(R,
        {
            xF: "isAnimated"
        }, function ()
        {
            return 0 !== (this.N & 262144)
        }, function (a)
        {
            var b = 0 !== (this.N & 262144);
            b !== a && (this.N ^= 262144, this.h("isAnimated", b, a))
        });
    w.defineProperty(R,
        {
            oI: "highlightedChanged"
        }, function ()
        {
            return this.Rr
        }, function (a)
        {
            var b = this.Rr;
            b !== a && (null !== a && w.j(a, "function", R, "highlightedChanged"), this.Rr = a, this.h("highlightedChanged", b, a))
        });
    w.defineProperty(R,
        {
            yB: "selectionObjectName"
        }, function ()
        {
            return this.kt
        }, function (a)
        {
            var b = this.kt;
            b !== a && (this.kt = a, this.dn = null, this.h("selectionObjectName", b, a))
        });
    w.defineProperty(R,
        {
            EJ: "selectionAdornmentTemplate"
        }, function ()
        {
            return this.it
        }, function (a)
        {
            var b = this.it;
            b !== a && (this.it = a, this.h("selectionAdornmentTemplate", b, a))
        });
    w.u(R,
        {
            zq: "selectionObject"
        }, function ()
        {
            if (null === this.dn)
            {
                var a = this.yB;
                null !== a && "" !== a ? (a = this.Cd(a), this.dn = null !== a ? a : this) : this instanceof W ? (a = this.path, this.dn = null !== a ? a : this) : this.dn = this
            }
            return this.dn
        });
    w.defineProperty(R,
        {
            FJ: "selectionChanged"
        }, function ()
        {
            return this.jt
        }, function (a)
        {
            var b = this.jt;
            b !== a && (null !== a && w.j(a, "function", R, "selectionChanged"), this.jt = a, this.h("selectionChanged", b, a))
        });
    w.defineProperty(R,
        {
            gG: "resizeAdornmentTemplate"
        }, function ()
        {
            return this.Xs
        }, function (a)
        {
            var b = this.Xs;
            b !== a && (this.Xs = a, this.h("resizeAdornmentTemplate", b, a))
        });
    w.defineProperty(R,
        {
            iG: "resizeObjectName"
        }, function ()
        {
            return this.Zs
        }, function (a)
        {
            var b = this.Zs;
            b !== a && (this.Zs = a, this.ip = null, this.h("resizeObjectName", b, a))
        });
    w.u(R,
        {
            hG: "resizeObject"
        }, function ()
        {
            if (null === this.ip)
            {
                var a = this.iG;
                null !== a && "" !== a ? (a = this.Cd(a), this.ip = null !== a ? a : this) : this.ip = this
            }
            return this.ip
        });
    w.defineProperty(R,
        {
            tJ: "resizeCellSize"
        }, function ()
        {
            return this.Ys
        }, function (a)
        {
            var b = this.Ys;
            b.L(a) || (this.Ys = a = a.S(), this.h("resizeCellSize", b, a))
        });
    w.defineProperty(R,
        {
            wJ: "rotateAdornmentTemplate"
        }, function ()
        {
            return this.$s
        }, function (a)
        {
            var b = this.$s;
            b !== a && (this.$s = a, this.h("rotateAdornmentTemplate", b, a))
        });
    w.defineProperty(R,
        {
            xJ: "rotateObjectName"
        }, function ()
        {
            return this.at
        }, function (a)
        {
            var b = this.at;
            b !== a && (this.at = a, this.jp = null, this.h("rotateObjectName", b, a))
        });
    w.u(R,
        {
            uB: "rotateObject"
        }, function ()
        {
            if (null === this.jp)
            {
                var a = this.xJ;
                null !== a && "" !== a ? (a = this.Cd(a), this.jp = null !== a ? a : this) : this.jp = this
            }
            return this.jp
        });
    w.defineProperty(R,
        {
            text: "text"
        }, function ()
        {
            return this.Md
        }, function (a)
        {
            var b = this.Md;
            b !== a && (this.Md = a, this.h("text", b, a))
        });
    w.defineProperty(R,
        {
            Da: "containingGroup"
        }, function ()
        {
            return this.il
        }, function (a)
        {
            if (this.he())
            {
                var b = this.il;
                if (b !== a)
                {
                    null === a || this !== a && !a.qi(this) || (this === a && w.k("Cannot make a Group a member of itself: " + this.toString()), w.k("Cannot make a Group indirectly contain itself: " + this.toString() + " already contains " + a.toString()));
                    this.J(Xm);
                    var c = this.g;
                    null !== b ? lr(b, this) : this instanceof V && null !== c && c.Jl.remove(this);
                    this.il = a;
                    null !== a ? mr(a, this) : this instanceof V && null !== c && c.Jl.add(this);
                    this.J(Om);
                    if (null !== c)
                    {
                        var d = this.data,
                            e = c.$;
                        null !== d && e instanceof Q && e.BB(d, e.rb(null !== a ? a.data : null))
                    }
                    d = this.LE;
                    null !== d && (e = !0, null !== c && (e = c.Ua, c.Ua = !0), d(this, b, a), null !== c && (c.Ua = e));
                    if (this instanceof V)
                        for (c = new I(R), ih(c, this, !0, 0, !0), c = c.i; c.next();)
                            if (d = c.value, d instanceof T)
                                for (d = d.je; d.next();) tn(d.value);
                    if (this instanceof T)
                    {
                        for (d = this.je; d.next();) tn(d.value);
                        c = this.Xb;
                        null !== c && tn(c)
                    }
                    this.h("containingGroup", b, a);
                    null !== a && (b = a.layer, null !== b && pl(b, -1, a))
                }
            }
            else w.k("cannot set the Part.containingGroup of a Link or Adornment")
        });
    g = R.prototype;
    g.Qk = function ()
    {
        var a = this.Da;
        null !== a && (a.H(), null !== a.Nb && a.Nb.H(), a.$f())
    };
    g.oa = function ()
    {
        var a = this.g;
        null !== a && !Gm(this) && !Hm(this) && this.isVisible() && this.oc.I() && a.oa(ol(this, this.oc))
    };
    g.H = function ()
    {
        C.prototype.H.call(this);
        var a = this.g;
        null !== a && (a.ug.add(this), this instanceof T && null !== this.Xb && Uo(this.Xb), a.ye(!0))
    };
    g.nu = function (a)
    {
        a || (a = this.il, null !== a && mr(a, this))
    };
    g.ou = function (a)
    {
        a || (a = this.il, null !== a && lr(a, this))
    };
    g.xn = function ()
    {
        var a = this.data;
        if (null !== a)
        {
            var b = this.g;
            null !== b && (b = b.$, null !== b && b.oy(a))
        }
    };
    w.defineProperty(R,
        {
            LE: "containingGroupChanged"
        }, function ()
        {
            return this.cr
        }, function (a)
        {
            var b = this.cr;
            b !== a && (null !== a && w.j(a, "function", R, "containingGroupChanged"), this.cr = a, this.h("containingGroupChanged", b, a))
        });
    R.prototype.findSubGraphLevel = function ()
    {
        return nr(this, this)
    };

    function nr(a, b)
    {
        var c = b.Da;
        return null !== c ? 1 + nr(a, c) : b instanceof T && (c = b.Xb, null !== c) ? nr(a, c) : 0
    }
    R.prototype.findTopLevelPart = function ()
    {
        return or(this, this)
    };

    function or(a, b)
    {
        var c = b.Da;
        return null !== c ? or(a, c) : b instanceof T && (c = b.Xb, null !== c) ? or(a, c) : b
    }
    w.u(R,
        {
            eq: "isTopLevel"
        }, function ()
        {
            return null !== this.Da || this instanceof T && null !== this.Xb ? !1 : !0
        });
    R.prototype.isMemberOf = R.prototype.qi = function (a)
    {
        return a instanceof V ? pr(this, this, a) : !1
    };

    function pr(a, b, c)
    {
        if (b === c || null === c) return !1;
        var d = b.Da;
        return null === d || d !== c && !pr(a, d, c) ? b instanceof T && (b = b.Xb, null !== b) ? pr(a, b, c) : !1 : !0
    }
    R.prototype.findCommonContainingGroup = R.prototype.VH = function (a)
    {
        if (null === a) return null;
        if (this === a) return this.Da;
        for (var b = this; null !== b;)
        {
            b instanceof V && kr(b, !0);
            if (b instanceof T)
            {
                var c = b.Xb;
                null !== c && (b = c)
            }
            b = b.Da
        }
        for (var d = null, b = a; null !== b;)
        {
            if (0 !== (b.N & 1048576))
            {
                d = b;
                break
            }
            b instanceof T && (c = b.Xb, null !== c && (b = c));
            b = b.Da
        }
        for (b = this; null !== b;) b instanceof V && kr(b, !1), b instanceof T && (c = b.Xb, null !== c && (b = c)), b = b.Da;
        return d
    };
    w.defineProperty(R,
        {
            JI: "layoutConditions"
        }, function ()
        {
            return this.fs
        }, function (a)
        {
            var b = this.fs;
            b !== a && (this.fs = a, this.h("layoutConditions", b, a))
        });
    R.prototype.canLayout = function ()
    {
        if (!this.FF || !this.isVisible()) return !1;
        var a = this.layer;
        return null !== a && a.Pc || this instanceof T && this.Cf ? !1 : !0
    };
    R.prototype.invalidateLayout = R.prototype.J = function (a)
    {
        void 0 === a && (a = 16777215);
        var b;
        this.FF && 0 !== (a & this.JI) ? (b = this.layer, null !== b && b.Pc || this instanceof T && this.Cf ? b = !1 : (b = this.g, b = null !== b && b.ja.lb ? !1 : !0)) : b = !1;
        if (b)
            if (b = this.il, null !== b)
            {
                var c = b.Tb;
                null !== c ? c.J() : b.J(a)
            }
            else a = this.g, null !== a && (c = a.Tb, null !== c && c.J())
    };

    function Tm(a)
    {
        if (!a.isVisible()) return !1;
        a = a.layer;
        return null !== a && a.Pc ? !1 : !0
    }
    w.defineProperty(R,
        {
            vx: "dragComputation"
        }, function ()
        {
            return this.xr
        }, function (a)
        {
            var b = this.xr;
            b !== a && (null !== a && w.j(a, "function", R, "dragComputation"), this.xr = a, this.h("dragComputation", b, a))
        });
    w.defineProperty(R,
        {
            JJ: "shadowOffset"
        }, function ()
        {
            return this.fn
        }, function (a)
        {
            var b = this.fn;
            b.L(a) || (this.fn = a = a.S(), this.oa(), this.h("shadowOffset", b, a))
        });
    w.defineProperty(R,
        {
            shadowColor: "shadowColor"
        }, function ()
        {
            return this.en
        }, function (a)
        {
            var b = this.en;
            b !== a && (this.en = a, this.oa(), this.h("shadowColor", b, a))
        });
    w.defineProperty(R,
        {
            shadowBlur: "shadowBlur"
        }, function ()
        {
            return this.Dg
        }, function (a)
        {
            var b = this.Dg;
            b !== a && (this.Dg = a, this.oa(), this.h("shadowBlur", b, a))
        });

    function jh(a)
    {
        0 === arguments.length ? R.call(this, Uj) : R.call(this, a);
        this.N &= -257;
        this.xl = "Adornment";
        this.Jc = null;
        this.BD = 0;
        this.pE = !1;
        this.Nb = this.Yg = null
    }
    w.La(jh, R);
    w.ga("Adornment", jh);
    jh.prototype.toString = function ()
    {
        var a = this.Ye;
        return "Adornment(" + this.zd + ")" + (null !== a ? a.toString() : "")
    };
    jh.prototype.updateRelationshipsFromData = function () {};
    jh.prototype.Eu = function (a)
    {
        var b = this.ub.V,
            c = this.ub;
        if (b instanceof W && c instanceof X)
        {
            var d = b.path,
                c = d.of;
            b.Eu(a);
            c = d.of;
            a = this.xa.n;
            b = a.length;
            for (d = 0; d < b; d++)
            {
                var e = a[d];
                e.ff && e instanceof X && (e.Sa = c)
            }
        }
    };
    w.u(jh,
        {
            placeholder: "placeholder"
        }, function ()
        {
            return this.Nb
        });
    w.defineProperty(jh,
        {
            ub: "adornedObject"
        }, function ()
        {
            return this.Jc
        }, function (a)
        {
            var b = this.Ye,
                c = null;
            null !== a && (c = a.V);
            null === b || null !== a && b === c || b.Jj(this.zd);
            this.Jc = a;
            null !== c && c.Ml(this.zd, this)
        });
    w.u(jh,
        {
            Ye: "adornedPart"
        }, function ()
        {
            var a = this.Jc;
            return null !== a ? a.V : null
        });
    jh.prototype.gm = function ()
    {
        var a = this.Jc;
        if (null === a) return !0;
        a = a.V;
        return null === a || !Gm(a)
    };
    jh.prototype.he = function ()
    {
        return !1
    };
    w.u(jh,
        {
            Da: "containingGroup"
        }, function ()
        {
            return null
        });
    jh.prototype.Xn = function (a, b, c, d, e, f, h)
    {
        if (a === Ef && "elements" === b)
            if (e instanceof Pj)
            {
                var k = e;
                null === this.Nb ? this.Nb = k : this.Nb !== k && w.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")
            }
            else e instanceof C && (k = e.Yt(function (a)
            {
                return a instanceof Pj
            }), k instanceof Pj && (null === this.Nb ? this.Nb = k : this.Nb !== k && w.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")));
        else a === Ff && "elements" === b && null !== this.Nb && (d === this.Nb ? this.Nb = null : d instanceof C &&
            this.Nb.fm(d) && (this.Nb = null));
        R.prototype.Xn.call(this, a, b, c, d, e, f, h)
    };
    jh.prototype.updateAdornments = function () {};
    jh.prototype.xn = function () {};

    function T(a)
    {
        R.call(this, a);
        this.ya = 13;
        this.qc = new H(W);
        this.Dt = this.To = this.zl = this.hs = this.gs = null;
        this.Wq = fd;
        this.Ie = this.Lh = null;
        this.Ts = qr;
        this.Ak = !1
    }
    w.La(T, R);
    w.ga("Node", T);
    T.prototype.cloneProtected = function (a)
    {
        R.prototype.cloneProtected.call(this, a);
        a.ya = this.ya;
        a.ya = this.ya & -17;
        a.gs = this.gs;
        a.hs = this.hs;
        a.zl = this.zl;
        a.Dt = this.Dt;
        a.Wq = this.Wq.S();
        a.Ts = this.Ts
    };
    T.prototype.pi = function (a)
    {
        R.prototype.pi.call(this, a);
        a.$f();
        a.Lh = this.Lh;
        a.Ie = null
    };
    var rr;
    T.DirectionDefault = rr = w.p(T, "DirectionDefault", 0);
    T.DirectionAbsolute = w.p(T, "DirectionAbsolute", 1);
    var sr;
    T.DirectionRotatedNode = sr = w.p(T, "DirectionRotatedNode", 2);
    var Ao;
    T.DirectionRotatedNodeOrthogonal = Ao = w.p(T, "DirectionRotatedNodeOrthogonal", 3);
    T.SpreadingNone = w.p(T, "SpreadingNone", 10);
    var qr;
    T.SpreadingEvenly = qr = w.p(T, "SpreadingEvenly", 11);
    var tr;
    T.SpreadingPacked = tr = w.p(T, "SpreadingPacked", 12);

    function ur(a, b)
    {
        null !== b && (null === a.Lh && (a.Lh = new I(zl)), a.Lh.add(b))
    }

    function vr(a, b, c, d)
    {
        if (null === b || null === a.Lh) return null;
        for (var e = a.Lh.i; e.next();)
        {
            var f = e.value;
            if (f.lq === a && f.Ju === b && f.gy === c && f.hy === d || f.lq === b && f.Ju === a && f.gy === d && f.hy === c) return f
        }
        return null
    }
    T.prototype.invalidateLinkBundle = function (a, b, c)
    {
        if (void 0 === b || null === b) b = "";
        if (void 0 === c || null === c) c = "";
        a = vr(this, a, b, c);
        null !== a && a.aq()
    };
    T.prototype.Xn = function (a, b, c, d, e, f, h)
    {
        a === Ef && "elements" === b ? this.Ie = null : a === Ff && "elements" === b && (this.Ie = null);
        R.prototype.Xn.call(this, a, b, c, d, e, f, h)
    };
    T.prototype.invalidateConnectedLinks = T.prototype.$f = function (a)
    {
        void 0 === a && (a = null);
        for (var b = this.je; b.next();)
        {
            var c = b.value;
            null !== a && a.contains(c) || (wr(this, c.kc), wr(this, c.Ic), c.Wb())
        }
    };

    function Lo(a, b)
    {
        for (var c = a.je; c.next();)
        {
            var d = c.value;
            if (d.kc === b || d.Ic === b) wr(a, d.kc), wr(a, d.Ic), d.Wb()
        }
    }

    function wr(a, b)
    {
        if (null !== b)
        {
            var c = b.Ss;
            null !== c && c.aq();
            c = a.Da;
            null === c || c.ad || wr(c, c.port)
        }
    }
    T.prototype.gm = function ()
    {
        return !0
    };
    w.defineProperty(T,
        {
            kJ: "portSpreading"
        }, function ()
        {
            return this.Ts
        }, function (a)
        {
            var b = this.Ts;
            b !== a && (this.Ts = a, this.h("portSpreading", b, a), a = this.g, null !== a && a.ja.lb || this.$f())
        });
    w.defineProperty(T,
        {
            kA: "avoidable"
        }, function ()
        {
            return 0 !== (this.ya & 8)
        }, function (a)
        {
            var b = 0 !== (this.ya & 8);
            if (b !== a)
            {
                this.ya ^= 8;
                var c = this.g;
                null !== c && c.QA(this);
                this.h("avoidable", b, a)
            }
        });
    w.defineProperty(T,
        {
            rH: "avoidableMargin"
        }, function ()
        {
            return this.Wq
        }, function (a)
        {
            "number" === typeof a ? a = new hb(a) : w.G(a, hb, T, "avoidableMargin");
            var b = this.Wq;
            if (!b.L(a))
            {
                this.Wq = a = a.S();
                var c = this.g;
                null !== c && c.QA(this);
                this.h("avoidableMargin", b, a)
            }
        });
    T.prototype.getAvoidableRect = function (a)
    {
        a.set(this.U);
        a.$w(this.rH);
        return a
    };
    T.prototype.findVisibleNode = function ()
    {
        for (var a = this; null !== a && !a.isVisible();) a = a.Da;
        return a
    };
    T.prototype.isVisible = function ()
    {
        if (!R.prototype.isVisible.call(this)) return !1;
        var a = !0,
            b = vl,
            c = this.g;
        if (null !== c)
        {
            a = c.Ka;
            if (a.df && (a = a.Um.ka(this), null !== a && a.ly)) return !0;
            a = c.Ud;
            b = c.SB
        }
        if (b === vl)
        {
            if (c = this.Kk(), null !== c && !c.uc) return !1
        }
        else if (b === an)
        {
            if (c = a ? this.aF() : this.bF(), 0 < c.count && c.all(function (a)
            {
                return !a.uc
            })) return !1
        }
        else if (b === bn && (c = a ? this.aF() : this.bF(), 0 < c.count && c.any(function (a)
        {
            return !a.uc
        }))) return !1;
        c = this.Xb;
        return null !== c ? c.isVisible() : !0
    };
    T.prototype.Dd = function (a)
    {
        R.prototype.Dd.call(this, a);
        for (var b = this.je; b.next();) b.value.Dd(a)
    };
    w.u(T,
        {
            je: "linksConnected"
        }, function ()
        {
            return this.qc.i
        });
    T.prototype.findLinksConnected = T.prototype.ZE = function (a)
    {
        void 0 === a && (a = null);
        if (null === a) return this.qc.i;
        var b = new za(this.qc),
            c = this;
        b.rq = function (b)
        {
            return b.Y === c && b.Mg === a || b.Z === c && b.Ih === a
        };
        return b
    };
    T.prototype.findLinksOutOf = T.prototype.Cx = function (a)
    {
        void 0 === a && (a = null);
        var b = new za(this.qc),
            c = this;
        b.rq = function (b)
        {
            return b.Y !== c ? !1 : null === a ? !0 : b.Mg === a
        };
        return b
    };
    T.prototype.findLinksInto = T.prototype.Lg = function (a)
    {
        void 0 === a && (a = null);
        var b = new za(this.qc),
            c = this;
        b.rq = function (b)
        {
            return b.Z !== c ? !1 : null === a ? !0 : b.Ih === a
        };
        return b
    };
    T.prototype.findNodesConnected = T.prototype.$E = function (a)
    {
        void 0 === a && (a = null);
        for (var b = null, c = null, d = this.qc.i; d.next();)
        {
            var e = d.value;
            if (e.Y === this)
            {
                if (null === a || e.Mg === a) e = e.Z, null !== b ? b.add(e) : null !== c && c !== e ? (b = new I(T), b.add(c), b.add(e)) : c = e
            }
            else e.Z !== this || null !== a && e.Ih !== a || (e = e.Y, null !== b ? b.add(e) : null !== c && c !== e ? (b = new I(T), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.i : null !== c ? new wa(c) : ua
    };
    T.prototype.findNodesOutOf = T.prototype.bF = function (a)
    {
        void 0 === a && (a = null);
        for (var b = null, c = null, d = this.qc.i; d.next();)
        {
            var e = d.value;
            e.Y !== this || null !== a && e.Mg !== a || (e = e.Z, null !== b ? b.add(e) : null !== c && c !== e ? (b = new I(T), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.i : null !== c ? new wa(c) : ua
    };
    T.prototype.findNodesInto = T.prototype.aF = function (a)
    {
        void 0 === a && (a = null);
        for (var b = null, c = null, d = this.qc.i; d.next();)
        {
            var e = d.value;
            e.Z !== this || null !== a && e.Ih !== a || (e = e.Y, null !== b ? b.add(e) : null !== c && c !== e ? (b = new I(T), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.i : null !== c ? new wa(c) : ua
    };
    T.prototype.findLinksBetween = function (a, b, c)
    {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var d = new za(this.qc),
            e = this;
        d.rq = function (d)
        {
            return (d.Y !== e || d.Z !== a || null !== b && d.Mg !== b || null !== c && d.Ih !== c) && (d.Y !== a || d.Z !== e || null !== c && d.Mg !== c || null !== b && d.Ih !== b) ? !1 : !0
        };
        return d
    };
    T.prototype.findLinksTo = function (a, b, c)
    {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var d = new za(this.qc),
            e = this;
        d.rq = function (d)
        {
            return d.Y !== e || d.Z !== a || null !== b && d.Mg !== b || null !== c && d.Ih === c ? !1 : !0
        };
        return d
    };
    w.defineProperty(T,
        {
            KI: "linkConnected"
        }, function ()
        {
            return this.gs
        }, function (a)
        {
            var b = this.gs;
            b !== a && (null !== a && w.j(a, "function", T, "linkConnected"), this.gs = a, this.h("linkConnected", b, a))
        });
    w.defineProperty(T,
        {
            LI: "linkDisconnected"
        }, function ()
        {
            return this.hs
        }, function (a)
        {
            var b = this.hs;
            b !== a && (null !== a && w.j(a, "function", T, "linkDisconnected"), this.hs = a, this.h("linkDisconnected", b, a))
        });
    w.defineProperty(T,
        {
            Vx: "linkValidation"
        }, function ()
        {
            return this.zl
        }, function (a)
        {
            var b = this.zl;
            b !== a && (null !== a && w.j(a, "function", T, "linkValidation"), this.zl = a, this.h("linkValidation", b, a))
        });

    function xr(a, b, c)
    {
        wr(a, c);
        var d = a.qc.contains(b);
        d || a.qc.add(b);
        if (!d || b.Y === b.Z)
        {
            var e = a.KI;
            if (null !== e)
            {
                var f = !0,
                    h = a.g;
                null !== h && (f = h.Ua, h.Ua = !0);
                e(a, b, c);
                null !== h && (h.Ua = f)
            }
        }!d && b.bc && (c = b.Y, b = b.Z, null !== c && null !== b && c !== b && (d = !0, h = a.g, null !== h && (d = h.Ud), a = d ? b : c, e = d ? c : b, a.Ak || (a.Ak = e), !e.Cj || null !== h && h.ja.lb || (d ? c === e && (e.Cj = !1) : b === e && (e.Cj = !1))))
    }

    function yr(a, b, c)
    {
        wr(a, c);
        var d = a.qc.remove(b);
        if (d || b.Z === b.Y)
        {
            var e = a.LI,
                f = a.g;
            if (null !== e)
            {
                var h = !0;
                null !== f && (h = f.Ua, f.Ua = !0);
                e(a, b, c);
                null !== f && (f.Ua = h)
            }
        }
        d && b.bc && (c = !0, null !== f && (c = f.Ud), a = c ? b.Z : b.Y, b = c ? b.Y : b.Z, null !== a && (a.Ak = !1), null === b || b.Cj || (0 === b.qc.count ? (b.Ak = null, null !== f && f.ja.lb || (b.Cj = !0)) : En(b)))
    }

    function En(a)
    {
        a.Ak = !1;
        if (0 !== a.qc.count)
        {
            var b = !0,
                c = a.g;
            if (null === c || !c.ja.lb)
            {
                null !== c && (b = c.Ud);
                for (c = a.qc.i; c.next();)
                {
                    var d = c.value;
                    if (d.bc)
                        if (b)
                        {
                            if (d.Y === a)
                            {
                                a.Cj = !1;
                                return
                            }
                        }
                        else if (d.Z === a)
                        {
                            a.Cj = !1;
                            return
                        }
                }
                a.Cj = !0
            }
        }
    }
    T.prototype.updateRelationshipsFromData = function ()
    {
        R.prototype.updateRelationshipsFromData.call(this);
        var a = this.data;
        if (null !== a)
        {
            var b = this.g;
            if (null !== b)
            {
                var c = b.$;
                c instanceof Zf && (a = c.Dn(a), a = b.Ne(a), c = this.Kk(), a !== c && (c = this.zn(), null !== a ? null !== c ? b.Ud ? c.Y = a : c.Z = a : fn(b, a, this) : null !== c && Wm(b, c, !1)))
            }
        }
    };
    T.prototype.nu = function (a)
    {
        R.prototype.nu.call(this, a);
        a || (En(this), a = this.To, null !== a && zr(a, this))
    };
    T.prototype.ou = function (a)
    {
        R.prototype.ou.call(this, a);
        a || (a = this.To, null !== a && null !== a.xf && (a.xf.remove(this), a.H()))
    };
    T.prototype.xn = function ()
    {
        if (0 < this.qc.count)
        {
            var a = this.g;
            if (null !== a)
                for (var b = a.pb.UE, c = this.qc.copy().i; c.next();)
                {
                    var d = c.value;
                    b ? a.remove(d) : (d.Y === this && (d.Y = null), d.Z === this && (d.Z = null))
                }
        }
        this.Xb = null;
        R.prototype.xn.call(this)
    };
    w.u(T,
        {
            Cf: "isLinkLabel"
        }, function ()
        {
            return null !== this.To
        });
    w.defineProperty(T,
        {
            Xb: "labeledLink"
        }, function ()
        {
            return this.To
        }, function (a)
        {
            var b = this.To;
            if (b !== a)
            {
                var c = this.g,
                    d = this.data;
                if (null !== b)
                {
                    null !== b.xf && (b.xf.remove(this), b.H());
                    if (null !== c && null !== d && !c.ja.lb)
                    {
                        var e = b.data,
                            f = c.$;
                        if (null !== e && f instanceof Q)
                        {
                            var h = f.rb(d);
                            void 0 !== h && f.pJ(e, h)
                        }
                    }
                    this.Da = null
                }
                this.To = a;
                null !== a && (zr(a, this), null === c || null === d || c.ja.lb || (e = a.data, f = c.$, null !== e && f instanceof Q && (h = f.rb(d), void 0 !== h && f.wE(e, h))), this.Da = a.Da);
                Uo(this);
                this.h("labeledLink", b, a)
            }
        });
    T.prototype.findPort = T.prototype.CA = function (a)
    {
        if (null === this.Ie)
        {
            if ("" === a && !1 === this.Pk) return this;
            Ar(this)
        }
        var b = this.Ie.ka(a);
        return null !== b || "" !== a && (b = this.Ie.ka(""), null !== b) ? b : this
    };
    w.u(T,
        {
            port: "port"
        }, function ()
        {
            return this.CA("")
        });
    w.u(T,
        {
            ports: "ports"
        }, function ()
        {
            null === this.Ie && Ar(this);
            return this.Ie.KF
        });

    function Ar(a)
    {
        null === a.Ie ? a.Ie = new ma("string", G) : a.Ie.clear();
        cp(a, a, function (a, c)
        {
            ap(a, c)
        });
        0 === a.Ie.count && a.Ie.add("", a)
    }

    function ap(a, b)
    {
        var c = b.le;
        null !== c && null !== a.Ie && a.Ie.add(c, b)
    }

    function $o(a, b, c)
    {
        var d = b.le;
        if (null !== d && (null !== a.Ie && a.Ie.remove(d), b = a.g, null !== b && c))
        {
            c = null;
            for (d = a.ZE(d); d.next();) a = d.value, null === c && (c = w.gb()), c.push(a);
            if (null !== c)
            {
                for (d = 0; d < c.length; d++) a = c[d], b.remove(a);
                w.ta(c)
            }
        }
    }
    T.prototype.isInTreeOf = function (a)
    {
        if (null === a || a === this) return !1;
        var b = !0,
            c = this.g;
        null !== c && (b = c.Ud);
        c = this;
        if (b)
            for (; c !== a;)
            {
                for (var b = null, d = c.qc.i; d.next();)
                {
                    var e = d.value;
                    if (e.bc && (b = e.Y, b !== c && b !== this)) break
                }
                if (b === this || null === b || b === c) return !1;
                c = b
            }
        else
            for (; c !== a;)
            {
                b = null;
                for (d = c.qc.i; d.next() && (e = d.value, !e.bc || (b = e.Z, b === c || b === this)););
                if (b === this || null === b || b === c) return !1;
                c = b
            }
        return !0
    };
    T.prototype.findTreeRoot = function ()
    {
        var a = !0,
            b = this.g;
        null !== b && (a = b.Ud);
        b = this;
        if (a)
            for (;;)
            {
                for (var a = null, c = b.qc.i; c.next();)
                {
                    var d = c.value;
                    if (d.bc && (a = d.Y, a !== b && a !== this)) break
                }
                if (a === this) return this;
                if (null === a || a === b) return b;
                b = a
            }
        else
            for (;;)
            {
                a = null;
                for (c = b.qc.i; c.next() && (d = c.value, !d.bc || (a = d.Z, a === b || a === this)););
                if (a === this) return this;
                if (null === a || a === b) return b;
                b = a
            }
    };
    T.prototype.findCommonTreeParent = function (a)
    {
        if (null === a) return null;
        if (this === a) return this;
        for (var b = this; null !== b;) kr(b, !0), b = b.Kk();
        for (var c = null, b = a; null !== b;)
        {
            if (0 !== (b.N & 1048576))
            {
                c = b;
                break
            }
            b = b.Kk()
        }
        for (b = this; null !== b;) kr(b, !1), b = b.Kk();
        return c
    };
    T.prototype.findTreeParentLink = T.prototype.zn = function ()
    {
        var a = !0,
            b = this.g;
        null !== b && (a = b.Ud);
        b = this.qc.i;
        if (a)
            for (; b.next();)
            {
                if (a = b.value, a.bc && a.Y !== this) return a
            }
        else
            for (; b.next();)
                if (a = b.value, a.bc && a.Z !== this) return a;
        return null
    };
    T.prototype.findTreeParentNode = T.prototype.Kk = function ()
    {
        var a = this.Ak;
        if (null === a) return null;
        if (a instanceof T) return a;
        var b = !0,
            a = this.g;
        null !== a && (b = a.Ud);
        a = this.qc.i;
        if (b)
            for (; a.next();)
            {
                if (b = a.value, b.bc && (b = b.Y, b !== this)) return this.Ak = b
            }
        else
            for (; a.next();)
                if (b = a.value, b.bc && (b = b.Z, b !== this)) return this.Ak = b;
        return this.Ak = null
    };
    T.prototype.findTreeParentChain = function ()
    {
        function a(b, d)
        {
            if (null !== b)
            {
                d.add(b);
                var e = b.zn();
                null !== e && (d.add(e), a(b.Kk(), d))
            }
        }
        var b = new I(R);
        a(this, b);
        return b
    };
    T.prototype.findTreeLevel = function ()
    {
        return Br(this, this)
    };

    function Br(a, b)
    {
        var c = b.Kk();
        return null === c ? 0 : 1 + Br(a, c)
    }
    T.prototype.findTreeChildrenLinks = T.prototype.Ex = function ()
    {
        var a = !0,
            b = this.g;
        null !== b && (a = b.Ud);
        var b = new za(this.qc),
            c = this;
        b.rq = a ? function (a)
        {
            return a.bc && a.Y === c ? !0 : !1
        } : function (a)
        {
            return a.bc && a.Z === c ? !0 : !1
        };
        return b
    };
    T.prototype.findTreeChildrenNodes = T.prototype.dF = function ()
    {
        var a = !0,
            b = this.g;
        null !== b && (a = b.Ud);
        var c = b = null,
            d = this.qc.i;
        if (a)
            for (; d.next();) a = d.value, a.bc && a.Y === this && (a = a.Z, null !== b ? b.add(a) : null !== c && c !== a ? (b = new H(T), b.add(c), b.add(a)) : c = a);
        else
            for (; d.next();) a = d.value, a.bc && a.Z === this && (a = a.Y, null !== b ? b.add(a) : null !== c && c !== a ? (b = new H(T), b.add(c), b.add(a)) : c = a);
        return null !== b ? b.i : null !== c ? new wa(c) : ua
    };
    T.prototype.findTreeParts = function (a)
    {
        void 0 === a && (a = Infinity);
        w.j(a, "number", T, "findTreeParts:level");
        var b = new I(R);
        ih(b, this, !1, a, !0);
        return b
    };
    T.prototype.collapseTree = T.prototype.collapseTree = function (a)
    {
        void 0 === a && (a = 1);
        w.Ad(a, T, "collapseTree:level");
        1 > a && (a = 1);
        var b = this.g;
        if (null !== b && !b.xh)
        {
            b.xh = !0;
            var c = new I(T);
            c.add(this);
            Cr(this, c, b.Ud, a, b.Ka, this, b.SB === vl);
            b.xh = !1
        }
    };

    function Cr(a, b, c, d, e, f, h)
    {
        if (1 < d)
            for (var k = c ? a.Cx() : a.Lg(); k.next();)
            {
                var l = k.value;
                l.bc && (l = l.HA(a), null === l || l === a || b.contains(l) || (b.add(l), Cr(l, b, c, d - 1, e, f, h)))
            }
        else Dr(a, b, c, e, f, h)
    }

    function Dr(a, b, c, d, e, f)
    {
        for (var h = e === a ? !0 : a.uc, k = c ? a.Cx() : a.Lg(); k.next();)
        {
            var l = k.value;
            l.bc && (l = l.HA(a), null === l || l === a || b.contains(l) || (b.add(l), h && (f && hl(d, l, e), l.Qk(), l.Dd(!1)), l.uc && (l.Hq = l.uc, Dr(l, b, c, d, e, f))))
        }
        a.uc = !1
    }
    T.prototype.expandTree = T.prototype.expandTree = function (a)
    {
        void 0 === a && (a = 2);
        w.Ad(a, T, "expandTree:level");
        2 > a && (a = 2);
        var b = this.g;
        if (null !== b && !b.xh)
        {
            b.xh = !0;
            var c = new I(T);
            c.add(this);
            Er(this, c, b.Ud, a, b.Ka, this, b.SB === vl);
            b.xh = !1
        }
    };

    function Er(a, b, c, d, e, f, h)
    {
        for (var k = f === a ? !1 : a.uc, l = c ? a.Cx() : a.Lg(); l.next();)
        {
            var m = l.value;
            m.bc && (k || m.Mf || m.Wb(), m = m.HA(a), null !== m && m !== a && !b.contains(m) && (b.add(m), k || (m.Dd(!0), m.Qk(), h && gl(e, m, f)), 2 < d || m.Hq)) && (m.Hq = !1, Er(m, b, c, d - 1, e, f, h))
        }
        a.uc = !0
    }
    w.defineProperty(T,
        {
            uc: "isTreeExpanded"
        }, function ()
        {
            return 0 !== (this.ya & 1)
        }, function (a)
        {
            var b = 0 !== (this.ya & 1);
            if (b !== a)
            {
                this.ya ^= 1;
                var c = this.g;
                this.h("isTreeExpanded", b, a);
                b = this.XJ;
                if (null !== b)
                {
                    var d = !0;
                    null !== c && (d = c.Ua, c.Ua = !0);
                    b(this);
                    null !== c && (c.Ua = d)
                }
                null !== c && c.ja.lb ? this.Dd(a) : a ? this.expandTree() : this.collapseTree()
            }
        });
    w.defineProperty(T,
        {
            Hq: "wasTreeExpanded"
        }, function ()
        {
            return 0 !== (this.ya & 2)
        }, function (a)
        {
            var b = 0 !== (this.ya & 2);
            b !== a && (this.ya ^= 2, this.h("wasTreeExpanded", b, a))
        });
    w.defineProperty(T,
        {
            XJ: "treeExpandedChanged"
        }, function ()
        {
            return this.Dt
        }, function (a)
        {
            var b = this.Dt;
            b !== a && (null !== a && w.j(a, "function", T, "treeExpandedChanged"), this.Dt = a, this.h("treeExpandedChanged", b, a))
        });
    w.defineProperty(T,
        {
            Cj: "isTreeLeaf"
        }, function ()
        {
            return 0 !== (this.ya & 4)
        }, function (a)
        {
            var b = 0 !== (this.ya & 4);
            b !== a && (this.ya ^= 4, this.h("isTreeLeaf", b, a))
        });

    function W()
    {
        R.call(this, jj);
        this.Zb = 8;
        this.qg = null;
        this.Rh = "";
        this.Gg = this.Hr = null;
        this.li = "";
        this.Ct = null;
        this.Oq = mj;
        this.ir = 0;
        this.lr = mj;
        this.mr = NaN;
        this.Zm = Fr;
        this.rt = .5;
        this.xf = null;
        this.hd = (new H(y)).freeze();
        this.Yg = this.NC = this.HC = this.Bi = this.Oi = this.Sa = this.Bw = this.kp = this.We = null;
        this.Yz = new y;
        this.W = this.bE = this.aE = null
    }
    w.La(W, R);
    w.ga("Link", W);
    W.prototype.cloneProtected = function (a)
    {
        R.prototype.cloneProtected.call(this, a);
        a.Zb = this.Zb & -113;
        a.Rh = this.Rh;
        a.Hr = this.Hr;
        a.li = this.li;
        a.Ct = this.Ct;
        a.Oq = this.Oq;
        a.ir = this.ir;
        a.lr = this.lr;
        a.mr = this.mr;
        a.Zm = this.Zm;
        a.rt = this.rt;
        null !== this.W && (a.W = this.W.copy())
    };
    W.prototype.pi = function (a)
    {
        R.prototype.pi.call(this, a);
        this.Rh = a.Rh;
        this.li = a.li;
        a.We = null;
        a.Wb();
        a.Bi = this.Bi
    };
    W.prototype.gc = function (a)
    {
        a.Je === W ? 2 === (a.value & 2) ? this.qy = a : a === tj || a === lj || a === kj ? this.nf = a : a === Gr || a === Hr || a === Ir ? this.Ep = a : a !== Fr && a !== mj && w.k("Unknown Link enum value for a Link property: " + a) : R.prototype.gc.call(this, a)
    };
    var Fr;
    W.Normal = Fr = w.p(W, "Normal", 1);
    W.Orthogonal = w.p(W, "Orthogonal", 2);
    W.AvoidsNodes = w.p(W, "AvoidsNodes", 6);
    var Jr;
    W.AvoidsNodesStraight = Jr = w.p(W, "AvoidsNodesStraight", 7);
    var mj;
    W.None = mj = w.p(W, "None", 0);
    var tj;
    W.Bezier = tj = w.p(W, "Bezier", 9);
    var lj;
    W.JumpGap = lj = w.p(W, "JumpGap", 10);
    var kj;
    W.JumpOver = kj = w.p(W, "JumpOver", 11);
    var Gr;
    W.End = Gr = w.p(W, "End", 17);
    var Hr;
    W.Scale = Hr = w.p(W, "Scale", 18);
    var Ir;
    W.Stretch = Ir = w.p(W, "Stretch", 19);
    var rq;
    W.OrientAlong = rq = w.p(W, "OrientAlong", 21);
    var Tp;
    W.OrientPlus90 = Tp = w.p(W, "OrientPlus90", 22);
    var Vp;
    W.OrientMinus90 = Vp = w.p(W, "OrientMinus90", 23);
    var Kr;
    W.OrientOpposite = Kr = w.p(W, "OrientOpposite", 24);
    var Lr;
    W.OrientUpright = Lr = w.p(W, "OrientUpright", 25);
    var Up;
    W.OrientPlus90Upright = Up = w.p(W, "OrientPlus90Upright", 26);
    var Wp;
    W.OrientMinus90Upright = Wp = w.p(W, "OrientMinus90Upright", 27);
    var Xp;
    W.OrientUpright45 = Xp = w.p(W, "OrientUpright45", 28);
    g = W.prototype;
    g.Qd = function ()
    {
        null === this.W && (this.W = new zo)
    };
    g.gm = function ()
    {
        var a = this.Y;
        if (null !== a)
        {
            var b = a.findVisibleNode();
            null !== b && (a = b);
            if (Gm(a) || Hm(a)) return !1
        }
        a = this.Z;
        return null !== a && (b = a.findVisibleNode(), null !== b && (a = b), Gm(a) || Hm(a)) ? !1 : !0
    };
    g.DB = function ()
    {
        return !1
    };
    g.EB = function () {};
    g.he = function ()
    {
        return !1
    };
    W.prototype.computeAngle = function (a, b, c)
    {
        return W.computeAngle(b, c)
    };
    W.computeAngle = function (a, b)
    {
        var c = 0;
        switch (a)
        {
            default:
            case mj:
                c = 0;
                break;
            case rq:
                c = b;
                break;
            case Tp:
                c = b + 90;
                break;
            case Vp:
                c = b - 90;
                break;
            case Kr:
                c = b + 180;
                break;
            case Lr:
                c = pe(b);90 < c && 270 > c && (c -= 180);
                break;
            case Up:
                c = pe(b + 90);90 < c && 270 > c && (c -= 180);
                break;
            case Wp:
                c = pe(b - 90);90 < c && 270 > c && (c -= 180);
                break;
            case Xp:
                c = pe(b);
                if (45 < c && 135 > c || 225 < c && 315 > c) return 0;90 < c && 270 > c && (c -= 180)
        }
        return pe(c)
    };
    w.defineProperty(W,
        {
            Y: "fromNode"
        }, function ()
        {
            return this.qg
        }, function (a)
        {
            var b = this.qg;
            if (b !== a)
            {
                var c = this.kc;
                null !== b && (this.Gg !== b && yr(b, this, c), Mr(this), this.J(Xm));
                this.qg = a;
                null !== a && this.Dd(a.isVisible());
                this.Oi = null;
                this.Wb();
                var d = this.g;
                if (null !== d)
                {
                    var e = this.data,
                        f = d.$;
                    if (null !== e)
                        if (f instanceof Q)
                        {
                            var h = null !== a ? a.data : null;
                            f.zB(e, f.rb(h))
                        }
                        else f instanceof Zf && (h = null !== a ? a.data : null, d.Ud ? f.ti(e, f.rb(h)) : (null !== b && f.ti(b.data, void 0), f.ti(h, f.rb(null !== this.Gg ? this.Gg.data : null))))
                }
                e =
                    this.kc;
                f = this.gF;
                null !== f && (h = !0, null !== d && (h = d.Ua, d.Ua = !0), f(this, c, e), null !== d && (d.Ua = h));
                null !== a && (this.Gg !== a && xr(a, this, e), Nr(this), this.J(Om));
                this.h("fromNode", b, a);
                tn(this)
            }
        });
    w.defineProperty(W,
        {
            Mg: "fromPortId"
        }, function ()
        {
            return this.Rh
        }, function (a)
        {
            var b = this.Rh;
            if (b !== a)
            {
                var c = this.Y,
                    d = this.kc;
                null !== d && wr(c, d);
                Mr(this);
                this.Rh = a;
                var e = this.kc;
                null !== e && wr(c, e);
                c = this.g;
                if (null !== c)
                {
                    var f = this.data,
                        h = c.$;
                    null !== f && h instanceof Q && h.AB(f, a)
                }
                d !== e && (this.Oi = null, this.Wb(), f = this.gF, null !== f && (h = !0, null !== c && (h = c.Ua, c.Ua = !0), f(this, d, e), null !== c && (c.Ua = h)));
                Nr(this);
                this.h("fromPortId", b, a)
            }
        });
    w.u(W,
        {
            kc: "fromPort"
        }, function ()
        {
            var a = this.qg;
            return null === a ? null : a.CA(this.Rh)
        });
    w.defineProperty(W,
        {
            gF: "fromPortChanged"
        }, function ()
        {
            return this.Hr
        }, function (a)
        {
            var b = this.Hr;
            b !== a && (null !== a && w.j(a, "function", W, "fromPortChanged"), this.Hr = a, this.h("fromPortChanged", b, a))
        });
    w.defineProperty(W,
        {
            Z: "toNode"
        }, function ()
        {
            return this.Gg
        }, function (a)
        {
            var b = this.Gg;
            if (b !== a)
            {
                var c = this.Ic;
                null !== b && (this.qg !== b && yr(b, this, c), Mr(this), this.J(Xm));
                this.Gg = a;
                null !== a && this.Dd(a.isVisible());
                this.Oi = null;
                this.Wb();
                var d = this.g;
                if (null !== d)
                {
                    var e = this.data,
                        f = d.$;
                    if (null !== e)
                        if (f instanceof Q)
                        {
                            var h = null !== a ? a.data : null;
                            f.FB(e, f.rb(h))
                        }
                        else f instanceof Zf && (h = null !== a ? a.data : null, d.Ud ? (null !== b && f.ti(b.data, void 0), f.ti(h, f.rb(null !== this.qg ? this.qg.data : null))) : f.ti(e, f.rb(h)))
                }
                e =
                    this.Ic;
                f = this.CG;
                null !== f && (h = !0, null !== d && (h = d.Ua, d.Ua = !0), f(this, c, e), null !== d && (d.Ua = h));
                null !== a && (this.qg !== a && xr(a, this, e), Nr(this), this.J(Om));
                this.h("toNode", b, a);
                tn(this)
            }
        });
    w.defineProperty(W,
        {
            Ih: "toPortId"
        }, function ()
        {
            return this.li
        }, function (a)
        {
            var b = this.li;
            if (b !== a)
            {
                var c = this.Z,
                    d = this.Ic;
                null !== d && wr(c, d);
                Mr(this);
                this.li = a;
                var e = this.Ic;
                null !== e && wr(c, e);
                c = this.g;
                if (null !== c)
                {
                    var f = this.data,
                        h = c.$;
                    null !== f && h instanceof Q && h.GB(f, a)
                }
                d !== e && (this.Oi = null, this.Wb(), f = this.CG, null !== f && (h = !0, null !== c && (h = c.Ua, c.Ua = !0), f(this, d, e), null !== c && (c.Ua = h)));
                Nr(this);
                this.h("toPortId", b, a)
            }
        });
    w.u(W,
        {
            Ic: "toPort"
        }, function ()
        {
            var a = this.Gg;
            return null === a ? null : a.CA(this.li)
        });
    w.defineProperty(W,
        {
            CG: "toPortChanged"
        }, function ()
        {
            return this.Ct
        }, function (a)
        {
            var b = this.Ct;
            b !== a && (null !== a && w.j(a, "function", W, "toPortChanged"), this.Ct = a, this.h("toPortChanged", b, a))
        });
    w.defineProperty(W,
        {
            Bb: "fromSpot"
        }, function ()
        {
            return null !== this.W ? this.W.ak : qc
        }, function (a)
        {
            this.Qd();
            var b = this.W.ak;
            b.L(a) || (a = a.S(), this.W.ak = a, this.h("fromSpot", b, a), this.Wb())
        });
    w.defineProperty(W,
        {
            Zl: "fromEndSegmentLength"
        }, function ()
        {
            return null !== this.W ? this.W.Zj : NaN
        }, function (a)
        {
            this.Qd();
            var b = this.W.Zj;
            b !== a && (0 > a && w.Fa(a, ">= 0", W, "fromEndSegmentLength"), this.W.Zj = a, this.h("fromEndSegmentLength", b, a), this.Wb())
        });
    w.defineProperty(W,
        {
            hu: "fromEndSegmentDirection"
        }, function ()
        {
            return null !== this.W ? this.W.Yj : rr
        }, function (a)
        {
            this.Qd();
            var b = this.W.Yj;
            b !== a && (w.Ut("Link.fromEndSegmentDirection", "2.0"), this.W.Yj = a, this.h("fromEndSegmentDirection", b, a), this.Wb())
        });
    w.defineProperty(W,
        {
            iu: "fromShortLength"
        }, function ()
        {
            return null !== this.W ? this.W.$j : NaN
        }, function (a)
        {
            this.Qd();
            var b = this.W.$j;
            b !== a && (this.W.$j = a, this.h("fromShortLength", b, a), this.Wb(), this.ge())
        });
    w.defineProperty(W,
        {
            Cb: "toSpot"
        }, function ()
        {
            return null !== this.W ? this.W.zk : qc
        }, function (a)
        {
            this.Qd();
            var b = this.W.zk;
            b.L(a) || (a = a.S(), this.W.zk = a, this.h("toSpot", b, a), this.Wb())
        });
    w.defineProperty(W,
        {
            sm: "toEndSegmentLength"
        }, function ()
        {
            return null !== this.W ? this.W.xk : NaN
        }, function (a)
        {
            this.Qd();
            var b = this.W.xk;
            b !== a && (0 > a && w.Fa(a, ">= 0", W, "toEndSegmentLength"), this.W.xk = a, this.h("toEndSegmentLength", b, a), this.Wb())
        });
    w.defineProperty(W,
        {
            cv: "toEndSegmentDirection"
        }, function ()
        {
            return null !== this.W ? this.W.wk : rr
        }, function (a)
        {
            this.Qd();
            var b = this.W.wk;
            b !== a && (w.Ut("Link.toEndSegmentDirection", "2.0"), this.W.wk = a, this.h("toEndSegmentDirection", b, a), this.Wb())
        });
    w.defineProperty(W,
        {
            dv: "toShortLength"
        }, function ()
        {
            return null !== this.W ? this.W.yk : NaN
        }, function (a)
        {
            this.Qd();
            var b = this.W.yk;
            b !== a && (this.W.yk = a, this.h("toShortLength", b, a), this.Wb(), this.ge())
        });

    function tn(a)
    {
        var b = a.Y,
            c = a.Z,
            d = null,
            b = d = null !== b ? null !== c ? b.VH(c) : b.Da : null !== c ? c.Da : null,
            c = a.il;
        if (c !== b)
        {
            null !== c && lr(c, a);
            a.il = b;
            null !== b && mr(b, a);
            var e = a.LE;
            if (null !== e)
            {
                var f = !0,
                    h = a.g;
                null !== h && (f = h.Ua, h.Ua = !0);
                e(a, c, b);
                null !== h && (h.Ua = f)
            }!a.Mf || a.aE !== c && a.bE !== c || a.Wb()
        }
        if (a.yI)
            for (a = a.Ef; a.next();) a.value.Da = d
    }
    W.prototype.Qk = function ()
    {
        var a = this.Da;
        null !== a && this.Y !== a && this.Z !== a && a.lx && R.prototype.Qk.call(this)
    };
    W.prototype.getOtherNode = W.prototype.HA = function (a)
    {
        var b = this.Y;
        return a === b ? this.Z : b
    };
    W.prototype.getOtherPort = function (a)
    {
        var b = this.kc;
        return a === b ? this.Ic : b
    };
    w.u(W,
        {
            yI: "isLabeledLink"
        }, function ()
        {
            return null === this.xf ? !1 : 0 < this.xf.count
        });
    w.u(W,
        {
            Ef: "labelNodes"
        }, function ()
        {
            return null === this.xf ? ua : this.xf.i
        });

    function zr(a, b)
    {
        null === a.xf && (a.xf = new I(T));
        a.xf.add(b);
        a.H()
    }
    W.prototype.nu = function (a)
    {
        R.prototype.nu.call(this, a);
        Or(this) && nj(this, this.U);
        if (!a)
        {
            a = this.qg;
            var b = null;
            null !== a && (b = this.kc, xr(a, this, b));
            var c = this.Gg,
                d = null;
            null !== c && (d = this.Ic, c === a && d === b || xr(c, this, d));
            Nr(this)
        }
    };
    W.prototype.ou = function (a)
    {
        R.prototype.ou.call(this, a);
        Or(this) && nj(this, this.U);
        if (!a)
        {
            a = this.qg;
            var b = null;
            null !== a && (b = this.kc, yr(a, this, b));
            var c = this.Gg,
                d = null;
            null !== c && (d = this.Ic, c === a && d === b || yr(c, this, d));
            Mr(this)
        }
    };
    W.prototype.xn = function ()
    {
        this.Mf = !0;
        if (null !== this.xf)
        {
            var a = this.g;
            if (null !== a)
                for (var b = this.xf.copy().i; b.next();) a.remove(b.value)
        }
        b = this.data;
        null !== b && (a = this.g, null !== a && (a = a.$, a instanceof Q ? a.ny(b) : a instanceof Zf && a.ti(b, void 0)))
    };
    W.prototype.updateRelationshipsFromData = function ()
    {
        var a = this.data;
        if (null !== a)
        {
            var b = this.g;
            if (null !== b)
            {
                var c = b.$;
                if (c instanceof Q)
                {
                    var d = c.am(a);
                    this.Y = d = b.Ne(d);
                    d = c.bm(a);
                    this.Z = d = b.Ne(d);
                    a = c.Nk(a);
                    if (0 < a.length || 0 < this.Ef.count)
                    {
                        if (1 === a.length && 1 === this.Ef.count)
                        {
                            var d = a[0],
                                e = this.Ef.first();
                            if (c.rb(e.data) === d) return
                        }
                        var d = (new I).Nc(a),
                            f = new I;
                        this.Ef.each(function (a)
                        {
                            null !== a.data && (a = c.rb(a.data), void 0 !== a && f.add(a))
                        });
                        a = f.copy();
                        a.my(d);
                        d = d.copy();
                        d.my(f);
                        if (0 < a.count || 0 < d.count)
                        {
                            var h =
                                this;
                            a.each(function (a)
                            {
                                a = b.Ne(a);
                                null !== a && a.Xb === h && (a.Xb = null)
                            });
                            d.each(function (a)
                            {
                                a = b.Ne(a);
                                null !== a && a.Xb !== h && (a.Xb = h)
                            })
                        }
                    }
                }
            }
        }
    };
    W.prototype.move = function (a)
    {
        var b = this.position,
            c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        c = a.x - c;
        b = a.y - b;
        R.prototype.move.call(this, a);
        this.Fj(c, b);
        for (a = this.Ef; a.next();)
        {
            var d = a.value,
                e = d.position;
            d.moveTo(e.x + c, e.y + b)
        }
    };
    w.defineProperty(W,
        {
            nJ: "relinkableFrom"
        }, function ()
        {
            return 0 !== (this.Zb & 1)
        }, function (a)
        {
            var b = 0 !== (this.Zb & 1);
            b !== a && (this.Zb ^= 1, this.h("relinkableFrom", b, a), this.fe())
        });
    w.defineProperty(W,
        {
            oJ: "relinkableTo"
        }, function ()
        {
            return 0 !== (this.Zb & 2)
        }, function (a)
        {
            var b = 0 !== (this.Zb & 2);
            b !== a && (this.Zb ^= 2, this.h("relinkableTo", b, a), this.fe())
        });
    W.prototype.canRelinkFrom = function ()
    {
        if (!this.nJ) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.mn) return !1;
        a = a.g;
        return null === a || a.mn ? !0 : !1
    };
    W.prototype.canRelinkTo = function ()
    {
        if (!this.oJ) return !1;
        var a = this.layer;
        if (null === a) return !0;
        if (!a.mn) return !1;
        a = a.g;
        return null === a || a.mn ? !0 : !1
    };
    w.defineProperty(W,
        {
            Tu: "resegmentable"
        }, function ()
        {
            return 0 !== (this.Zb & 4)
        }, function (a)
        {
            var b = 0 !== (this.Zb & 4);
            b !== a && (this.Zb ^= 4, this.h("resegmentable", b, a), this.fe())
        });
    w.defineProperty(W,
        {
            bc: "isTreeLink"
        }, function ()
        {
            return 0 !== (this.Zb & 8)
        }, function (a)
        {
            var b = 0 !== (this.Zb & 8);
            b !== a && (this.Zb ^= 8, this.h("isTreeLink", b, a), null !== this.Y && En(this.Y), null !== this.Z && En(this.Z))
        });
    w.u(W,
        {
            path: "path"
        }, function ()
        {
            var a = this.Bd();
            return a instanceof X ? a : null
        });
    w.u(W,
        {
            Yn: "routeBounds"
        }, function ()
        {
            this.eo();
            var a = new B;
            var b = Infinity,
                c = Infinity,
                d = this.qa;
            if (0 === d) a.m(NaN, NaN, 0, 0);
            else
            {
                if (1 === d) d = this.l(0), b = Math.min(d.x, b), c = Math.min(d.y, c), a.m(d.x, d.y, 0, 0);
                else if (2 === d)
                {
                    var e = this.l(0),
                        f = this.l(1),
                        b = Math.min(e.x, f.x),
                        c = Math.min(e.y, f.y);
                    a.m(e.x, e.y, 0, 0);
                    a.yi(f)
                }
                else if (this.computeCurve() === tj && 3 <= d && !this.ac)
                    if (e = this.l(0), b = e.x, c = e.y, a.m(b, c, 0, 0), 3 === d) d = this.l(1), b = Math.min(d.x, b), c = Math.min(d.y, c), f = this.l(2), b = Math.min(f.x, b), c = Math.min(f.y, c), Vd(e.x,
                        e.y, d.x, d.y, d.x, d.y, f.x, f.y, .5, a);
                    else
                        for (var h = 3; h < d; h += 3)
                        {
                            var k = this.l(h - 2);
                            h + 3 >= d && (h = d - 1);
                            var l = this.l(h - 1),
                                f = this.l(h);
                            Vd(e.x, e.y, k.x, k.y, l.x, l.y, f.x, f.y, .5, a);
                            b = Math.min(f.x, b);
                            c = Math.min(f.y, c);
                            e = f
                        }
                else
                    for (e = this.l(0), f = this.l(1), b = Math.min(e.x, f.x), c = Math.min(e.y, f.y), a.m(e.x, e.y, 0, 0), a.yi(f), h = 2; h < d; h++) e = this.l(h), b = Math.min(e.x, b), c = Math.min(e.y, c), a.yi(e);
                this.Yz.m(b - a.x, c - a.y)
            }
            return this.Bw = a
        });
    w.u(W,
        {
            QF: "midPoint"
        }, function ()
        {
            this.eo();
            return this.computeMidPoint(new y)
        });
    W.prototype.computeMidPoint = function (a)
    {
        var b = this.qa;
        if (0 === b) return a.assign(Ed), a;
        if (1 === b) return a.assign(this.l(0)), a;
        if (2 === b)
        {
            var c = this.l(0),
                d = this.l(1);
            a.m((c.x + d.x) / 2, (c.y + d.y) / 2);
            return a
        }
        if (this.computeCurve() === tj && 3 <= b && !this.ac)
        {
            if (3 === b) return this.l(1);
            var c = (b - 1) / 3 | 0,
                e = 3 * (c / 2 | 0);
            if (1 === c % 2)
            {
                var c = this.l(e),
                    d = this.l(e + 1),
                    f = this.l(e + 2),
                    e = this.l(e + 3),
                    b = d.x,
                    h = d.y,
                    d = f.x,
                    k = f.y,
                    f = (b + d) / 2,
                    l = (h + k) / 2,
                    h = ((c.y + h) / 2 + l) / 2,
                    k = (l + (k + e.y) / 2) / 2;
                a.x = (((c.x + b) / 2 + f) / 2 + (f + (d + e.x) / 2) / 2) / 2;
                a.y = (h + k) / 2
            }
            else a.assign(this.l(e));
            return a
        }
        e = 0;
        f = w.gb();
        for (h = 0; h < b - 1; h++) c = 0, c = this.l(h), d = this.l(h + 1), Wa(c.x, d.x) ? (c = d.y - c.y, 0 > c && (c = -c)) : Wa(c.y, d.y) ? (c = d.x - c.x, 0 > c && (c = -c)) : c = Math.sqrt(c.Bf(d)), f.push(c), e += c;
        for (d = h = c = 0; c < e / 2 && h < b;)
        {
            d = f[h];
            if (c + d > e / 2) break;
            c += d;
            h++
        }
        w.ta(f);
        b = this.l(h);
        f = this.l(h + 1);
        b.x === f.x ? b.y > f.y ? a.m(b.x, b.y - (e / 2 - c)) : a.m(b.x, b.y + (e / 2 - c)) : b.y === f.y ? b.x > f.x ? a.m(b.x - (e / 2 - c), b.y) : a.m(b.x + (e / 2 - c), b.y) : (c = (e / 2 - c) / d, a.m(b.x + c * (f.x - b.x), b.y + c * (f.y - b.y)));
        return a
    };
    w.u(W,
        {
            PF: "midAngle"
        }, function ()
        {
            this.eo();
            return this.computeMidAngle()
        });
    W.prototype.computeMidAngle = function ()
    {
        var a = this.qa;
        if (2 > a) return NaN;
        if (this.computeCurve() === tj && 4 <= a && !this.ac)
        {
            var b = (a - 1) / 3 | 0,
                c = 3 * (b / 2 | 0);
            if (1 === b % 2)
            {
                var c = Math.floor(c),
                    b = this.l(c),
                    d = this.l(c + 1),
                    a = this.l(c + 2),
                    c = this.l(c + 3),
                    e = d.x,
                    d = d.y,
                    f = a.x,
                    a = a.y,
                    h = (e + f) / 2,
                    k = (d + a) / 2;
                return Ta(((b.x + e) / 2 + h) / 2, ((b.y + d) / 2 + k) / 2, (h + (f + c.x) / 2) / 2, (k + (a + c.y) / 2) / 2)
            }
            if (0 < c && c + 1 < a) return b = this.l(c - 1), d = this.l(c + 1), b.Qb(d)
        }
        c = a / 2 | 0;
        if (0 === a % 2) return b = this.l(c - 1), d = this.l(c), 4 <= a && b.Oc(d) ? (b = this.l(c - 2), a = this.l(c + 1),
            c = b.Bf(d), e = d.Bf(a), c > e + 10 ? b.Qb(d) : e > c + 10 ? d.Qb(a) : b.Qb(a)) : null === this.Sa || this.ac ? b.Qb(d) : this.Sa.hF(.5);
        if (null !== this.Sa && !this.ac) return this.Sa.hF(.5);
        b = this.l(c - 1);
        d = this.l(c);
        a = this.l(c + 1);
        c = b.Bf(d);
        e = d.Bf(a);
        return c > e + 10 ? b.Qb(d) : e > c + 10 ? d.Qb(a) : b.Qb(a)
    };
    w.defineProperty(W,
        {
            points: "points"
        }, function ()
        {
            return this.hd
        }, function (a)
        {
            var b = this.hd;
            if (b !== a)
            {
                var c = null;
                if (Array.isArray(a))
                {
                    var d = 0 === a.length % 2;
                    if (d)
                        for (var e = 0; e < a.length; e++)
                            if ("number" !== typeof a[e] || isNaN(a[e]))
                            {
                                d = !1;
                                break
                            }
                    if (d)
                        for (c = new H(y), d = 0; d < a.length / 2; d++) e = (new y(a[2 * d], a[2 * d + 1])).freeze(), c.add(e);
                    else
                    {
                        e = !0;
                        for (d = 0; d < a.length; d++)
                        {
                            var f = a[d];
                            if (!w.Pa(f) || "number" !== typeof f.x || isNaN(f.x) || "number" !== typeof f.y || isNaN(f.y))
                            {
                                e = !1;
                                break
                            }
                        }
                        if (e)
                            for (c = new H(y), d = 0; d < a.length; d++) e =
                                a[d], c.add((new y(e.x, e.y)).freeze());
                        else w.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: " + a)
                    }
                }
                else if (a instanceof H)
                    for (c = a.copy(), a = c.i; a.next();) a.value.freeze();
                else w.k("Link.points value is not an instance of List or Array: " + a);
                c.freeze();
                this.hd = c;
                this.ge();
                this.H();
                Pr(this);
                a = this.g;
                null !== a && (a.In || a.ja.lb || a.Wx.add(this), a.Ka.rc && (this.kp = c));
                this.h("points", b, c)
            }
        });
    w.u(W,
        {
            qa: "pointsCount"
        }, function ()
        {
            return this.hd.count
        });
    W.prototype.getPoint = W.prototype.l = function (a)
    {
        return this.hd.n[a]
    };
    W.prototype.setPoint = W.prototype.Ug = function (a, b)
    {
        null === this.We && w.k("Call Link.startRoute before modifying the points of the route.");
        this.hd.jg(a, b)
    };
    W.prototype.setPointAt = W.prototype.ca = function (a, b, c)
    {
        null === this.We && w.k("Call Link.startRoute before modifying the points of the route.");
        this.hd.jg(a, new y(b, c))
    };
    W.prototype.insertPoint = function (a, b)
    {
        null === this.We && w.k("Call Link.startRoute before modifying the points of the route.");
        this.hd.Rd(a, b)
    };
    W.prototype.insertPointAt = W.prototype.w = function (a, b, c)
    {
        null === this.We && w.k("Call Link.startRoute before modifying the points of the route.");
        this.hd.Rd(a, new y(b, c))
    };
    W.prototype.addPoint = W.prototype.mi = function (a)
    {
        null === this.We && w.k("Call Link.startRoute before modifying the points of the route.");
        this.hd.add(a)
    };
    W.prototype.addPointAt = W.prototype.oj = function (a, b)
    {
        null === this.We && w.k("Call Link.startRoute before modifying the points of the route.");
        this.hd.add(new y(a, b))
    };
    W.prototype.removePoint = W.prototype.cG = function (a)
    {
        null === this.We && w.k("Call Link.startRoute before modifying the points of the route.");
        this.hd.dd(a)
    };
    W.prototype.clearPoints = W.prototype.Kp = function ()
    {
        null === this.We && w.k("Call Link.startRoute before modifying the points of the route.");
        this.hd.clear()
    };
    W.prototype.movePoints = W.prototype.Fj = function (a, b)
    {
        if (0 !== a || 0 !== b)
        {
            for (var c = this.Mf, d = new H(y), e = this.hd.i; e.next();)
            {
                var f = e.value;
                d.add((new y(f.x + a, f.y + b)).freeze())
            }
            d.freeze();
            e = this.hd;
            this.hd = d;
            this.H();
            c && Pr(this);
            c = this.g;
            null !== c && c.Ka.rc && (this.kp = d);
            this.h("points", e, d)
        }
    };
    W.prototype.startRoute = W.prototype.om = function ()
    {
        null === this.We && (this.We = this.hd, this.hd = this.hd.copy())
    };
    W.prototype.commitRoute = W.prototype.qj = function ()
    {
        if (null !== this.We)
        {
            for (var a = this.We, b = this.hd, c = Infinity, d = Infinity, e = a.n, f = e.length, h = 0; h < f; h++) var k = e[h],
                c = Math.min(k.x, c),
                d = Math.min(k.y, d);
            for (var l = Infinity, m = Infinity, n = b.n, p = n.length, h = 0; h < p; h++) k = n[h], l = Math.min(k.x, l), m = Math.min(k.y, m), k.freeze();
            b.freeze();
            if (p === f)
                for (h = 0; h < p; h++)
                {
                    if (f = e[h], k = n[h], f.x - c !== k.x - l || f.y - d !== k.y - m)
                    {
                        this.H();
                        this.ge();
                        break
                    }
                }
            else this.H(), this.ge();
            this.We = null;
            c = this.g;
            null !== c && c.Ka.rc && (this.kp = b);
            Pr(this);
            this.h("points", a, b)
        }
    };
    W.prototype.rollbackRoute = W.prototype.uJ = function ()
    {
        null !== this.We && (this.hd = this.We, this.We = null)
    };

    function Pr(a)
    {
        0 === a.hd.count ? a.Mf = !1 : (a.Mf = !0, a.Pp = a.l(0), a.Qp = a.l(a.qa - 1), Qr(a, !1))
    }
    W.prototype.invalidateRoute = W.prototype.Wb = function ()
    {
        if (!this.vi)
        {
            var a = this.g;
            a && (a.Wx.contains(this) || a.ja.lb || a.Ka.EI && !a.Ka.df) || (a = this.path, null !== a && (this.Mf = !1, this.H(), a.H()))
        }
    };
    w.defineProperty(W,
        {
            Mf: null
        }, function ()
        {
            return 0 !== (this.Zb & 16)
        }, function (a)
        {
            0 !== (this.Zb & 16) !== a && (this.Zb ^= 16)
        });
    w.defineProperty(W,
        {
            vi: "suspendsRouting"
        }, function ()
        {
            return 0 !== (this.Zb & 32)
        }, function (a)
        {
            0 !== (this.Zb & 32) !== a && (this.Zb ^= 32)
        });
    w.defineProperty(W,
        {
            pA: null
        }, function ()
        {
            return 0 !== (this.Zb & 64)
        }, function (a)
        {
            0 !== (this.Zb & 64) !== a && (this.Zb ^= 64)
        });
    w.defineProperty(W,
        {
            Pp: "defaultFromPoint"
        }, function ()
        {
            return this.HC
        }, function (a)
        {
            this.HC = a.copy()
        });
    w.defineProperty(W,
        {
            Qp: "defaultToPoint"
        }, function ()
        {
            return this.NC
        }, function (a)
        {
            this.NC = a.copy()
        });
    W.prototype.updateRoute = W.prototype.eo = function ()
    {
        if (!this.Mf && !this.pA)
        {
            var a = !0;
            try
            {
                this.pA = !0, this.om(), a = this.computePoints()
            }
            finally
            {
                this.pA = !1, a ? this.qj() : this.uJ()
            }
        }
    };
    W.prototype.computePoints = function ()
    {
        var a = this.g;
        if (null === a) return !1;
        var b = this.Y,
            c = null;
        null === b ? (a.El || (a.bt = new X, a.bt.Ca = qd, a.bt.mb = 0, a.El = new T, a.El.add(a.bt), a.El.af()), this.Pp && (a.El.position = a.El.location = this.Pp, a.El.af(), b = a.El, c = a.bt)) : c = this.kc;
        if (null !== c && !b.isVisible())
        {
            var d = b.findVisibleNode();
            null !== d && d !== b ? (b = d, c = d.port) : b = d
        }
        this.aE = b;
        if (null === b || !b.location.I()) return !1;
        for (; !(null === c || c.U.I() && c.Dj());) c = c.R;
        if (null === c) return !1;
        var e = this.Z,
            f = null;
        null === e ? (a.Fl || (a.ct =
            new X, a.ct.Ca = qd, a.ct.mb = 0, a.Fl = new T, a.Fl.add(a.ct), a.Fl.af()), this.Qp && (a.Fl.position = a.Fl.location = this.Qp, a.Fl.af(), e = a.Fl, f = a.ct)) : f = this.Ic;
        null === f || e.isVisible() || (a = e.findVisibleNode(), null !== a && a !== e ? (e = a, f = a.port) : e = a);
        this.bE = e;
        if (null === e || !e.location.I()) return !1;
        for (; !(null === f || f.U.I() && f.Dj());) f = f.R;
        if (null === f) return !1;
        var h = this.qa,
            d = this.computeSpot(!0, c),
            a = this.computeSpot(!1, f),
            k = d === yb,
            l = a === yb,
            m = c === f && null !== c,
            n = this.ac,
            p = this.nf === tj;
        this.Oi = m && !n ? p = !0 : !1;
        var q = this.Ep ===
            mj || m;
        if (!n && !m && k && l)
        {
            if (k = !1, !q && 3 <= h && (q = this.getLinkPoint(b, c, d, !0, !1, e, f), l = this.getLinkPoint(e, f, a, !1, !1, b, c), k = this.adjustPoints(0, q, h - 1, l)) && (q = this.getLinkPoint(b, c, d, !0, !1, e, f), l = this.getLinkPoint(e, f, a, !1, !1, b, c), this.adjustPoints(0, q, h - 1, l)), !k)
                if (this.Kp(), p)
                {
                    var h = this.getLinkPoint(b, c, d, !0, !1, e, f),
                        q = this.getLinkPoint(e, f, a, !1, !1, b, c),
                        k = q.x - h.x,
                        l = q.y - h.y,
                        m = this.computeCurviness(),
                        p = n = 0,
                        r = h.x + k / 3,
                        s = h.y + l / 3,
                        u = r,
                        t = s;
                    J(l, 0) ? t = 0 < k ? t - m : t + m : (n = -k / l, p = Math.sqrt(m * m / (n * n + 1)), 0 > m && (p = -p), u = (0 >
                    l ? -1 : 1) * p + r, t = n * (u - r) + s);
                    var r = h.x + 2 * k / 3,
                        s = h.y + 2 * l / 3,
                        x = r,
                        v = s;
                    J(l, 0) ? v = 0 < k ? v - m : v + m : (x = (0 > l ? -1 : 1) * p + r, v = n * (x - r) + s);
                    this.Kp();
                    this.mi(h);
                    this.oj(u, t);
                    this.oj(x, v);
                    this.mi(q);
                    this.Ug(0, this.getLinkPoint(b, c, d, !0, !1, e, f));
                    this.Ug(3, this.getLinkPoint(e, f, a, !1, !1, b, c))
                }
                else d = this.getLinkPoint(b, c, d, !0, !1, e, f), a = this.getLinkPoint(e, f, a, !1, !1, b, c), this.hasCurviness() ? (q = a.x - d.x, e = a.y - d.y, f = this.computeCurviness(), b = d.x + q / 2, c = d.y + e / 2, h = b, k = c, J(e, 0) ? k = 0 < q ? k - f : k + f : (q = -q / e, h = Math.sqrt(f * f / (q * q + 1)), 0 > f && (h = -h),
                    h = (0 > e ? -1 : 1) * h + b, k = q * (h - b) + c), this.mi(d), this.oj(h, k)) : this.mi(d), this.mi(a)
        }
        else
        {
            p = this.dm;
            q && (n && p || m) && this.Kp();
            var z = m ? this.computeCurviness() : 0,
                p = this.getLinkPoint(b, c, d, !0, n, e, f),
                r = u = s = 0;
            if (n || !k || m)
                if (t = this.computeEndSegmentLength(b, c, d, !0), r = this.getLinkDirection(b, c, p, d, !0, n, e, f), m && (k || d.L(a) || !n && 1 === d.x + a.x && 1 === d.y + a.y) && (r -= n ? 90 : 30, 0 > z && (r -= 180)), 0 > r ? r += 360 : 360 <= r && (r -= 360), m && (t += Math.abs(z) * (n ? 1 : 2)), 0 === r ? s = t : 90 === r ? u = t : 180 === r ? s = -t : 270 === r ? u = -t : (s = t * Math.cos(r * Math.PI / 180), u = t *
                    Math.sin(r * Math.PI / 180)), d.Td() && m)
                {
                    var A = c.Ya(Jb, w.K()),
                        L = w.xb(A.x + 1E3 * s, A.y + 1E3 * u);
                    this.getLinkPointFromPoint(b, c, A, L, !0, p);
                    w.v(A);
                    w.v(L)
                }
            var t = this.getLinkPoint(e, f, a, !1, n, b, c),
                E = v = x = 0;
            if (n || !l || m) A = this.computeEndSegmentLength(e, f, a, !1), E = this.getLinkDirection(e, f, t, a, !1, n, b, c), m && (l || d.L(a) || !n && 1 === d.x + a.x && 1 === d.y + a.y) && (E += n ? 0 : 30, 0 > z && (E += 180)), 0 > E ? E += 360 : 360 <= E && (E -= 360), m && (A += Math.abs(z) * (n ? 1 : 2)), 0 === E ? x = A : 90 === E ? v = A : 180 === E ? x = -A : 270 === E ? v = -A : (x = A * Math.cos(E * Math.PI / 180), v = A * Math.sin(E *
                Math.PI / 180)), a.Td() && m && (A = f.Ya(Jb, w.K()), L = w.xb(A.x + 1E3 * x, A.y + 1E3 * v), this.getLinkPointFromPoint(e, f, A, L, !1, t), w.v(A), w.v(L));
            a = p;
            if (n || !k || m) a = new y(p.x + s, p.y + u);
            d = t;
            if (n || !l || m) d = new y(t.x + x, t.y + v);
            !q && !n && k && 3 < h && this.adjustPoints(0, p, h - 2, d) ? this.Ug(h - 1, t) : !q && !n && l && 3 < h && this.adjustPoints(1, a, h - 1, t) ? this.Ug(0, p) : !q && (n ? 6 <= h : 4 < h) && this.adjustPoints(1, a, h - 2, d) ? (this.Ug(0, p), this.Ug(h - 1, t)) : (this.Kp(), this.mi(p), (n || !k || m) && this.mi(a), n && this.addOrthoPoints(a, r, d, E, b, e), (n || !l || m) && this.mi(d), this.mi(t))
        }
        return !0
    };

    function Rr(a, b)
    {
        Math.abs(b.x - a.x) > Math.abs(b.y - a.y) ? (b.x = b.x >= a.x ? a.x + 9E9 : a.x - 9E9, b.y = a.y) : (b.y = b.y >= a.y ? a.y + 9E9 : a.y - 9E9, b.x = a.x);
        return b
    }
    W.prototype.getLinkPointFromPoint = function (a, b, c, d, e, f)
    {
        void 0 === f && (f = new y);
        if (null === a || null === b) return f.assign(c), f;
        a.isVisible() || (e = a.findVisibleNode(), null !== e && e !== a && (b = e.port));
        var h = e = 0,
            k = 0,
            l = 0;
        a = null;
        e = b.R;
        null === e || e.Xg() || (e = e.R);
        if (null === e) e = d.x, h = d.y, k = c.x, l = c.y;
        else
        {
            a = e.ph;
            e = 1 / (a.m11 * a.m22 - a.m12 * a.m21);
            var k = a.m22 * e,
                l = -a.m12 * e,
                m = -a.m21 * e,
                n = a.m11 * e,
                p = e * (a.m21 * a.dy - a.m22 * a.dx),
                q = e * (a.m12 * a.dx - a.m11 * a.dy);
            e = d.x * k + d.y * m + p;
            h = d.x * l + d.y * n + q;
            k = c.x * k + c.y * m + p;
            l = c.x * l + c.y * n + q
        }
        b.Cn(e, h, k, l,
            f);
        null !== a && f.transform(a);
        return f
    };

    function Sr(a, b)
    {
        var c = b.Ss;
        null === c && (c = new Tr, c.port = b, c.Qc = b.V, b.Ss = c);
        return Ur(c, a)
    }
    W.prototype.getLinkPoint = function (a, b, c, d, e, f, h, k)
    {
        void 0 === k && (k = new y);
        if (c.$c()) return b.Ya(c, k), k;
        if (c.Aj())
        {
            var l = Sr(this, b);
            if (null !== l)
            {
                k.assign(l.iq);
                if (e && this.qy === Jr)
                {
                    var m = Sr(this, h);
                    if (null !== m && l.vn < m.vn)
                    {
                        var l = w.K(),
                            m = w.K(),
                            n = new B(b.Ya(zb, l), b.Ya(Sb, m)),
                            p = this.computeSpot(!d, h);
                        a = this.getLinkPoint(f, h, p, !d, e, a, b, m);
                        (c.yj(Yb) || c.yj(Zb)) && a.y >= n.y && a.y <= n.y + n.height ? k.y = a.y : (c.yj(Xb) || c.yj($b)) && a.x >= n.x && a.x <= n.x + n.width && (k.x = a.x);
                        w.v(l);
                        w.v(m)
                    }
                }
                return k
            }
        }
        c = b.Ya(Jb, w.K());
        l = f = null;
        this.qa > (e ? 6 : 2) ? (l = d ? this.l(1) : this.l(this.qa - 2), e && (l = Rr(c, l.copy()))) : (f = w.K(), l = h.Ya(Jb, f), e && (l = Rr(c, l)), w.v(f));
        this.getLinkPointFromPoint(a, b, c, l, d, k);
        w.v(c);
        return k
    };
    W.prototype.getLinkDirection = function (a, b, c, d, e, f, h, k)
    {
        a: if (d.$c()) c = d.x > d.y ? d.x > 1 - d.y ? 0 : d.x < 1 - d.y ? 270 : 315 : d.x < d.y ? d.x > 1 - d.y ? 90 : d.x < 1 - d.y ? 180 : 135 : .5 > d.x ? 225 : .5 < d.x ? 45 : 0;
        else
        {
            if (d.Aj())
            {
                var l = Sr(this, b);
                if (null !== l) switch (l.ze)
                {
                    case w.od:
                        c = 270;
                        break a;
                    case w.Tc:
                        c = 180;
                        break a;
                    default:
                    case w.fd:
                        c = 0;
                        break a;
                    case w.ed:
                        c = 90;
                        break a
                }
            }
            var l = b.Ya(Jb, w.K()),
                m = null,
                n = null;
            this.qa > (f ? 6 : 2) ? (n = e ? this.l(1) : this.l(this.qa - 2), n = f ? Rr(l, n.copy()) : c) : (m = w.K(), n = k.Ya(Jb, m), w.v(m));
            c = 0;
            c = Math.abs(n.x - l.x) > Math.abs(n.y -
                l.y) ? n.x >= l.x ? 0 : 180 : n.y >= l.y ? 90 : 270;
            w.v(l)
        }d.Td() && h.qi(a) && (c += 180, 360 <= c && (c -= 360));a = rr;a = e ? this.hu : this.cv;a === rr && (a = e ? b.hu : b.cv);
        switch (a)
        {
            case sr:
                b = b.$l();
                c += b;
                360 <= c && (c -= 360);
                break;
            case rr:
            case Ao:
                if (d.BI()) break;
                b = b.$l();
                if (0 === b) break;
                45 <= b && 135 > b ? c += 90 : 135 <= b && 225 > b ? c += 180 : 225 <= b && 315 > b && (c += 270);
                360 <= c && (c -= 360)
        }
        return c
    };
    W.prototype.computeEndSegmentLength = function (a, b, c, d)
    {
        if (null !== b && c.Aj() && (a = Sr(this, b), null !== a)) return a.yx;
        a = NaN;
        a = d ? this.Zl : this.sm;
        null !== b && isNaN(a) && (a = d ? b.Zl : b.sm);
        isNaN(a) && (a = 10);
        return a
    };
    W.prototype.computeSpot = function (a, b)
    {
        var c;
        if (a)
            if (c = b ? b : this.kc, null === c) c = Jb;
            else
            {
                var d = this.Bb;
                d.Zc() && null !== c && (d = c.Bb);
                c = d === qc ? yb : d
            }
        else c = b ? b : this.Ic, null === c ? c = Jb : (d = this.Cb, d.Zc() && null !== c && (d = c.Cb), c = d === qc ? yb : d);
        return c
    };
    W.prototype.computeOtherPoint = function (a, b)
    {
        var c = b.Ya(Jb),
            d;
        d = b.Ss;
        d = null !== d ? Ur(d, this) : null;
        null !== d && (c = d.iq);
        return c
    };
    W.prototype.computeShortLength = function (a)
    {
        if (a)
        {
            if (a = this.iu, isNaN(a))
            {
                var b = this.kc;
                null !== b && (a = b.iu)
            }
        }
        else a = this.dv, isNaN(a) && (b = this.Ic, null !== b && (a = b.dv));
        return isNaN(a) ? 0 : a
    };
    W.prototype.Jk = function (a, b, c, d, e, f)
    {
        if (!1 === this.Tg) return !1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var h = f;
        void 0 === f && (h = w.Vg(), h.reset());
        h.multiply(this.transform);
        if (this.sn(a, h)) return cq(this, b, c, e), void 0 === f && w.bf(h), !0;
        if (this.Zf(a, h))
        {
            var k = !1;
            if (!this.Hn)
                for (var l = this.xa.n, m = l.length; m--;)
                {
                    var n = l[m];
                    if (n.visible || n === this.bg)
                    {
                        var p = n.U,
                            q = this.Ja;
                        if (!(p.x > q.width || p.y > q.height || 0 > p.x + p.width || 0 > p.y + p.height))
                        {
                            p = w.Vg();
                            p.set(h);
                            if (n instanceof C) k = n.Jk(a, b, c, d, e, p);
                            else if (this.path ===
                                n)
                            {
                                if (n instanceof X)
                                {
                                    var k = n,
                                        r = a,
                                        s = d,
                                        q = p;
                                    if (!1 === k.Tg) k = !1;
                                    else if (q.multiply(k.transform), s) b:
                                    {
                                        var u = r,
                                            t = q;
                                        if (k.sn(u, t)) k = !0;
                                        else
                                        {
                                            if (void 0 === t && (t = k.transform, u.Fk(k.U)))
                                            {
                                                k = !0;
                                                break b
                                            }
                                            var q = u.left,
                                                r = u.right,
                                                s = u.top,
                                                u = u.bottom,
                                                x = w.K(),
                                                v = w.K(),
                                                z = w.K(),
                                                A = w.Vg();
                                            A.set(t);
                                            A.SF(k.transform);
                                            A.RA();
                                            v.x = r;
                                            v.y = s;
                                            v.transform(A);
                                            x.x = q;
                                            x.y = s;
                                            x.transform(A);
                                            t = !1;
                                            oq(k, x, v, z) ? t = !0 : (x.x = r, x.y = u, x.transform(A), oq(k, x, v, z) ? t = !0 : (v.x = q, v.y = u, v.transform(A), oq(k, x, v, z) ? t = !0 : (x.x = q, x.y = s, x.transform(A), oq(k, x, v, z) &&
                                            (t = !0))));
                                            w.bf(A);
                                            w.v(x);
                                            w.v(v);
                                            w.v(z);
                                            k = t
                                        }
                                    }
                                    else k = k.sn(r, q)
                                }
                            }
                            else k = Go(n, a, d, p);
                            k && (null !== b && (n = b(n)), n && (null === c || c(n)) && (e instanceof I && e.add(n), e instanceof H && e.add(n)));
                            w.bf(p)
                        }
                    }
                }
            void 0 === f && w.bf(h);
            return k || null !== this.background || null !== this.nn
        }
        void 0 === f && w.bf(h);
        return !1
    };
    w.u(W,
        {
            ac: "isOrthogonal"
        }, function ()
        {
            return 2 === (this.Zm.value & 2)
        });
    w.u(W,
        {
            dm: "isAvoiding"
        }, function ()
        {
            return 4 === (this.Zm.value & 4)
        });
    W.prototype.computeCurve = function ()
    {
        if (null === this.Oi)
        {
            var a = this.kc,
                b = this.ac;
            this.Oi = null !== a && a === this.Ic && !b
        }
        return this.Oi ? tj : this.nf
    };
    W.prototype.computeCorner = function ()
    {
        if (this.nf === tj) return 0;
        var a = this.vA;
        if (isNaN(a) || 0 > a) a = 10;
        return a
    };
    W.prototype.findMidLabel = function ()
    {
        for (var a = this.path, b = this.xa.n, c = b.length, d = 0; d < c; d++)
        {
            var e = b[d];
            if (e !== a && !e.ff && (-Infinity === e.Pe || isNaN(e.Pe))) return e
        }
        for (a = this.Ef; a.next();)
            if (b = a.value, -Infinity === b.Pe || isNaN(b.Pe)) return b;
        return null
    };
    W.prototype.computeSpacing = function ()
    {
        if (!this.isVisible()) return 0;
        var a;
        a = Math.max(14, this.computeThickness());
        var b = this.kc,
            c = this.Ic;
        if (null !== b && null !== c)
        {
            var d = this.findMidLabel();
            if (null !== d)
            {
                var e = d.Ja,
                    f = d.margin,
                    h = isNaN(e.width) ? 30 : e.width * d.scale + f.left + f.right,
                    e = isNaN(e.height) ? 14 : e.height * d.scale + f.top + f.bottom,
                    d = d.yq;
                d === rq || d === Lr || d === Kr ? a = Math.max(a, e) : d === Vp || d === Wp || d === Tp || d === Up ? a = Math.max(a, h) : (b = b.Ya(Jb).Qb(c.Ya(Jb)) / 180 * Math.PI, a = Math.max(a, Math.abs(Math.sin(b) * h) + Math.abs(Math.cos(b) *
                    e) + 1));
                this.nf === tj && (a *= 1.333)
            }
        }
        return a
    };
    W.prototype.arrangeBundledLinks = function (a, b)
    {
        if (b)
            for (var c = 0; c < a.length; c++)
            {
                var d = a[c];
                d.Ep === mj && d.Wb()
            }
    };
    W.prototype.computeCurviness = function ()
    {
        var a = this.px;
        if (isNaN(a))
        {
            var a = 16,
                b = this.Bi;
            if (null !== b)
            {
                for (var c = w.gb(), d = 0, e = b.links, f = 0; f < e.length; f++)
                {
                    var h = e[f],
                        h = h.computeSpacing();
                    c.push(h);
                    d += h
                }
                d = -d / 2;
                for (f = 0; f < e.length; f++)
                {
                    h = e[f];
                    if (h === this)
                    {
                        a = d + c[f] / 2;
                        break
                    }
                    d += c[f]
                }
                b.lq === this.Y && (a = -a);
                w.ta(c)
            }
        }
        return a
    };
    W.prototype.computeThickness = function ()
    {
        if (!this.isVisible()) return 0;
        var a = this.path;
        return null !== a ? Math.max(a.mb, 1) : 1
    };
    W.prototype.hasCurviness = function ()
    {
        return !isNaN(this.px) || null !== this.Bi
    };
    W.prototype.adjustPoints = function (a, b, c, d)
    {
        var e = this.Ep;
        if (this.ac)
        {
            if (e === Hr) return !1;
            e === Ir && (e = Gr)
        }
        switch (e)
        {
            case Hr:
                var f = this.l(a),
                    h = this.l(c);
                if (!f.Oc(b) || !h.Oc(d))
                {
                    var e = f.x,
                        f = f.y,
                        k = h.x - e,
                        l = h.y - f,
                        m = Math.sqrt(k * k + l * l);
                    if (!Wa(m, 0))
                    {
                        var n = 0;
                        Wa(k, 0) ? n = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (n = Math.atan(l / Math.abs(k)), 0 > k && (n = Math.PI - n));
                        var h = b.x,
                            p = b.y,
                            l = d.x - h,
                            q = d.y - p,
                            r = Math.sqrt(l * l + q * q),
                            k = 0;
                        Wa(l, 0) ? k = 0 > q ? -Math.PI / 2 : Math.PI / 2 : (k = Math.atan(q / Math.abs(l)), 0 > l && (k = Math.PI - k));
                        m = r / m;
                        n = k - n;
                        this.Ug(a, b);
                        for (a +=
                                 1; a < c; a++) b = this.l(a), k = b.x - e, l = b.y - f, b = Math.sqrt(k * k + l * l), Wa(b, 0) || (q = 0, Wa(k, 0) ? q = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (q = Math.atan(l / Math.abs(k)), 0 > k && (q = Math.PI - q)), k = q + n, b *= m, this.ca(a, h + b * Math.cos(k), p + b * Math.sin(k)));
                        this.Ug(c, d)
                    }
                }
                return !0;
            case Ir:
                f = this.l(a);
                p = this.l(c);
                if (!f.Oc(b) || !p.Oc(d))
                {
                    var e = f.x,
                        f = f.y,
                        h = p.x,
                        p = p.y,
                        m = (h - e) * (h - e) + (p - f) * (p - f),
                        k = b.x,
                        n = b.y,
                        l = d.x,
                        q = d.y,
                        r = 0,
                        s = 1;
                    0 !== l - k ? (r = (q - n) / (l - k), s = Math.sqrt(1 + 1 / (r * r))) : r = 9E9;
                    this.Ug(a, b);
                    for (a += 1; a < c; a++)
                    {
                        b = this.l(a);
                        var u = b.x,
                            t = b.y,
                            x = .5;
                        0 !== m && (x =
                            ((e - u) * (e - h) + (f - t) * (f - p)) / m);
                        var v = e + x * (h - e),
                            z = f + x * (p - f);
                        b = Math.sqrt((u - v) * (u - v) + (t - z) * (t - z));
                        t < r * (u - v) + z && (b = -b);
                        0 < r && (b = -b);
                        u = k + x * (l - k);
                        x = n + x * (q - n);
                        0 !== r ? (b = u + b / s, this.ca(a, b, x - (b - u) / r)) : this.ca(a, u, x + b)
                    }
                    this.Ug(c, d)
                }
                return !0;
            case Gr:
                a:
                {
                    if (this.ac && (e = this.l(a), f = this.l(a + 1), h = this.l(a + 2), k = f.x, n = f.y, p = k, m = n, J(e.y, f.y) ? J(f.x, h.x) ? n = b.y : J(f.y, h.y) && (k = b.x) : J(e.x, f.x) && (J(f.y, h.y) ? k = b.x : J(f.x, h.x) && (n = b.y)), this.ca(a + 1, k, n), e = this.l(c), f = this.l(c - 1), h = this.l(c - 2), k = f.x, n = f.y, l = k, q = n, J(e.y, f.y) ? J(f.x,
                        h.x) ? n = d.y : J(f.y, h.y) && (k = d.x) : J(e.x, f.x) && (J(f.y, h.y) ? k = d.x : J(f.x, h.x) && (n = d.y)), this.ca(c - 1, k, n), gi(this)))
                    {
                        this.ca(a + 1, p, m);
                        this.ca(c - 1, l, q);
                        c = !1;
                        break a
                    }
                    this.Ug(a, b);this.Ug(c, d);c = !0
                }
                return c;
            default:
                return !1
        }
    };
    W.prototype.addOrthoPoints = function (a, b, c, d, e, f)
    {
        b = -45 <= b && 45 > b ? 0 : 45 <= b && 135 > b ? 90 : 135 <= b && 225 > b ? 180 : 270;
        d = -45 <= d && 45 > d ? 0 : 45 <= d && 135 > d ? 90 : 135 <= d && 225 > d ? 180 : 270;
        var h = e.U.copy(),
            k = f.U.copy();
        if (h.I() && k.I())
        {
            h.Yf(8, 8);
            k.Yf(8, 8);
            h.yi(a);
            k.yi(c);
            var l, m;
            if (0 === b)
                if (c.x > a.x || 270 === d && c.y < a.y && k.right > a.x || 90 === d && c.y > a.y && k.right > a.x) l = new y(c.x, a.y), m = new y(c.x, (a.y + c.y) / 2), 180 === d ? (l.x = this.computeMidOrthoPosition(a.x, c.x, !1), m.x = l.x, m.y = c.y) : 270 === d && c.y < a.y || 90 === d && c.y > a.y ? (l.x = a.x < k.left ? this.computeMidOrthoPosition(a.x,
                    k.left, !1) : a.x < k.right && (270 === d && a.y < k.top || 90 === d && a.y > k.bottom) ? this.computeMidOrthoPosition(a.x, c.x, !1) : k.right, m.x = l.x, m.y = c.y) : 0 === d && a.x < k.left && a.y > k.top && a.y < k.bottom && (l.x = a.x, l.y = a.y < c.y ? Math.min(c.y, k.top) : Math.max(c.y, k.bottom), m.y = l.y);
                else
                {
                    l = new y(a.x, c.y);
                    m = new y((a.x + c.x) / 2, c.y);
                    if (180 === d || 90 === d && c.y < h.top || 270 === d && c.y > h.bottom) 180 === d && (k.Ia(a) || h.Ia(c)) ? l.y = this.computeMidOrthoPosition(a.y, c.y, !0) : c.y < a.y && (180 === d || 90 === d) ? l.y = this.computeMidOrthoPosition(h.top, Math.max(c.y,
                        k.bottom), !0) : c.y > a.y && (180 === d || 270 === d) && (l.y = this.computeMidOrthoPosition(h.bottom, Math.min(c.y, k.top), !0)), m.x = c.x, m.y = l.y;
                    if (l.y > h.top && l.y < h.bottom)
                        if (c.x >= h.left && c.x <= a.x || a.x <= k.right && a.x >= c.x)
                        {
                            if (90 === d || 270 === d) l = new y(Math.max((a.x + c.x) / 2, a.x), a.y), m = new y(l.x, c.y)
                        }
                        else l.y = 270 === d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 0 === d ? h.top : Math.min(h.top, k.top)) : Math.max(c.y, 0 === d ? h.bottom : Math.max(h.bottom, k.bottom)), m.x = c.x, m.y = l.y
                }
            else if (180 === b)
                if (c.x < a.x || 270 === d && c.y < a.y && k.left < a.x ||
                    90 === d && c.y > a.y && k.left < a.x) l = new y(c.x, a.y), m = new y(c.x, (a.y + c.y) / 2), 0 === d ? (l.x = this.computeMidOrthoPosition(a.x, c.x, !1), m.x = l.x, m.y = c.y) : 270 === d && c.y < a.y || 90 === d && c.y > a.y ? (l.x = a.x > k.right ? this.computeMidOrthoPosition(a.x, k.right, !1) : a.x > k.left && (270 === d && a.y < k.top || 90 === d && a.y > k.bottom) ? this.computeMidOrthoPosition(a.x, c.x, !1) : k.left, m.x = l.x, m.y = c.y) : 180 === d && a.x > k.right && a.y > k.top && a.y < k.bottom && (l.x = a.x, l.y = a.y < c.y ? Math.min(c.y, k.top) : Math.max(c.y, k.bottom), m.y = l.y);
                else
                {
                    l = new y(a.x, c.y);
                    m = new y((a.x +
                        c.x) / 2, c.y);
                    if (0 === d || 90 === d && c.y < h.top || 270 === d && c.y > h.bottom) 0 === d && (k.Ia(a) || h.Ia(c)) ? l.y = this.computeMidOrthoPosition(a.y, c.y, !0) : c.y < a.y && (0 === d || 90 === d) ? l.y = this.computeMidOrthoPosition(h.top, Math.max(c.y, k.bottom), !0) : c.y > a.y && (0 === d || 270 === d) && (l.y = this.computeMidOrthoPosition(h.bottom, Math.min(c.y, k.top), !0)), m.x = c.x, m.y = l.y;
                    if (l.y > h.top && l.y < h.bottom)
                        if (c.x <= h.right && c.x >= a.x || a.x >= k.left && a.x <= c.x)
                        {
                            if (90 === d || 270 === d) l = new y(Math.min((a.x + c.x) / 2, a.x), a.y), m = new y(l.x, c.y)
                        }
                        else l.y = 270 ===
                        d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 180 === d ? h.top : Math.min(h.top, k.top)) : Math.max(c.y, 180 === d ? h.bottom : Math.max(h.bottom, k.bottom)), m.x = c.x, m.y = l.y
                }
            else if (90 === b)
                if (c.y > a.y || 180 === d && c.x < a.x && k.bottom > a.y || 0 === d && c.x > a.x && k.bottom > a.y) l = new y(a.x, c.y), m = new y((a.x + c.x) / 2, c.y), 270 === d ? (l.y = this.computeMidOrthoPosition(a.y, c.y, !0), m.x = c.x, m.y = l.y) : 180 === d && c.x < a.x || 0 === d && c.x > a.x ? (l.y = a.y < k.top ? this.computeMidOrthoPosition(a.y, k.top, !0) : a.y < k.bottom && (180 === d && a.x < k.left || 0 === d && a.x > k.right) ?
                    this.computeMidOrthoPosition(a.y, c.y, !0) : k.bottom, m.x = c.x, m.y = l.y) : 90 === d && a.y < k.top && a.x > k.left && a.x < k.right && (l.x = a.x < c.x ? Math.min(c.x, k.left) : Math.max(c.x, k.right), l.y = a.y, m.x = l.x);
                else
                {
                    l = new y(c.x, a.y);
                    m = new y(c.x, (a.y + c.y) / 2);
                    if (270 === d || 0 === d && c.x < h.left || 180 === d && c.x > h.right) 270 === d && (k.Ia(a) || h.Ia(c)) ? l.x = this.computeMidOrthoPosition(a.x, c.x, !1) : c.x < a.x && (270 === d || 0 === d) ? l.x = this.computeMidOrthoPosition(h.left, Math.max(c.x, k.right), !1) : c.x > a.x && (270 === d || 180 === d) && (l.x = this.computeMidOrthoPosition(h.right,
                        Math.min(c.x, k.left), !1)), m.x = l.x, m.y = c.y;
                    if (l.x > h.left && l.x < h.right)
                        if (c.y >= h.top && c.y <= a.y || a.y <= k.bottom && a.y >= c.y)
                        {
                            if (0 === d || 180 === d) l = new y(a.x, Math.max((a.y + c.y) / 2, a.y)), m = new y(c.x, l.y)
                        }
                        else l.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 90 === d ? h.left : Math.min(h.left, k.left)) : Math.max(c.x, 90 === d ? h.right : Math.max(h.right, k.right)), m.x = l.x, m.y = c.y
                }
            else if (c.y < a.y || 180 === d && c.x < a.x && k.top < a.y || 0 === d && c.x > a.x && k.top < a.y) l = new y(a.x, c.y), m = new y((a.x + c.x) / 2, c.y), 90 === d ? (l.y = this.computeMidOrthoPosition(a.y,
                c.y, !0), m.x = c.x, m.y = l.y) : 180 === d && c.x < a.x || 0 === d && c.x >= a.x ? (l.y = a.y > k.bottom ? this.computeMidOrthoPosition(a.y, k.bottom, !0) : a.y > k.top && (180 === d && a.x < k.left || 0 === d && a.x > k.right) ? this.computeMidOrthoPosition(a.y, c.y, !0) : k.top, m.x = c.x, m.y = l.y) : 270 === d && a.y > k.bottom && a.x > k.left && a.x < k.right && (l.x = a.x < c.x ? Math.min(c.x, k.left) : Math.max(c.x, k.right), l.y = a.y, m.x = l.x);
            else
            {
                l = new y(c.x, a.y);
                m = new y(c.x, (a.y + c.y) / 2);
                if (90 === d || 0 === d && c.x < h.left || 180 === d && c.x > h.right) 90 === d && (k.Ia(a) || h.Ia(c)) ? l.x = this.computeMidOrthoPosition(a.x,
                    c.x, !1) : c.x < a.x && (90 === d || 0 === d) ? l.x = this.computeMidOrthoPosition(h.left, Math.max(c.x, k.right), !1) : c.x > a.x && (90 === d || 180 === d) && (l.x = this.computeMidOrthoPosition(h.right, Math.min(c.x, k.left), !1)), m.x = l.x, m.y = c.y;
                if (l.x > h.left && l.x < h.right)
                    if (c.y <= h.bottom && c.y >= a.y || a.y >= k.top && a.y <= c.y)
                    {
                        if (0 === d || 180 === d) l = new y(a.x, Math.min((a.y + c.y) / 2, a.y)), m = new y(c.x, l.y)
                    }
                    else l.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 270 === d ? h.left : Math.min(h.left, k.left)) : Math.max(c.x, 270 === d ? h.right : Math.max(h.right,
                        k.right)), m.x = l.x, m.y = c.y
            }
            var n = l,
                p = m;
            if (this.dm)
            {
                var q = this.g,
                    r;
                (r = null === q) || (q.Ka.df ? r = !1 : (r = q.Xa, r = r instanceof nh ? !r.Qw || r.wI : !0), r = !r);
                if (r || h.Ia(c) && !f.qi(e) || k.Ia(a) && !e.qi(f) || e === f || this.layer.Pc) b = !1;
                else
                {
                    var s = Gn(q, !0, this.Da, null);
                    if (s.gq(Math.min(a.x, n.x), Math.min(a.y, n.y), Math.abs(a.x - n.x), Math.abs(a.y - n.y)) && s.gq(Math.min(n.x, p.x), Math.min(n.y, p.y), Math.abs(n.x - p.x), Math.abs(n.y - p.y)) && s.gq(Math.min(p.x, c.x), Math.min(p.y, c.y), Math.abs(p.x - c.x), Math.abs(p.y - c.y))) b = !1;
                    else
                    {
                        e = a;
                        f = c;
                        var u = r = null;
                        if (q.XA)
                        {
                            q = s.cb.copy();
                            q.Yf(-s.Jp, -s.Hp);
                            var t = w.K();
                            Vr(s, a.x, a.y) || (ke(q.x, q.y, q.x + q.width, q.y + q.height, a.x, a.y, n.x, n.y, t) ? (r = a = t.copy(), b = t.Qb(n)) : ke(q.x, q.y, q.x + q.width, q.y + q.height, n.x, n.y, p.x, p.y, t) ? (r = a = t.copy(), b = t.Qb(p)) : ke(q.x, q.y, q.x + q.width, q.y + q.height, p.x, p.y, c.x, c.y, t) && (r = a = t.copy(), b = t.Qb(c)));
                            Vr(s, c.x, c.y) || (ke(q.x, q.y, q.x + q.width, q.y + q.height, c.x, c.y, p.x, p.y, t) ? (u = c = t.copy(), d = p.Qb(t)) : ke(q.x, q.y, q.x + q.width, q.y + q.height, p.x, p.y, n.x, n.y, t) ? (u = c = t.copy(), d = n.Qb(t)) : ke(q.x,
                                q.y, q.x + q.width, q.y + q.height, n.x, n.y, a.x, a.y, t) && (u = c = t.copy(), d = a.Qb(t)));
                            w.v(t)
                        }
                        h = h.copy().Jh(k);
                        k = s.uG;
                        h.Yf(s.Jp * k, s.Hp * k);
                        Wr(s, a, b, c, d, h);
                        k = Xr(s, c.x, c.y);
                        !s.abort && 999999 <= k && (Jn(s), k = s.LF, h.Yf(s.Jp * k, s.Hp * k), Wr(s, a, b, c, d, h), k = Xr(s, c.x, c.y));
                        !s.abort && 999999 <= k && s.KG && (Jn(s), Wr(s, a, b, c, d, s.cb), k = Xr(s, c.x, c.y));
                        if (!s.abort && 999999 > k && 0 !== Xr(s, c.x, c.y))
                        {
                            Yr(this, s, c.x, c.y, d, !0);
                            h = this.l(2);
                            if (4 > this.qa) 0 === b || 180 === b ? (h.x = a.x, h.y = c.y) : (h.x = c.x, h.y = a.y), this.ca(2, h.x, h.y), this.w(3, h.x, h.y);
                            else if (c =
                                this.l(3), 0 === b || 180 === b) J(h.x, c.x) ? (h = 0 === b ? Math.max(h.x, a.x) : Math.min(h.x, a.x), this.ca(2, h, a.y), this.ca(3, h, c.y)) : J(h.y, c.y) ? (Math.abs(a.y - h.y) <= s.Hp / 2 && (this.ca(2, h.x, a.y), this.ca(3, c.x, a.y)), this.w(2, h.x, a.y)) : this.ca(2, a.x, h.y);
                            else if (90 === b || 270 === b) J(h.y, c.y) ? (h = 90 === b ? Math.max(h.y, a.y) : Math.min(h.y, a.y), this.ca(2, a.x, h), this.ca(3, c.x, h)) : J(h.x, c.x) ? (Math.abs(a.x - h.x) <= s.Jp / 2 && (this.ca(2, a.x, h.y), this.ca(3, a.x, c.y)), this.w(2, a.x, h.y)) : this.ca(2, h.x, a.y);
                            null !== r && (a = this.l(1), c = this.l(2),
                                a.x !== c.x && a.y !== c.y ? 0 === b || 180 === b ? this.w(2, a.x, c.y) : this.w(2, c.x, a.y) : 0 === b || 180 === b ? this.w(2, e.x, r.y) : this.w(2, r.x, e.y));
                            null !== u && (0 === d || 180 === d ? this.oj(f.x, u.y) : this.oj(u.x, f.y));
                            b = !0
                        }
                        else b = !1
                    }
                }
            }
            else b = !1;
            b || (this.mi(l), this.mi(m))
        }
    };
    W.prototype.computeMidOrthoPosition = function (a, b)
    {
        if (this.hasCurviness())
        {
            var c = this.computeCurviness();
            return (a + b) / 2 + c
        }
        return (a + b) / 2
    };

    function gi(a)
    {
        if (null === a.g || !a.dm) return !1;
        var b = a.points.n,
            c = b.length;
        if (4 > c) return !1;
        a = Gn(a.g, !0, a.Da, null);
        for (var d = 1; d < c - 2; d++)
        {
            var e = b[d],
                f = b[d + 1];
            if (!a.gq(Math.min(e.x, f.x), Math.min(e.y, f.y), Math.abs(e.x - f.x), Math.abs(e.y - f.y))) return !0
        }
        return !1
    }

    function Yr(a, b, c, d, e, f)
    {
        var h = b.Jp,
            k = b.Hp,
            l = Xr(b, c, d),
            m = c,
            n = d;
        for (0 === e ? m += h : 90 === e ? n += k : 180 === e ? m -= h : n -= k; 1 < l && Xr(b, m, n) === l - 1;) c = m, d = n, 0 === e ? m += h : 90 === e ? n += k : 180 === e ? m -= h : n -= k, l -= 1;
        if (f)
        {
            if (1 < l)
                if (180 === e || 0 === e) c = Math.floor(c / h) * h + h / 2;
                else if (90 === e || 270 === e) d = Math.floor(d / k) * k + k / 2
        }
        else c = Math.floor(c / h) * h + h / 2, d = Math.floor(d / k) * k + k / 2;
        1 < l && (f = e, m = c, n = d, 0 === e ? (f = 90, n += k) : 90 === e ? (f = 180, m -= h) : 180 === e ? (f = 270, n -= k) : 270 === e && (f = 0, m += h), Xr(b, m, n) === l - 1 ? Yr(a, b, m, n, f, !1) : (m = c, n = d, 0 === e ? (f = 270, n -= k) : 90 ===
        e ? (f = 0, m += h) : 180 === e ? (f = 90, n += k) : 270 === e && (f = 180, m -= h), Xr(b, m, n) === l - 1 && Yr(a, b, m, n, f, !1)));
        a.oj(c, d)
    }
    W.prototype.findClosestSegment = function (a)
    {
        var b = a.x;
        a = a.y;
        for (var c = this.l(0), d = this.l(1), e = Ra(b, a, c.x, c.y, d.x, d.y), f = 0, h = 1; h < this.qa - 1; h++)
        {
            var c = this.l(h + 1),
                k = Ra(b, a, d.x, d.y, c.x, c.y),
                d = c;
            k < e && (f = h, e = k)
        }
        return f
    };
    W.prototype.ge = function ()
    {
        this.Sa = null
    };
    w.u(W,
        { of: "geometry"
        }, function ()
        {
            null === this.Sa && (this.eo(), this.Sa = this.makeGeometry());
            return this.Sa
        });
    W.prototype.Eu = function (a)
    {
        if (!a)
        {
            if (!1 === this.Mf) return;
            a = this.Bd();
            if (null !== this.Sa && (null === a || null !== a.of)) return
        }
        this.Sa = this.makeGeometry();
        a = this.path;
        if (null !== a)
        {
            a.Sa = this.Sa;
            for (var b = this.xa.n, c = b.length, d = 0; d < c; d++)
            {
                var e = b[d];
                e !== a && e.ff && e instanceof X && (e.Sa = this.Sa)
            }
        }
    };
    W.prototype.makeGeometry = function ()
    {
        var a = this.qa;
        if (2 > a) return new Be(Fe);
        var b = !1,
            c = this.g;
        null !== c && Or(this) && c.ml.contains(this) && null !== this.Bw && (b = !0);
        var d = c = 0,
            e = this.l(0).copy(),
            f = e.copy(),
            c = this.hd.n,
            h = this.computeCurve();
        if (h === tj && 3 <= a && !Wa(this.Dq, 0))
            if (3 === a) var k = this.l(1),
                c = Math.min(e.x, k.x),
                d = Math.min(e.y, k.y),
                k = this.l(2),
                c = Math.min(c, k.x),
                d = Math.min(d, k.y);
            else
            {
                if (this.ac)
                    for (k = 0; k < a; k++) d = c[k], f.x = Math.min(d.x, f.x), f.y = Math.min(d.y, f.y);
                else
                    for (k = 3; k < a; k += 3) k + 3 >= a && (k = a - 1), c = this.l(k),
                        f.x = Math.min(c.x, f.x), f.y = Math.min(c.y, f.y);
                c = f.x;
                d = f.y
            }
        else
        {
            for (k = 0; k < a; k++) d = c[k], f.x = Math.min(d.x, f.x), f.y = Math.min(d.y, f.y);
            c = f.x;
            d = f.y
        }
        c -= this.Yz.x;
        d -= this.Yz.y;
        e.x -= c;
        e.y -= d;
        if (2 !== a || Or(this))
        {
            var l = w.s();
            0 !== this.computeShortLength(!0) && (e = Zr(this, e, !0, f));
            M(l, e.x, e.y, !1, !1);
            if (h === tj && 3 <= a && !Wa(this.Dq, 0))
                if (3 === a) k = this.l(1), a = k.x - c, b = k.y - d, k = this.l(2).copy(), k.x -= c, k.y -= d, 0 !== this.computeShortLength(!1) && (k = Zr(this, k, !1, f)), N(l, a, b, a, b, k.x, k.y);
                else if (this.ac)
                {
                    for (var f = new y(c, d), e = this.l(1).copy(),
                             h = new y(c, d), a = new y(c, d), b = this.l(0), m = null, n = this.Dq / 3, k = 1; k < this.qa - 1; k++)
                    {
                        var m = this.l(k),
                            p = b,
                            q = m,
                            r = this.l($r(this, m, k, !1));
                        if (!Wa(p.x, q.x) || !Wa(q.x, r.x))
                            if (!Wa(p.y, q.y) || !Wa(q.y, r.y))
                            {
                                var s = n,
                                    u = h,
                                    t = a;
                                isNaN(s) && (s = this.Dq / 3);
                                var x = p.x,
                                    p = p.y,
                                    v = q.x,
                                    q = q.y,
                                    z = r.x,
                                    r = r.y,
                                    A = s * as(x, p, v, q),
                                    s = s * as(v, q, z, r);
                                Wa(p, q) && Wa(v, z) && (v > x ? r > q ? (u.x = v - A, u.y = q - A, t.x = v + s, t.y = q + s) : (u.x = v - A, u.y = q + A, t.x = v + s, t.y = q - s) : r > q ? (u.x = v + A, u.y = q - A, t.x = v - s, t.y = q + s) : (u.x = v + A, u.y = q + A, t.x = v - s, t.y = q - s));
                                Wa(x, v) && Wa(q, r) && (q > p ? (z > v ? (u.x =
                                    v - A, u.y = q - A, t.x = v + s) : (u.x = v + A, u.y = q - A, t.x = v - s), t.y = q + s) : (z > v ? (u.x = v - A, u.y = q + A, t.x = v + s) : (u.x = v + A, u.y = q + A, t.x = v - s), t.y = q - s));
                                if (Wa(x, v) && Wa(v, z) || Wa(p, q) && Wa(q, r)) x = .5 * (x + z), p = .5 * (p + r), u.x = x, u.y = p, t.x = x, t.y = p;
                                1 === k ? (e.x = .5 * (b.x + m.x), e.y = .5 * (b.y + m.y)) : 2 === k && Wa(b.x, this.l(0).x) && Wa(b.y, this.l(0).y) && (e.x = .5 * (b.x + m.x), e.y = .5 * (b.y + m.y));
                                N(l, e.x - c, e.y - d, h.x - c, h.y - d, m.x - c, m.y - d);
                                f.set(h);
                                e.set(a);
                                b = m
                            }
                    }
                    k = b.x;
                    b = b.y;
                    f = this.l(this.qa - 1);
                    0 !== this.computeShortLength(!1) && (f = Zr(this, f.copy(), !1, cd));
                    k = .5 * (k + f.x);
                    b = .5 * (b + f.y);
                    N(l, a.x - c, a.y - d, k - c, b - d, f.x - c, f.y - d)
                }
                else
                    for (k = 3; k < a; k += 3) b = this.l(k - 2), k + 3 >= a && (k = a - 1), f = this.l(k - 1), e = this.l(k), k === a - 1 && 0 !== this.computeShortLength(!1) && (e = Zr(this, e.copy(), !1, cd)), N(l, b.x - c, b.y - d, f.x - c, f.y - d, e.x - c, e.y - d);
            else
            {
                f = w.K();
                f.assign(this.l(0));
                k = 1;
                for (e = 0; k < a;)
                {
                    k = $r(this, f, k, 1 < k);
                    u = this.l(k);
                    if (k >= a - 1)
                    {
                        if (!f.L(u)) 0 !== this.computeShortLength(!1) && (u = Zr(this, u.copy(), !1, cd)), bs(this, l, -c, -d, f, u, b);
                        else if (0 === e)
                            for (k = 1; k < a;) u = this.l(k++), bs(this, l, -c, -d, f, u, b), f.assign(u);
                        break
                    }
                    e = $r(this, u, k + 1, k < a - 3);
                    k = l;
                    h = -c;
                    m = -d;
                    n = f;
                    t = this.l(e);
                    x = f;
                    p = b;
                    J(n.y, u.y) && J(u.x, t.x) ? (s = this.computeCorner(), s = Math.min(s, Math.abs(u.x - n.x) / 2), s = v = Math.min(s, Math.abs(t.y - u.y) / 2), J(s, 0) ? (bs(this, k, h, m, n, u, p), x.assign(u)) : (q = u.x, z = u.y, r = q, A = z, q = u.x > n.x ? u.x - s : u.x + s, A = t.y > u.y ? u.y + v : u.y - v, bs(this, k, h, m, n, new y(q, z), p), Pe(k, u.x + h, u.y + m, r + h, A + m), x.m(r, A))) : J(n.x, u.x) && J(u.y, t.y) ? (s = this.computeCorner(), v = Math.min(s, Math.abs(u.y - n.y) / 2), v = s = Math.min(v, Math.abs(t.x - u.x) / 2), J(s, 0) ? (bs(this, k, h, m, n, u,
                        p), x.assign(u)) : (q = u.x, A = z = u.y, z = u.y > n.y ? u.y - v : u.y + v, r = t.x > u.x ? u.x + s : u.x - s, bs(this, k, h, m, n, new y(q, z), p), Pe(k, u.x + h, u.y + m, r + h, A + m), x.m(r, A))) : (bs(this, k, h, m, n, u, p), x.assign(u));
                    k = e
                }
                w.v(f)
            }
            c = l.o;
            w.q(l)
        }
        else l = this.l(1).copy(), l.x -= c, l.y -= d, 0 !== this.computeShortLength(!0) && (e = Zr(this, e, !0, f)), 0 !== this.computeShortLength(!1) && (l = Zr(this, l, !1, f)), c = new Be(Fe), c.ha = e.x, c.fa = e.y, c.C = l.x, c.D = l.y;
        return c
    };

    function as(a, b, c, d)
    {
        a = c - a;
        if (isNaN(a) || Infinity === a || -Infinity === a) return NaN;
        0 > a && (a = -a);
        b = d - b;
        if (isNaN(b) || Infinity === b || -Infinity === b) return NaN;
        0 > b && (b = -b);
        return Wa(a, 0) ? b : Wa(b, 0) ? a : Math.sqrt(a * a + b * b)
    }

    function Zr(a, b, c, d)
    {
        var e = a.qa;
        if (2 > e) return b;
        if (c)
        {
            var f = a.l(1);
            c = f.x - d.x;
            d = f.y - d.y;
            f = as(b.x, b.y, c, d);
            if (0 === f) return b;
            e = 2 === e ? .5 * f : f;
            a = a.computeShortLength(!0);
            a > e && (a = e);
            c = a * (c - b.x) / f;
            a = a * (d - b.y) / f;
            b.x += c;
            b.y += a
        }
        else
        {
            f = a.l(e - 2);
            c = f.x - d.x;
            d = f.y - d.y;
            f = as(b.x, b.y, c, d);
            if (0 === f) return b;
            e = 2 === e ? .5 * f : f;
            a = a.computeShortLength(!1);
            a > e && (a = e);
            c = a * (b.x - c) / f;
            a = a * (b.y - d) / f;
            b.x -= c;
            b.y -= a
        }
        return b
    }

    function $r(a, b, c, d)
    {
        for (var e = a.qa, f = b; Wa(b.x, f.x) && Wa(b.y, f.y);)
        {
            if (c >= e) return e - 1;
            f = a.l(c++)
        }
        if (!Wa(b.x, f.x) && !Wa(b.y, f.y)) return c - 1;
        for (var h = f; Wa(b.x, f.x) && Wa(f.x, h.x) && (!d || (b.y >= f.y ? f.y >= h.y : f.y <= h.y)) || Wa(b.y, f.y) && Wa(f.y, h.y) && (!d || (b.x >= f.x ? f.x >= h.x : f.x <= h.x));)
        {
            if (c >= e) return e - 1;
            h = a.l(c++)
        }
        return c - 2
    }

    function bs(a, b, c, d, e, f, h)
    {
        if (!h && Or(a))
        {
            h = [];
            var k = 0;
            a.isVisible() && (k = cs(a, e, f, h));
            var l = e.x,
                l = e.y;
            if (0 < k)
                if (J(e.y, f.y))
                    if (e.x < f.x)
                        for (var m = 0; m < k;)
                        {
                            var n = Math.max(e.x, Math.min(h[m++] - 5, f.x - 10));
                            b.lineTo(n + c, f.y + d);
                            for (var l = n + c, p = Math.min(n + 10, f.x); m < k;)
                            {
                                var q = h[m];
                                if (q < p + 10) m++, p = Math.min(q + 5, f.x);
                                else break
                            }
                            q = (n + p) / 2 + c;
                            q = f.y - 10 + d;
                            n = p + c;
                            p = f.y + d;
                            a.nf === lj ? M(b, n, p, !1, !1) : N(b, l, q, n, q, n, p)
                        }
                    else
                        for (m = k - 1; 0 <= m;)
                        {
                            n = Math.min(e.x, Math.max(h[m--] + 5, f.x + 10));
                            b.lineTo(n + c, f.y + d);
                            l = n + c;
                            for (p = Math.max(n - 10,
                                f.x); 0 <= m;)
                                if (q = h[m], q > p - 10) m--, p = Math.max(q - 5, f.x);
                                else break;
                            q = f.y - 10 + d;
                            n = p + c;
                            p = f.y + d;
                            a.nf === lj ? M(b, n, p, !1, !1) : N(b, l, q, n, q, n, p)
                        }
                else if (J(e.x, f.x))
                    if (e.y < f.y)
                        for (m = 0; m < k;)
                        {
                            n = Math.max(e.y, Math.min(h[m++] - 5, f.y - 10));
                            b.lineTo(f.x + c, n + d);
                            l = n + d;
                            for (p = Math.min(n + 10, f.y); m < k;)
                                if (q = h[m], q < p + 10) m++, p = Math.min(q + 5, f.y);
                                else break;
                            q = f.x - 10 + c;
                            n = f.x + c;
                            p += d;
                            a.nf === lj ? M(b, n, p, !1, !1) : N(b, q, l, q, p, n, p)
                        }
                    else
                        for (m = k - 1; 0 <= m;)
                        {
                            n = Math.min(e.y, Math.max(h[m--] + 5, f.y + 10));
                            b.lineTo(f.x + c, n + d);
                            l = n + d;
                            for (p = Math.max(n - 10, f.y); 0 <=
                            m;)
                                if (q = h[m], q > p - 10) m--, p = Math.max(q - 5, f.y);
                                else break;
                            q = f.x - 10 + c;
                            n = f.x + c;
                            p += d;
                            a.nf === lj ? M(b, n, p, !1, !1) : N(b, q, l, q, p, n, p)
                        }
        }
        b.lineTo(f.x + c, f.y + d)
    }

    function cs(a, b, c, d)
    {
        var e = a.g;
        if (null === e || b.L(c)) return 0;
        for (e = e.Sx; e.next();)
        {
            var f = e.value;
            if (null !== f && f.visible)
                for (var f = f.Ab.n, h = f.length, k = 0; k < h; k++)
                {
                    var l = f[k];
                    if (l instanceof W)
                    {
                        if (l === a) return 0 < d.length && d.sort(function (a, b)
                        {
                            return a - b
                        }), d.length;
                        if (l.isVisible() && Or(l))
                        {
                            var m = l.Yn;
                            m.I() && a.Yn.Zf(m) && !a.usesSamePort(l) && (m = l.path, null !== m && m.Dj() && ds(b, c, d, l))
                        }
                    }
                }
        }
        0 < d.length && d.sort(function (a, b)
        {
            return a - b
        });
        return d.length
    }

    function ds(a, b, c, d)
    {
        for (var e = J(a.y, b.y), f = d.qa, h = d.l(0), k = w.K(), l = 1; l < f; l++)
        {
            var m = d.l(l);
            if (l < f - 1)
            {
                var n = d.l(l + 1);
                if (h.y === m.y && m.y === n.y)
                {
                    if (m.x > h.x && n.x > m.x || m.x < h.x && n.x < m.x) m = n, l++
                }
                else h.x === m.x && m.x === n.x && (m.y > h.y && n.y > m.y || m.y < h.y && n.y < m.y) && (m = n, l++)
            }
            a:
            {
                var n = k,
                    p = a.x,
                    q = a.y,
                    r = b.x,
                    s = b.y,
                    u = h.x,
                    h = h.y,
                    t = m.x,
                    x = m.y;
                if (!J(p, r))
                {
                    if (J(q, s) && J(u, t) && Math.min(p, r) < u && Math.max(p, r) > u && Math.min(h, x) < q && Math.max(h, x) > q && !J(h, x))
                    {
                        n.x = u;
                        n.y = q;
                        n = !0;
                        break a
                    }
                }
                else if (!J(q, s) && J(h, x) && Math.min(q, s) < h && Math.max(q,
                    s) > h && Math.min(u, t) < p && Math.max(u, t) > p && !J(u, t))
                {
                    n.x = p;
                    n.y = h;
                    n = !0;
                    break a
                }
                n.x = 0;n.y = 0;n = !1
            }
            n && (e ? c.push(k.x) : c.push(k.y));
            h = m
        }
        w.v(k)
    }
    w.u(W,
        {
            bu: "firstPickIndex"
        }, function ()
        {
            var a;
            2 >= this.qa ? a = 0 : ((a = this.ac) || (a = this.computeSpot(!0) !== yb), a = a ? 1 : 0);
            return a
        });
    w.u(W,
        {
            Qx: "lastPickIndex"
        }, function ()
        {
            var a = this.qa;
            if (0 === a) a = 0;
            else if (2 >= a) a -= 1;
            else
            {
                var b;
                (b = this.ac) || (b = this.computeSpot(!1) !== yb);
                a = b ? a - 2 : a - 1
            }
            return a
        });

    function Or(a)
    {
        a = a.nf;
        return a === kj || a === lj
    }

    function Qr(a, b)
    {
        if (b || Or(a))
        {
            var c = a.g;
            null === c || c.ml.contains(a) || null === a.Bw || c.ml.add(a, a.Bw)
        }
    }

    function nj(a, b)
    {
        var c = a.layer;
        if (null !== c && c.visible && !c.Pc)
        {
            var d = c.g;
            if (null !== d)
                for (var e = !1, d = d.Sx; d.next();)
                {
                    var f = d.value;
                    if (f.visible)
                        if (f === c)
                            for (var e = !0, h = !1, f = f.Ab.n, k = f.length, l = 0; l < k; l++)
                            {
                                var m = f[l];
                                m instanceof W && (m === a ? h = !0 : h && es(a, m, b))
                            }
                        else if (e)
                            for (f = f.Ab.n, k = f.length, l = 0; l < k; l++) m = f[l], m instanceof W && es(a, m, b)
                }
        }
    }

    function es(a, b, c)
    {
        if (null !== b && null !== b.Sa && Or(b))
        {
            var d = b.Yn;
            d.I() && (a.Yn.Zf(d) || c.Zf(d)) && (a.usesSamePort(b) || b.ge())
        }
    }
    W.prototype.usesSamePort = function (a)
    {
        var b = this.qa,
            c = a.qa;
        if (0 < b && 0 < c)
        {
            var d = this.l(0),
                e = a.l(0);
            if (d.Oc(e)) return !0;
            b = this.l(b - 1);
            a = a.l(c - 1);
            if (b.Oc(a) || d.Oc(a) || b.Oc(e)) return !0
        }
        else if (this.Y === a.Y || this.Z === a.Z || this.Y === a.Z || this.Z === a.Y) return !0;
        return !1
    };
    W.prototype.isVisible = function ()
    {
        if (!R.prototype.isVisible.call(this)) return !1;
        var a = this.Da,
            b = !0,
            c = this.g;
        null !== c && (b = c.Ud);
        var d = this.Y;
        if (null !== d)
        {
            if (this.bc && b && !d.uc) return !1;
            if (d === a) return !0;
            for (c = d; null !== c;)
            {
                if (c.Xb === this) return !0;
                c = c.Da
            }
            c = d.findVisibleNode();
            if (null === c || c === a) return !1
        }
        d = this.Z;
        if (null !== d)
        {
            if (this.bc && !b && !d.uc) return !1;
            if (d === a) return !0;
            for (c = d; null !== c;)
            {
                if (c.Xb === this) return !0;
                c = c.Da
            }
            b = d.findVisibleNode();
            if (null === b || b === a) return !1
        }
        return !0
    };
    W.prototype.Dd = function (a)
    {
        R.prototype.Dd.call(this, a);
        null !== this.Bi && this.Bi.aq();
        if (null !== this.xf)
            for (var b = this.xf.i; b.next();) b.value.Dd(a)
    };
    w.defineProperty(W,
        {
            Ep: "adjusting"
        }, function ()
        {
            return this.Oq
        }, function (a)
        {
            var b = this.Oq;
            b !== a && (this.Oq = a, this.h("adjusting", b, a))
        });
    w.defineProperty(W,
        {
            vA: "corner"
        }, function ()
        {
            return this.ir
        }, function (a)
        {
            var b = this.ir;
            b !== a && (this.ir = a, this.ge(), this.h("corner", b, a))
        });
    w.defineProperty(W,
        {
            nf: "curve"
        }, function ()
        {
            return this.lr
        }, function (a)
        {
            var b = this.lr;
            b !== a && (this.lr = a, this.Wb(), this.ge(), Qr(this, b === lj || b === kj || a === lj || a === kj), this.h("curve", b, a))
        });
    w.defineProperty(W,
        {
            px: "curviness"
        }, function ()
        {
            return this.mr
        }, function (a)
        {
            var b = this.mr;
            b !== a && (this.mr = a, this.Wb(), this.ge(), this.h("curviness", b, a))
        });
    w.defineProperty(W,
        {
            qy: "routing"
        }, function ()
        {
            return this.Zm
        }, function (a)
        {
            var b = this.Zm;
            b !== a && (this.Zm = a, this.Oi = null, this.Wb(), Qr(this, 2 === (b.value & 2) || 2 === (a.value & 2)), this.h("routing", b, a))
        });
    w.defineProperty(W,
        {
            Dq: "smoothness"
        }, function ()
        {
            return this.rt
        }, function (a)
        {
            var b = this.rt;
            b !== a && (this.rt = a, this.ge(), this.h("smoothness", b, a))
        });

    function Nr(a)
    {
        var b = a.qg;
        if (null !== b)
        {
            var c = a.Gg;
            if (null !== c)
            {
                var d = a.Rh;
                a = a.li;
                for (var e = null, f = null, h = b.qc.n, k = h.length, l = 0; l < k; l++)
                {
                    var m = h[l];
                    if (m.qg === b && m.Rh === d && m.Gg === c && m.li === a || m.qg === c && m.Rh === a && m.Gg === b && m.li === d) null === f ? f = m : (null === e && (e = [], e.push(f)), e.push(m))
                }
                if (null !== e)
                {
                    f = vr(b, c, d, a);
                    null === f && (f = new zl, f.lq = b, f.gy = d, f.Ju = c, f.hy = a, ur(b, f), ur(c, f));
                    f.links = e;
                    for (l = 0; l < e.length; l++) m = e[l], m.Bi = f;
                    f.aq()
                }
            }
        }
    }

    function Mr(a)
    {
        var b = a.Bi;
        null !== b && (a.Bi = null, a = b.links.indexOf(a), 0 <= a && (w.Ig(b.links, a), b.aq()))
    }
    w.u(W,
        {
            key: "key"
        }, function ()
        {
            var a = this.g;
            return null !== a && a.$ instanceof Q ? a.$.cf(this.data) : void 0
        },
        {
            configurable: !0
        });

    function zl()
    {
        w.nc(this);
        this.eh = this.Zv = !1;
        this.hy = this.Ju = this.gy = this.lq = null;
        this.links = []
    }
    zl.prototype.aq = function ()
    {
        if (!this.Zv)
        {
            var a = this.links;
            0 < a.length && (a = a[0].g, null !== a && (a.cD.add(this), this.eh = a.ja.lb))
        }
        this.Zv = !0
    };
    zl.prototype.UB = function ()
    {
        if (this.Zv)
        {
            this.Zv = !1;
            var a = this.links;
            if (0 < a.length)
            {
                var b = a[0],
                    c = b.g,
                    c = null === c || c.In && !this.eh;
                this.eh = !1;
                b.arrangeBundledLinks(a, c);
                1 === a.length && (b.Bi = null, a.length = 0)
            }
            0 === a.length && (a = this.lq, null !== this && null !== a.Lh && a.Lh.remove(this), a = this.Ju, null !== this && null !== a.Lh && a.Lh.remove(this))
        }
    };
    w.ae(zl,
        {
            lq: !0,
            gy: !0,
            Ju: !0,
            hy: !0,
            links: !0,
            spacing: !0
        });

    function Hn()
    {
        w.nc(this);
        this.IB = this.group = null;
        this.pu = !0;
        this.abort = !1;
        this.Ag = this.zg = 1;
        this.os = this.ns = -1;
        this.Ee = this.De = 8;
        this.qd = null;
        this.KG = !1;
        this.uG = 22;
        this.LF = 111
    }
    w.ae(Hn,
        {
            group: !0,
            IB: !0,
            pu: !0,
            abort: !0,
            KG: !0,
            uG: !0,
            LF: !0
        });
    Hn.prototype.initialize = function (a)
    {
        if (!(0 >= a.width || 0 >= a.height))
        {
            var b = a.y,
                c = a.x + a.width,
                d = a.y + a.height;
            this.zg = Math.floor((a.x - this.De) / this.De) * this.De;
            this.Ag = Math.floor((b - this.Ee) / this.Ee) * this.Ee;
            this.ns = Math.ceil((c + 2 * this.De) / this.De) * this.De;
            this.os = Math.ceil((d + 2 * this.Ee) / this.Ee) * this.Ee;
            a = 1 + (Math.ceil((this.ns - this.zg) / this.De) | 0);
            b = 1 + (Math.ceil((this.os - this.Ag) / this.Ee) | 0);
            if (null === this.qd || this.Ap < a - 1 || this.Bp < b - 1)
            {
                c = [];
                for (d = 0; d <= a; d++) c[d] = [];
                this.qd = c;
                this.Ap = a - 1;
                this.Bp = b - 1
            }
            if (null !==
                this.qd)
                for (a = 0; a <= this.Ap; a++)
                    for (b = 0; b <= this.Bp; b++) this.qd[a][b] = 1E6
        }
    };
    w.u(Hn,
        {
            cb: null
        }, function ()
        {
            return new B(this.zg, this.Ag, this.ns - this.zg, this.os - this.Ag)
        });
    w.defineProperty(Hn,
        {
            Jp: null
        }, function ()
        {
            return this.De
        }, function (a)
        {
            0 < a && a !== this.De && (this.De = a, this.initialize(this.cb))
        });
    w.defineProperty(Hn,
        {
            Hp: null
        }, function ()
        {
            return this.Ee
        }, function (a)
        {
            0 < a && a !== this.Ee && (this.Ee = a, this.initialize(this.cb))
        });

    function Vr(a, b, c)
    {
        return a.zg <= b && b <= a.ns && a.Ag <= c && c <= a.os
    }

    function Xr(a, b, c)
    {
        if (!Vr(a, b, c)) return 1E6;
        b -= a.zg;
        b /= a.De;
        c -= a.Ag;
        c /= a.Ee;
        return a.qd[b | 0][c | 0]
    }

    function Kn(a, b, c)
    {
        Vr(a, b, c) && (b -= a.zg, b /= a.De, c -= a.Ag, c /= a.Ee, a.qd[b | 0][c | 0] = 0)
    }

    function Jn(a)
    {
        if (null !== a.qd)
            for (var b = 0; b <= a.Ap; b++)
                for (var c = 0; c <= a.Bp; c++) 1 <= a.qd[b][c] && (a.qd[b][c] = 1E6)
    }
    Hn.prototype.gq = function (a, b, c, d)
    {
        if (a > this.ns || a + c < this.zg || b > this.os || b + d < this.Ag) return !0;
        a = (a - this.zg) / this.De | 0;
        b = (b - this.Ag) / this.Ee | 0;
        c = Math.max(0, c) / this.De + 1 | 0;
        var e = Math.max(0, d) / this.Ee + 1 | 0;
        0 > a && (c += a, a = 0);
        0 > b && (e += b, b = 0);
        if (0 > c || 0 > e) return !0;
        d = Math.min(a + c - 1, this.Ap) | 0;
        for (c = Math.min(b + e - 1, this.Bp) | 0; a <= d; a++)
            for (e = b; e <= c; e++)
                if (0 === this.qd[a][e]) return !1;
        return !0
    };

    function fs(a, b, c, d, e, f, h, k, l)
    {
        if (!(b < f || b > h || c < k || c > l))
        {
            var m, n;
            m = b | 0;
            n = c | 0;
            var p = a.qd[m][n];
            if (1 <= p && 999999 > p)
                for (e ? n += d : m += d, p += 1; f <= m && m <= h && k <= n && n <= l && !(p >= a.qd[m][n]);) a.qd[m][n] = p, p += 1, e ? n += d : m += d;
            m = e ? n : m;
            if (e)
                if (0 < d)
                    for (c += d; c < m; c += d) fs(a, b, c, 1, !e, f, h, k, l), fs(a, b, c, -1, !e, f, h, k, l);
                else
                    for (c += d; c > m; c += d) fs(a, b, c, 1, !e, f, h, k, l), fs(a, b, c, -1, !e, f, h, k, l);
            else if (0 < d)
                for (b += d; b < m; b += d) fs(a, b, c, 1, !e, f, h, k, l), fs(a, b, c, -1, !e, f, h, k, l);
            else
                for (b += d; b > m; b += d) fs(a, b, c, 1, !e, f, h, k, l), fs(a, b, c, -1, !e, f, h,
                    k, l)
        }
    }

    function gs(a, b, c, d, e, f, h, k, l)
    {
        b |= 0;
        c |= 0;
        var m = 0,
            n = 1;
        for (a.qd[b][c] = n; 0 === m && b > f && b < h && c > k && c < l;) n += 1, a.qd[b][c] = n, e ? c += d : b += d, m = a.qd[b][c]
    }

    function hs(a, b, c, d, e, f, h, k, l)
    {
        b |= 0;
        c |= 0;
        var m = 0;
        for (a.qd[b][c] = 999999; 0 === m && b > f && b < h && c > k && c < l;) a.qd[b][c] = 999999, e ? c += d : b += d, m = a.qd[b][c]
    }

    function Wr(a, b, c, d, e, f)
    {
        if (null !== a.qd)
        {
            a.abort = !1;
            var h = b.x,
                k = b.y;
            if (Vr(a, h, k) && (h -= a.zg, h /= a.De, k -= a.Ag, k /= a.Ee, b = d.x, d = d.y, Vr(a, b, d)))
                if (b -= a.zg, b /= a.De, d -= a.Ag, d /= a.Ee, 1 >= Math.abs(h - b) && 1 >= Math.abs(k - d)) a.abort = !0;
                else
                {
                    var l = f.x,
                        m = f.y,
                        n = f.x + f.width,
                        p = f.y + f.height,
                        l = l - a.zg,
                        l = l / a.De,
                        m = m - a.Ag,
                        m = m / a.Ee,
                        n = n - a.zg,
                        n = n / a.De,
                        p = p - a.Ag,
                        p = p / a.Ee;
                    f = Math.max(0, Math.min(a.Ap, l | 0));
                    n = Math.min(a.Ap, Math.max(0, n | 0));
                    m = Math.max(0, Math.min(a.Bp, m | 0));
                    p = Math.min(a.Bp, Math.max(0, p | 0));
                    h |= 0;
                    k |= 0;
                    b |= 0;
                    d |= 0;
                    l = 0 === c ||
                    90 === c ? 1 : -1;
                    c = 90 === c || 270 === c;
                    0 === a.qd[h][k] ? (gs(a, h, k, l, c, f, n, m, p), gs(a, h, k, 1, !c, f, n, m, p), gs(a, h, k, -1, !c, f, n, m, p)) : gs(a, h, k, l, c, h, k, h, k);
                    0 === a.qd[b][d] ? (hs(a, b, d, 0 === e || 90 === e ? 1 : -1, 90 === e || 270 === e, f, n, m, p), hs(a, b, d, 1, !(90 === e || 270 === e), f, n, m, p), hs(a, b, d, -1, !(90 === e || 270 === e), f, n, m, p)) : hs(a, b, d, l, c, b, d, b, d);
                    a.abort || (fs(a, h, k, 1, !1, f, n, m, p), fs(a, h, k, -1, !1, f, n, m, p), fs(a, h, k, 1, !0, f, n, m, p), fs(a, h, k, -1, !0, f, n, m, p))
                }
        }
    }

    function Tr()
    {
        w.nc(this);
        this.port = this.Qc = null;
        this.fg = [];
        this.kq = !1
    }
    w.ae(Tr,
        {
            Qc: !0,
            port: !0,
            fg: !0,
            kq: !0
        });
    Tr.prototype.toString = function ()
    {
        for (var a = this.fg, b = this.Qc.toString() + " " + a.length.toString() + ":", c = 0; c < a.length; c++)
        {
            var d = a[c];
            null !== d && (b += "\n  " + d.toString())
        }
        return b
    };

    function is(a, b, c, d)
    {
        b = b.offsetY;
        switch (b)
        {
            case w.ed:
                return 90;
            case w.Tc:
                return 180;
            case w.od:
                return 270;
            case w.fd:
                return 0
        }
        switch (b)
        {
            case w.ed | w.od:
                return 180 < c ? 270 : 90;
            case w.Tc | w.fd:
                return 90 < c && 270 >= c ? 180 : 0
        }
        a = 180 * Math.atan2(a.height, a.width) / Math.PI;
        switch (b)
        {
            case w.Tc | w.od:
                return c > a && c <= 180 + a ? 180 : 270;
            case w.od | w.fd:
                return c > 180 - a && c <= 360 - a ? 270 : 0;
            case w.fd | w.ed:
                return c > a && c <= 180 + a ? 90 : 0;
            case w.ed | w.Tc:
                return c > 180 - a && c <= 360 - a ? 180 : 90;
            case w.Tc | w.od | w.fd:
                return 90 < c && c <= 180 + a ? 180 : c > 180 + a && c <= 360 -
                a ? 270 : 0;
            case w.od | w.fd | w.ed:
                return 180 < c && c <= 360 - a ? 270 : c > a && 180 >= c ? 90 : 0;
            case w.fd | w.ed | w.Tc:
                return c > a && c <= 180 - a ? 90 : c > 180 - a && 270 >= c ? 180 : 0;
            case w.ed | w.Tc | w.od:
                return c > 180 - a && c <= 180 + a ? 180 : c > 180 + a ? 270 : 90
        }
        d && b !== (w.Tc | w.od | w.fd | w.ed) && (c -= 15, 0 > c && (c += 360));
        return c > a && c < 180 - a ? 90 : c >= 180 - a && c <= 180 + a ? 180 : c > 180 + a && c < 360 - a ? 270 : 0
    }
    Tr.prototype.aq = function ()
    {
        this.fg.length = 0
    };

    function Ur(a, b)
    {
        var c = a.fg;
        if (0 === c.length)
        {
            a: if (!a.kq)
            {
                c = a.kq;
                a.kq = !0;
                var d, e = null,
                    f = a.Qc,
                    f = f instanceof V ? f : null;
                if (null === f || f.ad) d = a.Qc.ZE(a.port.le);
                else
                {
                    if (!f.U.I())
                    {
                        a.kq = c;
                        break a
                    }
                    e = f;
                    d = e.YE()
                }
                var h = a.fg.length = 0,
                    k = a.port.Ya(zb, w.K()),
                    l = a.port.Ya(Sb, w.K()),
                    f = w.kg(k.x, k.y, 0, 0);
                f.yi(l);
                w.v(k);
                w.v(l);
                k = w.xb(f.x + f.width / 2, f.y + f.height / 2);
                l = a.port.$l();
                for (d = d.i; d.next();)
                {
                    var m = d.value;
                    if (m.isVisible() && m.kc !== m.Ic)
                    {
                        var n = m.kc === a.port || null !== m.Y && m.Y.qi(e),
                            p = m.computeSpot(n, a.port);
                        if (p.Aj() &&
                            (n = n ? m.Ic : m.kc, null !== n))
                        {
                            var q = n.V;
                            if (null !== q)
                            {
                                var r = q.findVisibleNode();
                                null !== r && r !== q && (q = r, n = q.port);
                                n = m.computeOtherPoint(q, n);
                                q = k.Qb(n);
                                q -= l;
                                0 > q && (q += 360);
                                p = is(f, p, q, m.ac);
                                r = 0;
                                0 === p ? (r = w.fd, 180 < q && (q -= 360)) : r = 90 === p ? w.ed : 180 === p ? w.Tc : w.od;
                                p = a.fg[h];
                                void 0 === p ? (p = new js(m, q, r), a.fg[h] = p) : (p.link = m, p.angle = q, p.ze = r);
                                p.by.set(n);
                                h++
                            }
                        }
                    }
                }
                w.v(k);
                a.fg.sort(Tr.prototype.fJ);
                e = a.fg.length;
                k = -1;
                for (h = l = 0; h < e; h++) p = a.fg[h], void 0 !== p && (p.ze !== k && (k = p.ze, l = 0), p.Zp = l, l++);
                k = -1;
                l = 0;
                for (h = e - 1; 0 <= h; h--) p =
                    a.fg[h], void 0 !== p && (p.ze !== k && (k = p.ze, l = p.Zp + 1), p.vn = l);
                h = a.fg;
                p = a.port;
                e = a.Qc.kJ;
                k = w.K();
                l = w.K();
                d = w.K();
                m = w.K();
                p.Ya(zb, k);
                p.Ya(Cb, l);
                p.Ya(Sb, d);
                p.Ya(Qb, m);
                r = q = n = p = 0;
                if (e === tr)
                    for (var s = 0; s < h.length; s++)
                    {
                        var u = h[s];
                        if (null !== u)
                        {
                            var t = u.link.computeThickness();
                            switch (u.ze)
                            {
                                case w.ed:
                                    q += t;
                                    break;
                                case w.Tc:
                                    r += t;
                                    break;
                                case w.od:
                                    p += t;
                                    break;
                                default:
                                case w.fd:
                                    n += t
                            }
                        }
                    }
                for (var x = 0, v = 0, z = 1, s = 0; s < h.length; s++)
                    if (u = h[s], null !== u)
                    {
                        var A, L;
                        if (x !== u.ze)
                        {
                            x = u.ze;
                            switch (x)
                            {
                                case w.ed:
                                    A = d;
                                    L = m;
                                    break;
                                case w.Tc:
                                    A = m;
                                    L =
                                        k;
                                    break;
                                case w.od:
                                    A = k;
                                    L = l;
                                    break;
                                default:
                                case w.fd:
                                    A = l, L = d
                            }
                            var E = L.x - A.x;
                            L = L.y - A.y;
                            switch (x)
                            {
                                case w.ed:
                                    q > Math.abs(E) ? (z = Math.abs(E) / q, q = Math.abs(E)) : z = 1;
                                    break;
                                case w.Tc:
                                    r > Math.abs(L) ? (z = Math.abs(L) / r, r = Math.abs(L)) : z = 1;
                                    break;
                                case w.od:
                                    p > Math.abs(E) ? (z = Math.abs(E) / p, p = Math.abs(E)) : z = 1;
                                    break;
                                default:
                                case w.fd:
                                    n > Math.abs(L) ? (z = Math.abs(L) / n, n = Math.abs(L)) : z = 1
                            }
                            v = 0
                        }
                        var P = u.iq;
                        if (e === tr)
                        {
                            t = u.link.computeThickness();
                            t *= z;
                            P.set(A);
                            switch (x)
                            {
                                case w.ed:
                                    P.x = A.x + E / 2 + q / 2 - v - t / 2;
                                    break;
                                case w.Tc:
                                    P.y = A.y + L / 2 + r / 2 - v -
                                        t / 2;
                                    break;
                                case w.od:
                                    P.x = A.x + E / 2 - p / 2 + v + t / 2;
                                    break;
                                default:
                                case w.fd:
                                    P.y = A.y + L / 2 - n / 2 + v + t / 2
                            }
                            v += t
                        }
                        else t = .5, e === qr && (t = (u.Zp + 1) / (u.vn + 1)), P.x = A.x + E * t, P.y = A.y + L * t
                    }
                w.v(k);
                w.v(l);
                w.v(d);
                w.v(m);
                A = a.fg;
                for (E = 0; E < A.length; E++) L = A[E], null !== L && (L.yx = a.computeEndSegmentLength(L));
                a.kq = c;
                w.Hb(f)
            }c = a.fg
        }
        for (f = 0; f < c.length; f++)
            if (A = c[f], null !== A && A.link === b) return A;
        return null
    }
    Tr.prototype.fJ = function (a, b)
    {
        return a === b ? 0 : null === a ? -1 : null === b ? 1 : a.ze < b.ze ? -1 : a.ze > b.ze ? 1 : a.angle < b.angle ? -1 : a.angle > b.angle ? 1 : 0
    };
    Tr.prototype.computeEndSegmentLength = function (a)
    {
        var b = a.link,
            c = b.computeEndSegmentLength(this.Qc, this.port, yb, b.kc === this.port),
            d = a.Zp;
        if (0 > d) return c;
        var e = a.vn;
        if (1 >= e || !b.ac) return c;
        var b = a.by,
            f = a.iq;
        if (a.ze === w.Tc || a.ze === w.ed) d = e - 1 - d;
        return ((a = a.ze === w.Tc || a.ze === w.fd) ? b.y < f.y : b.x < f.x) ? c + 8 * d : (a ? b.y === f.y : b.x === f.x) ? c : c + 8 * (e - 1 - d)
    };

    function js(a, b, c)
    {
        this.link = a;
        this.angle = b;
        this.ze = c;
        this.by = new y;
        this.vn = this.Zp = 0;
        this.iq = new y;
        this.yx = 0
    }
    w.ae(js,
        {
            link: !0,
            angle: !0,
            ze: !0,
            by: !0,
            Zp: !0,
            vn: !0,
            iq: !0,
            yx: !0
        });
    js.prototype.toString = function ()
    {
        return this.link.toString() + " " + this.angle.toString() + " " + this.ze.toString() + ":" + this.Zp.toString() + "/" + this.vn.toString() + " " + this.iq.toString() + " " + this.yx.toString() + " " + this.by.toString()
    };

    function zo()
    {
        this.zk = this.ak = qc;
        this.xk = this.Zj = NaN;
        this.wk = this.Yj = rr;
        this.yk = this.$j = NaN;
        this.At = this.Fr = null;
        this.Bt = this.Gr = Infinity
    }
    zo.prototype.copy = function ()
    {
        var a = new zo;
        a.ak = this.ak.S();
        a.zk = this.zk.S();
        a.Zj = this.Zj;
        a.xk = this.xk;
        a.Yj = this.Yj;
        a.wk = this.wk;
        a.$j = this.$j;
        a.yk = this.yk;
        a.Fr = this.Fr;
        a.At = this.At;
        a.Gr = this.Gr;
        a.Bt = this.Bt;
        return a
    };

    function V(a)
    {
        T.call(this, a);
        this.ya |= 4608;
        this.qs = new I(R);
        this.ap = new I(V);
        this.Nb = this.vt = this.Bl = this.rs = this.ps = null;
        this.oe = new sg;
        this.oe.group = this
    }
    w.La(V, T);
    w.ga("Group", V);
    V.prototype.cloneProtected = function (a)
    {
        T.prototype.cloneProtected.call(this, a);
        this.ya &= -32769;
        a.ps = this.ps;
        a.rs = this.rs;
        a.Bl = this.Bl;
        a.vt = this.vt;
        var b = a.Yt(function (a)
        {
            return a instanceof Pj
        });
        a.Nb = b instanceof Pj ? b : null;
        null !== this.oe ? (a.oe = this.oe.copy(), a.oe.group = a) : (null !== a.oe && (a.oe.group = null), a.oe = null)
    };
    V.prototype.pi = function (a)
    {
        T.prototype.pi.call(this, a);
        var b = a.Wp();
        for (a = a.vc; a.next();)
        {
            var c = a.value;
            c.H();
            c.J(8);
            c.Qt();
            if (c instanceof T) c.$f(b);
            else if (c instanceof W)
                for (c = c.Ef; c.next();) c.value.$f(b)
        }
    };
    V.prototype.Xn = function (a, b, c, d, e, f, h)
    {
        if (a === Ef && "elements" === b)
            if (e instanceof Pj)
            {
                var k = e;
                null === this.Nb ? this.Nb = k : this.Nb !== k && w.k("Cannot insert a second Placeholder into the visual tree of a Group.")
            }
            else e instanceof C && (k = e.Yt(function (a)
            {
                return a instanceof Pj
            }), k instanceof Pj && (null === this.Nb ? this.Nb = k : this.Nb !== k && w.k("Cannot insert a second Placeholder into the visual tree of a Group.")));
        else a === Ff && "elements" === b && null !== this.Nb && (d === this.Nb ? this.Nb = null : d instanceof C && this.Nb.fm(d) &&
            (this.Nb = null));
        T.prototype.Xn.call(this, a, b, c, d, e, f, h)
    };
    V.prototype.pj = function (a, b, c, d)
    {
        this.Al = this.Nb;
        C.prototype.pj.call(this, a, b, c, d)
    };
    V.prototype.gm = function ()
    {
        if (!T.prototype.gm.call(this)) return !1;
        for (var a = this.vc; a.next();)
        {
            var b = a.value;
            if (b instanceof T)
            {
                if (b.isVisible() && Gm(b)) return !1
            }
            else if (b instanceof W && b.isVisible() && Gm(b) && b.Y !== this && b.Z !== this) return !1
        }
        return !0
    };
    w.u(V,
        {
            placeholder: "placeholder"
        }, function ()
        {
            return this.Nb
        });
    w.defineProperty(V,
        {
            BH: "computesBoundsAfterDrag"
        }, function ()
        {
            return 0 !== (this.ya & 2048)
        }, function (a)
        {
            var b = 0 !== (this.ya & 2048);
            b !== a && (w.j(a, "boolean", V, "computesBoundsAfterDrag"), this.ya ^= 2048, this.h("computesBoundsAfterDrag", b, a))
        });
    w.defineProperty(V,
        {
            lx: "computesBoundsIncludingLinks"
        }, function ()
        {
            return 0 !== (this.ya & 4096)
        }, function (a)
        {
            w.j(a, "boolean", V, "computesBoundsIncludingLinks");
            var b = 0 !== (this.ya & 4096);
            b !== a && (this.ya ^= 4096, this.h("computesBoundsIncludingLinks", b, a))
        });
    w.defineProperty(V,
        {
            CH: "computesBoundsIncludingLocation"
        }, function ()
        {
            return 0 !== (this.ya & 8192)
        }, function (a)
        {
            w.j(a, "boolean", V, "computesBoundsIncludingLocation");
            var b = 0 !== (this.ya & 8192);
            b !== a && (this.ya ^= 8192, this.h("computesBoundsIncludingLocation", b, a))
        });
    w.defineProperty(V,
        {
            mI: "handlesDragDropForMembers"
        }, function ()
        {
            return 0 !== (this.ya & 16384)
        }, function (a)
        {
            w.j(a, "boolean", V, "handlesDragDropForMembers");
            var b = 0 !== (this.ya & 16384);
            b !== a && (this.ya ^= 16384, this.h("handlesDragDropForMembers", b, a))
        });
    w.u(V,
        {
            vc: "memberParts"
        }, function ()
        {
            return this.qs.i
        });

    function mr(a, b)
    {
        if (a.qs.add(b))
        {
            b instanceof V && a.ap.add(b);
            var c = a.WI;
            if (null !== c)
            {
                var d = !0,
                    e = a.g;
                null !== e && (d = e.Ua, e.Ua = !0);
                c(a, b);
                null !== e && (e.Ua = d)
            }
            a.isVisible() && a.ad || b.Dd(!1)
        }
        b instanceof W && !a.lx || (c = a.Nb, null === c && (c = a), c.H())
    }

    function lr(a, b)
    {
        if (a.qs.remove(b))
        {
            b instanceof V && a.ap.remove(b);
            var c = a.XI;
            if (null !== c)
            {
                var d = !0,
                    e = a.g;
                null !== e && (d = e.Ua, e.Ua = !0);
                c(a, b);
                null !== e && (e.Ua = d)
            }
            a.isVisible() && a.ad || b.Dd(!0)
        }
        b instanceof W && !a.lx || (c = a.Nb, null === c && (c = a), c.H())
    }
    V.prototype.xn = function ()
    {
        if (0 < this.qs.count)
        {
            var a = this.g;
            if (null !== a)
                for (var b = this.qs.copy().i; b.next();) a.remove(b.value)
        }
        T.prototype.xn.call(this)
    };
    w.defineProperty(V,
        {
            Tb: "layout"
        }, function ()
        {
            return this.oe
        }, function (a)
        {
            var b = this.oe;
            if (b !== a)
            {
                null !== a && w.G(a, sg, V, "layout");
                null !== b && (b.g = null, b.group = null);
                this.oe = a;
                var c = this.g;
                null !== a && (a.g = c, a.group = this);
                null !== c && (c.Qj = !0);
                this.h("layout", b, a);
                null !== c && c.ye()
            }
        });
    w.defineProperty(V,
        {
            WI: "memberAdded"
        }, function ()
        {
            return this.ps
        }, function (a)
        {
            var b = this.ps;
            b !== a && (null !== a && w.j(a, "function", V, "memberAdded"), this.ps = a, this.h("memberAdded", b, a))
        });
    w.defineProperty(V,
        {
            XI: "memberRemoved"
        }, function ()
        {
            return this.rs
        }, function (a)
        {
            var b = this.rs;
            b !== a && (null !== a && w.j(a, "function", V, "memberRemoved"), this.rs = a, this.h("memberRemoved", b, a))
        });
    w.defineProperty(V,
        {
            dB: "memberValidation"
        }, function ()
        {
            return this.Bl
        }, function (a)
        {
            var b = this.Bl;
            b !== a && (null !== a && w.j(a, "function", V, "memberValidation"), this.Bl = a, this.h("memberValidation", b, a))
        });
    V.prototype.canAddMembers = function (a)
    {
        var b = this.g;
        if (null === b) return !1;
        b = b.pb;
        for (a = qh(a).i; a.next();)
            if (!b.isValidMember(this, a.value)) return !1;
        return !0
    };
    V.prototype.addMembers = function (a, b)
    {
        var c = this.g;
        if (null === c) return !1;
        for (var c = c.pb, d = !0, e = qh(a).i; e.next();)
        {
            var f = e.value;
            !b || c.isValidMember(this, f) ? f.Da = this : d = !1
        }
        return d
    };
    w.defineProperty(V,
        {
            ZJ: "ungroupable"
        }, function ()
        {
            return 0 !== (this.ya & 256)
        }, function (a)
        {
            var b = 0 !== (this.ya & 256);
            b !== a && (w.j(a, "boolean", V, "ungroupable"), this.ya ^= 256, this.h("ungroupable", b, a))
        });
    V.prototype.canUngroup = function ()
    {
        if (!this.ZJ) return !1;
        var a = this.layer;
        if (null !== a && !a.ix) return !1;
        a = a.g;
        return null === a || a.ix ? !0 : !1
    };
    V.prototype.$f = function (a)
    {
        void 0 === a && (a = null);
        var b = 0 !== (this.ya & 65536);
        T.prototype.$f.call(this, a);
        if (!b)
            for (0 !== (this.ya & 65536) !== !0 && (this.ya ^= 65536), b = this.YE(); b.next();)
            {
                var c = b.value;
                if (null === a || !a.contains(c))
                {
                    var d = c.Y;
                    null !== d && d !== this && d.qi(this) && !d.isVisible() ? (wr(d, c.kc), wr(d, c.Ic), c.Wb()) : (d = c.Z, null !== d && d !== this && d.qi(this) && !d.isVisible() && (wr(d, c.kc), wr(d, c.Ic), c.Wb()))
                }
            }
    };
    V.prototype.findExternalLinksConnected = V.prototype.YE = function ()
    {
        var a = this.Wp();
        a.add(this);
        for (var b = new I(W), c = a.i; c.next();)
        {
            var d = c.value;
            if (d instanceof T)
                for (d = d.je; d.next();)
                {
                    var e = d.value;
                    a.contains(e) || b.add(e)
                }
        }
        return b.i
    };
    V.prototype.findExternalNodesConnected = function ()
    {
        var a = this.Wp();
        a.add(this);
        for (var b = new I(T), c = a.i; c.next();)
        {
            var d = c.value;
            if (d instanceof T)
                for (d = d.je; d.next();)
                {
                    var e = d.value,
                        f = e.Y;
                    a.contains(f) && f !== this || b.add(f);
                    e = e.Z;
                    a.contains(e) && e !== this || b.add(e)
                }
        }
        return b.i
    };
    V.prototype.findContainingGroupChain = function ()
    {
        function a(b, d)
        {
            null !== b && (d.add(b), a(b.Da, d))
        }
        var b = new I(V);
        a(this, b);
        return b
    };
    V.prototype.findSubGraphParts = V.prototype.Wp = function ()
    {
        var a = new I(R);
        ih(a, this, !0, 0, !0);
        a.remove(this);
        return a
    };
    V.prototype.Dd = function (a)
    {
        T.prototype.Dd.call(this, a);
        for (var b = this.vc; b.next();) b.value.Dd(a)
    };
    V.prototype.collapseSubGraph = V.prototype.collapseSubGraph = function ()
    {
        var a = this.g;
        if (null !== a && !a.xh)
        {
            a.xh = !0;
            var b = this.Wp();
            ks(this, b, a.Ka, this);
            a.xh = !1
        }
    };

    function ks(a, b, c, d)
    {
        for (var e = a.vc; e.next();)
        {
            var f = e.value;
            f.Dd(!1);
            if (f instanceof V)
            {
                var h = f;
                h.ad && (h.Fy = h.ad, ks(h, b, c, d))
            }
            if (f instanceof T) f.$f(b), hl(c, f, d);
            else if (f instanceof W)
                for (f = f.Ef; f.next();) f.value.$f(b)
        }
        a.ad = !1
    }
    V.prototype.expandSubGraph = V.prototype.expandSubGraph = function ()
    {
        var a = this.g;
        if (null !== a && !a.xh)
        {
            a.xh = !0;
            var b = this.Wp();
            ls(this, b, a.Ka, this);
            a.xh = !1
        }
    };

    function ls(a, b, c, d)
    {
        for (var e = a.vc; e.next();)
        {
            var f = e.value;
            f.Dd(!0);
            if (f instanceof V)
            {
                var h = f;
                h.Fy && (h.Fy = !1, ls(h, b, c, d))
            }
            if (f instanceof T) f.$f(b), gl(c, f, d);
            else if (f instanceof W)
                for (f = f.Ef; f.next();) f.value.$f(b)
        }
        a.ad = !0
    }
    w.defineProperty(V,
        {
            ad: "isSubGraphExpanded"
        }, function ()
        {
            return 0 !== (this.ya & 512)
        }, function (a)
        {
            var b = 0 !== (this.ya & 512);
            if (b !== a)
            {
                w.j(a, "boolean", V, "isSubGraphExpanded");
                this.ya ^= 512;
                var c = this.g;
                this.h("isSubGraphExpanded", b, a);
                b = this.OJ;
                if (null !== b)
                {
                    var d = !0;
                    null !== c && (d = c.Ua, c.Ua = !0);
                    b(this);
                    null !== c && (c.Ua = d)
                }
                null !== c && c.ja.lb ? null !== this.Nb && this.Nb.H() : a ? this.expandSubGraph() : this.collapseSubGraph()
            }
        });
    w.defineProperty(V,
        {
            Fy: "wasSubGraphExpanded"
        }, function ()
        {
            return 0 !== (this.ya & 1024)
        }, function (a)
        {
            var b = 0 !== (this.ya & 1024);
            b !== a && (w.j(a, "boolean", V, "wasSubGraphExpanded"), this.ya ^= 1024, this.h("wasSubGraphExpanded", b, a))
        });
    w.defineProperty(V,
        {
            OJ: "subGraphExpandedChanged"
        }, function ()
        {
            return this.vt
        }, function (a)
        {
            var b = this.vt;
            b !== a && (null !== a && w.j(a, "function", V, "subGraphExpandedChanged"), this.vt = a, this.h("subGraphExpandedChanged", b, a))
        });
    V.prototype.move = function (a)
    {
        var b = this.position,
            c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        var c = a.x - c,
            b = a.y - b,
            d = w.xb(c, b);
        T.prototype.move.call(this, a);
        a = new I(W);
        for (var e = this.Wp().i; e.next();)
        {
            var f = e.value;
            f instanceof W && (f.vi && a.add(f), f.vi = !0)
        }
        for (e.reset(); e.next();)
            if (f = e.value, !(f instanceof W || f instanceof T && f.Cf))
            {
                var h = f.position,
                    k = f.location;
                h.I() ? (d.x = h.x + c, d.y = h.y + b, f.position = d) : k.I() && (d.x = k.x + c, d.y = k.y + b, f.location = d)
            }
        for (e.reset(); e.next();)
            if (f = e.value, f instanceof W && (f.vi =
                a.contains(f), f.Mf || f.Y !== this && f.Z !== this)) h = f.position, d.x = h.x + c, d.y = h.y + b, f.move(d), gi(f) && f.Wb();
        w.v(d)
    };
    w.defineProperty(V,
        {
            Un: null
        }, function ()
        {
            return 0 !== (this.ya & 32768)
        }, function (a)
        {
            0 !== (this.ya & 32768) !== a && (this.ya ^= 32768)
        });

    function Pj()
    {
        G.call(this);
        this.lf = ed;
        this.ft = new B(NaN, NaN, NaN, NaN)
    }
    w.La(Pj, G);
    w.ga("Placeholder", Pj);
    Pj.prototype.cloneProtected = function (a)
    {
        G.prototype.cloneProtected.call(this, a);
        a.lf = this.lf.S();
        a.ft = this.ft.copy()
    };
    Pj.prototype.Ek = function (a)
    {
        if (null === this.background && null === this.nn) return !1;
        var b = this.Ja;
        return db(0, 0, b.width, b.height, a.x, a.y)
    };
    Pj.prototype.On = function ()
    {
        var a = this.V;
        null !== a && (a instanceof V || a instanceof jh) || w.k("Placeholder is not inside a Group or Adornment.");
        if (a instanceof V)
        {
            var b = this.computeBorder(this.ft),
                c = this.Wc;
            Ua(c, b.width || 0, b.height || 0);
            Eo(this, 0, 0, c.width, c.height);
            for (var d = a.vc, c = !1; d.next();)
                if (d.value.isVisible())
                {
                    c = !0;
                    break
                }
            d = a.g;
            !c || null === d || d.Ka.df || isNaN(b.x) || isNaN(b.y) || (c = w.K(), c.Zn(b, a.Ff), a.location = new y(c.x, c.y), w.v(c))
        }
        else
        {
            var b = this.Ca,
                c = this.Wc,
                d = this.padding,
                e = d.left + d.right,
                f = d.top +
                    d.bottom;
            if (b.I()) Ua(c, b.width + e || 0, b.height + f || 0), Eo(this, -d.left, -d.top, c.width, c.height);
            else
            {
                var h = a.ub,
                    k = h.Ya(zb, w.K()),
                    b = w.kg(k.x, k.y, 0, 0);
                b.yi(h.Ya(Sb, k));
                b.yi(h.Ya(Cb, k));
                b.yi(h.Ya(Qb, k));
                a.Xi.m(b.x, b.y);
                Ua(c, b.width + e || 0, b.height + f || 0);
                Eo(this, -d.left, -d.top, c.width, c.height);
                w.v(k);
                w.Hb(b)
            }
        }
    };
    Pj.prototype.pj = function (a, b, c, d)
    {
        var e = this.U;
        e.x = a;
        e.y = b;
        e.width = c;
        e.height = d
    };
    Pj.prototype.computeBorder = function (a)
    {
        var b = this.V;
        if (b instanceof V)
        {
            var c = b;
            if (c.BH && this.ft.I())
            {
                var d = c.g;
                if (null !== d && (d = d.Xa, d instanceof nh && !d.zr && null !== d.$b && !d.$b.contains(c))) return a.assign(this.ft), a
            }
        }
        var c = w.Kf(),
            d = this.computeMemberBounds(c),
            e = this.padding;
        a.m(d.x - e.left, d.y - e.top, Math.max(d.width + e.left + e.right, 0), Math.max(d.height + e.top + e.bottom, 0));
        w.Hb(c);
        b instanceof V && (c = b, c.CH && c.location.I() && a.yi(c.location));
        return a
    };
    Pj.prototype.computeMemberBounds = function (a)
    {
        if (!(this.V instanceof V)) return a.m(0, 0, 0, 0), a;
        for (var b = this.V, c = Infinity, d = Infinity, e = -Infinity, f = -Infinity, h = b.vc; h.next();)
        {
            var k = h.value;
            if (k.isVisible())
            {
                if (k instanceof W)
                {
                    var l = k;
                    if (!b.lx) continue;
                    if (sm(l)) continue;
                    if (l.Y === b || l.Z === b) continue
                }
                k = k.U;
                k.left < c && (c = k.left);
                k.top < d && (d = k.top);
                k.right > e && (e = k.right);
                k.bottom > f && (f = k.bottom)
            }
        }
        isFinite(c) && isFinite(d) ? a.m(c, d, e - c, f - d) : (b = b.location, c = this.padding, a.m(b.x + c.left, b.y + c.top, 0, 0));
        return a
    };
    w.defineProperty(Pj,
        {
            padding: "padding"
        }, function ()
        {
            return this.lf
        }, function (a)
        {
            "number" === typeof a ? a = new hb(a) : w.G(a, hb, Pj, "padding");
            var b = this.lf;
            b.L(a) || (this.lf = a = a.S(), this.h("padding", b, a))
        });

    function sg()
    {
        0 < arguments.length && w.nd(sg);
        w.nc(this);
        this.xz = this.aa = null;
        this.ul = this.Wr = !0;
        this.bs = !1;
        this.Sq = (new y(0, 0)).freeze();
        this.Yr = this.Zr = !0;
        this.QC = "";
        this.as = !1;
        this.Kz = null
    }
    w.ga("Layout", sg);
    sg.prototype.cloneProtected = function (a)
    {
        a.Wr = this.Wr;
        a.ul = this.ul;
        a.bs = this.bs;
        a.Sq.assign(this.Sq);
        a.Zr = this.Zr;
        a.Yr = this.Yr;
        a.QC = this.QC;
        a.as = !0
    };
    sg.prototype.copy = function ()
    {
        var a = new this.constructor;
        this.cloneProtected(a);
        return a
    };
    sg.prototype.gc = function (a)
    {
        w.Mj(this, a)
    };
    sg.prototype.toString = function ()
    {
        var a = w.pf(Object.getPrototypeOf(this)),
            a = a + "(";
        null !== this.group && (a += " in " + this.group);
        null !== this.g && (a += " for " + this.g);
        return a + ")"
    };
    w.defineProperty(sg,
        {
            g: "diagram"
        }, function ()
        {
            return this.aa
        }, function (a)
        {
            null !== a && w.G(a, D, sg, "diagram");
            this.aa = a
        });
    w.defineProperty(sg,
        {
            group: "group"
        }, function ()
        {
            return this.xz
        }, function (a)
        {
            this.xz !== a && (null !== a && w.G(a, V, sg, "group"), this.xz = a, null !== a && (this.aa = a.g))
        });
    w.defineProperty(sg,
        {
            CI: "isOngoing"
        }, function ()
        {
            return this.Wr
        }, function (a)
        {
            this.Wr !== a && (w.j(a, "boolean", sg, "isOngoing"), this.Wr = a)
        });
    w.defineProperty(sg,
        {
            EF: "isInitial"
        }, function ()
        {
            return this.ul
        }, function (a)
        {
            w.j(a, "boolean", sg, "isInitial");
            this.ul = a;
            a || (this.as = !0)
        });
    w.defineProperty(sg,
        {
            Ox: "isViewportSized"
        }, function ()
        {
            return this.bs
        }, function (a)
        {
            this.bs !== a && (w.j(a, "boolean", sg, "isViewportSized"), (this.bs = a) && this.J())
        });
    w.defineProperty(sg,
        {
            xu: "isRouting"
        }, function ()
        {
            return this.Zr
        }, function (a)
        {
            this.Zr !== a && (w.j(a, "boolean", sg, "isRouting"), this.Zr = a)
        });
    w.defineProperty(sg,
        {
            HF: "isRealtime"
        }, function ()
        {
            return this.Yr
        }, function (a)
        {
            this.Yr !== a && (w.j(a, "boolean", sg, "isRealtime"), this.Yr = a)
        });
    w.defineProperty(sg,
        {
            sf: "isValidLayout"
        }, function ()
        {
            return this.as
        }, function (a)
        {
            this.as !== a && (w.j(a, "boolean", sg, "isValidLayout"), this.as = a, a || (a = this.g, null !== a && (a.Qj = !0)))
        });
    sg.prototype.invalidateLayout = sg.prototype.J = function ()
    {
        if (this.sf)
        {
            var a = this.g;
            if (null !== a && !a.ja.lb)
            {
                var b = a.Ka;
                !b.Ro && (b.df && b.Hh(), this.CI && a.In || this.EF && !a.In) && (this.sf = !1, a.ye())
            }
        }
    };
    w.defineProperty(sg,
        {
            network: "network"
        }, function ()
        {
            return this.Kz
        }, function (a)
        {
            var b = this.Kz;
            b !== a && (null !== a && w.G(a, tg, sg, "network"), null !== b && (b.Tb = null), this.Kz = a, null !== a && (a.Tb = this))
        });
    sg.prototype.createNetwork = function ()
    {
        return new tg
    };
    sg.prototype.makeNetwork = function (a)
    {
        var b = this.createNetwork();
        b.Tb = this;
        a instanceof D ? (b.Bk(a.hg, !0), b.Bk(a.links, !0)) : a instanceof V ? b.Bk(a.vc) : b.Bk(a.i);
        return b
    };
    sg.prototype.updateParts = function ()
    {
        var a = this.g;
        if (null === a && null !== this.network)
            for (var b = this.network.vertexes.i; b.next();)
            {
                var c = b.value.Qc;
                if (null !== c && (a = c.g, null !== a)) break
            }
        this.sf = !0;
        try
        {
            null !== a && a.Kb("Layout"), this.commitLayout()
        }
        finally
        {
            null !== a && a.Yc("Layout")
        }
    };
    sg.prototype.commitLayout = function ()
    {
        for (var a = this.network.vertexes.i; a.next();) a.value.commit();
        if (this.xu)
            for (a = this.network.edges.i; a.next();) a.value.commit()
    };
    sg.prototype.doLayout = function (a)
    {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        var b = new I(R);
        a instanceof D ? (ms(this, b, a.hg, !0, this.Un, !0, !1, !0), ms(this, b, a.Ij, !0, this.Un, !0, !1, !0)) : a instanceof V ? ms(this, b, a.vc, !1, this.Un, !0, !1, !0) : b.Nc(a.i);
        var c = b.count;
        if (0 < c)
        {
            a = this.g;
            null !== a && a.Kb("Layout");
            c = Math.ceil(Math.sqrt(c));
            this.Nd = this.initialOrigin(this.Nd);
            for (var d = this.Nd.x, e = d, f = this.Nd.y, h = 0, k = 0, b = b.i; b.next();)
            {
                var l =
                    b.value;
                l.af();
                var m = l.za,
                    n = m.width,
                    m = m.height;
                l.moveTo(e, f);
                l instanceof V && (l.Un = !1);
                e += Math.max(n, 50) + 20;
                k = Math.max(k, Math.max(m, 50));
                h >= c - 1 ? (h = 0, e = d, f += k + 20, k = 0) : h++
            }
            null !== a && a.Yc("Layout")
        }
        this.sf = !0
    };
    sg.prototype.Un = function (a)
    {
        return !a.location.I() || a instanceof V && a.Un ? !0 : !1
    };

    function ms(a, b, c, d, e, f, h, k)
    {
        for (c = c.i; c.next();)
        {
            var l = c.value;
            d && !l.eq || null !== e && !e(l) || !l.canLayout() || (f && l instanceof T ? l.Cf || (l instanceof V ? null === l.Tb ? ms(a, b, l.vc, !1, e, f, h, k) : (ns(l), b.add(l)) : (ns(l), b.add(l))) : h && l instanceof W ? b.add(l) : !k || !l.he() || l instanceof T || (ns(l), b.add(l)))
        }
    }

    function ns(a)
    {
        var b = a.U;
        (0 === b.width || 0 === b.height || isNaN(b.width) || isNaN(b.height)) && a.af()
    }
    sg.prototype.collectParts = sg.prototype.wH = function (a)
    {
        var b = new I(R);
        a instanceof D ? (ms(this, b, a.hg, !0, null, !0, !0, !0), ms(this, b, a.links, !0, null, !0, !0, !0), ms(this, b, a.Ij, !0, null, !0, !0, !0)) : a instanceof V ? ms(this, b, a.vc, !1, null, !0, !0, !0) : ms(this, b, a.i, !1, null, !0, !0, !0);
        return b
    };
    w.defineProperty(sg,
        {
            Nd: "arrangementOrigin"
        }, function ()
        {
            return this.Sq
        }, function (a)
        {
            w.G(a, y, sg, "arrangementOrigin");
            this.Sq.L(a) || (this.Sq.assign(a), this.J())
        });
    sg.prototype.initialOrigin = function (a)
    {
        var b = this.group;
        if (null !== b)
        {
            var c = b.position.copy();
            (isNaN(c.x) || isNaN(c.y)) && c.set(a);
            b = b.placeholder;
            null !== b && (c = b.Ya(zb), (isNaN(c.x) || isNaN(c.y)) && c.set(a), c.x += b.padding.left, c.y += b.padding.top);
            return c
        }
        return a
    };

    function tg()
    {
        w.nc(this);
        this.oe = null;
        if (this.vertexes)
            for (var a = this.vertexes.i; a.next();)
            {
                var b = a.value;
                b.clear();
                b.network = null
            }
        if (this.edges)
            for (a = this.edges.i; a.next();) b = a.value, b.clear(), b.network = null;
        this.vertexes = new I(os);
        this.edges = new I(ps);
        this.Zx = new ma(T, os);
        this.Ux = new ma(W, ps)
    }
    w.ga("LayoutNetwork", tg);
    tg.prototype.clear = function ()
    {
        if (this.vertexes)
            for (var a = this.vertexes.i; a.next();)
            {
                var b = a.value;
                b.clear();
                b.network = null
            }
        if (this.edges)
            for (a = this.edges.i; a.next();) b = a.value, b.clear(), b.network = null;
        this.vertexes = new I(os);
        this.edges = new I(ps);
        this.Zx = new ma(T, os);
        this.Ux = new ma(W, ps)
    };
    tg.prototype.toString = function (a)
    {
        void 0 === a && (a = 0);
        var b = "LayoutNetwork" + (null !== this.Tb ? "(" + this.Tb.toString() + ")" : "");
        if (0 >= a) return b;
        b += " vertexes: " + this.vertexes.count + " edges: " + this.edges.count;
        if (1 < a)
        {
            for (var c = this.vertexes.i; c.next();) b += "\n    " + c.value.toString(a - 1);
            for (c = this.edges.i; c.next();) b += "\n    " + c.value.toString(a - 1)
        }
        return b
    };
    w.defineProperty(tg,
        {
            Tb: "layout"
        }, function ()
        {
            return this.oe
        }, function (a)
        {
            this.oe = a
        });
    tg.prototype.createVertex = function ()
    {
        return new os
    };
    tg.prototype.createEdge = function ()
    {
        return new ps
    };
    tg.prototype.addParts = tg.prototype.Bk = function (a, b, c)
    {
        if (null !== a)
        {
            void 0 === b && (b = !1);
            w.j(b, "boolean", tg, "addParts:toplevelonly");
            void 0 === c && (c = null);
            null === c && (c = function (a)
            {
                if (a instanceof T) return !a.Cf;
                if (a instanceof W)
                {
                    var b = a.Y;
                    if (null === b || b.Cf) return !1;
                    a = a.Z;
                    return null === a || a.Cf ? !1 : !0
                }
                return !1
            });
            for (a = a.i; a.next();)
            {
                var d = a.value;
                if (d instanceof T && (!b || d.eq) && d.canLayout() && c(d))
                    if (d instanceof V && null === d.Tb) this.Bk(d.vc, !1);
                    else if (null === this.An(d))
                    {
                        var e = this.createVertex();
                        e.Qc = d;
                        this.Ol(e)
                    }
            }
            for (a.reset(); a.next();)
                if (d = a.value, d instanceof W && (!b || d.eq) && d.canLayout() && c(d) && null === this.Ax(d))
                {
                    var f = d.Y,
                        e = d.Z;
                    null !== f && null !== e && f !== e && (f = this.findGroupVertex(f), e = this.findGroupVertex(e), null !== f && null !== e && this.jq(f, e, d))
                }
        }
    };
    tg.prototype.findGroupVertex = function (a)
    {
        if (null === a) return null;
        var b = a.findVisibleNode();
        if (null === b) return null;
        a = this.An(b);
        if (null !== a) return a;
        for (b = b.Da; null !== b;)
        {
            a = this.An(b);
            if (null !== a) return a;
            b = b.Da
        }
        return null
    };
    tg.prototype.addVertex = tg.prototype.Ol = function (a)
    {
        if (null !== a)
        {
            this.vertexes.add(a);
            var b = a.Qc;
            null !== b && this.Zx.add(b, a);
            a.network = this
        }
    };
    tg.prototype.addNode = tg.prototype.Lt = function (a)
    {
        if (null === a) return null;
        var b = this.An(a);
        null === b && (b = this.createVertex(), b.Qc = a, this.Ol(b));
        return b
    };
    tg.prototype.deleteVertex = tg.prototype.TE = function (a)
    {
        if (null !== a && qs(this, a))
        {
            for (var b = a.Re, c = b.count - 1; 0 <= c; c--)
            {
                var d = b.ea(c);
                this.Rp(d)
            }
            b = a.Me;
            for (c = b.count - 1; 0 <= c; c--) d = b.ea(c), this.Rp(d)
        }
    };

    function qs(a, b)
    {
        if (null === b) return !1;
        var c = a.vertexes.remove(b);
        c && (a.Zx.remove(b.Qc), b.network = null);
        return c
    }
    tg.prototype.deleteNode = function (a)
    {
        null !== a && (a = this.An(a), null !== a && this.TE(a))
    };
    tg.prototype.findVertex = tg.prototype.An = function (a)
    {
        return null === a ? null : this.Zx.ka(a)
    };
    tg.prototype.addEdge = tg.prototype.Dp = function (a)
    {
        if (null !== a)
        {
            this.edges.add(a);
            var b = a.link;
            null !== b && null === this.Ax(b) && this.Ux.add(b, a);
            b = a.toVertex;
            null !== b && b.xE(a);
            b = a.fromVertex;
            null !== b && b.vE(a);
            a.network = this
        }
    };
    tg.prototype.addLink = function (a)
    {
        if (null === a) return null;
        var b = a.Y,
            c = a.Z,
            d = this.Ax(a);
        null === d ? (d = this.createEdge(), d.link = a, null !== b && (d.fromVertex = this.Lt(b)), null !== c && (d.toVertex = this.Lt(c)), this.Dp(d)) : (d.fromVertex = null !== b ? this.Lt(b) : null, d.toVertex = null !== c ? this.Lt(c) : null);
        return d
    };
    tg.prototype.deleteEdge = tg.prototype.Rp = function (a)
    {
        if (null !== a)
        {
            var b = a.toVertex;
            null !== b && b.SE(a);
            b = a.fromVertex;
            null !== b && b.RE(a);
            rs(this, a)
        }
    };

    function rs(a, b)
    {
        null !== b && a.edges.remove(b) && (a.Ux.remove(b.link), b.network = null)
    }
    tg.prototype.deleteLink = function (a)
    {
        null !== a && (a = this.Ax(a), null !== a && this.Rp(a))
    };
    tg.prototype.findEdge = tg.prototype.Ax = function (a)
    {
        return null === a ? null : this.Ux.ka(a)
    };
    tg.prototype.linkVertexes = tg.prototype.jq = function (a, b, c)
    {
        if (null === a || null === b) return null;
        if (a.network === this && b.network === this)
        {
            var d = this.createEdge();
            d.link = c;
            d.fromVertex = a;
            d.toVertex = b;
            this.Dp(d);
            return d
        }
        return null
    };
    tg.prototype.reverseEdge = tg.prototype.py = function (a)
    {
        if (null !== a)
        {
            var b = a.fromVertex,
                c = a.toVertex;
            null !== b && null !== c && (b.RE(a), c.SE(a), a.py(), b.xE(a), c.vE(a))
        }
    };
    tg.prototype.deleteSelfEdges = tg.prototype.sx = function ()
    {
        for (var a = w.gb(), b = this.edges.i; b.next();)
        {
            var c = b.value;
            c.fromVertex === c.toVertex && a.push(c)
        }
        b = a.length;
        for (c = 0; c < b; c++) this.Rp(a[c]);
        w.ta(a)
    };
    tg.prototype.deleteArtificialVertexes = function ()
    {
        for (var a = w.gb(), b = this.vertexes.i; b.next();)
        {
            var c = b.value;
            null === c.Qc && a.push(c)
        }
        for (var c = a.length, d = 0; d < c; d++) this.TE(a[d]);
        b = w.gb();
        for (c = this.edges.i; c.next();) d = c.value, null === d.link && b.push(d);
        c = b.length;
        for (d = 0; d < c; d++) this.Rp(b[d]);
        w.ta(a);
        w.ta(b)
    };

    function ss(a)
    {
        for (var b = w.gb(), c = a.edges.i; c.next();)
        {
            var d = c.value;
            null !== d.fromVertex && null !== d.toVertex || b.push(d)
        }
        c = b.length;
        for (d = 0; d < c; d++) a.Rp(b[d]);
        w.ta(b)
    }
    tg.prototype.splitIntoSubNetworks = tg.prototype.NJ = function ()
    {
        this.deleteArtificialVertexes();
        ss(this);
        this.sx();
        for (var a = new H(tg), b = !0; b;)
            for (var b = !1, c = this.vertexes.i; c.next();)
            {
                var d = c.value;
                if (0 < d.Re.count || 0 < d.Me.count)
                {
                    b = this.Tb.createNetwork();
                    a.add(b);
                    ts(this, b, d);
                    b = !0;
                    break
                }
            }
        a.sort(function (a, b)
        {
            return null === a || null === b || a === b ? 0 : b.vertexes.count - a.vertexes.count
        });
        return a
    };

    function ts(a, b, c)
    {
        if (null !== c && c.network !== b)
        {
            qs(a, c);
            b.Ol(c);
            for (var d = c.mc; d.next();)
            {
                var e = d.value;
                e.network !== b && (rs(a, e), b.Dp(e), ts(a, b, e.fromVertex))
            }
            for (d = c.jc; d.next();) c = d.value, c.network !== b && (rs(a, c), b.Dp(c), ts(a, b, c.toVertex))
        }
    }
    tg.prototype.findAllParts = function ()
    {
        for (var a = new I(R), b = this.vertexes.i; b.next();) a.add(b.value.Qc);
        for (b = this.edges.i; b.next();) a.add(b.value.link);
        return a
    };

    function os()
    {
        w.nc(this);
        this.network = null;
        this.O = (new B(0, 0, 10, 10)).freeze();
        this.T = (new y(5, 5)).freeze();
        this.vd = this.Yd = null;
        this.Re = new H(ps);
        this.Me = new H(ps)
    }
    w.ga("LayoutVertex", os);
    os.prototype.clear = function ()
    {
        this.vd = this.Yd = null;
        this.Re = new H(ps);
        this.Me = new H(ps)
    };
    os.prototype.toString = function (a)
    {
        void 0 === a && (a = 0);
        var b = "LayoutVertex#" + w.Pd(this);
        if (0 < a && (b += null !== this.Qc ? "(" + this.Qc.toString() + ")" : "", 1 < a))
        {
            a = "";
            for (var c = !0, d = this.Re.i; d.next();)
            {
                var e = d.value;
                c ? c = !1 : a += ",";
                a += e.toString(0)
            }
            e = "";
            c = !0;
            for (d = this.Me.i; d.next();)
            {
                var f = d.value;
                c ? c = !1 : e += ",";
                e += f.toString(0)
            }
            b += " sources: " + a + " destinations: " + e
        }
        return b
    };
    w.defineProperty(os,
        {
            data: "data"
        }, function ()
        {
            return this.Yd
        }, function (a)
        {
            this.Yd = a;
            if (null !== a)
            {
                var b = a.bounds;
                a = b.x;
                var c = b.y,
                    d = b.width,
                    b = b.height;
                this.T.m(d / 2, b / 2);
                this.O.m(a, c, d, b)
            }
        });
    w.defineProperty(os,
        {
            Qc: "node"
        }, function ()
        {
            return this.vd
        }, function (a)
        {
            if (this.vd !== a)
            {
                this.vd = a;
                a.af();
                var b = a.U,
                    c = b.x,
                    d = b.y,
                    e = b.width,
                    b = b.height;
                isNaN(c) && (c = 0);
                isNaN(d) && (d = 0);
                this.O.m(c, d, e, b);
                if (!(a instanceof V) && (a = a.bg.Ya(Jb), a.I()))
                {
                    this.T.m(a.x - c, a.y - d);
                    return
                }
                this.T.m(e / 2, b / 2)
            }
        });
    w.defineProperty(os,
        {
            cb: "bounds"
        }, function ()
        {
            return this.O
        }, function (a)
        {
            this.O.L(a) || this.O.assign(a)
        });
    w.defineProperty(os,
        {
            focus: "focus"
        }, function ()
        {
            return this.T
        }, function (a)
        {
            this.T.L(a) || this.T.assign(a)
        });
    w.defineProperty(os,
        {
            la: "centerX"
        }, function ()
        {
            return this.O.x + this.T.x
        }, function (a)
        {
            var b = this.O;
            b.x + this.T.x !== a && (b.Qa(), b.x = a - this.T.x, b.freeze())
        });
    w.defineProperty(os,
        {
            ra: "centerY"
        }, function ()
        {
            return this.O.y + this.T.y
        }, function (a)
        {
            var b = this.O;
            b.y + this.T.y !== a && (b.Qa(), b.y = a - this.T.y, b.freeze())
        });
    w.defineProperty(os,
        {
            fu: "focusX"
        }, function ()
        {
            return this.T.x
        }, function (a)
        {
            var b = this.T;
            b.x !== a && (b.Qa(), b.x = a, b.freeze())
        });
    w.defineProperty(os,
        {
            gu: "focusY"
        }, function ()
        {
            return this.T.y
        }, function (a)
        {
            var b = this.T;
            b.y !== a && (b.Qa(), b.y = a, b.freeze())
        });
    w.defineProperty(os,
        {
            x: "x"
        }, function ()
        {
            return this.O.x
        }, function (a)
        {
            var b = this.O;
            b.x !== a && (b.Qa(), b.x = a, b.freeze())
        });
    w.defineProperty(os,
        {
            y: "y"
        }, function ()
        {
            return this.O.y
        }, function (a)
        {
            var b = this.O;
            b.y !== a && (b.Qa(), b.y = a, b.freeze())
        });
    w.defineProperty(os,
        {
            width: "width"
        }, function ()
        {
            return this.O.width
        }, function (a)
        {
            var b = this.O;
            b.width !== a && (b.Qa(), b.width = a, b.freeze())
        });
    w.defineProperty(os,
        {
            height: "height"
        }, function ()
        {
            return this.O.height
        }, function (a)
        {
            var b = this.O;
            b.height !== a && (b.Qa(), b.height = a, b.freeze())
        });
    os.prototype.commit = function ()
    {
        var a = this.Yd;
        if (null !== a)
        {
            var b = this.cb,
                c = a.bounds;
            w.Pa(c) ? (c.x = b.x, c.y = b.y, c.width = b.width, c.height = b.height) : a.bounds = b.copy()
        }
        else if (a = this.Qc, null !== a)
        {
            b = this.cb;
            if (!(a instanceof V))
            {
                var c = a.U,
                    d = a.bg.Ya(Jb);
                if (c.I() && d.I())
                {
                    a.moveTo(b.x + this.fu - (d.x - c.x), b.y + this.gu - (d.y - c.y));
                    return
                }
            }
            a.moveTo(b.x, b.y)
        }
    };
    os.prototype.addSourceEdge = os.prototype.xE = function (a)
    {
        null !== a && (this.Re.contains(a) || this.Re.add(a))
    };
    os.prototype.deleteSourceEdge = os.prototype.SE = function (a)
    {
        null !== a && this.Re.remove(a)
    };
    os.prototype.addDestinationEdge = os.prototype.vE = function (a)
    {
        null !== a && (this.Me.contains(a) || this.Me.add(a))
    };
    os.prototype.deleteDestinationEdge = os.prototype.RE = function (a)
    {
        null !== a && this.Me.remove(a)
    };
    w.u(os,
        {
            MJ: "sourceVertexes"
        }, function ()
        {
            for (var a = new I(os), b = this.mc; b.next();) a.add(b.value.fromVertex);
            return a.i
        });
    w.u(os,
        {
            PH: "destinationVertexes"
        }, function ()
        {
            for (var a = new I(os), b = this.jc; b.next();) a.add(b.value.toVertex);
            return a.i
        });
    w.u(os,
        {
            vertexes: "vertexes"
        }, function ()
        {
            for (var a = new I(os), b = this.mc; b.next();) a.add(b.value.fromVertex);
            for (b = this.jc; b.next();) a.add(b.value.toVertex);
            return a.i
        });
    w.u(os,
        {
            mc: "sourceEdges"
        }, function ()
        {
            return this.Re.i
        });
    w.u(os,
        {
            jc: "destinationEdges"
        }, function ()
        {
            return this.Me.i
        });
    w.u(os,
        {
            edges: "edges"
        }, function ()
        {
            for (var a = new H(ps), b = this.mc; b.next();) a.add(b.value);
            for (b = this.jc; b.next();) a.add(b.value);
            return a.i
        });
    w.u(os,
        {
            UH: "edgesCount"
        }, function ()
        {
            return this.Re.count + this.Me.count
        });
    var us;
    os.standardComparer = us = function (a, b)
    {
        var c = a.vd,
            d = b.vd;
        return c ? d ? (c = c.text, d = d.text, c < d ? -1 : c > d ? 1 : 0) : 1 : null !== d ? -1 : 0
    };
    os.smartComparer = function (a, b)
    {
        if (null !== a)
        {
            if (null !== b)
            {
                var c = a.vd,
                    d = b.vd;
                if (null !== c)
                {
                    if (null !== d)
                    {
                        for (var c = c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), d = d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), e = 0; e < c.length; e++)
                            if ("" !== d[e] && void 0 !== d[e])
                            {
                                var f = parseFloat(c[e]),
                                    h = parseFloat(d[e]);
                                if (isNaN(f))
                                {
                                    if (!isNaN(h)) return 1;
                                    if (0 !== c[e].localeCompare(d[e])) return c[e].localeCompare(d[e])
                                }
                                else
                                {
                                    if (isNaN(h)) return -1;
                                    if (0 !== f - h) return f -
                                        h
                                }
                            }
                            else if ("" !== c[e]) return 1;
                        return "" !== d[e] && void 0 !== d[e] ? -1 : 0
                    }
                    return 1
                }
                return null !== d ? -1 : 0
            }
            return 1
        }
        return null !== b ? -1 : 0
    };

    function ps()
    {
        w.nc(this);
        this.toVertex = this.fromVertex = this.link = this.data = this.network = null
    }
    w.ga("LayoutEdge", ps);
    ps.prototype.clear = function ()
    {
        this.toVertex = this.fromVertex = this.link = this.data = null
    };
    ps.prototype.toString = function (a)
    {
        void 0 === a && (a = 0);
        var b = "LayoutEdge#" + w.Pd(this);
        0 < a && (b += null !== this.link ? "(" + this.link.toString() + ")" : "", 1 < a && (b += " " + (this.fromVertex ? this.fromVertex.toString() : "null") + " --\x3e " + (this.toVertex ? this.toVertex.toString() : "null")));
        return b
    };
    ps.prototype.py = function ()
    {
        var a = this.fromVertex;
        this.fromVertex = this.toVertex;
        this.toVertex = a
    };
    ps.prototype.commit = function () {};
    ps.prototype.getOtherVertex = ps.prototype.dI = function (a)
    {
        return this.toVertex === a ? this.fromVertex : this.fromVertex === a ? this.toVertex : null
    };

    function Qn()
    {
        0 < arguments.length && w.nd(Qn);
        sg.call(this);
        this.Ox = !0;
        this.Gt = this.Ht = NaN;
        this.Sj = (new ia(NaN, NaN)).freeze();
        this.ei = (new ia(10, 10)).freeze();
        this.me = vs;
        this.pd = ws;
        this.di = xs;
        this.Nh = ys
    }
    w.La(Qn, sg);
    w.ga("GridLayout", Qn);
    Qn.prototype.cloneProtected = function (a)
    {
        sg.prototype.cloneProtected.call(this, a);
        a.Ht = this.Ht;
        a.Gt = this.Gt;
        a.Sj.assign(this.Sj);
        a.ei.assign(this.ei);
        a.me = this.me;
        a.pd = this.pd;
        a.di = this.di;
        a.Nh = this.Nh
    };
    Qn.prototype.gc = function (a)
    {
        a.Je === Qn ? a === xs || a === zs || a === As || a === Bs ? this.sorting = a : a === ws || a === Cs ? this.Vf = a : a === vs || a === Ds ? this.alignment = a : w.k("Unknown enum value: " + a) : sg.prototype.gc.call(this, a)
    };
    Qn.prototype.doLayout = function (a)
    {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        this.Nd = this.initialOrigin(this.Nd);
        var b = this.g;
        a = this.wH(a);
        for (var c = a.copy().i; c.next();)
        {
            var d = c.value;
            if (d instanceof W)
            {
                var e = d;
                if (null !== e.Y || null !== e.Z)
                {
                    a.remove(e);
                    continue
                }
            }
            d.af();
            if (d instanceof V)
                for (d = d.vc; d.next();) a.remove(d.value)
        }
        e = a.xc();
        if (0 !== e.length)
        {
            switch (this.sorting)
            {
                case Bs:
                    e.reverse();
                    break;
                case xs:
                    e.sort(this.comparer);
                    break;
                case zs:
                    e.sort(this.comparer), e.reverse()
            }
            var f = this.cK;
            isNaN(f) && (f = 0);
            var h = this.MG,
                h = isNaN(h) && null !== b ? Math.max(b.sb.width - b.padding.left - b.padding.right, 0) : Math.max(this.MG, 0);
            0 >= f && 0 >= h && (f = 1);
            a = this.spacing.width;
            isFinite(a) || (a = 0);
            c = this.spacing.height;
            isFinite(c) || (c = 0);
            null !== b && b.Kb("Layout");
            d = [];
            switch (this.alignment)
            {
                case Ds:
                    var k = a,
                        l = c,
                        m = Math.max(this.Ip.width, 1);
                    if (!isFinite(m))
                        for (var n = m = 0; n < e.length; n++) var p = e[n],
                            q = p.za,
                            m = Math.max(m, q.width);
                    var m = Math.max(m + k, 1),
                        r = Math.max(this.Ip.height,
                            1);
                    if (!isFinite(r))
                        for (n = r = 0; n < e.length; n++) p = e[n], q = p.za, r = Math.max(r, q.height);
                    for (var r = Math.max(r + l, 1), s = this.Vf, u = this.Nd.x, t = u, x = this.Nd.y, v = 0, z = 0, n = 0; n < e.length; n++)
                    {
                        var p = e[n],
                            q = p.za,
                            A = Math.ceil((q.width + k) / m) * m,
                            L = Math.ceil((q.height + l) / r) * r,
                            E = 0;
                        switch (s)
                        {
                            case Cs:
                                E = Math.abs(t - q.width);
                                break;
                            default:
                                E = t + q.width
                        }
                        if (0 < f && v > f - 1 || 0 < h && 0 < v && E > h) d.push(new B(0, x, h + k, z)), v = 0, t = u, x += z, z = 0;
                        z = Math.max(z, L);
                        L = 0;
                        switch (s)
                        {
                            case Cs:
                                L = -q.width;
                                break;
                            default:
                                L = 0
                        }
                        p.moveTo(t + L, x);
                        switch (s)
                        {
                            case Cs:
                                t -= A;
                                break;
                            default:
                                t += A
                        }
                        v++
                    }
                    d.push(new B(0, x, h + k, z));
                    break;
                case vs:
                    k = f;
                    l = a;
                    m = c;
                    n = Math.max(this.Ip.width, 1);
                    p = x = A = 0;
                    q = w.K();
                    for (f = 0; f < e.length; f++) r = e[f], s = r.za, u = er(r, r.bg, r.Ff, q), A = Math.max(A, u.x), x = Math.max(x, s.width - u.x), p = Math.max(p, u.y);
                    t = this.Vf;
                    switch (t)
                    {
                        case Cs:
                            A += l;
                            break;
                        default:
                            x += l
                    }
                    var n = isFinite(n) ? Math.max(n + l, 1) : Math.max(A + x, 1),
                        P = x = this.Nd.x,
                        v = this.Nd.y,
                        z = 0;
                    h >= A && (h -= A);
                    for (var A = L = 0, E = Math.max(this.Ip.height, 1), $ = p = 0, S = !0, ba = w.K(), f = 0; f < e.length; f++)
                    {
                        r = e[f];
                        s = r.za;
                        u = er(r, r.bg, r.Ff, q);
                        if (0 < z) switch (t)
                        {
                            case Cs:
                                P =
                                    (P - x - (s.width - u.x)) / n;
                                P = Wa(Math.round(P), P) ? Math.round(P) : Math.floor(P);
                                P = P * n + x;
                                break;
                            default:
                                P = (P - x + u.x) / n, P = Wa(Math.round(P), P) ? Math.round(P) : Math.ceil(P), P = P * n + x
                        }
                        else switch (t)
                        {
                            case Cs:
                                L = P + u.x + s.width;
                                break;
                            default:
                                L = P - u.x
                        }
                        var ha = 0;
                        switch (t)
                        {
                            case Cs:
                                ha = -(P + u.x) + L;
                                break;
                            default:
                                ha = P + s.width - u.x - L
                        }
                        if (0 < k && z > k - 1 || 0 < h && 0 < z && ha > h)
                        {
                            d.push(new B(0, S ? v - p : v, h + l, $ + p + m));
                            for (P = 0; P < z && f !== z; P++)
                            {
                                var ha = e[f - z + P],
                                    ya = er(ha, ha.bg, ha.Ff, ba);
                                ha.moveTo(ha.position.x, ha.position.y + p - ya.y)
                            }
                            $ += m;
                            v = S ? v + $ : v + ($ + p);
                            z = $ =
                                p = 0;
                            P = x;
                            S = !1
                        }
                        P === x && (A = t === Cs ? Math.max(A, s.width - u.x) : Math.min(A, -u.x));
                        p = Math.max(p, u.y);
                        $ = Math.max($, s.height - u.y);
                        isFinite(E) && ($ = Math.max($, Math.max(s.height, E) - u.y));
                        S ? r.moveTo(P - u.x, v - u.y) : r.moveTo(P - u.x, v);
                        switch (t)
                        {
                            case Cs:
                                P -= u.x + l;
                                break;
                            default:
                                P += s.width - u.x + l
                        }
                        z++
                    }
                    d.push(new B(0, v, h + l, (S ? $ : $ + p) + m));
                    for (P = 0; P < z && f !== z; P++) ha = e[f - z + P], ya = er(ha, ha.bg, ha.Ff, q), ha.moveTo(ha.position.x, ha.position.y + p - ya.y);
                    w.v(q);
                    w.v(ba);
                    if (t === Cs)
                        for (f = 0; f < d.length; f++) e = d[f], e.width += A, e.x -= A;
                    else
                        for (f = 0; f <
                        d.length; f++) e = d[f], e.x > A && (e.width += e.x - A, e.x = A)
            }
            for (k = f = h = e = 0; k < d.length; k++) l = d[k], e = Math.min(e, l.x), h = Math.min(h, l.y), f = Math.max(f, l.x + l.width);
            this.Vf === Cs ? this.commitLayers(d, new y(e + a / 2 - (f + e), h - c / 2)) : this.commitLayers(d, new y(e - a / 2, h - c / 2));
            null !== b && b.Yc("Layout");
            this.sf = !0
        }
    };
    Qn.prototype.commitLayers = function () {};
    w.defineProperty(Qn,
        {
            MG: "wrappingWidth"
        }, function ()
        {
            return this.Ht
        }, function (a)
        {
            this.Ht !== a && (w.j(a, "number", Qn, "wrappingWidth"), 0 < a || isNaN(a)) && (this.Ht = a, this.Ox = isNaN(a), this.J())
        });
    w.defineProperty(Qn,
        {
            cK: "wrappingColumn"
        }, function ()
        {
            return this.Gt
        }, function (a)
        {
            this.Gt !== a && (w.j(a, "number", Qn, "wrappingColumn"), 0 < a || isNaN(a)) && (this.Gt = a, this.J())
        });
    w.defineProperty(Qn,
        {
            Ip: "cellSize"
        }, function ()
        {
            return this.Sj
        }, function (a)
        {
            w.G(a, ia, Qn, "cellSize");
            this.Sj.L(a) || (this.Sj.assign(a), this.J())
        });
    w.defineProperty(Qn,
        {
            spacing: "spacing"
        }, function ()
        {
            return this.ei
        }, function (a)
        {
            w.G(a, ia, Qn, "spacing");
            this.ei.L(a) || (this.ei.assign(a), this.J())
        });
    w.defineProperty(Qn,
        {
            alignment: "alignment"
        }, function ()
        {
            return this.me
        }, function (a)
        {
            this.me !== a && (w.ob(a, Qn, Qn, "alignment"), a === vs || a === Ds) && (this.me = a, this.J())
        });
    w.defineProperty(Qn,
        {
            Vf: "arrangement"
        }, function ()
        {
            return this.pd
        }, function (a)
        {
            this.pd !== a && (w.ob(a, Qn, Qn, "arrangement"), a === ws || a === Cs) && (this.pd = a, this.J())
        });
    w.defineProperty(Qn,
        {
            sorting: "sorting"
        }, function ()
        {
            return this.di
        }, function (a)
        {
            this.di !== a && (w.ob(a, Qn, Qn, "sorting"), a === As || a === Bs || a === xs || a === zs) && (this.di = a, this.J())
        });
    w.defineProperty(Qn,
        {
            comparer: "comparer"
        }, function ()
        {
            return this.Nh
        }, function (a)
        {
            this.Nh !== a && (w.j(a, "function", Qn, "comparer"), this.Nh = a, this.J())
        });
    var ys;
    Qn.standardComparer = ys = function (a, b)
    {
        var c = a.text,
            d = b.text;
        return c < d ? -1 : c > d ? 1 : 0
    };
    Qn.smartComparer = function (a, b)
    {
        if (null !== a)
        {
            if (null !== b)
            {
                for (var c = a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), d = b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), e = 0; e < c.length; e++)
                    if ("" !== d[e] && void 0 !== d[e])
                    {
                        var f = parseFloat(c[e]),
                            h = parseFloat(d[e]);
                        if (isNaN(f))
                        {
                            if (!isNaN(h)) return 1;
                            if (0 !== c[e].localeCompare(d[e])) return c[e].localeCompare(d[e])
                        }
                        else
                        {
                            if (isNaN(h)) return -1;
                            if (0 !== f - h) return f - h
                        }
                    }
                    else if ("" !== c[e]) return 1;
                return "" !==
                d[e] && void 0 !== d[e] ? -1 : 0
            }
            return 1
        }
        return null !== b ? -1 : 0
    };
    var Ds;
    Qn.Position = Ds = w.p(Qn, "Position", 0);
    var vs;
    Qn.Location = vs = w.p(Qn, "Location", 1);
    var ws;
    Qn.LeftToRight = ws = w.p(Qn, "LeftToRight", 2);
    var Cs;
    Qn.RightToLeft = Cs = w.p(Qn, "RightToLeft", 3);
    var As;
    Qn.Forward = As = w.p(Qn, "Forward", 4);
    var Bs;
    Qn.Reverse = Bs = w.p(Qn, "Reverse", 5);
    var xs;
    Qn.Ascending = xs = w.p(Qn, "Ascending", 6);
    var zs;
    Qn.Descending = zs = w.p(Qn, "Descending", 7);

    function Es()
    {
        0 < arguments.length && w.nd(Es);
        sg.call(this);
        this.nz = this.Do = this.Gd = 0;
        this.Ar = 360;
        this.mz = Fs;
        this.nl = 0;
        this.gC = new y;
        this.WC = Fs;
        this.yv = this.Uf = this.jE = 0;
        this.Ww = new Gs;
        this.zv = this.Vm = 0;
        this.$G = 600;
        this.Us = NaN;
        this.Uq = 1;
        this.ut = 0;
        this.wt = 360;
        this.pd = Fs;
        this.ba = Hs;
        this.di = Is;
        this.Nh = us;
        this.ei = 6;
        this.Fs = Js
    }
    w.La(Es, sg);
    w.ga("CircularLayout", Es);
    Es.prototype.cloneProtected = function (a)
    {
        sg.prototype.cloneProtected.call(this, a);
        a.Us = this.Us;
        a.Uq = this.Uq;
        a.ut = this.ut;
        a.wt = this.wt;
        a.pd = this.pd;
        a.ba = this.ba;
        a.di = this.di;
        a.Nh = this.Nh;
        a.ei = this.ei;
        a.Fs = this.Fs
    };
    Es.prototype.gc = function (a)
    {
        if (a.Je === Es)
            if (a === Ks || a === Ls || a === Ms || a === Ns || a === Is) this.sorting = a;
            else if (a === Os || a === Ps || a === Hs || a === Qs) this.direction = a;
            else if (a === Rs || a === Ss || a === Fs || a === Ts) this.Vf = a;
            else
            {
                if (a === Us || a === Js) this.Yx = a
            }
        else sg.prototype.gc.call(this, a)
    };
    Es.prototype.createNetwork = function ()
    {
        return new Vs
    };
    Es.prototype.doLayout = function (a)
    {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        this.Nd = this.initialOrigin(this.Nd);
        a = this.network.vertexes;
        if (1 >= a.count) 1 === a.count && (a = a.first(), a.la = 0, a.ra = 0);
        else
        {
            var b = new H(Ws);
            b.Nc(a.i);
            a = new H(Ws);
            var c = new H(Ws),
                d;
            d = this.sort(b);
            var e = this.mz,
                f = this.WC,
                h = this.Gd,
                k = this.Do,
                l = this.nz,
                m = this.Ar,
                b = this.nl,
                n = this.jE,
                p = this.Uf,
                q = this.yv,
                e = this.Vf,
                f = this.Yx,
                h = this.lJ;
            if (!isFinite(h) || 0 >= h) h = NaN;
            k = this.qH;
            if (!isFinite(k) || 0 >= k) k = 1;
            l = this.Ae;
            isFinite(l) || (l = 0);
            m = this.uf;
            if (!isFinite(m) || 360 < m || 1 > m) m = 360;
            b = this.spacing;
            isFinite(b) || (b = NaN);
            e === Ts && f === Us ? e = Fs : e === Ts && f !== Us && (f = Us, e = this.Vf);
            if ((this.direction === Os || this.direction === Ps) && this.sorting !== Is)
            {
                for (var r = 0; !(r >= d.length); r += 2)
                {
                    a.add(d.ea(r));
                    if (r + 1 >= d.length) break;
                    c.add(d.ea(r + 1))
                }
                this.direction === Os ? (this.Vf === Ts && a.reverse(), d = new H(Ws), d.Nc(a), d.Nc(c)) : (this.Vf === Ts &&
                c.reverse(), d = new H(Ws), d.Nc(c), d.Nc(a))
            }
            for (var s = d.length, u = n = 0, r = 0; r < d.length; r++)
            {
                var p = l + m * u * (this.direction === Hs ? 1 : -1) / s,
                    t = d.ea(r).diameter;
                isNaN(t) && (t = Xs(d.ea(r), p));
                360 > m && (0 === r || r === d.length - 1) && (t /= 2);
                n += t;
                u++
            }
            if (isNaN(h) || e === Ts)
            {
                isNaN(b) && (b = 6);
                if (e !== Fs && e !== Ts)
                {
                    t = -Infinity;
                    for (r = 0; r < s; r++)
                    {
                        var q = d.ea(r),
                            x = d.ea(r === s - 1 ? 0 : r + 1);
                        isNaN(q.diameter) && Xs(q, 0);
                        isNaN(x.diameter) && Xs(x, 0);
                        t = Math.max(t, (q.diameter + x.diameter) / 2)
                    }
                    q = t + b;
                    e === Rs ? (p = 2 * Math.PI / s, h = (t + b) / p) : h = Ys(this, q * (360 <= m ? s : s - 1),
                        k, l * Math.PI / 180, m * Math.PI / 180)
                }
                else h = Ys(this, n + (360 <= m ? s : s - 1) * (e !== Ts ? b : 1.6 * b), k, l * Math.PI / 180, m * Math.PI / 180);
                p = h * k
            }
            else if (p = h * k, u = Zs(this, h, p, l * Math.PI / 180, m * Math.PI / 180), isNaN(b))
            {
                if (e === Fs || e === Ts) b = (u - n) / (360 <= m ? s : s - 1)
            }
            else if (e === Fs || e === Ts) r = (u - n) / (360 <= m ? s : s - 1), r < b ? (h = Ys(this, n + b * (360 <= m ? s : s - 1), k, l * Math.PI / 180, m * Math.PI / 180), p = h * k) : b = r;
            else
            {
                t = -Infinity;
                for (r = 0; r < s; r++) q = d.ea(r), x = d.ea(r === s - 1 ? 0 : r + 1), isNaN(q.diameter) && Xs(q, 0), isNaN(x.diameter) && Xs(x, 0), t = Math.max(t, (q.diameter + x.diameter) /
                    2);
                q = t + b;
                r = Ys(this, q * (360 <= m ? s : s - 1), k, l * Math.PI / 180, m * Math.PI / 180);
                r > h ? (h = r, p = h * k) : q = u / (360 <= m ? s : s - 1)
            }
            this.mz = e;
            this.WC = f;
            this.Gd = h;
            this.Do = k;
            this.nz = l;
            this.Ar = m;
            this.nl = b;
            this.jE = n;
            this.Uf = p;
            this.yv = q;
            b = d;
            d = this.mz;
            e = this.Gd;
            f = this.nz;
            k = this.Ar;
            l = this.nl;
            m = this.Uf;
            n = this.yv;
            if (this.direction !== Os && this.direction !== Ps || d !== Ts)
                if (this.direction === Os || this.direction === Ps)
                {
                    h = 0;
                    switch (d)
                    {
                        case Ss:
                            h = 180 * $s(this, e, m, f, n) / Math.PI;
                            break;
                        case Fs:
                            n = b = 0;
                            h = a.first();
                            null !== h && (b = Xs(h, Math.PI / 2));
                            h = c.first();
                            null !==
                            h && (n = Xs(h, Math.PI / 2));
                            h = 180 * $s(this, e, m, f, l + (b + n) / 2) / Math.PI;
                            break;
                        case Rs:
                            h = k / b.length
                    }
                    if (this.direction === Os)
                    {
                        switch (d)
                        {
                            case Ss:
                                at(this, a, f, Qs);
                                break;
                            case Fs:
                                bt(this, a, f, Qs);
                                break;
                            case Rs:
                                ct(this, a, k / 2, f, Qs)
                        }
                        switch (d)
                        {
                            case Ss:
                                at(this, c, f + h, Hs);
                                break;
                            case Fs:
                                bt(this, c, f + h, Hs);
                                break;
                            case Rs:
                                ct(this, c, k / 2, f + h, Hs)
                        }
                    }
                    else
                    {
                        switch (d)
                        {
                            case Ss:
                                at(this, c, f, Qs);
                                break;
                            case Fs:
                                bt(this, c, f, Qs);
                                break;
                            case Rs:
                                ct(this, c, k / 2, f, Qs)
                        }
                        switch (d)
                        {
                            case Ss:
                                at(this, a, f + h, Hs);
                                break;
                            case Fs:
                                bt(this, a, f + h, Hs);
                                break;
                            case Rs:
                                ct(this,
                                    a, k / 2, f + h, Hs)
                        }
                    }
                }
                else switch (d)
                {
                    case Ss:
                        at(this, b, f, this.direction);
                        break;
                    case Fs:
                        bt(this, b, f, this.direction);
                        break;
                    case Rs:
                        ct(this, b, k, f, this.direction);
                        break;
                    case Ts:
                        dt(this, b, k, f, this.direction)
                }
            else dt(this, b, k, f - k / 2, Hs)
        }
        this.updateParts();
        this.network = null;
        this.sf = !0
    };

    function ct(a, b, c, d, e)
    {
        var f = a.Ar,
            h = a.Gd;
        a = a.Uf;
        d = d * Math.PI / 180;
        c = c * Math.PI / 180;
        for (var k = b.length, l = 0; l < k; l++)
        {
            var m = d + (e === Hs ? l * c / (360 <= f ? k : k - 1) : -(l * c) / k),
                n = b.ea(l),
                p = h * Math.tan(m) / a,
                p = Math.sqrt((h * h + a * a * p * p) / (1 + p * p));
            n.la = p * Math.cos(m);
            n.ra = p * Math.sin(m);
            n.actualAngle = 180 * m / Math.PI
        }
    }

    function bt(a, b, c, d)
    {
        var e = a.Gd,
            f = a.Uf,
            h = a.nl;
        c = c * Math.PI / 180;
        for (var k = b.length, l = 0; l < k; l++)
        {
            var m = b.ea(l),
                n = b.ea(l === k - 1 ? 0 : l + 1),
                p = f * Math.sin(c);
            m.la = e * Math.cos(c);
            m.ra = p;
            m.actualAngle = 180 * c / Math.PI;
            isNaN(m.diameter) && Xs(m, 0);
            isNaN(n.diameter) && Xs(n, 0);
            m = $s(a, e, f, d === Hs ? c : -c, (m.diameter + n.diameter) / 2 + h);
            c += d === Hs ? m : -m
        }
    }

    function at(a, b, c, d)
    {
        var e = a.Gd,
            f = a.Uf,
            h = a.yv;
        c = c * Math.PI / 180;
        for (var k = b.length, l = 0; l < k; l++)
        {
            var m = b.ea(l);
            m.la = e * Math.cos(c);
            m.ra = f * Math.sin(c);
            m.actualAngle = 180 * c / Math.PI;
            m = $s(a, e, f, d === Hs ? c : -c, h);
            c += d === Hs ? m : -m
        }
    }

    function dt(a, b, c, d, e)
    {
        var f = a.zv,
            f = a.Ar;
        a.Vm = 0;
        a.Ww = new Gs;
        if (360 > c)
        {
            for (f = d + (e === Hs ? f : -f); 0 > f;) f += 360;
            f %= 360;
            180 < f && (f -= 360);
            f *= Math.PI / 180;
            a.zv = f;
            et(a, b, c, d, e)
        }
        else ft(a, b, c, d, e);
        a.Ww.commit(b)
    }

    function ft(a, b, c, d, e)
    {
        var f = a.Gd,
            h = a.nl,
            k = a.Do,
            l = f * Math.cos(d * Math.PI / 180),
            m = a.Uf * Math.sin(d * Math.PI / 180),
            n = b.xc();
        if (3 === n.length) n[0].la = f, n[0].ra = 0, n[1].la = n[0].la - n[0].width / 2 - n[1].width / 2 - h, n[1].y = n[0].y, n[2].la = (n[0].la + n[1].la) / 2, n[2].y = n[0].y - n[2].height - h;
        else if (4 === n.length) n[0].la = f, n[0].ra = 0, n[2].la = -n[0].la, n[2].ra = n[0].ra, n[1].la = 0, n[1].y = Math.min(n[0].y, n[2].y) - n[1].height - h, n[3].la = 0, n[3].y = Math.max(n[0].y + n[0].height + h, n[2].y + n[2].height + h);
        else
        {
            for (var f = w.K(), p = 0; p < n.length; p++)
            {
                n[p].la =
                    l;
                n[p].ra = m;
                if (p >= n.length - 1) break;
                gt(a, l, m, n, p, e, f) || ht(a, l, m, n, p, e, f);
                l = f.x;
                m = f.y
            }
            w.v(f);
            a.Vm++;
            if (!(23 < a.Vm))
            {
                var l = n[0].la,
                    m = n[0].ra,
                    f = n[n.length - 1].la,
                    p = n[n.length - 1].ra,
                    q = Math.abs(l - f) - ((n[0].width + n[n.length - 1].width) / 2 + h),
                    r = Math.abs(m - p) - ((n[0].height + n[n.length - 1].height) / 2 + h),
                    h = 0;
                1 > Math.abs(r) ? Math.abs(l - f) < (n[0].width + n[n.length - 1].width) / 2 && (h = 0) : h = 0 < r ? r : 1 > Math.abs(q) ? 0 : q;
                q = !1;
                q = Math.abs(f) > Math.abs(p) ? 0 < f !== m > p : 0 < p !== l < f;
                if (q = e === Hs ? q : !q) h = -Math.abs(h), h = Math.min(h, -n[n.length - 1].width),
                    h = Math.min(h, -n[n.length - 1].height);
                a.Ww.compare(h, n);
                1 < Math.abs(h) && (a.Gd = 8 > a.Vm ? a.Gd - h / (2 * Math.PI) : 5 > n.length && 10 < h ? a.Gd / 2 : a.Gd - (0 < h ? 1.7 : -2.3), a.Uf = a.Gd * k, ft(a, b, c, d, e))
            }
        }
    }

    function et(a, b, c, d, e)
    {
        for (var f = a.Gd, h = a.Uf, k = a.Do, l = f * Math.cos(d * Math.PI / 180), m = h * Math.sin(d * Math.PI / 180), n = w.K(), p = b.xc(), q = 0; q < p.length; q++)
        {
            p[q].la = l;
            p[q].ra = m;
            if (q >= p.length - 1) break;
            gt(a, l, m, p, q, e, n) || ht(a, l, m, p, q, e, n);
            l = n.x;
            m = n.y
        }
        w.v(n);
        a.Vm++;
        if (!(23 < a.Vm))
        {
            l = Math.atan2(m, l);
            l = e === Hs ? a.zv - l : l - a.zv;
            l = Math.abs(l) < Math.abs(l - 2 * Math.PI) ? l : l - 2 * Math.PI;
            f = l * (f + h) / 2;
            h = a.Ww;
            if (Math.abs(f) < Math.abs(h.Xp))
                for (h.Xp = f, h.ho = [], h.Iq = [], l = 0; l < p.length; l++) h.ho[l] = p[l].cb.x, h.Iq[l] = p[l].cb.y;
            1 < Math.abs(f) &&
            (a.Gd = 8 > a.Vm ? a.Gd - f / (2 * Math.PI) : a.Gd - (0 < f ? 1.7 : -2.3), a.Uf = a.Gd * k, et(a, b, c, d, e))
        }
    }

    function gt(a, b, c, d, e, f, h)
    {
        var k = a.Gd,
            l = a.Uf,
            m = 0,
            n = 0;
        a = (d[e].width + d[e + 1].width) / 2 + a.nl;
        var p = !1;
        if (0 <= c !== (f === Hs))
        {
            if (m = b + a, m > k)
            {
                m = b - a;
                if (m < -k) return h.x = m, h.y = n, !1;
                p = !0
            }
        }
        else if (m = b - a, m < -k)
        {
            m = b + a;
            if (m > k) return h.x = m, h.y = n, !1;
            p = !0
        }
        n = Math.sqrt(1 - Math.min(1, m * m / (k * k))) * l;
        0 > c !== p && (n = -n);
        if (Math.abs(c - n) > (d[e].height + d[e + 1].height) / 2) return h.x = m, h.y = n, !1;
        h.x = m;
        h.y = n;
        return !0
    }

    function ht(a, b, c, d, e, f, h)
    {
        var k = a.Gd,
            l = a.Uf,
            m = 0,
            n = 0;
        a = (d[e].height + d[e + 1].height) / 2 + a.nl;
        d = !1;
        if (0 <= b !== (f === Hs))
        {
            if (n = c - a, n < -l)
            {
                n = c + a;
                if (n > l)
                {
                    h.x = m;
                    h.y = n;
                    return
                }
                d = !0
            }
        }
        else if (n = c + a, n > l)
        {
            n = c - a;
            if (n < -l)
            {
                h.x = m;
                h.y = n;
                return
            }
            d = !0
        }
        m = Math.sqrt(1 - Math.min(1, n * n / (l * l))) * k;
        0 > b !== d && (m = -m);
        h.x = m;
        h.y = n
    }
    Es.prototype.commitLayout = function ()
    {
        this.commitNodes();
        this.xu && this.commitLinks()
    };
    Es.prototype.commitNodes = function ()
    {
        var a = this.iH,
            b = null !== this.group && null !== this.group.placeholder && this.group.ad,
            c = b ? this.group.location.copy() : null;
        b ? a = new y(0, 0) : (a.x = this.Nd.x + this.Gd, a.y = this.Nd.y + this.Uf);
        for (var d = this.network.vertexes.i; d.next();)
        {
            var e = d.value;
            e.x += a.x;
            e.y += a.y;
            e.commit()
        }
        b && (this.group.af(), a = this.group.position.copy(), b = this.group.location.copy(), c = c.ui(b.ui(a)), this.group.move(c), this.gC = c.ui(a))
    };
    Es.prototype.commitLinks = function ()
    {
        for (var a = this.network.edges.i; a.next();) a.value.commit()
    };

    function Zs(a, b, c, d, e)
    {
        var f = a.$G;
        if (.001 > Math.abs(a.Do - 1)) return void 0 !== d && void 0 !== e ? e * b : 2 * Math.PI * b;
        a = b > c ? Math.sqrt(b * b - c * c) / b : Math.sqrt(c * c - b * b) / c;
        for (var h = 0, k = 0, k = void 0 !== d && void 0 !== e ? e / (f + 1) : Math.PI / (2 * (f + 1)), l = 0, m = 0; m <= f; m++) l = void 0 !== d && void 0 !== e ? d + m * e / f : m * Math.PI / (2 * f), l = Math.sin(l), h += Math.sqrt(1 - a * a * l * l) * k;
        return void 0 !== d && void 0 !== e ? (b > c ? b : c) * h : 4 * (b > c ? b : c) * h
    }

    function Ys(a, b, c, d, e)
    {
        var f = 0,
            f = void 0 !== d && void 0 !== e ? Zs(a, 1, c, d, e) : Zs(a, 1, c);
        return b / f
    }

    function $s(a, b, c, d, e)
    {
        if (.001 > Math.abs(a.Do - 1)) return e / b;
        var f = b > c ? Math.sqrt(b * b - c * c) / b : Math.sqrt(c * c - b * b) / c,
            h = 0;
        a = 2 * Math.PI / (700 * a.network.vertexes.count);
        b > c && (d += Math.PI / 2);
        for (var k = 0;; k++)
        {
            var l = Math.sin(d + k * a),
                h = h + (b > c ? b : c) * Math.sqrt(1 - f * f * l * l) * a;
            if (h >= e) return k * a
        }
    }
    Es.prototype.sort = function (a)
    {
        switch (this.sorting)
        {
            case Ms:
                break;
            case Ns:
                a.reverse();
                break;
            case Ks:
                a.sort(this.comparer);
                break;
            case Ls:
                a.sort(this.comparer);
                a.reverse();
                break;
            case Is:
                for (var b = [], c = 0; c < a.length; c++) b.push(0);
                for (var d = new H(Ws), c = 0; c < a.length; c++)
                {
                    var e = -1,
                        f = -1;
                    if (0 === c)
                        for (var h = 0; h < a.length; h++)
                        {
                            var k = a.ea(h).UH;
                            k > e && (e = k, f = h)
                        }
                    else
                        for (h = 0; h < a.length; h++) k = b[h], k > e && (e = k, f = h);
                    d.add(a.ea(f));
                    b[f] = -1;
                    f = a.ea(f);
                    e = 0;
                    for (h = f.mc; h.next();) e = a.indexOf(h.value.fromVertex), 0 > e || 0 <= b[e] &&
                    b[e]++;
                    for (f = f.jc; f.next();) e = a.indexOf(f.value.toVertex), 0 > e || 0 <= b[e] && b[e]++
                }
                a = [];
                for (f = 0; f < d.length; f++)
                {
                    b = d.ea(f);
                    a[f] = [];
                    for (var l = 0, c = b.jc; c.next();) l = d.indexOf(c.value.toVertex), l !== f && 0 > a[f].indexOf(l) && a[f].push(l);
                    for (b = b.mc; b.next();) l = d.indexOf(b.value.fromVertex), l !== f && 0 > a[f].indexOf(l) && a[f].push(l)
                }
                h = [];
                for (f = 0; f < a.length; f++) h[f] = 0;
                for (var b = [], k = [], m = [], c = [], e = new H(Ws), n = 0, f = 0; f < a.length; f++)
                {
                    var p = a[f].length;
                    if (1 === p) c.push(f);
                    else if (0 === p) e.add(d.ea(f));
                    else
                    {
                        if (0 === n) b.push(f);
                        else
                        {
                            for (var q = Infinity, r = Infinity, s = -1, u = [], p = 0; p < b.length; p++) 0 > a[b[p]].indexOf(b[p === b.length - 1 ? 0 : p + 1]) && u.push(p === b.length - 1 ? 0 : p + 1);
                            if (0 === u.length)
                                for (p = 0; p < b.length; p++) u.push(p);
                            for (p = 0; p < u.length; p++)
                            {
                                var t = u[p],
                                    x, l = a[f];
                                x = k;
                                for (var v = m, z = h, A = t, L = b, E = 0, P = 0; P < x.length; P++)
                                {
                                    var $ = z[x[P]],
                                        S = z[v[P]],
                                        ba = 0,
                                        ha = 0;
                                    $ < S ? (ba = $, ha = S) : (ba = S, ha = $);
                                    if (ba < A && A <= ha)
                                        for ($ = 0; $ < l.length; $++) S = l[$], 0 > L.indexOf(S) || ba < z[S] && z[S] < ha || ba === z[S] || ha === z[S] || E++;
                                    else
                                        for ($ = 0; $ < l.length; $++) S = l[$], 0 > L.indexOf(S) || ba <
                                        z[S] && z[S] < ha && ba !== z[S] && ha !== z[S] && E++
                                }
                                x = E;
                                for (z = v = 0; z < a[f].length; z++) l = b.indexOf(a[f][z]), 0 <= l && (l = Math.abs(t - (l >= t ? l + 1 : l)), v += l < b.length + 1 - l ? l : b.length + 1 - l);
                                for (z = 0; z < k.length; z++) l = h[k[z]], A = h[m[z]], l >= t && l++, A >= t && A++, l > A && (L = A, A = l, l = L), A - l < (b.length + 2) / 2 === (l < t && t <= A) && v++;
                                if (x < q || x === q && v < r) q = x, r = v, s = t
                            }
                            b.splice(s, 0, f);
                            for (p = 0; p < b.length; p++) h[b[p]] = p;
                            for (p = 0; p < a[f].length; p++) q = a[f][p], 0 <= b.indexOf(q) && (k.push(f), m.push(q))
                        }
                        n++
                    }
                }
                f = !1;
                for (h = b.length;;)
                {
                    f = !0;
                    for (k = 0; k < c.length; k++)
                        if (m = c[k],
                            n = a[m][0], l = b.indexOf(n), 0 <= l)
                        {
                            for (r = p = 0; r < a[n].length; r++) q = a[n][r], q = b.indexOf(q), 0 > q || q === l || (s = q > l ? q - l : l - q, p += q < l !== s > h - s ? 1 : -1);
                            b.splice(0 > p ? l : l + 1, 0, m);
                            c.splice(k, 1);
                            k--
                        }
                        else f = !1;
                    if (f) break;
                    else b.push(c[0]), c.splice(0, 1)
                }
                for (f = 0; f < b.length; f++) e.add(d.ea(b[f]));
                return e;
            default:
                w.k("Invalid sorting type.")
        }
        return a
    };
    w.defineProperty(Es,
        {
            lJ: "radius"
        }, function ()
        {
            return this.Us
        }, function (a)
        {
            this.Us !== a && (w.j(a, "number", Es, "radius"), 0 < a || isNaN(a)) && (this.Us = a, this.J())
        });
    w.defineProperty(Es,
        {
            qH: "aspectRatio"
        }, function ()
        {
            return this.Uq
        }, function (a)
        {
            this.Uq !== a && (w.j(a, "number", Es, "aspectRatio"), 0 < a && (this.Uq = a, this.J()))
        });
    w.defineProperty(Es,
        {
            Ae: "startAngle"
        }, function ()
        {
            return this.ut
        }, function (a)
        {
            this.ut !== a && (w.j(a, "number", Es, "startAngle"), this.ut = a, this.J())
        });
    w.defineProperty(Es,
        {
            uf: "sweepAngle"
        }, function ()
        {
            return this.wt
        }, function (a)
        {
            this.wt !== a && (w.j(a, "number", Es, "sweepAngle"), this.wt = 0 < a && 360 >= a ? a : 360, this.J())
        });
    w.defineProperty(Es,
        {
            Vf: "arrangement"
        }, function ()
        {
            return this.pd
        }, function (a)
        {
            this.pd !== a && (w.ob(a, Es, Es, "arrangement"), a === Ts || a === Fs || a === Ss || a === Rs) && (this.pd = a, this.J())
        });
    w.defineProperty(Es,
        {
            direction: "direction"
        }, function ()
        {
            return this.ba
        }, function (a)
        {
            this.ba !== a && (w.ob(a, Es, Es, "direction"), a === Hs || a === Qs || a === Os || a === Ps) && (this.ba = a, this.J())
        });
    w.defineProperty(Es,
        {
            sorting: "sorting"
        }, function ()
        {
            return this.di
        }, function (a)
        {
            this.di !== a && (w.ob(a, Es, Es, "sorting"), a === Ms || a === Ns || a === Ks || Ls || a === Is) && (this.di = a, this.J())
        });
    w.defineProperty(Es,
        {
            comparer: "comparer"
        }, function ()
        {
            return this.Nh
        }, function (a)
        {
            this.Nh !== a && (w.j(a, "function", Es, "comparer"), this.Nh = a, this.J())
        });
    w.defineProperty(Es,
        {
            spacing: "spacing"
        }, function ()
        {
            return this.ei
        }, function (a)
        {
            this.ei !== a && (w.j(a, "number", Es, "spacing"), this.ei = a, this.J())
        });
    w.defineProperty(Es,
        {
            Yx: "nodeDiameterFormula"
        }, function ()
        {
            return this.Fs
        }, function (a)
        {
            this.Fs !== a && (w.ob(a, Es, Es, "nodeDiameterFormula"), a === Js || a === Us) && (this.Fs = a, this.J())
        });
    w.u(Es,
        {
            fK: "actualXRadius"
        }, function ()
        {
            return this.Gd
        });
    w.u(Es,
        {
            gK: "actualYRadius"
        }, function ()
        {
            return this.Uf
        });
    w.u(Es,
        {
            eK: "actualSpacing"
        }, function ()
        {
            return this.nl
        });
    w.u(Es,
        {
            iH: "actualCenter"
        }, function ()
        {
            return this.gC
        });
    var Fs;
    Es.ConstantSpacing = Fs = w.p(Es, "ConstantSpacing", 0);
    var Ss;
    Es.ConstantDistance = Ss = w.p(Es, "ConstantDistance", 1);
    var Rs;
    Es.ConstantAngle = Rs = w.p(Es, "ConstantAngle", 2);
    var Ts;
    Es.Packed = Ts = w.p(Es, "Packed", 3);
    var Hs;
    Es.Clockwise = Hs = w.p(Es, "Clockwise", 4);
    var Qs;
    Es.Counterclockwise = Qs = w.p(Es, "Counterclockwise", 5);
    var Os;
    Es.BidirectionalLeft = Os = w.p(Es, "BidirectionalLeft", 6);
    var Ps;
    Es.BidirectionalRight = Ps = w.p(Es, "BidirectionalRight", 7);
    var Ms;
    Es.Forwards = Ms = w.p(Es, "Forwards", 8);
    var Ns;
    Es.Reverse = Ns = w.p(Es, "Reverse", 9);
    var Ks;
    Es.Ascending = Ks = w.p(Es, "Ascending", 10);
    var Ls;
    Es.Descending = Ls = w.p(Es, "Descending", 11);
    var Is;
    Es.Optimized = Is = w.p(Es, "Optimized", 12);
    var Js;
    Es.Pythagorean = Js = w.p(Es, "Pythagorean", 13);
    var Us;
    Es.Circular = Us = w.p(Es, "Circular", 14);

    function Gs()
    {
        this.Xp = -Infinity;
        this.Iq = this.ho = null
    }
    Gs.prototype.compare = function (a, b)
    {
        if (0 < a && 0 > this.Xp || Math.abs(a) < Math.abs(this.Xp) && !(0 > a && 0 < this.Xp))
        {
            this.Xp = a;
            this.ho = [];
            this.Iq = [];
            for (var c = 0; c < b.length; c++) this.ho[c] = b[c].cb.x, this.Iq[c] = b[c].cb.y
        }
    };
    Gs.prototype.commit = function (a)
    {
        if (null !== this.ho && null !== this.Iq)
            for (var b = 0; b < this.ho.length; b++)
            {
                var c = a.ea(b);
                c.x = this.ho[b];
                c.y = this.Iq[b]
            }
    };

    function Vs()
    {
        tg.call(this)
    }
    w.La(Vs, tg);
    w.ga("CircularNetwork", Vs);
    Vs.prototype.createVertex = function ()
    {
        return new Ws
    };
    Vs.prototype.createEdge = function ()
    {
        return new it
    };

    function Ws()
    {
        os.call(this);
        this.actualAngle = this.diameter = NaN
    }
    w.La(Ws, os);
    w.ga("CircularVertex", Ws);

    function Xs(a, b)
    {
        var c = a.network;
        if (null === c) return NaN;
        c = c.Tb;
        if (null === c) return NaN;
        if (c.Vf === Ts)
            if (c.Yx === Us) a.diameter = Math.max(a.width, a.height);
            else
            {
                var c = Math.abs(Math.sin(b)),
                    d = Math.abs(Math.cos(b));
                if (0 === c) return a.width;
                if (0 === d) return a.height;
                a.diameter = Math.min(a.height / c, a.width / d)
            }
        else a.diameter = c.Yx === Us ? Math.max(a.width, a.height) : Math.sqrt(a.width * a.width + a.height * a.height);
        return a.diameter
    }

    function it()
    {
        ps.call(this)
    }
    w.La(it, ps);
    w.ga("CircularEdge", it);

    function jt()
    {
        0 < arguments.length && w.nd(jt);
        sg.call(this);
        this.Hg = null;
        this.ds = 0;
        this.mg = (new ia(100, 100)).freeze();
        this.Tq = !1;
        this.ci = !0;
        this.Mh = !1;
        this.$o = 100;
        this.Dr = 1;
        this.Qi = 1E3;
        this.zs = 10;
        this.Vs = Math;
        this.Ao = .05;
        this.zo = 50;
        this.xo = 150;
        this.yo = 0;
        this.qr = 10;
        this.pr = 5
    }
    w.La(jt, sg);
    w.ga("ForceDirectedLayout", jt);
    jt.prototype.cloneProtected = function (a)
    {
        sg.prototype.cloneProtected.call(this, a);
        a.mg.assign(this.mg);
        a.Tq = this.Tq;
        a.ci = this.ci;
        a.Mh = this.Mh;
        a.$o = this.$o;
        a.Dr = this.Dr;
        a.Qi = this.Qi;
        a.zs = this.zs;
        a.Vs = this.Vs;
        a.Ao = this.Ao;
        a.zo = this.zo;
        a.xo = this.xo;
        a.yo = this.yo;
        a.qr = this.qr;
        a.pr = this.pr
    };
    jt.prototype.createNetwork = function ()
    {
        return new kt
    };
    jt.prototype.doLayout = function (a)
    {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        a = this.cB;
        if (0 < this.network.vertexes.count)
        {
            this.network.sx();
            for (var b = this.network.vertexes.i; b.next();)
            {
                var c = b.value;
                c.charge = this.electricalCharge(c);
                c.mass = this.gravitationalMass(c)
            }
            for (b = this.network.edges.i; b.next();) c = b.value, c.stiffness = this.springStiffness(c), c.length = this.springLength(c);
            this.iA();
            this.ds = 0;
            if (this.needsClusterLayout())
            {
                b = this.network;
                for (c = b.NJ().i; c.next();)
                {
                    this.network = c.value;
                    for (var d = this.network.vertexes.i; d.next();)
                    {
                        var e = d.value;
                        e.ig = e.vertexes.count;
                        e.Tk = 1;
                        e.rn = null;
                        e.Gh = null
                    }
                    lt(this, 0, a)
                }
                this.network = b;
                c.reset();
                for (var d = this.DE, f = c.count, h = !0, k = e = 0, l = w.gb(), m = 0; m < f + b.vertexes.count + 2; m++) l[m] = null;
                f = 0;
                c.reset();
                for (var n = w.Kf(); c.next();)
                    if (m = c.value, this.sh(m, n), h) h = !1, e = n.x + n.width / 2, k = n.y + n.height / 2, l[0] = new y(n.x + n.width + d.width, n.y), l[1] = new y(n.x,
                        n.y + n.height + d.height), f = 2;
                    else
                    {
                        var p = mt(l, f, e, k, n.width, n.height, d),
                            q = l[p],
                            r = new y(q.x + n.width + d.width, q.y),
                            s = new y(q.x, q.y + n.height + d.height);
                        p + 1 < f && l.splice(p + 1, 0, null);
                        l[p] = r;
                        l[p + 1] = s;
                        f++;
                        p = q.x - n.x;
                        q = q.y - n.y;
                        for (m = m.vertexes.i; m.next();) r = m.value, r.la += p, r.ra += q
                    }
                w.Hb(n);
                for (m = b.vertexes.i; m.next();) h = m.value, n = h.cb, 2 > f ? (e = n.x + n.width / 2, k = n.y + n.height / 2, l[0] = new y(n.x + n.width + d.width, n.y), l[1] = new y(n.x, n.y + n.height + d.height), f = 2) : (p = mt(l, f, e, k, n.width, n.height, d), q = l[p], r = new y(q.x + n.width + d.width,
                    q.y), s = new y(q.x, q.y + n.height + d.height), p + 1 < f && l.splice(p + 1, 0, null), l[p] = r, l[p + 1] = s, f++, h.la = q.x + h.width / 2, h.ra = q.y + h.height / 2);
                w.ta(l);
                for (c.reset(); c.next();)
                {
                    d = c.value;
                    for (e = d.vertexes.i; e.next();) b.Ol(e.value);
                    for (d = d.edges.i; d.next();) b.Dp(d.value)
                }
            }
            nt(this, a);
            this.updateParts()
        }
        this.$o = a;
        this.network = null;
        this.sf = !0
    };
    jt.prototype.needsClusterLayout = function ()
    {
        if (3 > this.network.vertexes.count) return !1;
        for (var a = 0, b = 0, c = this.network.vertexes.first().cb, d = this.network.vertexes.i; d.next();)
        {
            if (d.value.cb.Zf(c) && (a++, 2 < a)) return !0;
            if (10 < b) break;
            b++
        }
        return !1
    };
    jt.prototype.sh = function (a, b)
    {
        for (var c = !0, d = a.vertexes.i; d.next();)
        {
            var e = d.value;
            c ? (c = !1, b.set(e.cb)) : b.Jh(e.cb)
        }
        return b
    };

    function lt(a, b, c)
    {
        if (xt(a, b))
        {
            var d = a.Qi;
            a.Qi *= 1 + 1 / (b + 1);
            var e = eu(a, b),
                f = Math.max(0, Math.max(Math.min(a.network.vertexes.count, c * (b + 1) / 11), 10));
            a.cB += f;
            lt(a, b + 1, c);
            nt(a, f);
            fu(a, e);
            b = a.Hg;
            null === b ? b = new H(gu) : b.clear();
            b.Nc(e.vertexes);
            b.sort(function (a, b)
            {
                return null === a || null === b || a === b ? 0 : b.ig - a.ig
            });
            for (e = b.i; e.next();) hu(a, e.value);
            a.Qi = d
        }
    }

    function xt(a, b)
    {
        if (10 < b || 3 > a.network.vertexes.count) return !1;
        null === a.Hg ? a.Hg = new H(gu) : a.Hg.clear();
        a.Hg.Nc(a.network.vertexes);
        var c = a.Hg;
        c.sort(function (a, b)
        {
            return null === a || null === b || a === b ? 0 : b.ig - a.ig
        });
        for (var d = c.count - 1; 0 <= d && 1 >= c.ea(d).ig;) d--;
        return 1 < c.count - d
    }

    function eu(a, b)
    {
        for (var c = a.network, d = new kt, e = a.Hg.i; e.next();)
        {
            var f = e.value;
            if (1 < f.ig)
            {
                d.Ol(f);
                var h = new iu;
                h.Jy = f.ig;
                h.Ky = f.width;
                h.Iy = f.height;
                h.$B = f.T.x;
                h.aC = f.T.y;
                null === f.Gh && (f.Gh = new H(iu));
                f.Gh.add(h);
                f.vB = f.Gh.count - 1
            }
            else break
        }
        for (var k = c.edges.i; k.next();)
            if (h = k.value, e = h.fromVertex, f = h.toVertex, e.network === d && f.network === d) d.Dp(h);
            else if (e.network === d)
            {
                var l = e.rn;
                null === l && (l = new H(gu), e.rn = l);
                l.add(f);
                e.ig--;
                e.Tk += f.Tk
            }
            else f.network === d && (l = f.rn, null === l && (l = new H(gu), f.rn = l),
                    l.add(e), f.ig--, f.Tk += e.Tk);
        for (e = d.edges.i; e.next();) f = e.value, f.length *= Math.max(1, Sd((f.fromVertex.Tk + f.toVertex.Tk) / (4 * b + 1)));
        for (e = d.vertexes.i; e.next();)
            if (f = e.value, l = f.rn, null !== l && 0 < l.count && (h = f.Gh.ea(f.Gh.count - 1), h = h.Jy - f.ig, !(0 >= h)))
            {
                for (var m = 0, n = 0, p = l.count - h; p < l.count; p++)
                {
                    for (var q = l.ea(p), r = null, k = q.edges.i; k.next();)
                    {
                        var s = k.value;
                        if (s.dI(q) === f)
                        {
                            r = s;
                            break
                        }
                    }
                    null !== r && (n += r.length, m += q.width * q.height)
                }
                k = f.la;
                l = f.ra;
                p = f.width;
                q = f.height;
                r = f.T;
                s = p * q;
                1 > s && (s = 1);
                m = Sd((m + s + n * n * 4 / (h * h)) /
                    s);
                h = (m - 1) * p / 2;
                m = (m - 1) * q / 2;
                f.cb = new B(k - r.x - h, l - r.y - m, p + 2 * h, q + 2 * m);
                f.focus = new y(r.x + h, r.y + m)
            }
        a.network = d;
        return c
    }

    function fu(a, b)
    {
        for (var c = a.network.vertexes.i; c.next();)
        {
            var d = c.value;
            d.network = b;
            if (null !== d.Gh)
            {
                var e = d.Gh.ea(d.vB);
                d.ig = e.Jy;
                var f = e.$B,
                    h = e.aC;
                d.cb = new B(d.la - f, d.ra - h, e.Ky, e.Iy);
                d.focus = new y(f, h);
                d.vB--
            }
        }
        for (c = a.network.edges.i; c.next();) c.value.network = b;
        a.network = b
    }

    function hu(a, b)
    {
        var c = b.rn;
        if (null !== c && 0 !== c.count)
        {
            var d = b.la,
                e = b.ra,
                f = b.width,
                h = b.height;
            null !== b.Gh && 0 < b.Gh.count && (h = b.Gh.ea(0), f = h.Ky, h = h.Iy);
            for (var f = Sd(f * f + h * h) / 2, k = !1, l = h = 0, m = 0, n = b.vertexes.i; n.next();)
            {
                var p = n.value;
                1 >= p.ig ? l++ : (k = !0, m++, h += Math.atan2(b.ra - p.ra, b.la - p.la))
            }
            if (0 !== l)
                for (0 < m && (h /= m), n = m = 0, m = k ? 2 * Math.PI / (l + 1) : 2 * Math.PI / l, 0 === l % 2 && (n = m / 2), 1 < c.count && c.sort(function (a, b)
                {
                    return null === a || null === b || a === b ? 0 : b.width * b.height - a.width * a.height
                }), k = 0 === l % 2 ? 0 : 1, c = c.i; c.next();)
                    if (l =
                        c.value, !(1 < l.ig || a.isFixed(l)))
                    {
                        for (var p = null, q = l.edges.i; q.next();)
                        {
                            p = q.value;
                            break
                        }
                        var q = l.width,
                            r = l.height,
                            q = Sd(q * q + r * r) / 2,
                            p = f + p.length + q,
                            q = h + (m * (k / 2 >> 1) + n) * (0 === k % 2 ? 1 : -1);
                        l.la = d + p * Math.cos(q);
                        l.ra = e + p * Math.sin(q);
                        k++
                    }
        }
    }

    function mt(a, b, c, d, e, f, h)
    {
        var k = 9E19,
            l = -1,
            m = 0;
        a: for (; m < b; m++)
        {
            var n = a[m],
                p = n.x - c,
                q = n.y - d,
                p = p * p + q * q;
            if (p < k)
            {
                for (q = m - 1; 0 <= q; q--)
                    if (a[q].y > n.y && a[q].x - n.x < e + h.width) continue a;
                for (q = m + 1; q < b; q++)
                    if (a[q].x > n.x && a[q].y - n.y < f + h.height) continue a;
                l = m;
                k = p
            }
        }
        return l
    }
    jt.prototype.iA = function ()
    {
        if (this.comments)
            for (var a = this.network.vertexes.i; a.next();) this.addComments(a.value)
    };
    jt.prototype.addComments = function (a)
    {
        var b = a.Qc;
        if (null !== b)
            for (b = b.$E(); b.next();)
            {
                var c = b.value;
                if ("Comment" === c.zd && c.isVisible())
                {
                    var d = this.network.An(c);
                    null === d && (d = this.network.Lt(c));
                    d.charge = this.KH;
                    for (var c = null, e = d.jc; e.next();)
                    {
                        var f = e.value;
                        if (f.toVertex === a)
                        {
                            c = f;
                            break
                        }
                    }
                    if (null === c)
                        for (e = d.mc; e.next();)
                            if (f = e.value, f.fromVertex === a)
                            {
                                c = f;
                                break
                            }
                    null === c && (c = this.network.jq(a, d, null));
                    c.length = this.LH
                }
            }
    };

    function ju(a, b)
    {
        var c = a.O,
            d = c.x,
            e = c.y,
            f = c.width,
            c = c.height,
            h = b.O,
            k = h.x,
            l = h.y,
            m = h.width,
            h = h.height;
        return d + f < k ? e > l + h ? (d = d + f - k, e = e - l - h, Sd(d * d + e * e)) : e + c < l ? (d = d + f - k, e = e + c - l, Sd(d * d + e * e)) : k - (d + f) : d > k + m ? e > l + h ? (d = d - k - m, e = e - l - h, Sd(d * d + e * e)) : e + c < l ? (d = d - k - m, e = e + c - l, Sd(d * d + e * e)) : d - (k + m) : e > l + h ? e - (l + h) : e + c < l ? l - (e + c) : .1
    }

    function nt(a, b)
    {
        a.Hg = null;
        for (var c = a.ds + b; a.ds < c && (a.ds++, ku(a)););
        a.Hg = null
    }

    function ku(a)
    {
        null === a.Hg && (a.Hg = new H(gu), a.Hg.Nc(a.network.vertexes));
        var b = a.Hg.n;
        if (0 >= b.length) return !1;
        var c = b[0];
        c.forceX = 0;
        c.forceY = 0;
        for (var d = c.la, e = d, f = c.ra, h = f, c = 1; c < b.length; c++)
        {
            var k = b[c];
            k.forceX = 0;
            k.forceY = 0;
            var l = k.la,
                k = k.ra,
                d = Math.min(d, l),
                e = Math.max(e, l),
                f = Math.min(f, k),
                h = Math.max(h, k)
        }(f = e - d > h - f) ? b.sort(function (a, b)
    {
        return null === a || null === b || a === b ? 0 : a.la - b.la
    }): b.sort(function (a, b)
    {
        return null === a || null === b || a === b ? 0 : a.ra - b.ra
    });
        for (var h = a.Qi, m = 0, n = 0, p = 0, c = 0; c < b.length; c++)
        {
            var k =
                    b[c],
                l = k.O,
                q = k.T,
                d = l.x + q.x,
                l = l.y + q.y,
                n = k.charge * a.electricalFieldX(d, l),
                p = k.charge * a.electricalFieldY(d, l),
                n = n + k.mass * a.gravitationalFieldX(d, l),
                p = p + k.mass * a.gravitationalFieldY(d, l);
            k.forceX += n;
            k.forceY += p;
            for (q = c + 1; q < b.length; q++)
                if (e = b[q], e !== k)
                {
                    var r = e.O,
                        n = e.T,
                        p = r.x + n.x,
                        r = r.y + n.y;
                    if (d - p > h || p - d > h)
                    {
                        if (f) break
                    }
                    else if (l - r > h || r - l > h)
                    {
                        if (!f) break
                    }
                    else
                    {
                        var s = ju(k, e);
                        1 > s ? (n = a.jy, null === n && (a.jy = n = new sa(0)), m = n.random(), s = n.random(), d > p ? (n = Math.abs(e.O.right - k.O.x), n = (1 + n) * m) : d < p ? (n = Math.abs(e.O.x - k.O.right),
                            n = -(1 + n) * m) : (n = Math.max(e.width, k.width), n = (1 + n) * m - n / 2), l > r ? (p = Math.abs(e.O.bottom - k.O.y), p = (1 + p) * s) : d < p ? (p = Math.abs(e.O.y - k.O.bottom), p = -(1 + p) * s) : (p = Math.max(e.height, k.height), p = (1 + p) * s - p / 2)) : (m = -(k.charge * e.charge) / (s * s), n = (p - d) / s * m, p = (r - l) / s * m);
                        k.forceX += n;
                        k.forceY += p;
                        e.forceX -= n;
                        e.forceY -= p
                    }
                }
        }
        for (c = a.network.edges.i; c.next();) f = c.value, k = f.fromVertex, e = f.toVertex, l = k.O, q = k.T, d = l.x + q.x, l = l.y + q.y, r = e.O, n = e.T, p = r.x + n.x, r = r.y + n.y, s = ju(k, e), 1 > s ? (n = a.jy, null === n && (a.jy = n = new sa(0)), m = n.random(), s =
            n.random(), n = (d > p ? 1 : -1) * (1 + (e.width > k.width ? e.width : k.width)) * m, p = (l > r ? 1 : -1) * (1 + (e.height > k.height ? e.height : k.height)) * s) : (m = f.stiffness * (s - f.length), n = (p - d) / s * m, p = (r - l) / s * m), k.forceX += n, k.forceY += p, e.forceX -= n, e.forceY -= p;
        c = 0;
        d = a.eJ;
        for (e = 0; e < b.length; e++) k = b[e], a.isFixed(k) ? a.moveFixedVertex(k) : (f = k.forceX, h = k.forceY, f < -d ? f = -d : f > d && (f = d), h < -d ? h = -d : h > d && (h = d), k.la += f, k.ra += h, c = Math.max(c, f * f + h * h));
        return c > a.XE * a.XE
    }
    jt.prototype.moveFixedVertex = function () {};
    jt.prototype.commitLayout = function ()
    {
        this.CB();
        this.commitNodes();
        this.xu && this.commitLinks()
    };
    jt.prototype.CB = function ()
    {
        if (this.Cq)
            for (var a = this.network.edges.i; a.next();)
            {
                var b = a.value.link;
                null !== b && (b.Bb = qc, b.Cb = qc)
            }
    };
    jt.prototype.commitNodes = function ()
    {
        var a = 0,
            b = 0;
        if (this.pH)
        {
            var c = w.Kf();
            this.sh(this.network, c);
            b = this.Nd;
            a = b.x - c.x;
            b = b.y - c.y;
            w.Hb(c)
        }
        for (var c = w.Kf(), d = this.network.vertexes.i; d.next();)
        {
            var e = d.value;
            if (0 !== a || 0 !== b) c.assign(e.cb), c.x += a, c.y += b, e.cb = c;
            e.commit()
        }
        w.Hb(c)
    };
    jt.prototype.commitLinks = function ()
    {
        for (var a = this.network.edges.i; a.next();) a.value.commit()
    };
    jt.prototype.springStiffness = function (a)
    {
        a = a.stiffness;
        return isNaN(a) ? this.Ao : a
    };
    jt.prototype.springLength = function (a)
    {
        a = a.length;
        return isNaN(a) ? this.zo : a
    };
    jt.prototype.electricalCharge = function (a)
    {
        a = a.charge;
        return isNaN(a) ? this.xo : a
    };
    jt.prototype.electricalFieldX = function ()
    {
        return 0
    };
    jt.prototype.electricalFieldY = function ()
    {
        return 0
    };
    jt.prototype.gravitationalMass = function (a)
    {
        a = a.mass;
        return isNaN(a) ? this.yo : a
    };
    jt.prototype.gravitationalFieldX = function ()
    {
        return 0
    };
    jt.prototype.gravitationalFieldY = function ()
    {
        return 0
    };
    jt.prototype.isFixed = function (a)
    {
        return a.isFixed
    };
    w.u(jt,
        {
            NK: "currentIteration"
        }, function ()
        {
            return this.ds
        });
    w.defineProperty(jt,
        {
            DE: "arrangementSpacing"
        }, function ()
        {
            return this.mg
        }, function (a)
        {
            w.G(a, ia, jt, "arrangementSpacing");
            this.mg.L(a) || (this.mg.assign(a), this.J())
        });
    w.defineProperty(jt,
        {
            pH: "arrangesToOrigin"
        }, function ()
        {
            return this.Tq
        }, function (a)
        {
            this.Tq !== a && (w.j(a, "boolean", jt, "arrangesToOrigin"), this.Tq = a, this.J())
        });
    w.defineProperty(jt,
        {
            Cq: "setsPortSpots"
        }, function ()
        {
            return this.ci
        }, function (a)
        {
            this.ci !== a && (w.j(a, "boolean", jt, "setsPortSpots"), this.ci = a, this.J())
        });
    w.defineProperty(jt,
        {
            comments: "comments"
        }, function ()
        {
            return this.Mh
        }, function (a)
        {
            this.Mh !== a && (w.j(a, "boolean", jt, "comments"), this.Mh = a, this.J())
        });
    w.defineProperty(jt,
        {
            cB: "maxIterations"
        }, function ()
        {
            return this.$o
        }, function (a)
        {
            this.$o !== a && (w.j(a, "number", jt, "maxIterations"), 0 <= a && (this.$o = a, this.J()))
        });
    w.defineProperty(jt,
        {
            XE: "epsilonDistance"
        }, function ()
        {
            return this.Dr
        }, function (a)
        {
            this.Dr !== a && (w.j(a, "number", jt, "epsilonDistance"), 0 < a && (this.Dr = a, this.J()))
        });
    w.defineProperty(jt,
        {
            gL: "infinityDistance"
        }, function ()
        {
            return this.Qi
        }, function (a)
        {
            this.Qi !== a && (w.j(a, "number", jt, "infinityDistance"), 1 < a && (this.Qi = a, this.J()))
        });
    w.defineProperty(jt,
        {
            eJ: "moveLimit"
        }, function ()
        {
            return this.zs
        }, function (a)
        {
            this.zs !== a && (w.j(a, "number", jt, "moveLimit"), 1 < a && (this.zs = a, this.J()))
        });
    w.defineProperty(jt,
        {
            jy: "randomNumberGenerator"
        }, function ()
        {
            return this.Vs
        }, function (a)
        {
            this.Vs !== a && (null !== a && "function" !== typeof a.random && w.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: ' + a), this.Vs = a)
        });
    w.defineProperty(jt,
        {
            ZK: "defaultSpringStiffness"
        }, function ()
        {
            return this.Ao
        }, function (a)
        {
            this.Ao !== a && (w.j(a, "number", jt, "defaultSpringStiffness"), this.Ao = a, this.J())
        });
    w.defineProperty(jt,
        {
            YK: "defaultSpringLength"
        }, function ()
        {
            return this.zo
        }, function (a)
        {
            this.zo !== a && (w.j(a, "number", jt, "defaultSpringLength"), this.zo = a, this.J())
        });
    w.defineProperty(jt,
        {
            SK: "defaultElectricalCharge"
        }, function ()
        {
            return this.xo
        }, function (a)
        {
            this.xo !== a && (w.j(a, "number", jt, "defaultElectricalCharge"), this.xo = a, this.J())
        });
    w.defineProperty(jt,
        {
            TK: "defaultGravitationalMass"
        }, function ()
        {
            return this.yo
        }, function (a)
        {
            this.yo !== a && (w.j(a, "number", jt, "defaultGravitationalMass"), this.yo = a, this.J())
        });
    w.defineProperty(jt,
        {
            LH: "defaultCommentSpringLength"
        }, function ()
        {
            return this.qr
        }, function (a)
        {
            this.qr !== a && (w.j(a, "number", jt, "defaultCommentSpringLength"), this.qr = a, this.J())
        });
    w.defineProperty(jt,
        {
            KH: "defaultCommentElectricalCharge"
        }, function ()
        {
            return this.pr
        }, function (a)
        {
            this.pr !== a && (w.j(a, "number", jt, "defaultCommentElectricalCharge"), this.pr = a, this.J())
        });

    function iu()
    {
        this.aC = this.$B = this.Iy = this.Ky = this.Jy = 0
    }

    function kt()
    {
        tg.call(this)
    }
    w.La(kt, tg);
    w.ga("ForceDirectedNetwork", kt);
    kt.prototype.createVertex = function ()
    {
        return new gu
    };
    kt.prototype.createEdge = function ()
    {
        return new lu
    };

    function gu()
    {
        os.call(this);
        this.isFixed = !1;
        this.mass = this.charge = NaN;
        this.Tk = this.ig = this.forceY = this.forceX = 0;
        this.Gh = this.rn = null;
        this.vB = 0
    }
    w.La(gu, os);
    w.ga("ForceDirectedVertex", gu);

    function lu()
    {
        ps.call(this);
        this.length = this.stiffness = NaN
    }
    w.La(lu, ps);
    w.ga("ForceDirectedEdge", lu);

    function mu()
    {
        0 < arguments.length && w.nd(mu);
        sg.call(this);
        this.Xd = this.Mm = 25;
        this.ba = 0;
        this.wo = nu;
        this.Wo = ou;
        this.Mo = pu;
        this.Lm = 4;
        this.lo = qu;
        this.dj = ru;
        this.ci = !0;
        this.js = 4;
        this.Mb = this.kw = this.tb = -1;
        this.Rf = this.ss = 0;
        this.Pb = this.Pf = this.Qf = this.xg = this.ne = null;
        this.Bs = 0;
        this.As = this.Rm = null;
        this.Bg = 0;
        this.Cs = null;
        this.mC = new y;
        this.ih = [];
        this.ih.length = 100
    }
    w.La(mu, sg);
    w.ga("LayeredDigraphLayout", mu);
    mu.prototype.cloneProtected = function (a)
    {
        sg.prototype.cloneProtected.call(this, a);
        a.Mm = this.Mm;
        a.Xd = this.Xd;
        a.ba = this.ba;
        a.wo = this.wo;
        a.Wo = this.Wo;
        a.Mo = this.Mo;
        a.Lm = this.Lm;
        a.lo = this.lo;
        a.dj = this.dj;
        a.ci = this.ci;
        a.js = this.js
    };
    mu.prototype.gc = function (a)
    {
        a.Je === mu ? 0 === a.name.indexOf("Aggressive") ? this.oH = a : 0 === a.name.indexOf("Cycle") ? this.JH = a : 0 === a.name.indexOf("Init") ? this.vI = a : 0 === a.name.indexOf("Layer") ? this.II = a : w.k("Unknown enum value: " + a) : sg.prototype.gc.call(this, a)
    };
    mu.prototype.createNetwork = function ()
    {
        return new su
    };
    mu.prototype.doLayout = function (a)
    {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        this.Nd = this.initialOrigin(this.Nd);
        this.kw = -1;
        this.Rf = this.ss = 0;
        this.Cs = this.As = this.Rm = null;
        for (a = 0; a < this.ih.length; a++) this.ih[a] = null;
        if (0 < this.network.vertexes.count)
        {
            this.network.sx();
            for (a = this.network.edges.i; a.next();) a.value.rev = !1;
            switch (this.wo)
            {
                default:
                case tu:
                    a = this.network;
                    var b =
                            0,
                        c = a.vertexes.count - 1,
                        d = [];d.length = c + 1;
                    for (var e = a.vertexes.i; e.next();) e.value.valid = !0;
                    for (; null !== uu(a);)
                    {
                        for (e = vu(a); null !== e;) d[c] = e, c--, e.valid = !1, e = vu(a);
                        for (e = wu(a); null !== e;) d[b] = e, b++, e.valid = !1, e = wu(a);
                        for (var e = null, f = 0, h = this.network.vertexes.i; h.next();)
                        {
                            var k = h.value;
                            if (k.valid)
                            {
                                for (var l = 0, m = k.jc; m.next();) m.value.toVertex.valid && l++;
                                for (var m = 0, n = k.mc; n.next();) n.value.fromVertex.valid && m++;
                                if (null === e || f < l - m) e = k, f = l - m
                            }
                        }
                        null !== e && (d[b] = e, b++, e.valid = !1)
                    }
                    for (b = 0; b < a.vertexes.count; b++) d[b].index =
                        b;
                    for (d = a.edges.i; d.next();) b = d.value,
                    b.fromVertex.index > b.toVertex.index && (a.py(b), b.rev = !0);
                    break;
                case nu:
                    for (d = this.network.vertexes.i; d.next();) a = d.value, a.Sp = -1, a.finish = -1;
                    for (a = this.network.edges.i; a.next();) a.value.forest = !1;this.Bs = 0;
                    for (d.reset(); d.next();) b = d.value,
                    0 === b.mc.count && xu(this, b);
                    for (d.reset(); d.next();) b = d.value,
                    -1 === b.Sp && xu(this, b);
                    for (a.reset(); a.next();) d = a.value,
                    d.forest || (b = d.fromVertex, c = b.finish, e = d.toVertex, f = e.finish, e.Sp < b.Sp && c < f && (this.network.py(d), d.rev = !0))
            }
            for (a =
                     this.network.vertexes.i; a.next();) a.value.layer = -1;
            this.tb = -1;
            this.assignLayers();
            for (a.reset(); a.next();) this.tb = Math.max(this.tb, a.value.layer);
            a = this.network;
            d = [];
            for (c = a.edges.i; c.next();) b = c.value, b.valid = !1, d.push(b);
            for (c = 0; c < d.length; c++)
                if (b = d[c], f = b.fromVertex, e = b.toVertex, !b.valid && (null !== f.vd && null !== e.vd || f.layer !== e.layer))
                {
                    m = k = l = h = 0;
                    if (null !== b.link)
                    {
                        l = b.link;
                        if (null === l) continue;
                        var p = f.vd,
                            h = e.vd;
                        if (null === p || null === h) continue;
                        var q = l.Y,
                            k = l.Z,
                            r = l.kc,
                            l = l.Ic;
                        b.rev && (m = q, n = r, q = k, r = l,
                            k = m, l = n);
                        var s = f.T,
                            m = e.T,
                            u = b.rev ? e.O : f.O,
                            n = w.K();
                        p !== q ? u.I() && q.isVisible() && q.U.I() ? (er(q, r, Jb, n), n.x += q.U.x - u.x, n.y += q.U.y - u.y) : n.assign(s) : u.I() ? (er(q, r, Jb, n), n.I() || n.assign(s)) : n.assign(s);
                        q = b.rev ? f.O : e.O;
                        p = w.K();
                        h !== k ? q.I() && k.isVisible() && k.U.I() ? (er(k, l, Jb, p), p.x += k.U.x - q.x, p.y += k.U.y - q.y) : p.assign(m) : q.I() ? (er(k, l, Jb, p), p.I() || p.assign(m)) : p.assign(m);
                        90 === this.ba || 270 === this.ba ? (h = Math.round((n.x - s.x) / this.Xd), k = n.x, l = Math.round((p.x - m.x) / this.Xd), m = p.x) : (h = Math.round((n.y - s.y) / this.Xd),
                            k = n.y, l = Math.round((p.y - m.y) / this.Xd), m = p.y);
                        w.v(n);
                        w.v(p);
                        b.portFromColOffset = h;
                        b.portFromPos = k;
                        b.portToColOffset = l;
                        b.portToPos = m
                    }
                    else b.portFromColOffset = 0, b.portFromPos = 0, b.portToColOffset = 0, b.portToPos = 0;
                    n = f.layer;
                    p = e.layer;
                    a: if (q = b, r = 0, u = q.link, null !== u)
                    {
                        var t = u.kc,
                            x = u.Ic;
                        if (null !== t && null !== x)
                        {
                            var v = u.Y,
                                s = u.Z;
                            if (null !== v && null !== s)
                            {
                                var z = t.Bb,
                                    A = x.Cb;
                                this.Cq || (u.Bb.Zc() || (z = u.Bb), u.Cb.Zc() || (A = u.Cb));
                                var L = u.ac,
                                    E = yu(this, !0);
                                if (z.Zc() || z === yb) z = E;
                                var P = yu(this, !1);
                                if (A.Zc() || A === yb) A = P;
                                if (z.Aj() &&
                                    z.yj(P) && A.Aj() && A.yj(E))
                                {
                                    r = 0;
                                    break a
                                }
                                E = u.getLinkPoint(v, t, z, !0, L, s, x, w.K());
                                z = u.getLinkDirection(v, t, E, z, !0, L, s, x);
                                w.v(E);
                                z === zu(this, q, !0) ? r += 1 : this.Cq && null !== v && 1 === v.ports.count && q.rev && (r += 1);
                                z = u.getLinkPoint(s, x, A, !1, L, v, t, w.K());
                                u = u.getLinkDirection(s, x, z, A, !1, L, v, t);
                                w.v(z);
                                u === zu(this, q, !1) ? r += 2 : this.Cq && null !== s && 1 === s.ports.count && q.rev && (r += 2)
                            }
                        }
                    }
                    q = 1 === r || 3 === r ? !0 : !1;
                    if (r = 2 === r || 3 === r ? !0 : !1) s = a.createVertex(), s.vd = null, s.on = 1, s.layer = n, s.near = f, a.Ol(s), f = a.jq(f, s, b.link), f.valid = !1, f.rev =
                        b.rev, f.portFromColOffset = h, f.portToColOffset = 0, f.portFromPos = k, f.portToPos = 0, f = s;
                    u = 1;
                    q && u--;
                    if (n - p > u && 0 < n)
                    {
                        b.valid = !1;
                        s = a.createVertex();
                        s.vd = null;
                        s.on = 2;
                        s.layer = n - 1;
                        a.Ol(s);
                        f = a.jq(f, s, b.link);
                        f.valid = !0;
                        f.rev = b.rev;
                        f.portFromColOffset = r ? 0 : h;
                        f.portToColOffset = 0;
                        f.portFromPos = r ? 0 : k;
                        f.portToPos = 0;
                        f = s;
                        for (n--; n - p > u && 0 < n;) s = a.createVertex(), s.vd = null, s.on = 3, s.layer = n - 1, a.Ol(s), f = a.jq(f, s, b.link), f.valid = !0, f.rev = b.rev, f.portFromColOffset = 0, f.portToColOffset = 0, f.portFromPos = 0, f.portToPos = 0, f = s, n--;
                        f =
                            a.jq(s, e, b.link);
                        f.valid = !q;
                        q && (s.near = e);
                        f.rev = b.rev;
                        f.portFromColOffset = 0;
                        f.portToColOffset = l;
                        f.portFromPos = 0;
                        f.portToPos = m
                    }
                    else b.valid = !0
                }
            d = this.ne = [];
            for (b = 0; b <= this.tb; b++) d[b] = 0;
            for (a = this.network.vertexes.i; a.next();) a.value.index = -1;
            this.initializeIndices();
            this.kw = -1;
            for (b = this.Rf = this.ss = 0; b <= this.tb; b++) d[b] > d[this.Rf] && (this.kw = d[b] - 1, this.Rf = b), d[b] < d[this.ss] && (this.ss = b);
            this.Cs = [];
            for (b = 0; b < d.length; b++) this.Cs[b] = [];
            for (a.reset(); a.next();) d = a.value, this.Cs[d.layer][d.index] = d;
            this.Mb = -1;
            for (a = 0; a <= this.tb; a++)
            {
                d = Au(this, a);
                b = 0;
                c = this.ne[a];
                for (e = 0; e < c; e++) f = d[e], b += this.nodeMinColumnSpace(f, !0), f.column = b, b += 1, b += this.nodeMinColumnSpace(f, !1);
                this.Mb = Math.max(this.Mb, b - 1);
                Bu(this, a, d)
            }
            this.reduceCrossings();
            this.straightenAndPack();
            this.updateParts()
        }
        this.network = null;
        this.sf = !0
    };
    mu.prototype.linkMinLength = function ()
    {
        return 1
    };

    function Cu(a)
    {
        var b = a.fromVertex.vd;
        a = a.toVertex.vd;
        return null === b && null === a ? 8 : null === b || null === a ? 4 : 1
    }
    mu.prototype.nodeMinLayerSpace = function (a, b)
    {
        return null === a.vd ? 0 : 90 === this.ba || 270 === this.ba ? b ? a.T.y + 10 : a.O.height - a.T.y + 10 : b ? a.T.x + 10 : a.O.width - a.T.x + 10
    };
    mu.prototype.nodeMinColumnSpace = function (a, b)
    {
        if (null === a.vd) return 0;
        var c = b ? a.jB : a.iB;
        if (null !== c) return c;
        c = this.ba;
        return 90 === c || 270 === c ? b ? a.jB = a.T.x / this.Xd + 1 | 0 : a.iB = (a.O.width - a.T.x) / this.Xd + 1 | 0 : b ? a.jB = a.T.y / this.Xd + 1 | 0 : a.iB = (a.O.height - a.T.y) / this.Xd + 1 | 0
    };

    function Du(a)
    {
        null === a.Rm && (a.Rm = []);
        for (var b = 0, c = a.network.vertexes.i; c.next();)
        {
            var d = c.value;
            a.Rm[b] = d.layer;
            b++;
            a.Rm[b] = d.column;
            b++;
            a.Rm[b] = d.index;
            b++
        }
        return a.Rm
    }

    function Eu(a, b)
    {
        for (var c = 0, d = a.network.vertexes.i; d.next();)
        {
            var e = d.value;
            e.layer = b[c];
            c++;
            e.column = b[c];
            c++;
            e.index = b[c];
            c++
        }
    }

    function Fu(a, b, c)
    {
        var d = Au(a, b),
            e = a.ne[b];
        if (null === a.As || a.As.length < e * e) a.As = [];
        for (var f = a.As, h = 0; h < e; h++)
        {
            var k = 0,
                l = d[h],
                m = l.near,
                n = 0;
            if (null !== m && m.layer === l.layer)
                if (n = m.index, n > h)
                    for (var p = h + 1; p < n; p++) l = d[p], l.near === m && l.on === m.on || k++;
                else
                    for (p = h - 1; p > n; p--) l = d[p], l.near === m && l.on === m.on || k++;
            var m = 0,
                q, r = q = p = l = 0,
                s, u = 0,
                t = 0;
            s = 0;
            var x;
            if (0 <= c)
                for (n = d[h].Re, m = 0; m < n.count; m++)
                    if (q = n.n[m], q.valid && q.fromVertex.layer !== b)
                        for (l = q.fromVertex.index, p = q.portToPos, q = q.portFromPos, r = m + 1; r < n.count; r++) s =
                            n.n[r], s.valid && s.fromVertex.layer !== b && (u = s.fromVertex.index, t = s.portToPos, s = s.portFromPos, p < t && (l > u || l === u && q > s) && k++, t < p && (u > l || u === l && s > q) && k++);
            if (0 >= c)
                for (n = d[h].Me, m = 0; m < n.count; m++)
                    if (q = n.n[m], q.valid && q.toVertex.layer !== b)
                        for (l = q.toVertex.index, p = q.portToPos, q = q.portFromPos, r = m + 1; r < n.count; r++) s = n.n[r], s.valid && s.toVertex.layer !== b && (u = s.toVertex.index, t = s.portToPos, s = s.portFromPos, q < s && (l > u || l === u && p > t) && k++, s < q && (u > l || u === l && t > p) && k++);
            f[h * e + h] = k;
            for (n = h + 1; n < e; n++)
            {
                var v = 0,
                    z = 0;
                if (0 <= c)
                    for (k =
                             d[h].Re, x = d[n].Re, m = 0; m < k.count; m++)
                        if (q = k.n[m], q.valid && q.fromVertex.layer !== b)
                            for (l = q.fromVertex.index, q = q.portFromPos, r = 0; r < x.count; r++) s = x.n[r], s.valid && s.fromVertex.layer !== b && (u = s.fromVertex.index, s = s.portFromPos, (l < u || l === u && q < s) && z++, (u < l || u === l && s < q) && v++);
                if (0 >= c)
                    for (k = d[h].Me, x = d[n].Me, m = 0; m < k.count; m++)
                        if (q = k.n[m], q.valid && q.toVertex.layer !== b)
                            for (l = q.toVertex.index, p = q.portToPos, r = 0; r < x.count; r++) s = x.n[r], s.valid && s.toVertex.layer !== b && (u = s.toVertex.index, t = s.portToPos, (l < u || l === u && p <
                                t) && z++, (u < l || u === l && t < p) && v++);
                f[h * e + n] = v;
                f[n * e + h] = z
            }
        }
        Bu(a, b, d);
        return f
    }
    mu.prototype.countCrossings = function ()
    {
        for (var a = 0, b = 0; b <= this.tb; b++)
            for (var c = Fu(this, b, 1), d = this.ne[b], e = 0; e < d; e++)
                for (var f = e; f < d; f++) a += c[e * d + f];
        return a
    };

    function Gu(a)
    {
        for (var b = 0, c = 0; c <= a.tb; c++)
        {
            for (var d = a, e = c, f = Au(d, e), h = d.ne[e], k = 0, l = 0; l < h; l++)
            {
                var m = null,
                    m = f[l].Me,
                    n, p = 0,
                    q = 0;
                if (null !== m)
                    for (var r = 0; r < m.count; r++) n = m.n[r], n.valid && n.toVertex.layer !== e && (p = n.fromVertex.column + n.portFromColOffset, q = n.toVertex.column + n.portToColOffset, k += (Math.abs(p - q) + 1) * Cu(n))
            }
            Bu(d, e, f);
            b += k
        }
        return b
    }
    mu.prototype.normalize = function ()
    {
        var a = Infinity;
        this.Mb = -1;
        for (var b = this.network.vertexes.i; b.next();)
        {
            var c = b.value,
                a = Math.min(a, c.column - this.nodeMinColumnSpace(c, !0));
            this.Mb = Math.max(this.Mb, c.column + this.nodeMinColumnSpace(c, !1))
        }
        for (b.reset(); b.next();) b.value.column -= a;
        this.Mb -= a
    };

    function Hu(a, b, c)
    {
        for (var d = Au(a, b), e = a.ne[b], f = [], h = 0; h < e; h++)
        {
            var k = d[h],
                l = null;
            0 >= c && (l = k.Re);
            var m = null;
            0 <= c && (m = k.Me);
            var n = 0,
                p = 0,
                q = k.near;
            null !== q && q.layer === k.layer && (n += q.column - 1, p++);
            if (null !== l)
                for (q = 0; q < l.count; q++)
                {
                    var k = l.n[q],
                        r = k.fromVertex;
                    k.valid && !k.rev && r.layer !== b && (n += r.column, p++)
                }
            if (null !== m)
                for (l = 0; l < m.count; l++) k = m.n[l], q = k.toVertex, k.valid && !k.rev && q.layer !== b && (n += q.column, p++);
            f[h] = 0 === p ? -1 : n / p
        }
        Bu(a, b, d);
        return f
    }

    function Iu(a, b, c)
    {
        for (var d = Au(a, b), e = a.ne[b], f = [], h = 0; h < e; h++)
        {
            var k = d[h],
                l = null;
            0 >= c && (l = k.Re);
            var m = null;
            0 <= c && (m = k.Me);
            var n = 0,
                p = [],
                q = k.near;
            null !== q && q.layer === k.layer && (p[n] = q.column - 1, n++);
            if (null !== l)
                for (q = 0; q < l.count; q++)
                {
                    var k = l.n[q],
                        r = k.fromVertex;
                    k.valid && !k.rev && r.layer !== b && (p[n] = r.column + k.portFromColOffset, n++)
                }
            if (null !== m)
                for (l = 0; l < m.count; l++) k = m.n[l], q = k.toVertex, k.valid && !k.rev && q.layer !== b && (p[n] = q.column + k.portToColOffset, n++);
            0 === n ? f[h] = -1 : (p.sort(function (a, b)
            {
                return a - b
            }),
                m = n >> 1, f[h] = 0 !== (n & 1) ? p[m] : p[m - 1] + p[m] >> 1)
        }
        Bu(a, b, d);
        return f
    }

    function Ju(a, b, c, d, e, f)
    {
        if (b.component === d)
        {
            b.component = c;
            var h = 0,
                k = 0;
            if (e)
                for (var l = b.jc; l.next();)
                {
                    var k = l.value,
                        m = k.toVertex,
                        h = b.layer - m.layer,
                        k = a.linkMinLength(k);
                    h === k && Ju(a, m, c, d, e, f)
                }
            if (f)
                for (l = b.mc; l.next();) k = l.value, m = k.fromVertex, h = m.layer - b.layer, k = a.linkMinLength(k), h === k && Ju(a, m, c, d, e, f)
        }
    }

    function Ku(a, b, c, d, e, f)
    {
        if (b.component === d)
        {
            b.component = c;
            if (e)
                for (var h = b.jc; h.next();) Ku(a, h.value.toVertex, c, d, e, f);
            if (f)
                for (b = b.mc; b.next();) Ku(a, b.value.fromVertex, c, d, e, f)
        }
    }

    function uu(a)
    {
        for (a = a.vertexes.i; a.next();)
        {
            var b = a.value;
            if (b.valid) return b
        }
        return null
    }

    function vu(a)
    {
        for (a = a.vertexes.i; a.next();)
        {
            var b = a.value;
            if (b.valid)
            {
                for (var c = !0, d = b.jc; d.next();)
                    if (d.value.toVertex.valid)
                    {
                        c = !1;
                        break
                    }
                if (c) return b
            }
        }
        return null
    }

    function wu(a)
    {
        for (a = a.vertexes.i; a.next();)
        {
            var b = a.value;
            if (b.valid)
            {
                for (var c = !0, d = b.mc; d.next();)
                    if (d.value.fromVertex.valid)
                    {
                        c = !1;
                        break
                    }
                if (c) return b
            }
        }
        return null
    }

    function xu(a, b)
    {
        b.Sp = a.Bs;
        a.Bs++;
        for (var c = b.jc; c.next();)
        {
            var d = c.value,
                e = d.toVertex; - 1 === e.Sp && (d.forest = !0, xu(a, e))
        }
        b.finish = a.Bs;
        a.Bs++
    }
    mu.prototype.assignLayers = function ()
    {
        switch (this.Wo)
        {
            case Lu:
                Mu(this);
                break;
            case Nu:
                for (var a = 0, b = this.network.vertexes.i; b.next();) a = Ou(this, b.value), this.tb = Math.max(a, this.tb);
                for (b.reset(); b.next();) a = b.value, a.layer = this.tb - a.layer;
                break;
            default:
            case ou:
                Mu(this);
                for (b = this.network.vertexes.i; b.next();) b.value.valid = !1;
                for (b.reset(); b.next();) a = b.value, 0 === a.mc.count && Pu(this, a);
                a = Infinity;
                for (b.reset(); b.next();) a = Math.min(a, b.value.layer);
                this.tb = -1;
                for (b.reset(); b.next();)
                {
                    var c = b.value;
                    c.layer -=
                        a;
                    this.tb = Math.max(this.tb, c.layer)
                }
        }
    };

    function Mu(a)
    {
        for (var b = a.network.vertexes.i; b.next();)
        {
            var c = Qu(a, b.value);
            a.tb = Math.max(c, a.tb)
        }
    }

    function Qu(a, b)
    {
        var c = 0;
        if (-1 === b.layer)
        {
            for (var d = b.jc; d.next();) var e = d.value,
                f = e.toVertex,
                e = a.linkMinLength(e),
                c = Math.max(c, Qu(a, f) + e);
            b.layer = c
        }
        else c = b.layer;
        return c
    }

    function Ou(a, b)
    {
        var c = 0;
        if (-1 === b.layer)
        {
            for (var d = b.mc; d.next();) var e = d.value,
                f = e.fromVertex,
                e = a.linkMinLength(e),
                c = Math.max(c, Ou(a, f) + e);
            b.layer = c
        }
        else c = b.layer;
        return c
    }

    function Pu(a, b)
    {
        if (!b.valid)
        {
            b.valid = !0;
            for (var c = b.jc; c.next();) Pu(a, c.value.toVertex);
            for (c = a.network.vertexes.i; c.next();) c.value.component = -1;
            for (var d = b.Re.n, e = d.length, f = 0; f < e; f++)
            {
                var h = d[f],
                    k = h.fromVertex,
                    l = h.toVertex,
                    h = a.linkMinLength(h);
                k.layer - l.layer > h && Ju(a, k, 0, -1, !0, !1)
            }
            for (Ju(a, b, 1, -1, !0, !0); 0 !== b.component;)
            {
                for (var k = 0, d = Infinity, l = 0, m = null, n = a.network.vertexes.i; n.next();)
                {
                    var p = n.value;
                    if (1 === p.component)
                    {
                        for (var q = 0, r = !1, s = p.Re.n, e = s.length, f = 0; f < e; f++)
                        {
                            var h = s[f],
                                u = h.fromVertex,
                                q = q + 1;
                            1 !== u.component && (k += 1, u = u.layer - p.layer, h = a.linkMinLength(h), d = Math.min(d, u - h))
                        }
                        h = p.Me.n;
                        e = h.length;
                        for (f = 0; f < e; f++) s = h[f].toVertex, q -= 1, 1 !== s.component ? k -= 1 : r = !0;
                        (null === m || q < l) && !r && (m = p, l = q)
                    }
                }
                if (0 < k)
                {
                    for (c.reset(); c.next();) e = c.value, 1 === e.component && (e.layer += d);
                    b.component = 0
                }
                else m.component = 0
            }
            for (c = a.network.vertexes.i; c.next();) c.value.component = -1;
            for (Ju(a, b, 1, -1, !0, !1); 0 !== b.component;)
            {
                f = 0;
                e = Infinity;
                d = 0;
                h = null;
                for (k = a.network.vertexes.i; k.next();)
                    if (l = k.value, 1 === l.component)
                    {
                        m =
                            0;
                        n = !1;
                        r = l.Re.n;
                        p = r.length;
                        for (q = 0; q < p; q++) s = r[q].fromVertex, m += 1, 1 !== s.component ? f += 1 : n = !0;
                        r = l.Me.n;
                        p = r.length;
                        for (q = 0; q < p; q++) s = r[q], u = s.toVertex, m -= 1, 1 !== u.component && (f -= 1, u = l.layer - u.layer, s = a.linkMinLength(s), e = Math.min(e, u - s));
                        (null === h || m > d) && !n && (h = l, d = m)
                    }
                if (0 > f)
                {
                    for (c.reset(); c.next();) f = c.value, 1 === f.component && (f.layer -= e);
                    b.component = 0
                }
                else h.component = 0
            }
        }
    }

    function zu(a, b, c)
    {
        return 90 === a.ba ? c && !b.rev || !c && b.rev ? 270 : 90 : 180 === a.ba ? c && !b.rev || !c && b.rev ? 0 : 180 : 270 === a.ba ? c && !b.rev || !c && b.rev ? 90 : 270 : c && !b.rev || !c && b.rev ? 180 : 0
    }
    mu.prototype.initializeIndices = function ()
    {
        switch (this.Mo)
        {
            default:
            case Ru:
                for (var a = this.network.vertexes.i; a.next();)
                {
                    var b = a.value,
                        c = b.layer;
                    b.index = this.ne[c];
                    this.ne[c]++
                }
                break;
            case pu:
                a = this.network.vertexes.i;
                for (b = this.tb; 0 <= b; b--)
                    for (a.reset(); a.next();) c = a.value, c.layer === b && -1 === c.index && Su(this, c);
                break;
            case Tu:
                for (a = this.network.vertexes.i, b = 0; b <= this.tb; b++)
                    for (a.reset(); a.next();) c = a.value, c.layer === b && -1 === c.index && Uu(this, c)
        }
    };

    function Su(a, b)
    {
        var c = b.layer;
        b.index = a.ne[c];
        a.ne[c]++;
        for (var c = b.Me.xc(), d = !0; d;)
            for (var d = !1, e = 0; e < c.length - 1; e++)
            {
                var f = c[e],
                    h = c[e + 1];
                f.portFromColOffset > h.portFromColOffset && (d = !0, c[e] = h, c[e + 1] = f)
            }
        for (e = 0; e < c.length; e++) d = c[e], d.valid && (d = d.toVertex, -1 === d.index && Su(a, d))
    }

    function Uu(a, b)
    {
        var c = b.layer;
        b.index = a.ne[c];
        a.ne[c]++;
        for (var c = b.Re.xc(), d = !0, e = 0; d;)
            for (d = !1, e = 0; e < c.length - 1; e++)
            {
                var f = c[e],
                    h = c[e + 1];
                f.portToColOffset > h.portToColOffset && (d = !0, c[e] = h, c[e + 1] = f)
            }
        for (e = 0; e < c.length; e++) d = c[e], d.valid && (d = d.fromVertex, -1 === d.index && Uu(a, d))
    }
    mu.prototype.reduceCrossings = function ()
    {
        for (var a = this.countCrossings(), b = Du(this), c = 0, d = 0, e = 0, c = 0; c < this.Lm; c++)
        {
            for (d = 0; d <= this.tb; d++) Vu(this, d, 1), Wu(this, d, 1);
            e = this.countCrossings();
            e < a && (a = e, b = Du(this));
            for (d = this.tb; 0 <= d; d--) Vu(this, d, -1), Wu(this, d, -1);
            e = this.countCrossings();
            e < a && (a = e, b = Du(this))
        }
        Eu(this, b);
        for (c = 0; c < this.Lm; c++)
        {
            for (d = 0; d <= this.tb; d++) Vu(this, d, 0), Wu(this, d, 0);
            e = this.countCrossings();
            e < a && (a = e, b = Du(this));
            for (d = this.tb; 0 <= d; d--) Vu(this, d, 0), Wu(this, d, 0);
            e = this.countCrossings();
            e < a && (a = e, b = Du(this))
        }
        Eu(this, b);
        var f = !1,
            h = c = 0,
            k = 0,
            d = 0;
        switch (this.lo)
        {
            case Xu:
                break;
            case Yu:
                for (k = a + 1;
                     (d = this.countCrossings()) < k;)
                    for (k = d, c = this.tb; 0 <= c; c--)
                        for (h = 0; h <= c; h++)
                        {
                            for (f = !0; f;)
                                for (f = !1, d = c; d >= h; d--) f = Wu(this, d, -1) || f;
                            e = this.countCrossings();
                            e >= a ? Eu(this, b) : (a = e, b = Du(this));
                            for (f = !0; f;)
                                for (f = !1, d = c; d >= h; d--) f = Wu(this, d, 1) || f;
                            e = this.countCrossings();
                            e >= a ? Eu(this, b) : (a = e, b = Du(this));
                            for (f = !0; f;)
                                for (f = !1, d = h; d <= c; d++) f = Wu(this, d, 1) || f;
                            e >= a ? Eu(this, b) : (a = e, b = Du(this));
                            for (f = !0; f;)
                                for (f = !1,
                                         d = h; d <= c; d++) f = Wu(this, d, -1) || f;
                            e >= a ? Eu(this, b) : (a = e, b = Du(this));
                            for (f = !0; f;)
                                for (f = !1, d = c; d >= h; d--) f = Wu(this, d, 0) || f;
                            e >= a ? Eu(this, b) : (a = e, b = Du(this));
                            for (f = !0; f;)
                                for (f = !1, d = h; d <= c; d++) f = Wu(this, d, 0) || f;
                            e >= a ? Eu(this, b) : (a = e, b = Du(this))
                        }
                break;
            default:
            case qu:
                for (c = this.tb, h = 0, k = a + 1;
                     (d = this.countCrossings()) < k;)
                {
                    k = d;
                    for (f = !0; f;)
                        for (f = !1, d = c; d >= h; d--) f = Wu(this, d, -1) || f;
                    e = this.countCrossings();
                    e >= a ? Eu(this, b) : (a = e, b = Du(this));
                    for (f = !0; f;)
                        for (f = !1, d = c; d >= h; d--) f = Wu(this, d, 1) || f;
                    e = this.countCrossings();
                    e >= a ? Eu(this, b) : (a = e, b = Du(this));
                    for (f = !0; f;)
                        for (f = !1, d = h; d <= c; d++) f = Wu(this, d, 1) || f;
                    e >= a ? Eu(this, b) : (a = e, b = Du(this));
                    for (f = !0; f;)
                        for (f = !1, d = h; d <= c; d++) f = Wu(this, d, -1) || f;
                    e >= a ? Eu(this, b) : (a = e, b = Du(this));
                    for (f = !0; f;)
                        for (f = !1, d = c; d >= h; d--) f = Wu(this, d, 0) || f;
                    e >= a ? Eu(this, b) : (a = e, b = Du(this));
                    for (f = !0; f;)
                        for (f = !1, d = h; d <= c; d++) f = Wu(this, d, 0) || f;
                    e >= a ? Eu(this, b) : (a = e, b = Du(this))
                }
        }
        Eu(this, b)
    };

    function Vu(a, b, c)
    {
        var d = 0,
            e = Au(a, b),
            f = a.ne[b],
            h = Iu(a, b, c);
        c = Hu(a, b, c);
        for (d = 0; d < f; d++) - 1 === c[d] && (c[d] = e[d].column), -1 === h[d] && (h[d] = e[d].column);
        for (var k = !0, l; k;)
            for (k = !1, d = 0; d < f - 1; d++)
                if (h[d + 1] < h[d] || h[d + 1] === h[d] && c[d + 1] < c[d]) k = !0, l = h[d], h[d] = h[d + 1], h[d + 1] = l, l = c[d], c[d] = c[d + 1], c[d + 1] = l, l = e[d], e[d] = e[d + 1], e[d + 1] = l;
        for (d = h = 0; d < f; d++) l = e[d], l.index = d, h += a.nodeMinColumnSpace(l, !0), l.column = h, h += 1, h += a.nodeMinColumnSpace(l, !1);
        Bu(a, b, e)
    }

    function Wu(a, b, c)
    {
        var d = Au(a, b),
            e = a.ne[b];
        c = Fu(a, b, c);
        var f = 0,
            h;
        h = [];
        for (f = 0; f < e; f++) h[f] = -1;
        var k;
        k = [];
        for (f = 0; f < e; f++) k[f] = -1;
        for (var l = !1, m = !0; m;)
            for (m = !1, f = 0; f < e - 1; f++)
            {
                var n = c[d[f].index * e + d[f + 1].index],
                    p = c[d[f + 1].index * e + d[f].index],
                    q = 0,
                    r = 0,
                    s = d[f].column,
                    u = d[f + 1].column,
                    t = a.nodeMinColumnSpace(d[f], !0),
                    x = a.nodeMinColumnSpace(d[f], !1),
                    v = a.nodeMinColumnSpace(d[f + 1], !0),
                    z = a.nodeMinColumnSpace(d[f + 1], !1),
                    t = s - t + v,
                    x = u - x + z,
                    v = v = 0,
                    A = d[f].mc.i;
                for (A.reset(); A.next();)
                    if (v = A.value, z = v.fromVertex, v.valid &&
                    z.layer === b)
                    {
                        for (v = 0; d[v] !== z;) v++;
                        v < f && (q += 2 * (f - v), r += 2 * (f + 1 - v));
                        v === f + 1 && (q += 1);
                        v > f + 1 && (q += 4 * (v - f), r += 4 * (v - (f + 1)))
                    }
                A = d[f].jc.i;
                for (A.reset(); A.next();)
                    if (v = A.value, z = v.toVertex, v.valid && z.layer === b)
                    {
                        for (v = 0; d[v] !== z;) v++;
                        v === f + 1 && (r += 1)
                    }
                A = d[f + 1].mc.i;
                for (A.reset(); A.next();)
                    if (v = A.value, z = v.fromVertex, v.valid && z.layer === b)
                    {
                        for (v = 0; d[v] !== z;) v++;
                        v < f && (q += 2 * (f + 1 - v), r += 2 * (f - v));
                        v === f && (r += 1);
                        v > f + 1 && (q += 4 * (v - (f + 1)), r += 4 * (v - f))
                    }
                A = d[f + 1].jc.i;
                for (A.reset(); A.next();)
                    if (v = A.value, z = v.toVertex, v.valid &&
                    z.layer === b)
                    {
                        for (v = 0; d[v] !== z;) v++;
                        v === f && (q += 1)
                    }
                var v = z = 0,
                    A = h[d[f].index],
                    L = k[d[f].index],
                    E = h[d[f + 1].index],
                    P = k[d[f + 1].index]; - 1 !== A && (z += Math.abs(A - s), v += Math.abs(A - x)); - 1 !== L && (z += Math.abs(L - s), v += Math.abs(L - x)); - 1 !== E && (z += Math.abs(E - u), v += Math.abs(E - t)); - 1 !== P && (z += Math.abs(P - u), v += Math.abs(P - t));
                if (r < q - .5 || r === q && p < n - .5 || r === q && p === n && v < z - .5) m = l = !0, d[f].column = x, d[f + 1].column = t, n = d[f], d[f] = d[f + 1], d[f + 1] = n
            }
        for (f = 0; f < e; f++) d[f].index = f;
        Bu(a, b, d);
        return l
    }
    mu.prototype.straightenAndPack = function ()
    {
        var a = 0,
            b = !1,
            c = 0 !== (this.dj & Zu),
            a = this.dj === ru;
        1E3 < this.network.edges.count && !a && (c = !1);
        if (c)
        {
            b = [];
            for (a = a = 0; a <= this.tb; a++) b[a] = 0;
            for (var d = 0, e = this.network.vertexes.i; e.next();)
            {
                var f = e.value,
                    a = f.layer,
                    d = f.column,
                    f = this.nodeMinColumnSpace(f, !1);
                b[a] = Math.max(b[a], d + f)
            }
            for (e.reset(); e.next();) f = e.value, a = f.layer, d = f.column, f.column = (8 * (this.Mb - b[a]) >> 1) + 8 * d;
            this.Mb *= 8
        }
        if (0 !== (this.dj & $u))
            for (b = !0; b;)
            {
                b = !1;
                for (a = this.Rf + 1; a <= this.tb; a++) b = av(this, a, 1) || b;
                for (a = this.Rf - 1; 0 <= a; a--) b = av(this, a, -1) || b;
                b = av(this, this.Rf, 0) || b
            }
        if (0 !== (this.dj & bv))
        {
            for (a = this.Rf + 1; a <= this.tb; a++) cv(this, a, 1);
            for (a = this.Rf - 1; 0 <= a; a--) cv(this, a, -1);
            cv(this, this.Rf, 0)
        }
        c && (dv(this, -1), dv(this, 1));
        if (0 !== (this.dj & $u))
            for (b = !0; b;)
            {
                b = !1;
                b = av(this, this.Rf, 0) || b;
                for (a = this.Rf + 1; a <= this.tb; a++) b = av(this, a, 0) || b;
                for (a = this.Rf - 1; 0 <= a; a--) b = av(this, a, 0) || b
            }
    };

    function av(a, b, c)
    {
        for (var d = !1; ev(a, b, c);) d = !0;
        return d
    }

    function ev(a, b, c)
    {
        var d = 0,
            e = Au(a, b),
            f = a.ne[b],
            h = Hu(a, b, -1);
        if (0 < c)
            for (d = 0; d < f; d++) h[d] = -1;
        var k = Hu(a, b, 1);
        if (0 > c)
            for (d = 0; d < f; d++) k[d] = -1;
        for (var l = !1, m = !0; m;)
            for (m = !1, d = 0; d < f; d++)
            {
                var n = e[d].column,
                    p = a.nodeMinColumnSpace(e[d], !0),
                    q = a.nodeMinColumnSpace(e[d], !1),
                    r = 0,
                    r = 0 > d - 1 || n - e[d - 1].column - 1 > p + a.nodeMinColumnSpace(e[d - 1], !1) ? n - 1 : n,
                    p = 0,
                    p = d + 1 >= f || e[d + 1].column - n - 1 > q + a.nodeMinColumnSpace(e[d + 1], !0) ? n + 1 : n,
                    s = q = 0,
                    u = 0,
                    t = 0,
                    x = 0,
                    v = 0;
                if (0 >= c)
                    for (var z = e[d].mc.i; z.next();)
                    {
                        var v = z.value,
                            A = v.fromVertex;
                        v.valid &&
                        A.layer !== b && (t = Cu(v), x = v.portFromColOffset, v = v.portToColOffset, A = A.column, q += (Math.abs(n + v - (A + x)) + 1) * t, s += (Math.abs(r + v - (A + x)) + 1) * t, u += (Math.abs(p + v - (A + x)) + 1) * t)
                    }
                if (0 <= c)
                    for (z = e[d].jc.i; z.next();) v = z.value, A = v.toVertex, v.valid && A.layer !== b && (t = Cu(v), x = v.portFromColOffset, v = v.portToColOffset, A = A.column, q += (Math.abs(n + x - (A + v)) + 1) * t, s += (Math.abs(r + x - (A + v)) + 1) * t, u += (Math.abs(p + x - (A + v)) + 1) * t);
                v = x = t = 0;
                z = h[e[d].index];
                A = k[e[d].index]; - 1 !== z && (t += Math.abs(z - n), x += Math.abs(z - r), v += Math.abs(z - p)); - 1 !== A &&
            (t += Math.abs(A - n), x += Math.abs(A - r), v += Math.abs(A - p));
                if (s < q || s === q && x < t) m = l = !0, e[d].column = r;
                else if (u < q || u === q && v < t) m = l = !0, e[d].column = p
            }
        Bu(a, b, e);
        a.normalize();
        return l
    }

    function cv(a, b, c)
    {
        var d = 0,
            e = Au(a, b),
            f = a.ne[b],
            h = Iu(a, b, c);
        c = [];
        for (d = 0; d < f; d++) c[d] = h[d];
        for (h = !0; h;)
            for (h = !1, d = 0; d < f; d++)
            {
                var k = e[d].column,
                    l = a.nodeMinColumnSpace(e[d], !0),
                    m = a.nodeMinColumnSpace(e[d], !1),
                    n = 0,
                    p = 0,
                    q = 0,
                    q = p = 0; - 1 === c[d] ? 0 === d && d === f - 1 ? n = k : 0 === d ? (p = e[d + 1].column, n = p - k === m + a.nodeMinColumnSpace(e[d + 1], !0) ? k - 1 : k) : d === f - 1 ? (q = e[d - 1].column, n = k - q === l + a.nodeMinColumnSpace(e[d - 1], !1) ? k + 1 : k) : (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d +
            1], !0) - m - 1, n = (q + p) / 2 | 0) : 0 === d && d === f - 1 ? n = c[d] : 0 === d ? (p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, n = Math.min(c[d], p)) : d === f - 1 ? (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, n = Math.max(c[d], q)) : (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, q < c[d] && c[d] < p ? n = c[d] : q >= c[d] ? n = q : p <= c[d] && (n = p));
                n !== k && (h = !0, e[d].column = n)
            }
        Bu(a, b, e);
        a.normalize()
    }

    function fv(a, b)
    {
        for (var c = !0, d = a.network.vertexes.i; d.next();)
        {
            var e = d.value,
                f = a.nodeMinColumnSpace(e, !0),
                h = a.nodeMinColumnSpace(e, !1);
            if (e.column - f <= b && e.column + h >= b)
            {
                c = !1;
                break
            }
        }
        e = !1;
        if (c)
            for (d.reset(); d.next();) c = d.value, c.column > b && (c.column -= 1, e = !0);
        return e
    }

    function gv(a, b)
    {
        for (var c = b, c = b + 1, d = 0, e = [], f = [], d = 0; d <= a.tb; d++) e[d] = !1, f[d] = !1;
        for (var h = a.network.vertexes.i; h.next();)
        {
            var d = h.value,
                k = d.column - a.nodeMinColumnSpace(d, !0),
                l = d.column + a.nodeMinColumnSpace(d, !1);
            k <= b && l >= b && (e[d.layer] = !0);
            k <= c && l >= c && (f[d.layer] = !0)
        }
        k = !0;
        c = !1;
        for (d = 0; d <= a.tb; d++) k = k && !(e[d] && f[d]);
        if (k)
            for (h.reset(); h.next();) e = h.value, e.column > b && (e.column -= 1, c = !0);
        return c
    }

    function dv(a, b)
    {
        for (var c = 0; c <= a.Mb; c++)
            for (; fv(a, c););
        a.normalize();
        for (c = 0; c < a.Mb; c++)
            for (; gv(a, c););
        a.normalize();
        var c = 0,
            d, e = 0,
            f = 0,
            h = 0;
        if (0 < b)
            for (c = 0; c <= a.Mb; c++)
                for (d = Du(a), e = Gu(a), f = e + 1; e < f;) f = e, hv(a, c, 1), h = Gu(a), h > e ? Eu(a, d) : h < e && (e = h, d = Du(a));
        if (0 > b)
            for (c = a.Mb; 0 <= c; c--)
                for (d = Du(a), e = Gu(a), f = e + 1; e < f;) f = e, hv(a, c, -1), h = Gu(a), h > e ? Eu(a, d) : h < e && (e = h, d = Du(a));
        a.normalize()
    }

    function hv(a, b, c)
    {
        a.Bg = 0;
        for (var d = a.network.vertexes.i; d.next();) d.value.component = -1;
        if (0 < c)
            for (d.reset(); d.next();)
            {
                var e = d.value;
                e.column - a.nodeMinColumnSpace(e, !0) <= b && (e.component = a.Bg)
            }
        if (0 > c)
            for (d.reset(); d.next();) e = d.value, e.column + a.nodeMinColumnSpace(e, !1) >= b && (e.component = a.Bg);
        a.Bg++;
        for (d.reset(); d.next();) b = d.value, -1 === b.component && (Ku(a, b, a.Bg, -1, !0, !0), a.Bg++);
        var f = 0;
        b = [];
        for (f = 0; f < a.Bg * a.Bg; f++) b[f] = !1;
        e = [];
        for (f = 0; f < (a.tb + 1) * (a.Mb + 1); f++) e[f] = -1;
        for (d.reset(); d.next();)
            for (var f =
                d.value, h = f.layer, k = Math.max(0, f.column - a.nodeMinColumnSpace(f, !0)), l = Math.min(a.Mb, f.column + a.nodeMinColumnSpace(f, !1)); k <= l; k++) e[h * (a.Mb + 1) + k] = f.component;
        for (f = 0; f <= a.tb; f++)
        {
            if (0 < c)
                for (k = 0; k < a.Mb; k++) - 1 !== e[f * (a.Mb + 1) + k] && -1 !== e[f * (a.Mb + 1) + k + 1] && e[f * (a.Mb + 1) + k] !== e[f * (a.Mb + 1) + k + 1] && (b[e[f * (a.Mb + 1) + k] * a.Bg + e[f * (a.Mb + 1) + k + 1]] = !0);
            if (0 > c)
                for (k = a.Mb; 0 < k; k--) - 1 !== e[f * (a.Mb + 1) + k] && -1 !== e[f * (a.Mb + 1) + k - 1] && e[f * (a.Mb + 1) + k] !== e[f * (a.Mb + 1) + k - 1] && (b[e[f * (a.Mb + 1) + k] * a.Bg + e[f * (a.Mb + 1) + k - 1]] = !0)
        }
        e = [];
        for (f =
                 0; f < a.Bg; f++) e[f] = !0;
        h = new H("number");
        h.add(0);
        for (l = 0; 0 !== h.count;)
            if (l = h.n[h.count - 1], h.dd(h.count - 1), e[l])
                for (e[l] = !1, f = 0; f < a.Bg; f++) b[l * a.Bg + f] && h.Rd(0, f);
        if (0 < c)
            for (d.reset(); d.next();) a = d.value, e[a.component] && (a.column -= 1);
        if (0 > c)
            for (d.reset(); d.next();) c = d.value, e[c.component] && (c.column += 1)
    }
    mu.prototype.commitLayout = function ()
    {
        if (this.Cq)
            for (var a = yu(this, !0), b = yu(this, !1), c = this.network.edges.i; c.next();)
            {
                var d = c.value.link;
                null !== d && (d.Bb = a, d.Cb = b)
            }
        this.commitNodes();
        this.oA();
        this.xu && this.commitLinks()
    };

    function yu(a, b)
    {
        return 270 === a.ba ? b ? Gc : Jc : 90 === a.ba ? b ? Jc : Gc : 180 === a.ba ? b ? Hc : Ic : b ? Ic : Hc
    }
    mu.prototype.commitNodes = function ()
    {
        this.xg = [];
        this.Qf = [];
        this.Pf = [];
        this.Pb = [];
        for (var a = 0; a <= this.tb; a++) this.xg[a] = 0, this.Qf[a] = 0, this.Pf[a] = 0, this.Pb[a] = 0;
        for (a = this.network.vertexes.i; a.next();)
        {
            var b = a.value,
                c = b.layer;
            this.xg[c] = Math.max(this.xg[c], this.nodeMinLayerSpace(b, !0));
            this.Qf[c] = Math.max(this.Qf[c], this.nodeMinLayerSpace(b, !1))
        }
        for (var b = 0, d = this.Mm, c = 0; c <= this.tb; c++)
        {
            var e = d;
            0 >= this.xg[c] + this.Qf[c] && (e = 0);
            0 < c && (b += e / 2);
            90 === this.ba || 0 === this.ba ? (b += this.Qf[c], this.Pf[c] = b, b += this.xg[c]) :
                (b += this.xg[c], this.Pf[c] = b, b += this.Qf[c]);
            c < this.tb && (b += e / 2);
            this.Pb[c] = b
        }
        d = b;
        b = this.Nd;
        for (c = 0; c <= this.tb; c++) 270 === this.ba ? this.Pf[c] = b.y + this.Pf[c] : 90 === this.ba ? (this.Pf[c] = b.y + d - this.Pf[c], this.Pb[c] = d - this.Pb[c]) : 180 === this.ba ? this.Pf[c] = b.x + this.Pf[c] : (this.Pf[c] = b.x + d - this.Pf[c], this.Pb[c] = d - this.Pb[c]);
        a.reset();
        for (d = e = Infinity; a.next();)
        {
            var c = a.value,
                f = c.layer,
                h = c.column | 0,
                k = 0,
                l = 0;
            270 === this.ba || 90 === this.ba ? (k = b.x + this.Xd * h, l = this.Pf[f]) : (k = this.Pf[f], l = b.y + this.Xd * h);
            c.la = k;
            c.ra = l;
            e = Math.min(c.x, e);
            d = Math.min(c.y, d)
        }
        e = b.x - e;
        b = b.y - d;
        this.mC = new y(e, b);
        for (a.reset(); a.next();) c = a.value, c.x += e, c.y += b, c.commit()
    };
    mu.prototype.oA = function ()
    {
        for (var a = 0, b = this.Mm, c = 0; c <= this.tb; c++) a += this.xg[c], a += this.Qf[c];
        for (var a = a + this.tb * b, b = [], c = this.Xd * this.Mb, d = this.RI; 0 <= d; d--) 270 === this.ba ? 0 === d ? b.push(new B(0, 0, c, Math.abs(this.Pb[0]))) : b.push(new B(0, this.Pb[d - 1], c, Math.abs(this.Pb[d - 1] - this.Pb[d]))) : 90 === this.ba ? 0 === d ? b.push(new B(0, this.Pb[0], c, Math.abs(this.Pb[0] - a))) : b.push(new B(0, this.Pb[d], c, Math.abs(this.Pb[d - 1] - this.Pb[d]))) : 180 === this.ba ? 0 === d ? b.push(new B(0, 0, Math.abs(this.Pb[0]), c)) : b.push(new B(this.Pb[d -
        1], 0, Math.abs(this.Pb[d - 1] - this.Pb[d]), c)) : 0 === d ? b.push(new B(this.Pb[0], 0, Math.abs(this.Pb[0] - a), c)) : b.push(new B(this.Pb[d], 0, Math.abs(this.Pb[d - 1] - this.Pb[d]), c));
        this.commitLayers(b, this.mC)
    };
    mu.prototype.commitLayers = function () {};
    mu.prototype.commitLinks = function ()
    {
        for (var a = this.network.edges.i, b; a.next();) b = a.value.link, null !== b && (b.om(), b.Kp(), b.qj());
        for (a.reset(); a.next();) b = a.value.link, null !== b && b.eo();
        for (a.reset(); a.next();)
        {
            var c = a.value;
            b = c.link;
            if (null !== b)
            {
                b.om();
                var d = b,
                    e = d.Y,
                    f = d.Z,
                    h = d.kc,
                    k = d.Ic;
                if (null !== e)
                {
                    var l = e.findVisibleNode();
                    null !== l && l !== e && (e = l, h = l.port)
                }
                if (null !== f)
                {
                    var m = f.findVisibleNode();
                    null !== m && m !== f && (f = m, k = m.port)
                }
                var n = b.computeSpot(!0, h),
                    p = b.computeSpot(!1, k),
                    q = c.fromVertex,
                    r = c.toVertex;
                if (c.valid)
                {
                    if (b.nf === tj && 4 === b.qa)
                    {
                        if (c.rev) var s = e,
                            e = f,
                            f = s,
                            u = h,
                            h = k,
                            k = u;
                        if (q.column === r.column)
                        {
                            var t = b.getLinkPoint(e, h, n, !0, !1, f, k),
                                x = b.getLinkPoint(f, k, p, !1, !1, e, h);
                            t.I() || t.set(e.U.Sl);
                            x.I() || x.set(f.U.Sl);
                            b.Kp();
                            b.oj(t.x, t.y);
                            b.oj((2 * t.x + x.x) / 3, (2 * t.y + x.y) / 3);
                            b.oj((t.x + 2 * x.x) / 3, (t.y + 2 * x.y) / 3);
                            b.oj(x.x, x.y)
                        }
                        else
                        {
                            var v = !1,
                                z = !1;
                            null !== h && n === yb && (v = !0);
                            null !== k && p === yb && (z = !0);
                            if (v || z)
                            {
                                var A = b.l(0).x,
                                    L = b.l(0).y,
                                    E = b.l(1).x,
                                    P = b.l(1).y,
                                    $ = b.l(2).x,
                                    S = b.l(2).y,
                                    ba = b.l(3).x,
                                    ha = b.l(3).y;
                                if (v)
                                {
                                    90 === this.ba ||
                                    270 === this.ba ? (E = A, P = (L + ha) / 2) : (E = (A + ba) / 2, P = L);
                                    b.ca(1, E, P);
                                    var ya = b.getLinkPoint(e, h, n, !0, !1, f, k);
                                    ya.I() || ya.set(e.U.Sl);
                                    b.ca(0, ya.x, ya.y)
                                }
                                z && (90 === this.ba || 270 === this.ba ? ($ = ba, S = (L + ha) / 2) : ($ = (A + ba) / 2, S = ha), b.ca(2, $, S), ya = b.getLinkPoint(f, k, p, !1, !1, e, h), ya.I() || ya.set(f.U.Sl), b.ca(3, ya.x, ya.y))
                            }
                        }
                    }
                    b.qj()
                }
                else if (q.layer === r.layer) b.qj();
                else
                {
                    var Ga = !1,
                        eb = !1,
                        va = 0,
                        U = b.bu + 1;
                    if (b.ac) eb = !0, va = b.qa, 4 < va && b.points.removeRange(2, va - 3);
                    else if (b.nf === tj) Ga = !0, va = b.qa, 4 < va && b.points.removeRange(2, va - 3), U = 2;
                    else
                    {
                        var va = b.qa,
                            sb = n === yb,
                            Lb = p === yb;
                        2 < va && sb && Lb ? b.points.removeRange(1, va - 2) : 3 < va && sb && !Lb ? b.points.removeRange(1, va - 3) : 3 < va && !sb && Lb ? b.points.removeRange(2, va - 2) : 4 < va && !sb && !Lb && b.points.removeRange(2, va - 3)
                    }
                    var Oa, Lc;
                    if (c.rev)
                    {
                        for (var Ma = 0; null !== r && q !== r;)
                        {
                            Lc = Oa = null;
                            for (var dg = r.mc.i; dg.next();)
                            {
                                var eg = dg.value;
                                if (eg.link === c.link && (Oa = eg.fromVertex, Lc = eg.toVertex, null === Oa.vd)) break
                            }
                            if (Oa !== q)
                                if (fb = b.l(U - 1).x, pb = b.l(U - 1).y, na = Oa.la, ja = Oa.ra, eb) 180 === this.ba || 0 === this.ba ? 2 === U ? (b.w(U++, fb, pb),
                                    b.w(U++, fb, ja)) : (Hd = null !== Lc ? Lc.ra : pb, Hd !== ja && (Za = this.Pb[Oa.layer - 1], b.w(U++, Za, pb), b.w(U++, Za, ja))) : 2 === U ? (b.w(U++, fb, pb), b.w(U++, na, pb)) : (Gf = null !== Lc ? Lc.la : fb, Gf !== na && (Za = this.Pb[Oa.layer - 1], b.w(U++, fb, Za), b.w(U++, na, Za)));
                                else if (2 === U)
                                    if (Ia = Math.max(10, this.xg[r.layer]), kb = Math.max(10, this.Qf[r.layer]), Ga) 180 === this.ba ? na <= r.O.x ? (Ma = r.O.x, b.w(U++, Ma - Ia, ja), b.w(U++, Ma, ja), b.w(U++, Ma + kb, ja)) : (b.w(U++, na - Ia, ja), b.w(U++, na, ja), b.w(U++, na + kb, ja)) : 90 === this.ba ? ja >= r.O.bottom ? (Ma = r.O.y + r.O.height,
                                        b.w(U++, na, Ma + kb), b.w(U++, na, Ma), b.w(U++, na, Ma - Ia)) : (b.w(U++, na, ja + kb), b.w(U++, na, ja), b.w(U++, na, ja - Ia)) : 270 === this.ba ? ja <= r.O.y ? (Ma = r.O.y, b.w(U++, na, Ma - Ia), b.w(U++, na, Ma), b.w(U++, na, Ma + kb)) : (b.w(U++, na, ja - Ia), b.w(U++, na, ja), b.w(U++, na, ja + kb)) : 0 === this.ba && (na >= r.O.right ? (Ma = r.O.x + r.O.width, b.w(U++, Ma + kb, ja), b.w(U++, Ma, ja), b.w(U++, Ma - Ia, ja)) : (b.w(U++, na + kb, ja), b.w(U++, na, ja), b.w(U++, na - Ia, ja)));
                                    else
                                    {
                                        b.w(U++, fb, pb);
                                        var td = 0;
                                        if (180 === this.ba || 0 === this.ba)
                                        {
                                            if (180 === this.ba ? na >= r.O.right : na <= r.O.x) td =
                                                (0 === this.ba ? -Ia : kb) / 2;
                                            b.w(U++, fb + td, ja)
                                        }
                                        else
                                        {
                                            if (270 === this.ba ? ja >= r.O.bottom : ja <= r.O.y) td = (90 === this.ba ? -Ia : kb) / 2;
                                            b.w(U++, na, pb + td)
                                        }
                                        b.w(U++, na, ja)
                                    }
                                else Ia = Math.max(10, this.xg[Oa.layer]), kb = Math.max(10, this.Qf[Oa.layer]), 180 === this.ba ? (Ga && b.w(U++, na - Ia, ja), b.w(U++, na, ja), Ga && b.w(U++, na + kb, ja)) : 90 === this.ba ? (Ga && b.w(U++, na, ja + kb), b.w(U++, na, ja), Ga && b.w(U++, na, ja - Ia)) : 270 === this.ba ? (Ga && b.w(U++, na, ja - Ia), b.w(U++, na, ja), Ga && b.w(U++, na, ja + kb)) : (Ga && b.w(U++, na + kb, ja), b.w(U++, na, ja), Ga && b.w(U++, na - Ia,
                                        ja));
                            r = Oa
                        }
                        if (null === k || n !== yb || eb)
                            if (fb = b.l(U - 1).x, pb = b.l(U - 1).y, na = b.l(U).x, ja = b.l(U).y, eb)
                            {
                                var ud = this.Qf[q.layer],
                                    Mc = 0;
                                180 === this.ba || 0 === this.ba ? (Mc = pb, Mc >= q.O.y && Mc <= q.O.bottom && (180 === this.ba ? na >= q.O.x : na <= q.O.right) && (Ma = q.la + (180 === this.ba ? -ud : ud), Mc = Mc < q.O.y + q.O.height / 2 ? q.O.y - this.Xd / 2 : q.O.bottom + this.Xd / 2, b.w(U++, Ma, pb), b.w(U++, Ma, Mc)), b.w(U++, na, Mc)) : (Mc = fb, Mc >= q.O.x && Mc <= q.O.right && (270 === this.ba ? ja >= q.O.y : ja <= q.O.bottom) && (Ma = q.ra + (270 === this.ba ? -ud : ud), Mc = Mc < q.O.x + q.O.width / 2 ? q.O.x -
                                    this.Xd / 2 : q.O.right + this.Xd / 2, b.w(U++, fb, Ma), b.w(U++, Mc, Ma)), b.w(U++, Mc, ja));
                                b.w(U++, na, ja)
                            }
                            else if (Ga) Ia = Math.max(10, this.xg[q.layer]), kb = Math.max(10, this.Qf[q.layer]), 180 === this.ba && na >= q.O.x ? (Ma = q.O.x + q.O.width, b.ca(U - 2, Ma, pb), b.ca(U - 1, Ma + kb, pb)) : 90 === this.ba && ja <= q.O.bottom ? (Ma = q.O.y, b.ca(U - 2, fb, Ma), b.ca(U - 1, fb, Ma - Ia)) : 270 === this.ba && ja >= q.O.y ? (Ma = q.O.y + q.O.height, b.ca(U - 2, fb, Ma), b.ca(U - 1, fb, Ma + kb)) : 0 === this.ba && na <= q.O.right && (Ma = q.O.x, b.ca(U - 2, Ma, pb), b.ca(U - 1, Ma - Ia, pb));
                            else
                            {
                                Ia = Math.max(10,
                                    this.xg[q.layer]);
                                kb = Math.max(10, this.Qf[q.layer]);
                                td = 0;
                                if (180 === this.ba || 0 === this.ba)
                                {
                                    if (180 === this.ba ? na <= q.O.x : na >= q.O.right) td = (0 === this.ba ? kb : -Ia) / 2;
                                    b.w(U++, na + td, pb)
                                }
                                else
                                {
                                    if (270 === this.ba ? ja <= q.O.y : ja >= q.O.bottom) td = (90 === this.ba ? kb : -Ia) / 2;
                                    b.w(U++, fb, ja + td)
                                }
                                b.w(U++, na, ja)
                            }
                    }
                    else
                    {
                        for (; null !== q && q !== r;)
                        {
                            Lc = Oa = null;
                            for (var rh = q.jc.i; rh.next();)
                            {
                                var Xe = rh.value;
                                if (Xe.link === c.link && (Oa = Xe.toVertex, Lc = Xe.fromVertex, null !== Lc.vd && (Lc = null), null === Oa.vd)) break
                            }
                            var fb = 0,
                                pb = 0,
                                na = 0,
                                ja = 0,
                                Za = 0,
                                Ia = 0,
                                kb = 0;
                            if (Oa !== r)
                                if (fb = b.l(U - 1).x, pb = b.l(U - 1).y, na = Oa.la, ja = Oa.ra, eb)
                                    if (180 === this.ba || 0 === this.ba)
                                    {
                                        var Hd = null !== Lc ? Lc.ra : pb;
                                        Hd !== ja && (Za = this.Pb[Oa.layer], 2 === U && (Za = 0 === this.ba ? Math.max(Za, fb) : Math.min(Za, fb)), b.w(U++, Za, pb), b.w(U++, Za, ja))
                                    }
                                    else
                                    {
                                        var Gf = null !== Lc ? Lc.la : fb;
                                        Gf !== na && (Za = this.Pb[Oa.layer], 2 === U && (Za = 90 === this.ba ? Math.max(Za, pb) : Math.min(Za, pb)), b.w(U++, fb, Za), b.w(U++, na, Za))
                                    }
                                else Ia = Math.max(10, this.xg[Oa.layer]), kb = Math.max(10, this.Qf[Oa.layer]), 180 === this.ba ? (b.w(U++, na + kb, ja), Ga && b.w(U++,
                                    na, ja), b.w(U++, na - Ia, ja)) : 90 === this.ba ? (b.w(U++, na, ja - Ia), Ga && b.w(U++, na, ja), b.w(U++, na, ja + kb)) : 270 === this.ba ? (b.w(U++, na, ja + kb), Ga && b.w(U++, na, ja), b.w(U++, na, ja - Ia)) : (b.w(U++, na - Ia, ja), Ga && b.w(U++, na, ja), b.w(U++, na + kb, ja));
                            q = Oa
                        }
                        eb && (fb = b.l(U - 1).x, pb = b.l(U - 1).y, na = b.l(U).x, ja = b.l(U).y, 180 === this.ba || 0 === this.ba ? pb !== ja && (Za = 0 === this.ba ? Math.min(Math.max((na + fb) / 2, this.Pb[r.layer]), na) : Math.max(Math.min((na + fb) / 2, this.Pb[r.layer]), na), b.w(U++, Za, pb), b.w(U++, Za, ja)) : fb !== na && (Za = 90 === this.ba ? Math.min(Math.max((ja +
                            pb) / 2, this.Pb[r.layer]), ja) : Math.max(Math.min((ja + pb) / 2, this.Pb[r.layer]), ja), b.w(U++, fb, Za), b.w(U++, na, Za)))
                    }
                    if (null !== d && Ga)
                    {
                        if (null !== h)
                        {
                            if (n === yb)
                            {
                                var qe = b.l(0),
                                    Yd = b.l(2);
                                qe.L(Yd) || b.ca(1, (qe.x + Yd.x) / 2, (qe.y + Yd.y) / 2)
                            }
                            ya = b.getLinkPoint(e, h, yb, !0, !1, f, k);
                            ya.I() || ya.set(e.U.Sl);
                            b.ca(0, ya.x, ya.y)
                        }
                        null !== k && (p === yb && (qe = b.l(b.qa - 1), Yd = b.l(b.qa - 3), qe.L(Yd) || b.ca(b.qa - 2, (qe.x + Yd.x) / 2, (qe.y + Yd.y) / 2)), ya = b.getLinkPoint(f, k, yb, !1, !1, e, h), ya.I() || ya.set(f.U.Sl), b.ca(b.qa - 1, ya.x, ya.y))
                    }
                    b.qj();
                    c.commit()
                }
            }
        }
        for (var gd =
            new H(W), sh = this.network.edges.i; sh.next();)
        {
            var Hf = sh.value.link;
            null !== Hf && Hf.ac && !gd.contains(Hf) && gd.add(Hf)
        }
        if (0 < gd.count)
            if (90 === this.ba || 270 === this.ba)
            {
                for (var Dg = 0, Db = new H(iv), Ac, Zd, th = gd.i; th.next();)
                {
                    var qb = th.value;
                    if (null !== qb && qb.ac)
                        for (var Ja = 2; Ja < qb.qa - 3; Ja++)
                            if (Ac = qb.l(Ja), Zd = qb.l(Ja + 1), jv(Ac.y, Zd.y) && !jv(Ac.x, Zd.x))
                            {
                                var Mb = new iv;
                                Mb.layer = Math.floor(Ac.y / 2);
                                var If = qb.l(0),
                                    Eg = qb.l(qb.qa - 1);
                                Mb.first = If.x * If.x + If.y;
                                Mb.ie = Eg.x * Eg.x + Eg.y;
                                Mb.Ze = Math.min(Ac.x, Zd.x);
                                Mb.ue = Math.max(Ac.x,
                                    Zd.x);
                                Mb.index = Ja;
                                Mb.link = qb;
                                if (Ja + 2 < qb.qa)
                                {
                                    var uh = qb.l(Ja - 1),
                                        gb = qb.l(Ja + 2),
                                        tc = 0;
                                    uh.y < Ac.y ? tc = gb.y < Ac.y ? 3 : Ac.x < Zd.x ? 2 : 1 : uh.y > Ac.y && (tc = gb.y > Ac.y ? 0 : Zd.x < Ac.x ? 2 : 1);
                                    Mb.xi = tc
                                }
                                Db.add(Mb)
                            }
                }
                if (1 < Db.count)
                {
                    Db.sort(this.nG);
                    for (var Vb = 0; Vb < Db.count;)
                    {
                        for (var re = Db.n[Vb].layer, uc = Vb + 1; uc < Db.count && Db.n[uc].layer === re;) uc++;
                        if (1 < uc - Vb)
                            for (var vc = Vb; vc < uc;)
                            {
                                for (var rb = Db.n[vc].ue, kc = Vb + 1; kc < uc && Db.n[kc].Ze < rb;) rb = Math.max(rb, Db.n[kc].ue), kc++;
                                var tb = kc - vc;
                                if (1 < tb)
                                {
                                    Db.Eq(this.uy, vc, vc + tb);
                                    for (var Bc = 1, bb = Db.n[vc].ie,
                                             Ja = vc; Ja < kc; Ja++)
                                    {
                                        var Qa = Db.n[Ja];
                                        Qa.ie !== bb && (Bc++, bb = Qa.ie)
                                    }
                                    Db.Eq(this.mG, vc, vc + tb);
                                    for (var Ib = 1, bb = Db.n[vc].first, Ja = vc; Ja < kc; Ja++) Qa = Db.n[Ja], Qa.first !== bb && (Ib++, bb = Qa.first);
                                    var vd = !0,
                                        fg = Ib;
                                    Bc < Ib ? (vd = !1, fg = Bc, bb = Db.n[vc].ie, Db.Eq(this.uy, vc, vc + tb)) : bb = Db.n[vc].first;
                                    for (var Ye = 0, Ja = vc; Ja < kc; Ja++)
                                    {
                                        Qa = Db.n[Ja];
                                        (vd ? Qa.first : Qa.ie) !== bb && (Ye++, bb = vd ? Qa.first : Qa.ie);
                                        qb = Qa.link;
                                        Ac = qb.l(Qa.index);
                                        Zd = qb.l(Qa.index + 1);
                                        var gg = this.MF * (Ye - (fg - 1) / 2);
                                        Dg++;
                                        qb.om();
                                        qb.ca(Qa.index, Ac.x, Ac.y + gg);
                                        qb.ca(Qa.index +
                                            1, Zd.x, Zd.y + gg);
                                        qb.qj()
                                    }
                                }
                                vc = kc
                            }
                        Vb = uc
                    }
                }
            }
            else
            {
                for (var uj = 0, Nb = new H(iv), Cc, wc, hd = gd.i; hd.next();)
                {
                    var lb = hd.value;
                    if (null !== lb && lb.ac)
                        for (var Ob = 2; Ob < lb.qa - 3; Ob++)
                            if (Cc = lb.l(Ob), wc = lb.l(Ob + 1), jv(Cc.x, wc.x) && !jv(Cc.y, wc.y))
                            {
                                var se = new iv;
                                se.layer = Math.floor(Cc.x / 2);
                                var ub = lb.l(0),
                                    $d = lb.l(lb.qa - 1);
                                se.first = ub.x + ub.y * ub.y;
                                se.ie = $d.x + $d.y * $d.y;
                                se.Ze = Math.min(Cc.y, wc.y);
                                se.ue = Math.max(Cc.y, wc.y);
                                se.index = Ob;
                                se.link = lb;
                                if (Ob + 2 < lb.qa)
                                {
                                    var vh = lb.l(Ob - 1),
                                        wh = lb.l(Ob + 2),
                                        Fg = 0;
                                    vh.x < Cc.x ? Fg = wh.x < Cc.x ? 3 : Cc.y < wc.y ?
                                        2 : 1 : vh.x > Cc.x && (Fg = wh.x > Cc.x ? 0 : wc.y < Cc.y ? 2 : 1);
                                    se.xi = Fg
                                }
                                Nb.add(se)
                            }
                }
                if (1 < Nb.count)
                {
                    Nb.sort(this.nG);
                    for (var id = 0; id < Nb.count;)
                    {
                        for (var Id = Nb.n[id].layer, cc = id + 1; cc < Nb.count && Nb.n[cc].layer === Id;) cc++;
                        if (1 < cc - id)
                            for (var vb = id; vb < cc;)
                            {
                                for (var wd = Nb.n[vb].ue, jb = id + 1; jb < cc && Nb.n[jb].Ze < wd;) wd = Math.max(wd, Nb.n[jb].ue), jb++;
                                var dc = jb - vb;
                                if (1 < dc)
                                {
                                    Nb.Eq(this.uy, vb, vb + dc);
                                    for (var ii = 1, Yc = Nb.n[vb].ie, Ob = vb; Ob < jb; Ob++)
                                    {
                                        var Eb = Nb.n[Ob];
                                        Eb.ie !== Yc && (ii++, Yc = Eb.ie)
                                    }
                                    Nb.Eq(this.mG, vb, vb + dc);
                                    for (var te = 1, Yc = Nb.n[vb].first,
                                             Ob = vb; Ob < jb; Ob++) Eb = Nb.n[Ob], Eb.first !== Yc && (te++, Yc = Eb.first);
                                    var Ze = !0,
                                        Zc = te;
                                    ii < te ? (Ze = !1, Zc = ii, Yc = Nb.n[vb].ie, Nb.Eq(this.uy, vb, vb + dc)) : Yc = Nb.n[vb].first;
                                    for (var Jf = 0, Ob = vb; Ob < jb; Ob++)
                                    {
                                        Eb = Nb.n[Ob];
                                        (Ze ? Eb.first : Eb.ie) !== Yc && (Jf++, Yc = Ze ? Eb.first : Eb.ie);
                                        lb = Eb.link;
                                        Cc = lb.l(Eb.index);
                                        wc = lb.l(Eb.index + 1);
                                        var Gg = this.MF * (Jf - (Zc - 1) / 2);
                                        uj++;
                                        lb.om();
                                        lb.ca(Eb.index, Cc.x + Gg, Cc.y);
                                        lb.ca(Eb.index + 1, wc.x + Gg, wc.y);
                                        lb.qj()
                                    }
                                }
                                vb = jb
                            }
                        id = cc
                    }
                }
            }
    };
    mu.prototype.nG = function (a, b)
    {
        return a instanceof iv && b instanceof iv && a !== b ? a.layer < b.layer ? -1 : a.layer > b.layer ? 1 : a.Ze < b.Ze ? -1 : a.Ze > b.Ze ? 1 : a.ue < b.ue ? -1 : a.ue > b.ue ? 1 : 0 : 0
    };
    mu.prototype.mG = function (a, b)
    {
        return a instanceof iv && b instanceof iv && a !== b ? a.first < b.first ? -1 : a.first > b.first || a.xi < b.xi ? 1 : a.xi > b.xi || a.Ze < b.Ze ? -1 : a.Ze > b.Ze ? 1 : a.ue < b.ue ? -1 : a.ue > b.ue ? 1 : 0 : 0
    };
    mu.prototype.uy = function (a, b)
    {
        return a instanceof iv && b instanceof iv && a !== b ? a.ie < b.ie ? -1 : a.ie > b.ie || a.xi < b.xi ? 1 : a.xi > b.xi || a.Ze < b.Ze ? -1 : a.Ze > b.Ze ? 1 : a.ue < b.ue ? -1 : a.ue > b.ue ? 1 : 0 : 0
    };

    function jv(a, b)
    {
        var c = a - b;
        return -1 < c && 1 > c
    }

    function Au(a, b)
    {
        var c, d = a.ne[b];
        if (d >= a.ih.length)
        {
            c = [];
            for (var e = 0; e < a.ih.length; e++) c[e] = a.ih[e];
            a.ih = c
        }
        void 0 === a.ih[d] || null === a.ih[d] ? c = [] : (c = a.ih[d], a.ih[d] = null);
        d = a.Cs[b];
        for (e = 0; e < d.length; e++)
        {
            var f = d[e];
            c[f.index] = f
        }
        return c
    }

    function Bu(a, b, c)
    {
        a.ih[a.ne[b]] = c
    }
    w.defineProperty(mu,
        {
            layerSpacing: "layerSpacing"
        }, function ()
        {
            return this.Mm
        }, function (a)
        {
            this.Mm !== a && (w.j(a, "number", mu, "layerSpacing"), 0 <= a && (this.Mm = a, this.J()))
        });
    w.defineProperty(mu,
        {
            KK: "columnSpacing"
        }, function ()
        {
            return this.Xd
        }, function (a)
        {
            this.Xd !== a && (w.j(a, "number", mu, "columnSpacing"), 0 < a && (this.Xd = a, this.J()))
        });
    w.defineProperty(mu,
        {
            direction: "direction"
        }, function ()
        {
            return this.ba
        }, function (a)
        {
            this.ba !== a && (w.j(a, "number", mu, "direction"), 0 === a || 90 === a || 180 === a || 270 === a ? (this.ba = a, this.J()) : w.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))
        });
    w.defineProperty(mu,
        {
            angle: "angle"
        }, function ()
        {
            return this.direction
        }, function (a)
        {
            this.direction = a
        });
    w.defineProperty(mu,
        {
            JH: "cycleRemoveOption"
        }, function ()
        {
            return this.wo
        }, function (a)
        {
            this.wo !== a && (w.ob(a, mu, mu, "cycleRemoveOption"), a === tu || a === nu) && (this.wo = a, this.J())
        });
    w.defineProperty(mu,
        {
            II: "layeringOption"
        }, function ()
        {
            return this.Wo
        }, function (a)
        {
            this.Wo !== a && (w.ob(a, mu, mu, "layeringOption"), a === ou || a === Lu || a === Nu) && (this.Wo = a, this.J())
        });
    w.defineProperty(mu,
        {
            vI: "initializeOption"
        }, function ()
        {
            return this.Mo
        }, function (a)
        {
            this.Mo !== a && (w.ob(a, mu, mu, "initializeOption"), a === pu || a === Tu || a === Ru) && (this.Mo = a, this.J())
        });
    w.defineProperty(mu,
        {
            nL: "iterations"
        }, function ()
        {
            return this.Lm
        }, function (a)
        {
            this.Lm !== a && (w.Ad(a, su, "iterations"), 0 <= a && (this.Lm = a, this.J()))
        });
    w.defineProperty(mu,
        {
            oH: "aggressiveOption"
        }, function ()
        {
            return this.lo
        }, function (a)
        {
            this.lo !== a && (w.ob(a, mu, mu, "aggressiveOption"), a === Xu || a === qu || a === Yu) && (this.lo = a, this.J())
        });
    w.defineProperty(mu,
        {
            HL: "packOption"
        }, function ()
        {
            return this.dj
        }, function (a)
        {
            this.dj !== a && (w.j(a, "number", mu, "packOption"), 0 <= a && 8 > a && (this.dj = a, this.J()))
        });
    w.defineProperty(mu,
        {
            Cq: "setsPortSpots"
        }, function ()
        {
            return this.ci
        }, function (a)
        {
            this.ci !== a && (w.j(a, "boolean", mu, "setsPortSpots"), this.ci = a, this.J())
        });
    w.defineProperty(mu,
        {
            MF: "linkSpacing"
        }, function ()
        {
            return this.js
        }, function (a)
        {
            this.js !== a && (w.j(a, "number", mu, "linkSpacing"), 0 <= a && (this.js = a, this.J()))
        });
    w.u(mu,
        {
            RI: "maxLayer"
        }, function ()
        {
            return this.tb
        });
    w.u(mu,
        {
            tL: "maxIndex"
        }, function ()
        {
            return this.kw
        });
    w.u(mu,
        {
            sL: "maxColumn"
        }, function ()
        {
            return this.Mb
        });
    w.u(mu,
        {
            yL: "minIndexLayer"
        }, function ()
        {
            return this.ss
        });
    w.u(mu,
        {
            uL: "maxIndexLayer"
        }, function ()
        {
            return this.Rf
        });
    var nu;
    mu.CycleDepthFirst = nu = w.p(mu, "CycleDepthFirst", 0);
    var tu;
    mu.CycleGreedy = tu = w.p(mu, "CycleGreedy", 1);
    var ou;
    mu.LayerOptimalLinkLength = ou = w.p(mu, "LayerOptimalLinkLength", 0);
    var Lu;
    mu.LayerLongestPathSink = Lu = w.p(mu, "LayerLongestPathSink", 1);
    var Nu;
    mu.LayerLongestPathSource = Nu = w.p(mu, "LayerLongestPathSource", 2);
    var pu;
    mu.InitDepthFirstOut = pu = w.p(mu, "InitDepthFirstOut", 0);
    var Tu;
    mu.InitDepthFirstIn = Tu = w.p(mu, "InitDepthFirstIn", 1);
    var Ru;
    mu.InitNaive = Ru = w.p(mu, "InitNaive", 2);
    var Xu;
    mu.AggressiveNone = Xu = w.p(mu, "AggressiveNone", 0);
    var qu;
    mu.AggressiveLess = qu = w.p(mu, "AggressiveLess", 1);
    var Yu;
    mu.AggressiveMore = Yu = w.p(mu, "AggressiveMore", 2);
    mu.PackNone = 0;
    var Zu;
    mu.PackExpand = Zu = 1;
    var $u;
    mu.PackStraighten = $u = 2;
    var bv;
    mu.PackMedian = bv = 4;
    var ru;
    mu.PackAll = ru = 7;

    function iv()
    {
        this.index = this.ue = this.Ze = this.ie = this.first = this.layer = 0;
        this.link = null;
        this.xi = 0
    }
    w.ae(iv,
        {
            layer: !0,
            first: !0,
            ie: !0,
            Ze: !0,
            ue: !0,
            index: !0,
            link: !0,
            xi: !0
        });

    function su()
    {
        tg.call(this)
    }
    w.La(su, tg);
    w.ga("LayeredDigraphNetwork", su);
    su.prototype.createVertex = function ()
    {
        return new kv
    };
    su.prototype.createEdge = function ()
    {
        return new lv
    };

    function kv()
    {
        os.call(this);
        this.index = this.column = this.layer = -1;
        this.component = NaN;
        this.near = null;
        this.valid = !1;
        this.finish = this.Sp = NaN;
        this.on = 0;
        this.iB = this.jB = null
    }
    w.La(kv, os);
    w.ga("LayeredDigraphVertex", kv);

    function lv()
    {
        ps.call(this);
        this.forest = this.rev = this.valid = !1;
        this.portToPos = this.portFromPos = NaN;
        this.portToColOffset = this.portFromColOffset = 0
    }
    w.La(lv, ps);
    w.ga("LayeredDigraphEdge", lv);

    function Z()
    {
        0 < arguments.length && w.nd(Z);
        sg.call(this);
        this.xd = new I(Object);
        this.Ps = mv;
        this.Of = nv;
        this.Et = ov;
        this.hw = pv;
        this.hC = null;
        this.Mh = !0;
        this.pd = qv;
        this.mg = (new ia(10, 10)).freeze();
        this.va = new rv;
        this.wa = new rv;
        this.Wz = []
    }
    w.La(Z, sg);
    w.ga("TreeLayout", Z);
    Z.prototype.cloneProtected = function (a)
    {
        sg.prototype.cloneProtected.call(this, a);
        a.Ps = this.Ps;
        a.Et = this.Et;
        a.hw = this.hw;
        a.Mh = this.Mh;
        a.pd = this.pd;
        a.mg.assign(this.mg);
        a.va.copyInheritedPropertiesFrom(this.va);
        a.wa.copyInheritedPropertiesFrom(this.wa)
    };
    Z.prototype.gc = function (a)
    {
        a.Je === Z ? 0 === a.name.indexOf("Alignment") ? this.alignment = a : 0 === a.name.indexOf("Arrangement") ? this.Vf = a : 0 === a.name.indexOf("Compaction") ? this.compaction = a : 0 === a.name.indexOf("Path") ? this.path = a : 0 === a.name.indexOf("Sorting") ? this.sorting = a : 0 === a.name.indexOf("Style") ? this.YJ = a : w.k("Unknown enum value: " + a) : sg.prototype.gc.call(this, a)
    };
    Z.prototype.createNetwork = function ()
    {
        return new sv
    };
    Z.prototype.makeNetwork = function (a)
    {
        function b(a)
        {
            if (a instanceof T) return !a.Cf && "Comment" !== a.zd;
            if (a instanceof W)
            {
                var b = a.Y;
                if (null === b || b.Cf || "Comment" === b.zd) return !1;
                a = a.Z;
                return null === a || a.Cf || "Comment" === a.zd ? !1 : !0
            }
            return !1
        }
        var c = this.createNetwork();
        c.Tb = this;
        a instanceof D ? (c.Bk(a.hg, !0, b), c.Bk(a.links, !0, b)) : a instanceof V ? c.Bk(a.vc, !1, b) : c.Bk(a.i, !1, b);
        return c
    };
    Z.prototype.doLayout = function (a)
    {
        null === a && w.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        this.Vf !== tv && (this.Nd = this.initialOrigin(this.Nd));
        var b = this.g;
        null === b && a instanceof D && (b = a);
        this.Of = this.path === mv && null !== b ? b.Ud ? nv : uv : this.path === mv ? nv : this.path;
        if (0 < this.network.vertexes.count)
        {
            this.network.sx();
            for (a = this.network.vertexes.i; a.next();) b = a.value, b.initialized = !1, b.level =
                0, b.parent = null, b.children = [];
            if (0 < this.xd.count)
            {
                a = new I(rv);
                for (b = this.xd.i; b.next();)
                {
                    var c = b.value;
                    c instanceof T ? (c = this.network.An(c), null !== c && a.add(c)) : c instanceof rv && a.add(c)
                }
                this.xd = a
            }
            0 === this.xd.count && this.findRoots();
            for (a = this.xd.copy().i; a.next();) b = a.value, b.initialized || (b.initialized = !0, vv(this, b));
            b = this.network.vertexes;
            for (a = null; a = wv(b), 0 < a.count;) b = xv(this, a), null !== b && this.xd.add(b), b.initialized = !0, vv(this, b), b = a;
            for (a = this.xd.i; a.next();) b = a.value, b instanceof rv && yv(this,
                b);
            for (a = this.xd.i; a.next();) b = a.value, b instanceof rv && zv(this, b);
            for (a = this.xd.i; a.next();) b = a.value, b instanceof rv && Av(this, b);
            this.iA();
            if (this.YA === Bv)
            {
                c = [];
                for (a = this.network.vertexes.i; a.next();)
                {
                    var d = a.value,
                        b = d.parent;
                    null === b && (b = d);
                    var b = 0 === b.angle || 180 === b.angle,
                        e = c[d.level];
                    void 0 === e && (e = 0);
                    c[d.level] = Math.max(e, b ? d.width : d.height)
                }
                for (d = 0; d < c.length; d++) void 0 === c[d] && (c[d] = 0);
                this.hC = c;
                for (a = this.network.vertexes.i; a.next();) d = a.value, b = d.parent, null === b && (b = d), 0 === b.angle || 180 ===
                b.angle ? (180 === b.angle && (d.fu += c[d.level] - d.width), d.width = c[d.level]) : (270 === b.angle && (d.gu += c[d.level] - d.height), d.height = c[d.level])
            }
            else if (this.YA === Cv)
                for (a = this.network.vertexes.i; a.next();)
                {
                    c = a.value;
                    b = 0 === c.angle || 180 === c.angle;
                    e = -1;
                    for (d = 0; d < c.children.length; d++) var f = c.children[d],
                        e = Math.max(e, b ? f.width : f.height);
                    if (0 <= e)
                        for (d = 0; d < c.children.length; d++) f = c.children[d], b ? (180 === c.angle && (f.fu += e - f.width), f.width = e) : (270 === c.angle && (f.gu += e - f.height), f.height = e)
                }
            for (a = this.xd.i; a.next();) b =
                a.value, b instanceof rv && this.layoutTree(b);
            this.arrangeTrees();
            this.updateParts()
        }
        this.network = null;
        this.xd = new I(Object);
        this.sf = !0
    };

    function wv(a)
    {
        var b = new I(rv);
        for (a = a.i; a.next();)
        {
            var c = a.value;
            c.initialized || b.add(c)
        }
        return b
    }
    Z.prototype.findRoots = function ()
    {
        for (var a = this.network.vertexes, b = a.i; b.next();)
        {
            var c = b.value;
            switch (this.Of)
            {
                case nv:
                    0 === c.mc.count && this.xd.add(c);
                    break;
                case uv:
                    0 === c.jc.count && this.xd.add(c);
                    break;
                default:
                    w.k("Unhandled path value " + this.Of.toString())
            }
        }
        0 === this.xd.count && (a = xv(this, a), null !== a && this.xd.add(a))
    };

    function xv(a, b)
    {
        for (var c = 999999, d = null, e = b.i; e.next();)
        {
            var f = e.value;
            switch (a.Of)
            {
                case nv:
                    f.mc.count < c && (c = f.mc.count, d = f);
                    break;
                case uv:
                    f.jc.count < c && (c = f.jc.count, d = f);
                    break;
                default:
                    w.k("Unhandled path value " + a.Of.toString())
            }
        }
        return d
    }

    function vv(a, b)
    {
        if (null !== b)
        {
            switch (a.Of)
            {
                case nv:
                    if (0 < b.jc.count)
                    {
                        for (var c = new H(rv), d = b.PH; d.next();)
                        {
                            var e = d.value;
                            Dv(a, b, e) && c.add(e)
                        }
                        0 < c.count && (b.children = c.xc())
                    }
                    break;
                case uv:
                    if (0 < b.mc.count)
                    {
                        c = new H(rv);
                        for (d = b.MJ; d.next();) e = d.value, Dv(a, b, e) && c.add(e);
                        0 < c.count && (b.children = c.xc())
                    }
                    break;
                default:
                    w.k("Unhandled path value" + a.Of.toString())
            }
            c = b.children;
            d = c.length;
            for (e = 0; e < d; e++)
            {
                var f = c[e];
                f.initialized = !0;
                f.level = b.level + 1;
                f.parent = b;
                a.xd.remove(f)
            }
            for (e = 0; e < d; e++) f = c[e], vv(a, f)
        }
    }

    function Dv(a, b, c)
    {
        if (c.initialized)
        {
            var d;
            if (null === b) d = !1;
            else
            {
                for (d = b.parent; null !== d && d !== c;) d = d.parent;
                d = d === c
            }
            if (d || c.level > b.level) return !1;
            a.removeChild(c.parent, c)
        }
        return !0
    }
    Z.prototype.removeChild = function (a, b)
    {
        if (null !== a && null !== b)
        {
            for (var c = a.children, d = 0, e = 0; e < c.length; e++) c[e] === b && d++;
            if (0 < d)
            {
                for (var d = Array(c.length - d), f = 0, e = 0; e < c.length; e++) c[e] !== b && (d[f++] = c[e]);
                a.children = d
            }
        }
    };

    function yv(a, b)
    {
        if (null !== b)
        {
            a.initializeTreeVertexValues(b);
            b.alignment === Ev && a.sortTreeVertexChildren(b);
            for (var c = 0, d = b.qn, e = 0, f = b.children, h = f.length, k = 0; k < h; k++)
            {
                var l = f[k];
                yv(a, l);
                c += l.descendantCount + 1;
                d = Math.max(d, l.maxChildrenCount);
                e = Math.max(e, l.maxGenerationCount)
            }
            b.descendantCount = c;
            b.maxChildrenCount = d;
            b.maxGenerationCount = 0 < d ? e + 1 : 0
        }
    }

    function Fv(a, b)
    {
        switch (a.Et)
        {
            default:
            case ov:
                return null !== b.parent ? b.parent : a.va;
            case Gv:
                return null === b.parent ? a.va : null === b.parent.parent ? a.wa : b.parent;
            case Hv:
                return null !== b.parent ? null !== b.parent.parent ? b.parent.parent : a.wa : a.va;
            case Iv:
                var c = !0;
                if (0 === b.qn) c = !1;
                else
                    for (var d = b.children, e = d.length, f = 0; f < e; f++)
                        if (0 < d[f].qn)
                        {
                            c = !1;
                            break
                        } return c && null !== b.parent ? a.wa : null !== b.parent ? b.parent : a.va
        }
    }
    Z.prototype.initializeTreeVertexValues = function (a)
    {
        var b = Fv(this, a);
        a.copyInheritedPropertiesFrom(b);
        if (null !== a.parent && a.parent.alignment === Ev)
        {
            for (var b = a.angle, c = a.parent.children, d = 0; d < c.length && a !== c[d];) d++;
            0 === d % 2 ? d !== c.length - 1 && (b = 90 === b ? 180 : 180 === b ? 270 : 270 === b ? 180 : 270) : b = 90 === b ? 0 : 180 === b ? 90 : 270 === b ? 0 : 90;
            a.angle = b
        }
        a.initialized = !0
    };

    function zv(a, b)
    {
        if (null !== b)
        {
            a.assignTreeVertexValues(b);
            for (var c = b.children, d = c.length, e = 0; e < d; e++) zv(a, c[e])
        }
    }
    Z.prototype.assignTreeVertexValues = function () {};

    function Av(a, b)
    {
        if (null !== b)
        {
            b.alignment !== Ev && a.sortTreeVertexChildren(b);
            for (var c = b.children, d = c.length, e = 0; e < d; e++) Av(a, c[e])
        }
    }
    Z.prototype.sortTreeVertexChildren = function (a)
    {
        switch (a.sorting)
        {
            case Jv:
                break;
            case Kv:
                a.children.reverse();
                break;
            case Lv:
                a.children.sort(a.comparer);
                break;
            case Mv:
                a.children.sort(a.comparer);
                a.children.reverse();
                break;
            default:
                w.k("Unhandled sorting value " + a.sorting.toString())
        }
    };
    Z.prototype.iA = function ()
    {
        if (this.comments)
            for (var a = this.network.vertexes.i; a.next();) this.addComments(a.value)
    };
    Z.prototype.addComments = function (a)
    {
        var b = a.angle,
            c = a.parent,
            d = 0,
            e = Nv,
            e = !1;
        null !== c && (d = c.angle, e = c.alignment, e = Ov(e));
        var b = 90 === b || 270 === b,
            d = 90 === d || 270 === d,
            c = 0 === a.qn,
            f = 0,
            h = 0,
            k = 0,
            l = a.commentSpacing;
        if (null !== a.Qc)
            for (var m = a.Qc.$E(); m.next();)
            {
                var n = m.value;
                "Comment" === n.zd && n.canLayout() && (null === a.comments && (a.comments = []), a.comments.push(n), n.af(), n = n.za, b && !c || !e && !d && c || e && d && c ? (f = Math.max(f, n.width), h += n.height + Math.abs(k)) : (f += n.width + Math.abs(k), h = Math.max(h, n.height)), k = l)
            }
        null !== a.comments &&
        (b && !c || !e && !d && c || e && d && c ? (f += Math.abs(a.commentMargin), h = Math.max(0, h - a.height)) : (h += Math.abs(a.commentMargin), f = Math.max(0, f - a.width)), e = w.kg(0, 0, a.O.width + f, a.O.height + h), a.cb = e, w.Hb(e))
    };

    function Ov(a)
    {
        return a === Pv || a === Ev || a === Qv || a === Rv
    }

    function Sv(a)
    {
        return a === Pv || a === Ev
    }

    function Tv(a)
    {
        var b = a.parent;
        if (null !== b)
        {
            var c = b.alignment;
            if (Ov(c))
            {
                if (Sv(c))
                {
                    b = b.children;
                    for (c = 0; c < b.length && a !== b[c];) c++;
                    return 0 === c % 2
                }
                if (c === Qv) return !0
            }
        }
        return !1
    }
    Z.prototype.layoutComments = function (a)
    {
        if (null !== a.comments)
        {
            var b = a.Qc.za,
                c = a.parent,
                d = a.angle,
                e = 0,
                f = Nv,
                f = !1;
            null !== c && (e = c.angle, f = c.alignment, f = Ov(f));
            for (var c = 90 === d || 270 === d, d = 90 === e || 270 === e, h = 0 === a.qn, k = Tv(a), l = 0, m = a.comments, n = m.length, p = w.K(), q = 0; q < n; q++)
            {
                var r = m[q],
                    s = r.za;
                if (c && !h || !f && !d && h || f && d && h)
                {
                    if (135 < e && !f || d && k)
                        if (0 <= a.commentMargin)
                            for (p.m(a.O.x - a.commentMargin - s.width, a.O.y + l), r.move(p), r = r.Lg(); r.next();)
                            {
                                var u = r.value;
                                u.Bb = Hc;
                                u.Cb = Ic
                            }
                        else
                            for (p.m(a.O.x + 2 * a.T.x - a.commentMargin,
                                a.O.y + l), r.move(p), r = r.Lg(); r.next();) u = r.value, u.Bb = Ic, u.Cb = Hc;
                    else if (0 <= a.commentMargin)
                        for (p.m(a.O.x + 2 * a.T.x + a.commentMargin, a.O.y + l), r.move(p), r = r.Lg(); r.next();) u = r.value, u.Bb = Ic, u.Cb = Hc;
                    else
                        for (p.m(a.O.x + a.commentMargin - s.width, a.O.y + l), r.move(p), r = r.Lg(); r.next();) u = r.value, u.Bb = Hc, u.Cb = Ic;
                    l = 0 <= a.commentSpacing ? l + (s.height + a.commentSpacing) : l + (a.commentSpacing - s.height)
                }
                else
                {
                    if (135 < e && !f || !d && k)
                        if (0 <= a.commentMargin)
                            for (p.m(a.O.x + l, a.O.y - a.commentMargin - s.height), r.move(p), r = r.Lg(); r.next();) u =
                                r.value, u.Bb = Gc, u.Cb = Jc;
                        else
                            for (p.m(a.O.x + l, a.O.y + 2 * a.T.y - a.commentMargin), r.move(p), r = r.Lg(); r.next();) u = r.value, u.Bb = Jc, u.Cb = Gc;
                    else if (0 <= a.commentMargin)
                        for (p.m(a.O.x + l, a.O.y + 2 * a.T.y + a.commentMargin), r.move(p), r = r.Lg(); r.next();) u = r.value, u.Bb = Jc, u.Cb = Gc;
                    else
                        for (p.m(a.O.x + l, a.O.y + a.commentMargin - s.height), r.move(p), r = r.Lg(); r.next();) u = r.value, u.Bb = Gc, u.Cb = Jc;
                    l = 0 <= a.commentSpacing ? l + (s.width + a.commentSpacing) : l + (a.commentSpacing - s.width)
                }
            }
            w.v(p);
            b = l - a.commentSpacing - (c ? b.height : b.width);
            if (this.Of ===
                nv)
                for (e = a.jc; e.next();) a = e.value.link, null === a || a.dm || (a.Zl = 0 < b ? b : NaN);
            else
                for (e = a.mc; e.next();) a = e.value.link, null === a || a.dm || (a.sm = 0 < b ? b : NaN)
        }
    };
    Z.prototype.layoutTree = function (a)
    {
        if (null !== a)
        {
            for (var b = a.children, c = b.length, d = 0; d < c; d++) this.layoutTree(b[d]);
            switch (a.compaction)
            {
                case Uv:
                    Vv(this, a);
                    break;
                case Wv:
                    if (a.alignment === Ev) Vv(this, a);
                    else if (0 === a.qn)
                    {
                        var d = a.parent,
                            b = !1,
                            c = 0,
                            e = Nv;
                        null !== d && (c = d.angle, e = d.alignment, b = Ov(e));
                        d = Tv(a);
                        a.pa.m(0, 0);
                        a.kb.m(a.width, a.height);
                        null === a.parent || null === a.comments || (180 !== c && 270 !== c || b) && !d ? a.Oa.m(0, 0) : 180 === c && !b || (90 === c || 270 === c) && d ? a.Oa.m(a.width - 2 * a.T.x, 0) : a.Oa.m(0, a.height - 2 * a.T.y);
                        a.zu =
                            null;
                        a.Uu = null
                    }
                    else
                    {
                        for (var f = Xv(a), b = 90 === f || 270 === f, h = 0, k = a.children, l = k.length, m = 0; m < l; m++) var n = k[m],
                            h = Math.max(h, b ? n.kb.width : n.kb.height);
                        var p = a.alignment,
                            d = p === Yv,
                            q = p === Zv,
                            r = Ov(p),
                            s = Math.max(0, a.breadthLimit),
                            c = $v(a),
                            u = a.nodeSpacing,
                            t = aw(a),
                            x = a.rowSpacing,
                            v = 0;
                        if (d || q || a.vq || a.wq && 1 === a.maxGenerationCount) v = Math.max(0, a.rowIndent);
                        var d = a.width,
                            e = a.height,
                            z = 0,
                            A = 0,
                            L = 0,
                            E = null,
                            P = null,
                            $ = 0,
                            S = 0,
                            ba = 0,
                            ha = 0,
                            ya = 0,
                            Ga = 0,
                            eb = 0,
                            va = 0,
                            n = 0;
                        r && !Sv(p) && 135 < f && k.reverse();
                        if (Sv(p))
                            if (1 < l)
                                for (m = 0; m < l; m++) 0 === m %
                                2 && m !== l - 1 ? va = Math.max(va, b ? k[m].kb.width : k[m].kb.height) : 0 !== m % 2 && (n = Math.max(n, b ? k[m].kb.width : k[m].kb.height));
                            else 1 === l && (va = b ? k[0].kb.width : k[0].kb.height);
                        if (r)
                        {
                            switch (p)
                            {
                                case Pv:
                                    A = 135 > f ? bw(a, k, va, z, A) : cw(a, k, va, z, A);
                                    va = A.x;
                                    z = A.width;
                                    A = A.height;
                                    break;
                                case Qv:
                                    for (m = 0; m < l; m++)
                                    {
                                        var n = k[m],
                                            U = n.kb,
                                            E = 0 === Ga ? 0 : x;
                                        b ? (n.pa.m(h - U.width, ha + E), z = Math.max(z, U.width), A = Math.max(A, ha + E + U.height), ha += E + U.height) : (n.pa.m(ba + E, h - U.height), z = Math.max(z, ba + E + U.width), A = Math.max(A, U.height), ba += E + U.width);
                                        Ga++
                                    }
                                    break;
                                case Rv:
                                    for (m = 0; m < l; m++) n = k[m], U = n.kb, E = 0 === Ga ? 0 : x, b ? (n.pa.m(u / 2 + a.T.x, ha + E), z = Math.max(z, U.width), A = Math.max(A, ha + E + U.height), ha += E + U.height) : (n.pa.m(ba + E, u / 2 + a.T.y), z = Math.max(z, ba + E + U.width), A = Math.max(A, U.height), ba += E + U.width), Ga++
                            }
                            E = dw(this, 2);
                            P = dw(this, 2);
                            b ? (E[0].m(0, 0), E[1].m(0, A), P[0].m(z, 0)) : (E[0].m(0, 0), E[1].m(z, 0), P[0].m(0, A));
                            P[1].m(z, A)
                        }
                        else
                            for (m = 0; m < l; m++)
                            {
                                n = k[m];
                                U = n.kb;
                                if (b)
                                {
                                    0 < s && 0 < Ga && ba + u + U.width > s && (ba < h && Jw(a, p, h - ba, 0, eb, m - 1), ya++, Ga = 0, eb = m, L = A, ba = 0, ha = 135 < f ? -A - x : A + x);
                                    Kw(this,
                                        n, 0, ha);
                                    var sb = 0;
                                    if (0 === Ga)
                                    {
                                        if (E = n.zu, P = n.Uu, $ = U.width, S = U.height, null === E || null === P || f !== Xv(n)) E = dw(this, 2), P = dw(this, 2), E[0].m(0, 0), E[1].m(0, S), P[0].m($, 0), P[1].m($, S)
                                    }
                                    else
                                    {
                                        var Lb = w.gb(),
                                            S = Lw(this, a, n, E, P, $, S, Lb),
                                            sb = S.x,
                                            E = Lb[0],
                                            P = Lb[1],
                                            $ = S.width,
                                            S = S.height;
                                        w.ta(Lb);
                                        ba < U.width && 0 > sb && (Mw(a, -sb, 0, eb, m - 1), Nw(E, -sb, 0), Nw(P, -sb, 0), sb = 0)
                                    }
                                    n.pa.m(sb, ha);
                                    z = Math.max(z, $);
                                    A = Math.max(A, L + (0 === ya ? 0 : x) + U.height);
                                    ba = $
                                }
                                else
                                {
                                    0 < s && 0 < Ga && ha + u + U.height > s && (ha < h && Jw(a, p, 0, h - ha, eb, m - 1), ya++, Ga = 0, eb = m, L = z, ha = 0, ba = 135 <
                                    f ? -z - x : z + x);
                                    Kw(this, n, ba, 0);
                                    sb = 0;
                                    if (0 === Ga)
                                    {
                                        if (E = n.zu, P = n.Uu, $ = U.width, S = U.height, null === E || null === P || f !== Xv(n)) E = dw(this, 2), P = dw(this, 2), E[0].m(0, 0), E[1].m($, 0), P[0].m(0, S), P[1].m($, S)
                                    }
                                    else Lb = w.gb(), S = Lw(this, a, n, E, P, $, S, Lb), sb = S.x, E = Lb[0], P = Lb[1], $ = S.width, S = S.height, w.ta(Lb), ha < U.height && 0 > sb && (Mw(a, 0, -sb, eb, m - 1), Nw(E, 0, -sb), Nw(P, 0, -sb), sb = 0);
                                    n.pa.m(ba, sb);
                                    A = Math.max(A, S);
                                    z = Math.max(z, L + (0 === ya ? 0 : x) + U.width);
                                    ha = S
                                }
                                Ga++
                            }
                        0 < ya && (b ? (A += Math.max(0, c), ba < z && Jw(a, p, z - ba, 0, eb, l - 1), 0 < v && (q || Mw(a, v, 0, 0,
                            l - 1), z += v)) : (z += Math.max(0, c), ha < A && Jw(a, p, 0, A - ha, eb, l - 1), 0 < v && (q || Mw(a, 0, v, 0, l - 1), A += v)));
                        v = q = 0;
                        switch (p)
                        {
                            case Ow:
                                b ? q += z / 2 - a.T.x - t / 2 : v += A / 2 - a.T.y - t / 2;
                                break;
                            case Nv:
                                0 < ya ? b ? q += z / 2 - a.T.x - t / 2 : v += A / 2 - a.T.y - t / 2 : b ? (va = k[0].pa.x + k[0].Oa.x, m = k[l - 1].pa.x + k[l - 1].Oa.x + 2 * k[l - 1].T.x, q += va + (m - va) / 2 - a.T.x - t / 2) : (va = k[0].pa.y + k[0].Oa.y, m = k[l - 1].pa.y + k[l - 1].Oa.y + 2 * k[l - 1].T.y, v += va + (m - va) / 2 - a.T.y - t / 2);
                                break;
                            case Yv:
                                b ? (q -= t, z += t) : (v -= t, A += t);
                                break;
                            case Zv:
                                b ? (q += z - a.width + t, z += t) : (v += A - a.height + t, A += t);
                                break;
                            case Pv:
                                b ?
                                    q = 1 < l ? q + (va + u / 2 - a.T.x) : q + (k[0].T.x - a.T.x + k[0].Oa.x) : v = 1 < l ? v + (va + u / 2 - a.T.y) : v + (k[0].T.y - a.T.y + k[0].Oa.y);
                                break;
                            case Qv:
                                b ? q += z + u / 2 - a.T.x : v += A + u / 2 - a.T.y;
                                break;
                            case Rv:
                                break;
                            default:
                                w.k("Unhandled alignment value " + p.toString())
                        }
                        for (m = 0; m < l; m++) n = k[m], b ? n.pa.m(n.pa.x + n.Oa.x - q, n.pa.y + (135 < f ? (r ? -A : -n.kb.height) + n.Oa.y - c : e + c + n.Oa.y)) : n.pa.m(n.pa.x + (135 < f ? (r ? -z : -n.kb.width) + n.Oa.x - c : d + c + n.Oa.x), n.pa.y + n.Oa.y - v);
                        l = k = 0;
                        r ? b ? (z = Pw(a, z, q), 0 > q && (q = 0), 135 < f && (v += A + c), A += e + c, p === Rv && (k += u / 2 + a.T.x), l += e + c) : (135 < f &&
                        (q += z + c), z += d + c, A = Qw(a, A, v), 0 > v && (v = 0), p === Rv && (l += u / 2 + a.T.y), k += d + c) : b ? (null === a.comments ? d > z && (p = Rw(p, d - z, 0), k = p.x, l = p.y, z = d, q = 0) : z = Pw(a, z, q), 0 > q && (k -= q, q = 0), 135 < f && (v += A + c), A = Math.max(Math.max(A, e), A + e + c), l += e + c) : (135 < f && (q += z + c), z = Math.max(Math.max(z, d), z + d + c), null === a.comments ? e > A && (p = Rw(p, 0, e - A), k = p.x, l = p.y, A = e, v = 0) : A = Qw(a, A, v), 0 > v && (l -= v, v = 0), k += d + c);
                        if (0 < ya) f = dw(this, 4), p = dw(this, 4), b ? (f[2].m(0, e + c), f[3].m(f[2].x, A), p[2].m(z, f[2].y), p[3].m(p[2].x, f[3].y)) : (f[2].m(d + c, 0), f[3].m(z, f[2].y), p[2].m(f[2].x,
                            A), p[3].m(f[3].x, p[2].y));
                        else
                        {
                            f = dw(this, E.length + 2);
                            p = dw(this, P.length + 2);
                            for (m = 0; m < E.length; m++) r = E[m], f[m + 2].m(r.x + k, r.y + l);
                            for (m = 0; m < P.length; m++) r = P[m], p[m + 2].m(r.x + k, r.y + l)
                        }
                        b ? (f[0].m(q, 0), f[1].m(f[0].x, e), f[2].y < f[1].y && (f[2].x > f[0].x ? f[2].assign(f[1]) : f[1].assign(f[2])), f[3].y < f[2].y && (f[3].x > f[0].x ? f[3].assign(f[2]) : f[2].assign(f[3])), p[0].m(q + d, 0), p[1].m(p[0].x, e), p[2].y < p[1].y && (p[2].x < p[0].x ? p[2].assign(p[1]) : p[1].assign(p[2])), p[3].y < p[2].y && (p[3].x < p[0].x ? p[3].assign(p[2]) : p[2].assign(p[3])),
                            f[2].y -= c / 2, p[2].y -= c / 2) : (f[0].m(0, v), f[1].m(d, f[0].y), f[2].x < f[1].x && (f[2].y > f[0].y ? f[2].assign(f[1]) : f[1].assign(f[2])), f[3].x < f[2].x && (f[3].y > f[0].y ? f[3].assign(f[2]) : f[2].assign(f[3])), p[0].m(0, v + e), p[1].m(d, p[0].y), p[2].x < p[1].x && (p[2].y < p[0].y ? p[2].assign(p[1]) : p[1].assign(p[2])), p[3].x < p[2].x && (p[3].y < p[0].y ? p[3].assign(p[2]) : p[2].assign(p[3])), f[2].x -= c / 2, p[2].x -= c / 2);
                        Sw(this, E);
                        Sw(this, P);
                        a.zu = f;
                        a.Uu = p;
                        a.Oa.m(q, v);
                        a.kb.m(z, A)
                    }
                    break;
                default:
                    w.k("Unhandled compaction value " + a.compaction.toString())
            }
        }
    };

    function Vv(a, b)
    {
        if (0 === b.qn)
        {
            var c = !1,
                d = 0,
                e = Nv;
            null !== b.parent && (d = b.parent.angle, e = b.parent.alignment, c = Ov(e));
            e = Tv(b);
            b.pa.m(0, 0);
            b.kb.m(b.width, b.height);
            null === b.parent || null === b.comments || (180 !== d && 270 !== d || c) && !e ? b.Oa.m(0, 0) : 180 === d && !c || (90 === d || 270 === d) && e ? b.Oa.m(b.width - 2 * b.T.x, 0) : b.Oa.m(0, b.height - 2 * b.T.y)
        }
        else
        {
            for (var c = Xv(b), d = 90 === c || 270 === c, f = 0, e = b.children, h = e.length, k = 0; k < h; k++) var l = e[k],
                f = Math.max(f, d ? l.kb.width : l.kb.height);
            var m = b.alignment,
                n = m === Yv,
                p = m === Zv,
                q = Ov(m),
                r = Math.max(0,
                    b.breadthLimit),
                s = $v(b),
                u = b.nodeSpacing,
                t = aw(b),
                x = n || p ? 0 : t / 2,
                v = b.rowSpacing,
                z = 0;
            if (n || p || b.vq || b.wq && 1 === b.maxGenerationCount) z = Math.max(0, b.rowIndent);
            var n = b.width,
                A = b.height,
                L = 0,
                E = 0,
                P = 0,
                $ = 0,
                S = 0,
                ba = 0,
                ha = 0,
                ya = 0,
                Ga = 0,
                eb = 0;
            q && !Sv(m) && 135 < c && e.reverse();
            if (Sv(m))
                if (1 < h)
                    for (k = 0; k < h; k++)
                    {
                        var l = e[k],
                            va = l.kb;
                        0 === k % 2 && k !== h - 1 ? Ga = Math.max(Ga, (d ? va.width : va.height) + Tw(l) - u) : 0 !== k % 2 && (eb = Math.max(eb, (d ? va.width : va.height) + Tw(l) - u))
                    }
                else 1 === h && (Ga = d ? e[0].kb.width : e[0].kb.height);
            if (q) switch (m)
            {
                case Pv:
                case Ev:
                    E =
                        135 > c ? bw(b, e, Ga, L, E) : cw(b, e, Ga, L, E);
                    Ga = E.x;
                    L = E.width;
                    E = E.height;
                    break;
                case Qv:
                    for (k = 0; k < h; k++) l = e[k], va = l.kb, r = 0 === ha ? 0 : v, d ? (l.pa.m(f - va.width, S + r), L = Math.max(L, va.width), E = Math.max(E, S + r + va.height), S += r + va.height) : (l.pa.m($ + r, f - va.height), L = Math.max(L, $ + r + va.width), E = Math.max(E, va.height), $ += r + va.width), ha++;
                    break;
                case Rv:
                    for (f = 0; f < h; f++) l = e[f], va = l.kb, r = 0 === ha ? 0 : v, d ? (l.pa.m(u / 2 + b.T.x, S + r), L = Math.max(L, va.width), E = Math.max(E, S + r + va.height), S += r + va.height) : (l.pa.m($ + r, u / 2 + b.T.y), L = Math.max(L, $ + r +
                        va.width), E = Math.max(E, va.height), $ += r + va.width), ha++
            }
            else
                for (k = 0; k < h; k++) l = e[k], va = l.kb, d ? (0 < r && 0 < ha && $ + u + va.width > r && ($ < f && Jw(b, m, f - $, 0, ya, k - 1), ba++, ha = 0, ya = k, P = E, $ = 0, S = 135 < c ? -E - v : E + v), eb = 0 === ha ? x : u, Kw(a, l, 0, S), l.pa.m($ + eb, S), L = Math.max(L, $ + eb + va.width), E = Math.max(E, P + (0 === ba ? 0 : v) + va.height), $ += eb + va.width) : (0 < r && 0 < ha && S + u + va.height > r && (S < f && Jw(b, m, 0, f - S, ya, k - 1), ba++, ha = 0, ya = k, P = L, S = 0, $ = 135 < c ? -L - v : L + v), eb = 0 === ha ? x : u, Kw(a, l, $, 0), l.pa.m($, S + eb), E = Math.max(E, S + eb + va.height), L = Math.max(L, P + (0 === ba ?
                    0 : v) + va.width), S += eb + va.height), ha++;
            0 < ba && (d ? (E += Math.max(0, s), $ < L && Jw(b, m, L - $, 0, ya, h - 1), 0 < z && (p || Mw(b, z, 0, 0, h - 1), L += z)) : (L += Math.max(0, s), S < E && Jw(b, m, 0, E - S, ya, h - 1), 0 < z && (p || Mw(b, 0, z, 0, h - 1), E += z)));
            z = p = 0;
            switch (m)
            {
                case Ow:
                    d ? p += L / 2 - b.T.x - t / 2 : z += E / 2 - b.T.y - t / 2;
                    break;
                case Nv:
                    0 < ba ? d ? p += L / 2 - b.T.x - t / 2 : z += E / 2 - b.T.y - t / 2 : d ? (m = e[0].pa.x + e[0].Oa.x, u = e[h - 1].pa.x + e[h - 1].Oa.x + 2 * e[h - 1].T.x, p += m + (u - m) / 2 - b.T.x - t / 2) : (m = e[0].pa.y + e[0].Oa.y, u = e[h - 1].pa.y + e[h - 1].Oa.y + 2 * e[h - 1].T.y, z += m + (u - m) / 2 - b.T.y - t / 2);
                    break;
                case Yv:
                    d ?
                        (p -= t, L += t) : (z -= t, E += t);
                    break;
                case Zv:
                    d ? (p += L - b.width + t, L += t) : (z += E - b.height + t, E += t);
                    break;
                case Pv:
                case Ev:
                    d ? p = 1 < h ? p + (Ga + u / 2 - b.T.x) : p + (e[0].T.x - b.T.x + e[0].Oa.x) : z = 1 < h ? z + (Ga + u / 2 - b.T.y) : z + (e[0].T.y - b.T.y + e[0].Oa.y);
                    break;
                case Qv:
                    d ? p += L + u / 2 - b.T.x : z += E + u / 2 - b.T.y;
                    break;
                case Rv:
                    break;
                default:
                    w.k("Unhandled alignment value " + m.toString())
            }
            for (k = 0; k < h; k++) l = e[k], d ? l.pa.m(l.pa.x + l.Oa.x - p, l.pa.y + (135 < c ? (q ? -E : -l.kb.height) + l.Oa.y - s : A + s + l.Oa.y)) : l.pa.m(l.pa.x + (135 < c ? (q ? -L : -l.kb.width) + l.Oa.x - s : n + s + l.Oa.x), l.pa.y +
                l.Oa.y - z);
            d ? (L = Pw(b, L, p), 0 > p && (p = 0), 135 < c && (z += E + s), E += A + s) : (135 < c && (p += L + s), L += n + s, E = Qw(b, E, z), 0 > z && (z = 0));
            b.Oa.m(p, z);
            b.kb.m(L, E)
        }
    }

    function bw(a, b, c, d, e)
    {
        var f = b.length;
        if (0 === f) return new B(c, 0, d, e);
        if (1 === f)
        {
            var h = b[0];
            d = h.kb.width;
            e = h.kb.height;
            return new B(c, 0, d, e)
        }
        for (var k = a.nodeSpacing, l = a.rowSpacing, m = 90 === Xv(a), n = 0, p = 0, q = 0, r = 0; r < f; r++)
            if (!(0 !== r % 2 || 1 < f && r === f - 1))
            {
                var h = b[r],
                    s = h.kb,
                    u = 0 === n ? 0 : l;
                if (m)
                {
                    var t = Tw(h) - k;
                    h.pa.m(c - (s.width + t), q + u);
                    d = Math.max(d, s.width + t);
                    e = Math.max(e, q + u + s.height);
                    q += u + s.height
                }
                else t = Tw(h) - k, h.pa.m(p + u, c - (s.height + t)), e = Math.max(e, s.height + t), d = Math.max(d, p + u + s.width), p += u + s.width;
                n++
            }
        var n =
                0,
            x = p,
            v = q;
        m ? (p = c + k, q = 0) : (p = 0, q = c + k);
        for (r = 0; r < f; r++) 0 !== r % 2 && (h = b[r], s = h.kb, u = 0 === n ? 0 : l, m ? (t = Tw(h) - k, h.pa.m(p + t, q + u), d = Math.max(d, p + s.width + t), e = Math.max(e, q + u + s.height), q += u + s.height) : (t = Tw(h) - k, h.pa.m(p + u, q + t), d = Math.max(d, p + u + s.width), e = Math.max(e, q + s.height + t), p += u + s.width), n++);
        1 < f && 1 === f % 2 && (h = b[f - 1], s = h.kb, b = Uw(h, m ? Math.max(Math.abs(v), Math.abs(q)) : Math.max(Math.abs(x), Math.abs(p))), m ? (h.pa.m(c + k / 2 - h.T.x - h.Oa.x, e + b), m = c + k / 2 - h.T.x - h.Oa.x, d = Math.max(d, m + s.width), 0 > m && (d -= m), e = Math.max(e, Math.max(v,
            q) + b + s.height), 0 > h.pa.x && (c = Vw(a, h.pa.x, !1, c, k))) : (h.pa.m(d + b, c + k / 2 - h.T.y - h.Oa.y), d = Math.max(d, Math.max(x, p) + b + s.width), m = c + k / 2 - h.T.y - h.Oa.y, e = Math.max(e, m + s.height), 0 > m && (e -= m), 0 > h.pa.y && (c = Vw(a, h.pa.y, !0, c, k))));
        return new B(c, 0, d, e)
    }

    function cw(a, b, c, d, e)
    {
        var f = b.length;
        if (0 === f) return new B(c, 0, d, e);
        if (1 === f)
        {
            var h = b[0];
            d = h.kb.width;
            e = h.kb.height;
            return new B(c, 0, d, e)
        }
        for (var k = a.nodeSpacing, l = a.rowSpacing, m = 270 === Xv(a), n = 0, p = 0, q = 0, r = 0; r < f; r++)
            if (!(0 !== r % 2 || 1 < f && r === f - 1))
            {
                var h = b[r],
                    s = h.kb,
                    u = 0 === n ? 0 : l;
                if (m)
                {
                    var t = Tw(h) - k,
                        q = q - (u + s.height);
                    h.pa.m(c - (s.width + t), q);
                    d = Math.max(d, s.width + t);
                    e = Math.max(e, Math.abs(q))
                }
                else t = Tw(h) - k, p -= u + s.width, h.pa.m(p, c - (s.height + t)), e = Math.max(e, s.height + t), d = Math.max(d, Math.abs(p));
                n++
            }
        var n = 0,
            x = p,
            v = q;
        m ? (p = c + k, q = 0) : (p = 0, q = c + k);
        for (r = 0; r < f; r++) 0 !== r % 2 && (h = b[r], s = h.kb, u = 0 === n ? 0 : l, m ? (t = Tw(h) - k, q -= u + s.height, h.pa.m(p + t, q), d = Math.max(d, p + s.width + t), e = Math.max(e, Math.abs(q))) : (t = Tw(h) - k, p -= u + s.width, h.pa.m(p, q + t), e = Math.max(e, q + s.height + t), d = Math.max(d, Math.abs(p))), n++);
        1 < f && 1 === f % 2 && (h = b[f - 1], s = h.kb, l = Uw(h, m ? Math.max(Math.abs(v), Math.abs(q)) : Math.max(Math.abs(x), Math.abs(p))), m ? (h.pa.m(c + k / 2 - h.T.x - h.Oa.x, -e - s.height - l), p = c + k / 2 - h.T.x - h.Oa.x, d = Math.max(d, p + s.width), 0 > p && (d -= p), e = Math.max(e, Math.abs(Math.min(v,
            q)) + l + s.height), 0 > h.pa.x && (c = Vw(a, h.pa.x, !1, c, k))) : (h.pa.m(-d - s.width - l, c + k / 2 - h.T.y - h.Oa.y), d = Math.max(d, Math.abs(Math.min(x, p)) + l + s.width), p = c + k / 2 - h.T.y - h.Oa.y, e = Math.max(e, p + s.height), 0 > p && (e -= p), 0 > h.pa.y && (c = Vw(a, h.pa.y, !0, c, k))));
        for (r = 0; r < f; r++) h = b[r], m ? h.pa.m(h.pa.x, h.pa.y + e) : h.pa.m(h.pa.x + d, h.pa.y);
        return new B(c, 0, d, e)
    }

    function Tw(a)
    {
        return null === a.parent ? 0 : a.parent.nodeSpacing
    }

    function Uw(a)
    {
        return null === a.parent ? 0 : a.parent.rowSpacing
    }

    function Vw(a, b, c, d, e)
    {
        a = a.children;
        for (var f = a.length, h = 0; h < f; h++) c ? a[h].pa.m(a[h].pa.x, a[h].pa.y - b) : a[h].pa.m(a[h].pa.x - b, a[h].pa.y);
        b = a[f - 1];
        return Math.max(d, c ? b.Oa.y + b.T.y - e / 2 : b.Oa.x + b.T.x - e / 2)
    }

    function Pw(a, b, c)
    {
        switch (a.alignment)
        {
            case Nv:
            case Ow:
                var d = b;
                c + a.width > d && (d = c + a.width);
                0 > c && (d -= c);
                return d;
            case Yv:
                return a.width > b ? a.width : b;
            case Zv:
                return 2 * a.T.x > b ? a.width : b + a.width - 2 * a.T.x;
            case Pv:
            case Ev:
                return d = Math.min(0, c), c = Math.max(b, c + a.width), Math.max(a.width, c - d);
            case Qv:
                return a.width - a.T.x + a.nodeSpacing / 2 + b;
            case Rv:
                return Math.max(a.width, a.T.x + a.nodeSpacing / 2 + b);
            default:
                return b
        }
    }

    function Qw(a, b, c)
    {
        switch (a.alignment)
        {
            case Nv:
            case Ow:
                var d = b;
                c + a.height > d && (d = c + a.height);
                0 > c && (d -= c);
                return d;
            case Yv:
                return a.height > b ? a.height : b;
            case Zv:
                return 2 * a.T.y > b ? a.height : b + a.height - 2 * a.T.y;
            case Pv:
            case Ev:
                return d = Math.min(0, c), c = Math.max(b, c + a.height), Math.max(a.height, c - d);
            case Qv:
                return a.height - a.T.y + a.nodeSpacing / 2 + b;
            case Rv:
                return Math.max(a.height, a.T.y + a.nodeSpacing / 2 + b);
            default:
                return b
        }
    }

    function Rw(a, b, c)
    {
        switch (a)
        {
            case Ow:
                b /= 2;
                c /= 2;
                break;
            case Nv:
                b /= 2;
                c /= 2;
                break;
            case Yv:
                c = b = 0;
                break;
            case Zv:
                break;
            default:
                w.k("Unhandled alignment value " + a.toString())
        }
        return new y(b, c)
    }

    function Jw(a, b, c, d, e, f)
    {
        b = Rw(b, c, d);
        Mw(a, b.x, b.y, e, f)
    }

    function Mw(a, b, c, d, e)
    {
        if (0 !== b || 0 !== c)
            for (a = a.children; d <= e; d++)
            {
                var f = a[d].pa;
                f.x += b;
                f.y += c
            }
    }

    function Kw(a, b, c, d)
    {
        var e = b.parent;
        switch (a.Of)
        {
            case nv:
                for (a = b.mc; a.next();) b = a.value, b.fromVertex === e && b.Ws.m(c, d);
                break;
            case uv:
                for (a = b.jc; a.next();) b = a.value, b.toVertex === e && b.Ws.m(c, d);
                break;
            default:
                w.k("Unhandled path value " + a.Of.toString())
        }
    }

    function Nw(a, b, c)
    {
        for (var d = 0; d < a.length; d++)
        {
            var e = a[d];
            e.x += b;
            e.y += c
        }
    }

    function Lw(a, b, c, d, e, f, h, k)
    {
        var l = Xv(b),
            m = 90 === l || 270 === l,
            n = b.nodeSpacing;
        b = d;
        var p = e;
        d = f;
        e = h;
        var q = c.zu,
            r = c.Uu;
        h = c.kb;
        var s = m ? Math.max(e, h.height) : Math.max(d, h.width);
        if (null === q || l !== Xv(c)) q = dw(a, 2), r = dw(a, 2), m ? (q[0].m(0, 0), q[1].m(0, h.height), r[0].m(h.width, 0), r[1].m(r[0].x, q[1].y)) : (q[0].m(0, 0), q[1].m(h.width, 0), r[0].m(0, h.height), r[1].m(q[1].x, r[0].y));
        if (m)
        {
            c = d;
            d = 9999999;
            if (!(null === p || 2 > p.length || null === q || 2 > q.length))
                for (m = l = 0; l < p.length && m < q.length;)
                {
                    e = p[l];
                    var u = q[m];
                    f = u.x;
                    var t = u.y;
                    f +=
                        c;
                    var x = e;
                    l + 1 < p.length && (x = p[l + 1]);
                    var v = u,
                        u = v.x,
                        v = v.y;
                    m + 1 < q.length && (v = q[m + 1], u = v.x, v = v.y, u += c);
                    var z = d;
                    e.y === t ? z = f - e.x : e.y > t && e.y < v ? z = f + (e.y - t) / (v - t) * (u - f) - e.x : t > e.y && t < x.y && (z = f - (e.x + (t - e.y) / (x.y - e.y) * (x.x - e.x)));
                    z < d && (d = z);
                    x.y <= e.y ? l++ : v <= t ? m++ : (x.y <= v && l++, v <= x.y && m++)
                }
            c -= d;
            c += n;
            l = q;
            m = c;
            if (null === b || 2 > b.length || null === l || 2 > l.length) d = null;
            else
            {
                n = dw(a, b.length + l.length);
                for (d = f = e = 0; f < l.length && l[f].y < b[0].y;) t = l[f++], n[d++].m(t.x + m, t.y);
                for (; e < b.length;) t = b[e++], n[d++].m(t.x, t.y);
                for (e = b[b.length -
                1].y; f < l.length && l[f].y <= e;) f++;
                for (; f < l.length && l[f].y > e;) t = l[f++], n[d++].m(t.x + m, t.y);
                l = dw(a, d);
                for (e = 0; e < d; e++) l[e].assign(n[e]);
                Sw(a, n);
                d = l
            }
            f = r;
            t = c;
            if (null === p || 2 > p.length || null === f || 2 > f.length) e = null;
            else
            {
                n = dw(a, p.length + f.length);
                for (m = x = l = 0; l < p.length && p[l].y < f[0].y;) e = p[l++], n[m++].m(e.x, e.y);
                for (; x < f.length;) e = f[x++], n[m++].m(e.x + t, e.y);
                for (f = f[f.length - 1].y; l < p.length && p[l].y <= f;) l++;
                for (; l < p.length && p[l].y > f;) e = p[l++], n[m++].m(e.x, e.y);
                e = dw(a, m);
                for (l = 0; l < m; l++) e[l].assign(n[l]);
                Sw(a, n)
            }
            f =
                Math.max(0, c) + h.width;
            h = s
        }
        else
        {
            c = e;
            d = 9999999;
            if (!(null === p || 2 > p.length || null === q || 2 > q.length))
                for (m = l = 0; l < p.length && m < q.length;) e = p[l], u = q[m], f = u.x, t = u.y, t += c, x = e, l + 1 < p.length && (x = p[l + 1]), v = u, u = v.x, v = v.y, m + 1 < q.length && (v = q[m + 1], u = v.x, v = v.y, v += c), z = d, e.x === f ? z = t - e.y : e.x > f && e.x < u ? z = t + (e.x - f) / (u - f) * (v - t) - e.y : f > e.x && f < x.x && (z = t - (e.y + (f - e.x) / (x.x - e.x) * (x.y - e.y))), z < d && (d = z), x.x <= e.x ? l++ : u <= f ? m++ : (x.x <= u && l++, u <= x.x && m++);
            c -= d;
            c += n;
            l = q;
            m = c;
            if (null === b || 2 > b.length || null === l || 2 > l.length) d = null;
            else
            {
                n = dw(a,
                    b.length + l.length);
                for (d = f = e = 0; f < l.length && l[f].x < b[0].x;) t = l[f++], n[d++].m(t.x, t.y + m);
                for (; e < b.length;) t = b[e++], n[d++].m(t.x, t.y);
                for (e = b[b.length - 1].x; f < l.length && l[f].x <= e;) f++;
                for (; f < l.length && l[f].x > e;) t = l[f++], n[d++].m(t.x, t.y + m);
                l = dw(a, d);
                for (e = 0; e < d; e++) l[e].assign(n[e]);
                Sw(a, n);
                d = l
            }
            f = r;
            t = c;
            if (null === p || 2 > p.length || null === f || 2 > f.length) e = null;
            else
            {
                n = dw(a, p.length + f.length);
                for (m = x = l = 0; l < p.length && p[l].x < f[0].x;) e = p[l++], n[m++].m(e.x, e.y);
                for (; x < f.length;) e = f[x++], n[m++].m(e.x, e.y + t);
                for (f =
                         f[f.length - 1].x; l < p.length && p[l].x <= f;) l++;
                for (; l < p.length && p[l].x > f;) e = p[l++], n[m++].m(e.x, e.y);
                e = dw(a, m);
                for (l = 0; l < m; l++) e[l].assign(n[l]);
                Sw(a, n)
            }
            f = s;
            h = Math.max(0, c) + h.height
        }
        Sw(a, b);
        Sw(a, q);
        Sw(a, p);
        Sw(a, r);
        k[0] = d;
        k[1] = e;
        return new B(c, 0, f, h)
    }

    function dw(a, b)
    {
        var c = a.Wz[b];
        if (void 0 !== c && (c = c.pop(), void 0 !== c)) return c;
        for (var c = [], d = 0; d < b; d++) c[d] = new y;
        return c
    }

    function Sw(a, b)
    {
        var c = b.length,
            d = a.Wz[c];
        void 0 === d && (d = [], a.Wz[c] = d);
        d.push(b)
    }
    Z.prototype.arrangeTrees = function ()
    {
        if (this.pd === tv)
            for (var a = this.xd.i; a.next();)
            {
                var b = a.value;
                if (b instanceof rv)
                {
                    var c = b.Qc;
                    if (null !== c)
                    {
                        var d = c.position,
                            c = d.x,
                            d = d.y;
                        isFinite(c) || (c = 0);
                        isFinite(d) || (d = 0);
                        Ww(this, b, c, d)
                    }
                }
            }
        else
        {
            c = [];
            for (a = this.xd.i; a.next();) b = a.value, b instanceof rv && c.push(b);
            switch (this.sorting)
            {
                case Jv:
                    break;
                case Kv:
                    c.reverse();
                    break;
                case Lv:
                    c.sort(this.comparer);
                    break;
                case Mv:
                    c.sort(this.comparer);
                    c.reverse();
                    break;
                default:
                    w.k("Unhandled sorting value " + this.sorting.toString())
            }
            b =
                this.Nd;
            a = b.x;
            b = b.y;
            for (d = 0; d < c.length; d++)
            {
                var e = c[d];
                Ww(this, e, a + e.Oa.x, b + e.Oa.y);
                switch (this.pd)
                {
                    case qv:
                        b += e.kb.height + this.mg.height;
                        break;
                    case Xw:
                        a += e.kb.width + this.mg.width;
                        break;
                    default:
                        w.k("Unhandled arrangement value " + this.pd.toString())
                }
            }
        }
    };

    function Ww(a, b, c, d)
    {
        if (null !== b)
        {
            b.x = c;
            b.y = d;
            b = b.children;
            for (var e = b.length, f = 0; f < e; f++)
            {
                var h = b[f];
                Ww(a, h, c + h.pa.x, d + h.pa.y)
            }
        }
    }
    Z.prototype.commitLayout = function ()
    {
        this.CB();
        this.commitNodes();
        this.oA();
        this.xu && this.commitLinks()
    };
    Z.prototype.commitNodes = function ()
    {
        for (var a = this.network.vertexes.i; a.next();) a.value.commit();
        for (a.reset(); a.next();) this.layoutComments(a.value)
    };
    Z.prototype.oA = function ()
    {
        if (this.YA === Bv)
        {
            for (var a = this.hC, b = [], c = null, d = this.network.vertexes.i; d.next();)
            {
                var e = d.value;
                null === c ? c = e.cb.copy() : c.Jh(e.cb);
                var f = b[e.level],
                    f = void 0 === f ? $v(e) : Math.max(f, $v(e));
                b[e.level] = f
            }
            for (d = 0; d < b.length; d++) void 0 === b[d] && (b[d] = 0);
            90 === this.angle || 270 === this.angle ? (c.Yf(this.nodeSpacing / 2, this.layerSpacing), e = new y(-this.nodeSpacing / 2, -this.layerSpacing / 2)) : (c.Yf(this.layerSpacing, this.nodeSpacing / 2), e = new y(-this.layerSpacing / 2, -this.nodeSpacing / 2));
            var f = [],
                c = 90 === this.angle || 270 === this.angle ? c.width : c.height,
                h = 0;
            if (180 === this.angle || 270 === this.angle)
                for (d = 0; d < a.length; d++) h += a[d] + b[d];
            for (d = 0; d < a.length; d++)
            {
                var k = a[d] + b[d];
                270 === this.angle ? (h -= k, f.push(new B(0, h, c, k))) : 90 === this.angle ? (f.push(new B(0, h, c, k)), h += k) : 180 === this.angle ? (h -= k, f.push(new B(h, 0, k, c))) : (f.push(new B(h, 0, k, c)), h += k)
            }
            this.commitLayers(f, e)
        }
    };
    Z.prototype.commitLayers = function () {};
    Z.prototype.commitLinks = function ()
    {
        for (var a = this.network.edges.i; a.next();) a.value.commit()
    };
    Z.prototype.CB = function ()
    {
        for (var a = this.xd.i; a.next();)
        {
            var b = a.value;
            b instanceof rv && Yw(this, b)
        }
    };

    function Yw(a, b)
    {
        if (null !== b)
        {
            a.setPortSpots(b);
            for (var c = b.children, d = c.length, e = 0; e < d; e++) Yw(a, c[e])
        }
    }
    Z.prototype.setPortSpots = function (a)
    {
        var b = a.alignment;
        if (Ov(b))
        {
            var c = this.Of === nv,
                d = Xv(a),
                e;
            switch (d)
            {
                case 0:
                    e = Ic;
                    break;
                case 90:
                    e = Jc;
                    break;
                case 180:
                    e = Hc;
                    break;
                default:
                    e = Gc
            }
            var f = a.children,
                h = f.length;
            switch (b)
            {
                case Pv:
                case Ev:
                    for (b = 0; b < h; b++)
                    {
                        var k = f[b],
                            k = (c ? k.mc : k.jc).first();
                        if (null !== k && (k = k.link, null !== k))
                        {
                            var l = 90 === d || 270 === d ? Hc : Gc;
                            if (1 === h || b === h - 1 && 1 === h % 2) switch (d)
                            {
                                case 0:
                                    l = Hc;
                                    break;
                                case 90:
                                    l = Gc;
                                    break;
                                case 180:
                                    l = Ic;
                                    break;
                                default:
                                    l = Jc
                            }
                            else 0 === b % 2 && (l = 90 === d || 270 === d ? Ic : Jc);
                            c ? (a.setsPortSpot &&
                            (k.Bb = e), a.setsChildPortSpot && (k.Cb = l)) : (a.setsPortSpot && (k.Bb = l), a.setsChildPortSpot && (k.Cb = e))
                        }
                    }
                    break;
                case Qv:
                    l = 90 === d || 270 === d ? Ic : Jc;
                    for (d = c ? a.jc : a.mc; d.next();) k = d.value.link, null !== k && (c ? (a.setsPortSpot && (k.Bb = e), a.setsChildPortSpot && (k.Cb = l)) : (a.setsPortSpot && (k.Bb = l), a.setsChildPortSpot && (k.Cb = e)));
                    break;
                case Rv:
                    for (l = 90 === d || 270 === d ? Hc : Gc, d = c ? a.jc : a.mc; d.next();) k = d.value.link, null !== k && (c ? (a.setsPortSpot && (k.Bb = e), a.setsChildPortSpot && (k.Cb = l)) : (a.setsPortSpot && (k.Bb = l), a.setsChildPortSpot &&
                    (k.Cb = e)))
            }
        }
        else if (c = Xv(a), this.Of === nv)
            for (e = a.jc; e.next();)
            {
                if (d = e.value.link, null !== d)
                {
                    if (a.setsPortSpot)
                        if (a.portSpot.Zc()) switch (c)
                        {
                            case 0:
                                d.Bb = Ic;
                                break;
                            case 90:
                                d.Bb = Jc;
                                break;
                            case 180:
                                d.Bb = Hc;
                                break;
                            default:
                                d.Bb = Gc
                        }
                        else d.Bb = a.portSpot;
                    if (a.setsChildPortSpot)
                        if (a.childPortSpot.Zc()) switch (c)
                        {
                            case 0:
                                d.Cb = Hc;
                                break;
                            case 90:
                                d.Cb = Gc;
                                break;
                            case 180:
                                d.Cb = Ic;
                                break;
                            default:
                                d.Cb = Jc
                        }
                        else d.Cb = a.childPortSpot
                }
            }
        else
            for (e = a.mc; e.next();)
                if (d = e.value.link, null !== d)
                {
                    if (a.setsPortSpot)
                        if (a.portSpot.Zc()) switch (c)
                        {
                            case 0:
                                d.Cb =
                                    Ic;
                                break;
                            case 90:
                                d.Cb = Jc;
                                break;
                            case 180:
                                d.Cb = Hc;
                                break;
                            default:
                                d.Cb = Gc
                        }
                        else d.Cb = a.portSpot;
                    if (a.setsChildPortSpot)
                        if (a.childPortSpot.Zc()) switch (c)
                        {
                            case 0:
                                d.Bb = Hc;
                                break;
                            case 90:
                                d.Bb = Gc;
                                break;
                            case 180:
                                d.Bb = Ic;
                                break;
                            default:
                                d.Bb = Jc
                        }
                        else d.Bb = a.childPortSpot
                }
    };

    function Xv(a)
    {
        a = a.angle;
        return 45 >= a ? 0 : 135 >= a ? 90 : 225 >= a ? 180 : 315 >= a ? 270 : 0
    }

    function $v(a)
    {
        var b = Xv(a),
            b = 90 === b || 270 === b,
            c = a.layerSpacing;
        if (0 < a.layerSpacingParentOverlap) var d = Math.min(1, a.layerSpacingParentOverlap),
            c = c - (b ? a.height * d : a.width * d);
        c < (b ? -a.height : -a.width) && (c = b ? -a.height : -a.width);
        return c
    }

    function aw(a)
    {
        var b = Xv(a),
            b = 90 === b || 270 === b,
            c = a.nodeIndent;
        if (0 < a.nodeIndentPastParent) var d = Math.min(1, a.nodeIndentPastParent),
            c = c + (b ? a.width * d : a.height * d);
        return c = Math.max(0, c)
    }
    w.defineProperty(Z,
        {
            OL: "roots"
        }, function ()
        {
            return this.xd
        }, function (a)
        {
            this.xd !== a && (w.G(a, I, Z, "roots"), this.xd = a, this.J())
        });
    w.defineProperty(Z,
        {
            path: "path"
        }, function ()
        {
            return this.Ps
        }, function (a)
        {
            this.Ps !== a && (w.ob(a, Z, Z, "path"), this.Ps = a, this.J())
        });
    w.defineProperty(Z,
        {
            YJ: "treeStyle"
        }, function ()
        {
            return this.Et
        }, function (a)
        {
            this.pd !== a && (w.ob(a, Z, Z, "treeStyle"), a === ov || a === Hv || a === Iv || a === Gv) && (this.Et = a, this.J())
        });
    w.defineProperty(Z,
        {
            YA: "layerStyle"
        }, function ()
        {
            return this.hw
        }, function (a)
        {
            this.pd !== a && (w.ob(a, Z, Z, "layerStyle"), a === pv || a === Cv || a === Bv) && (this.hw = a, this.J())
        });
    w.defineProperty(Z,
        {
            comments: "comments"
        }, function ()
        {
            return this.Mh
        }, function (a)
        {
            this.Mh !== a && (w.j(a, "boolean", Z, "comments"), this.Mh = a, this.J())
        });
    w.defineProperty(Z,
        {
            Vf: "arrangement"
        }, function ()
        {
            return this.pd
        }, function (a)
        {
            this.pd !== a && (w.ob(a, Z, Z, "arrangement"), a === qv || a === Xw || a === tv) && (this.pd = a, this.J())
        });
    w.defineProperty(Z,
        {
            DE: "arrangementSpacing"
        }, function ()
        {
            return this.mg
        }, function (a)
        {
            w.G(a, ia, Z, "arrangementSpacing");
            this.mg.L(a) || (this.mg.assign(a), this.J())
        });
    w.defineProperty(Z,
        {
            NL: "rootDefaults"
        }, function ()
        {
            return this.va
        }, function (a)
        {
            this.va !== a && (w.G(a, rv, Z, "rootDefaults"), this.va = a, this.J())
        });
    w.defineProperty(Z,
        {
            qK: "alternateDefaults"
        }, function ()
        {
            return this.wa
        }, function (a)
        {
            this.wa !== a && (w.G(a, rv, Z, "alternateDefaults"), this.wa = a, this.J())
        });
    w.defineProperty(Z,
        {
            sorting: "sorting"
        }, function ()
        {
            return this.va.sorting
        }, function (a)
        {
            this.va.sorting !== a && (w.ob(a, Z, Z, "sorting"), a === Jv || a === Kv || a === Lv || Mv) && (this.va.sorting = a, this.J())
        });
    w.defineProperty(Z,
        {
            comparer: "comparer"
        }, function ()
        {
            return this.va.comparer
        }, function (a)
        {
            this.va.comparer !== a && (w.j(a, "function", Z, "comparer"), this.va.comparer = a, this.J())
        });
    w.defineProperty(Z,
        {
            angle: "angle"
        }, function ()
        {
            return this.va.angle
        }, function (a)
        {
            this.va.angle !== a && (w.j(a, "number", Z, "angle"), 0 === a || 90 === a || 180 === a || 270 === a ? (this.va.angle = a, this.J()) : w.k("TreeLayout.angle must be 0, 90, 180, or 270"))
        });
    w.defineProperty(Z,
        {
            alignment: "alignment"
        }, function ()
        {
            return this.va.alignment
        }, function (a)
        {
            this.va.alignment !== a && (w.ob(a, Z, Z, "alignment"), this.va.alignment = a, this.J())
        });
    w.defineProperty(Z,
        {
            nodeIndent: "nodeIndent"
        }, function ()
        {
            return this.va.nodeIndent
        }, function (a)
        {
            this.va.nodeIndent !== a && (w.j(a, "number", Z, "nodeIndent"), 0 <= a && (this.va.nodeIndent = a, this.J()))
        });
    w.defineProperty(Z,
        {
            nodeIndentPastParent: "nodeIndentPastParent"
        }, function ()
        {
            return this.va.nodeIndentPastParent
        }, function (a)
        {
            this.va.nodeIndentPastParent !== a && (w.j(a, "number", Z, "nodeIndentPastParent"), 0 <= a && 1 >= a && (this.va.nodeIndentPastParent = a, this.J()))
        });
    w.defineProperty(Z,
        {
            nodeSpacing: "nodeSpacing"
        }, function ()
        {
            return this.va.nodeSpacing
        }, function (a)
        {
            this.va.nodeSpacing !== a && (w.j(a, "number", Z, "nodeSpacing"), this.va.nodeSpacing = a, this.J())
        });
    w.defineProperty(Z,
        {
            layerSpacing: "layerSpacing"
        }, function ()
        {
            return this.va.layerSpacing
        }, function (a)
        {
            this.va.layerSpacing !== a && (w.j(a, "number", Z, "layerSpacing"), this.va.layerSpacing = a, this.J())
        });
    w.defineProperty(Z,
        {
            layerSpacingParentOverlap: "layerSpacingParentOverlap"
        }, function ()
        {
            return this.va.layerSpacingParentOverlap
        }, function (a)
        {
            this.va.layerSpacingParentOverlap !== a && (w.j(a, "number", Z, "layerSpacingParentOverlap"), 0 <= a && 1 >= a && (this.va.layerSpacingParentOverlap = a, this.J()))
        });
    w.defineProperty(Z,
        {
            compaction: "compaction"
        }, function ()
        {
            return this.va.compaction
        }, function (a)
        {
            this.va.compaction !== a && (w.ob(a, Z, Z, "compaction"), a === Uv || a === Wv) && (this.va.compaction = a, this.J())
        });
    w.defineProperty(Z,
        {
            breadthLimit: "breadthLimit"
        }, function ()
        {
            return this.va.breadthLimit
        }, function (a)
        {
            this.va.breadthLimit !== a && (w.j(a, "number", Z, "breadthLimit"), 0 <= a && (this.va.breadthLimit = a, this.J()))
        });
    w.defineProperty(Z,
        {
            rowSpacing: "rowSpacing"
        }, function ()
        {
            return this.va.rowSpacing
        }, function (a)
        {
            this.va.rowSpacing !== a && (w.j(a, "number", Z, "rowSpacing"), this.va.rowSpacing = a, this.J())
        });
    w.defineProperty(Z,
        {
            rowIndent: "rowIndent"
        }, function ()
        {
            return this.va.rowIndent
        }, function (a)
        {
            this.va.rowIndent !== a && (w.j(a, "number", Z, "rowIndent"), 0 <= a && (this.va.rowIndent = a, this.J()))
        });
    w.defineProperty(Z,
        {
            commentSpacing: "commentSpacing"
        }, function ()
        {
            return this.va.commentSpacing
        }, function (a)
        {
            this.va.commentSpacing !== a && (w.j(a, "number", Z, "commentSpacing"), this.va.commentSpacing = a, this.J())
        });
    w.defineProperty(Z,
        {
            commentMargin: "commentMargin"
        }, function ()
        {
            return this.va.commentMargin
        }, function (a)
        {
            this.va.commentMargin !== a && (w.j(a, "number", Z, "commentMargin"), this.va.commentMargin = a, this.J())
        });
    w.defineProperty(Z,
        {
            setsPortSpot: "setsPortSpot"
        }, function ()
        {
            return this.va.setsPortSpot
        }, function (a)
        {
            this.va.setsPortSpot !== a && (w.j(a, "boolean", Z, "setsPortSpot"), this.va.setsPortSpot = a, this.J())
        });
    w.defineProperty(Z,
        {
            portSpot: "portSpot"
        }, function ()
        {
            return this.va.portSpot
        }, function (a)
        {
            w.G(a, K, Z, "portSpot");
            this.va.portSpot.L(a) || (this.va.portSpot = a, this.J())
        });
    w.defineProperty(Z,
        {
            setsChildPortSpot: "setsChildPortSpot"
        }, function ()
        {
            return this.va.setsChildPortSpot
        }, function (a)
        {
            this.va.setsChildPortSpot !== a && (w.j(a, "boolean", Z, "setsChildPortSpot"), this.va.setsChildPortSpot = a, this.J())
        });
    w.defineProperty(Z,
        {
            childPortSpot: "childPortSpot"
        }, function ()
        {
            return this.va.childPortSpot
        }, function (a)
        {
            w.G(a, K, Z, "childPortSpot");
            this.va.childPortSpot.L(a) || (this.va.childPortSpot = a, this.J())
        });
    w.defineProperty(Z,
        {
            BK: "alternateSorting"
        }, function ()
        {
            return this.wa.sorting
        }, function (a)
        {
            this.wa.sorting !== a && (w.ob(a, Z, Z, "alternateSorting"), a === Jv || a === Kv || a === Lv || Mv) && (this.wa.sorting = a, this.J())
        });
    w.defineProperty(Z,
        {
            pK: "alternateComparer"
        }, function ()
        {
            return this.wa.comparer
        }, function (a)
        {
            this.wa.comparer !== a && (w.j(a, "function", Z, "alternateComparer"), this.wa.comparer = a, this.J())
        });
    w.defineProperty(Z,
        {
            jK: "alternateAngle"
        }, function ()
        {
            return this.wa.angle
        }, function (a)
        {
            this.wa.angle !== a && (w.j(a, "number", Z, "alternateAngle"), 0 === a || 90 === a || 180 === a || 270 === a) && (this.wa.angle = a, this.J())
        });
    w.defineProperty(Z,
        {
            iK: "alternateAlignment"
        }, function ()
        {
            return this.wa.alignment
        }, function (a)
        {
            this.wa.alignment !== a && (w.ob(a, Z, Z, "alternateAlignment"), this.wa.alignment = a, this.J())
        });
    w.defineProperty(Z,
        {
            tK: "alternateNodeIndent"
        }, function ()
        {
            return this.wa.nodeIndent
        }, function (a)
        {
            this.wa.nodeIndent !== a && (w.j(a, "number", Z, "alternateNodeIndent"), 0 <= a && (this.wa.nodeIndent = a, this.J()))
        });
    w.defineProperty(Z,
        {
            uK: "alternateNodeIndentPastParent"
        }, function ()
        {
            return this.wa.nodeIndentPastParent
        }, function (a)
        {
            this.wa.nodeIndentPastParent !== a && (w.j(a, "number", Z, "alternateNodeIndentPastParent"), 0 <= a && 1 >= a && (this.wa.nodeIndentPastParent = a, this.J()))
        });
    w.defineProperty(Z,
        {
            vK: "alternateNodeSpacing"
        }, function ()
        {
            return this.wa.nodeSpacing
        }, function (a)
        {
            this.wa.nodeSpacing !== a && (w.j(a, "number", Z, "alternateNodeSpacing"), this.wa.nodeSpacing = a, this.J())
        });
    w.defineProperty(Z,
        {
            rK: "alternateLayerSpacing"
        }, function ()
        {
            return this.wa.layerSpacing
        }, function (a)
        {
            this.wa.layerSpacing !== a && (w.j(a, "number", Z, "alternateLayerSpacing"), this.wa.layerSpacing = a, this.J())
        });
    w.defineProperty(Z,
        {
            sK: "alternateLayerSpacingParentOverlap"
        }, function ()
        {
            return this.wa.layerSpacingParentOverlap
        }, function (a)
        {
            this.wa.layerSpacingParentOverlap !== a && (w.j(a, "number", Z, "alternateLayerSpacingParentOverlap"), 0 <= a && 1 >= a && (this.wa.layerSpacingParentOverlap = a, this.J()))
        });
    w.defineProperty(Z,
        {
            oK: "alternateCompaction"
        }, function ()
        {
            return this.wa.compaction
        }, function (a)
        {
            this.wa.compaction !== a && (w.ob(a, Z, Z, "alternateCompaction"), a === Uv || a === Wv) && (this.wa.compaction = a, this.J())
        });
    w.defineProperty(Z,
        {
            kK: "alternateBreadthLimit"
        }, function ()
        {
            return this.wa.breadthLimit
        }, function (a)
        {
            this.wa.breadthLimit !== a && (w.j(a, "number", Z, "alternateBreadthLimit"), 0 <= a && (this.wa.breadthLimit = a, this.J()))
        });
    w.defineProperty(Z,
        {
            yK: "alternateRowSpacing"
        }, function ()
        {
            return this.wa.rowSpacing
        }, function (a)
        {
            this.wa.rowSpacing !== a && (w.j(a, "number", Z, "alternateRowSpacing"), this.wa.rowSpacing = a, this.J())
        });
    w.defineProperty(Z,
        {
            xK: "alternateRowIndent"
        }, function ()
        {
            return this.wa.rowIndent
        }, function (a)
        {
            this.wa.rowIndent !== a && (w.j(a, "number", Z, "alternateRowIndent"), 0 <= a && (this.wa.rowIndent = a, this.J()))
        });
    w.defineProperty(Z,
        {
            nK: "alternateCommentSpacing"
        }, function ()
        {
            return this.wa.commentSpacing
        }, function (a)
        {
            this.wa.commentSpacing !== a && (w.j(a, "number", Z, "alternateCommentSpacing"), this.wa.commentSpacing = a, this.J())
        });
    w.defineProperty(Z,
        {
            mK: "alternateCommentMargin"
        }, function ()
        {
            return this.wa.commentMargin
        }, function (a)
        {
            this.wa.commentMargin !== a && (w.j(a, "number", Z, "alternateCommentMargin"), this.wa.commentMargin = a, this.J())
        });
    w.defineProperty(Z,
        {
            AK: "alternateSetsPortSpot"
        }, function ()
        {
            return this.wa.setsPortSpot
        }, function (a)
        {
            this.wa.setsPortSpot !== a && (w.j(a, "boolean", Z, "alternateSetsPortSpot"), this.wa.setsPortSpot = a, this.J())
        });
    w.defineProperty(Z,
        {
            wK: "alternatePortSpot"
        }, function ()
        {
            return this.wa.portSpot
        }, function (a)
        {
            w.G(a, K, Z, "alternatePortSpot");
            this.wa.portSpot.L(a) || (this.wa.portSpot = a, this.J())
        });
    w.defineProperty(Z,
        {
            zK: "alternateSetsChildPortSpot"
        }, function ()
        {
            return this.wa.setsChildPortSpot
        }, function (a)
        {
            this.wa.setsChildPortSpot !== a && (w.j(a, "boolean", Z, "alternateSetsChildPortSpot"), this.wa.setsChildPortSpot = a, this.J())
        });
    w.defineProperty(Z,
        {
            lK: "alternateChildPortSpot"
        }, function ()
        {
            return this.wa.childPortSpot
        }, function (a)
        {
            w.G(a, K, Z, "alternateChildPortSpot");
            this.wa.childPortSpot.L(a) || (this.wa.childPortSpot = a, this.J())
        });
    var mv;
    Z.PathDefault = mv = w.p(Z, "PathDefault", -1);
    var nv;
    Z.PathDestination = nv = w.p(Z, "PathDestination", 0);
    var uv;
    Z.PathSource = uv = w.p(Z, "PathSource", 1);
    var Jv;
    Z.SortingForwards = Jv = w.p(Z, "SortingForwards", 10);
    var Kv;
    Z.SortingReverse = Kv = w.p(Z, "SortingReverse", 11);
    var Lv;
    Z.SortingAscending = Lv = w.p(Z, "SortingAscending", 12);
    var Mv;
    Z.SortingDescending = Mv = w.p(Z, "SortingDescending", 13);
    var Ow;
    Z.AlignmentCenterSubtrees = Ow = w.p(Z, "AlignmentCenterSubtrees", 20);
    var Nv;
    Z.AlignmentCenterChildren = Nv = w.p(Z, "AlignmentCenterChildren", 21);
    var Yv;
    Z.AlignmentStart = Yv = w.p(Z, "AlignmentStart", 22);
    var Zv;
    Z.AlignmentEnd = Zv = w.p(Z, "AlignmentEnd", 23);
    var Pv;
    Z.AlignmentBus = Pv = w.p(Z, "AlignmentBus", 24);
    var Ev;
    Z.AlignmentBusBranching = Ev = w.p(Z, "AlignmentBusBranching", 25);
    var Qv;
    Z.AlignmentTopLeftBus = Qv = w.p(Z, "AlignmentTopLeftBus", 26);
    var Rv;
    Z.AlignmentBottomRightBus = Rv = w.p(Z, "AlignmentBottomRightBus", 27);
    var Uv;
    Z.CompactionNone = Uv = w.p(Z, "CompactionNone", 30);
    var Wv;
    Z.CompactionBlock = Wv = w.p(Z, "CompactionBlock", 31);
    var ov;
    Z.StyleLayered = ov = w.p(Z, "StyleLayered", 40);
    var Iv;
    Z.StyleLastParents = Iv = w.p(Z, "StyleLastParents", 41);
    var Hv;
    Z.StyleAlternating = Hv = w.p(Z, "StyleAlternating", 42);
    var Gv;
    Z.StyleRootOnly = Gv = w.p(Z, "StyleRootOnly", 43);
    var qv;
    Z.ArrangementVertical = qv = w.p(Z, "ArrangementVertical", 50);
    var Xw;
    Z.ArrangementHorizontal = Xw = w.p(Z, "ArrangementHorizontal", 51);
    var tv;
    Z.ArrangementFixedRoots = tv = w.p(Z, "ArrangementFixedRoots", 52);
    var pv;
    Z.LayerIndividual = pv = w.p(Z, "LayerIndividual", 60);
    var Cv;
    Z.LayerSiblings = Cv = w.p(Z, "LayerSiblings", 61);
    var Bv;
    Z.LayerUniform = Bv = w.p(Z, "LayerUniform", 62);

    function sv()
    {
        tg.call(this)
    }
    w.La(sv, tg);
    w.ga("TreeNetwork", sv);
    sv.prototype.createVertex = function ()
    {
        return new rv
    };
    sv.prototype.createEdge = function ()
    {
        return new Zw
    };

    function rv()
    {
        os.call(this);
        this.initialized = !1;
        this.parent = null;
        this.children = [];
        this.maxGenerationCount = this.maxChildrenCount = this.descendantCount = this.level = 0;
        this.comments = null;
        this.pa = new y(0, 0);
        this.kb = new ia(0, 0);
        this.Oa = new y(0, 0);
        this.wq = this.vq = this.zJ = !1;
        this.Uu = this.zu = null;
        this.sorting = Jv;
        this.comparer = us;
        this.angle = 0;
        this.alignment = Nv;
        this.nodeIndentPastParent = this.nodeIndent = 0;
        this.nodeSpacing = 20;
        this.layerSpacing = 50;
        this.layerSpacingParentOverlap = 0;
        this.compaction = Wv;
        this.breadthLimit =
            0;
        this.rowSpacing = 25;
        this.commentSpacing = this.rowIndent = 10;
        this.commentMargin = 20;
        this.setsPortSpot = !0;
        this.portSpot = qc;
        this.setsChildPortSpot = !0;
        this.childPortSpot = qc
    }
    w.La(rv, os);
    w.ga("TreeVertex", rv);
    rv.prototype.copyInheritedPropertiesFrom = function (a)
    {
        null !== a && (this.sorting = a.sorting, this.comparer = a.comparer, this.angle = a.angle, this.alignment = a.alignment, this.nodeIndent = a.nodeIndent, this.nodeIndentPastParent = a.nodeIndentPastParent, this.nodeSpacing = a.nodeSpacing, this.layerSpacing = a.layerSpacing, this.layerSpacingParentOverlap = a.layerSpacingParentOverlap, this.compaction = a.compaction, this.breadthLimit = a.breadthLimit, this.rowSpacing = a.rowSpacing, this.rowIndent = a.rowIndent, this.commentSpacing = a.commentSpacing,
            this.commentMargin = a.commentMargin, this.setsPortSpot = a.setsPortSpot, this.portSpot = a.portSpot, this.setsChildPortSpot = a.setsChildPortSpot, this.childPortSpot = a.childPortSpot)
    };
    w.u(rv,
        {
            qn: "childrenCount"
        }, function ()
        {
            return this.children.length
        });
    w.defineProperty(rv,
        {
            ML: "relativePosition"
        }, function ()
        {
            return this.pa
        }, function (a)
        {
            this.pa.set(a)
        });
    w.defineProperty(rv,
        {
            YL: "subtreeSize"
        }, function ()
        {
            return this.kb
        }, function (a)
        {
            this.kb.set(a)
        });
    w.defineProperty(rv,
        {
            XL: "subtreeOffset"
        }, function ()
        {
            return this.Oa
        }, function (a)
        {
            this.Oa.set(a)
        });

    function Zw()
    {
        ps.call(this);
        this.Ws = new y(0, 0)
    }
    w.La(Zw, ps);
    w.ga("TreeEdge", Zw);
    Zw.prototype.commit = function ()
    {
        var a = this.link;
        if (null !== a && !a.dm)
        {
            var b = this.network.Tb,
                c = null,
                d = null;
            switch (b.Of)
            {
                case nv:
                    c = this.fromVertex;
                    d = this.toVertex;
                    break;
                case uv:
                    c = this.toVertex;
                    d = this.fromVertex;
                    break;
                default:
                    w.k("Unhandled path value " + b.Of.toString())
            }
            if (null !== c && null !== d)
                if (b = this.Ws, 0 !== b.x || 0 !== b.y || c.zJ)
                {
                    var d = c.cb,
                        e = Xv(c),
                        f = $v(c),
                        h = c.rowSpacing;
                    a.eo();
                    var k = a.nf === tj,
                        l = a.ac,
                        m = 0,
                        n, p;
                    a.om();
                    if (l || k)
                    {
                        for (m = 2; 4 < a.qa;) a.cG(2);
                        n = a.l(1);
                        p = a.l(2)
                    }
                    else
                    {
                        for (m = 1; 3 < a.qa;) a.cG(1);
                        n = a.l(0);
                        p =
                            a.l(a.qa - 1)
                    }
                    var q = a.l(a.qa - 1),
                        r = 0;
                    0 === e ? (c.alignment === Zv ? (r = d.bottom + b.y, 0 === b.y && n.y > q.y + c.rowIndent && (r = Math.min(r, Math.max(n.y, r - aw(c))))) : c.alignment === Yv ? (r = d.top + b.y, 0 === b.y && n.y < q.y - c.rowIndent && (r = Math.max(r, Math.min(n.y, r + aw(c))))) : r = c.vq || c.wq && 1 === c.maxGenerationCount ? d.top - c.Oa.y + b.y : d.y + d.height / 2 + b.y, k ? (a.w(m, n.x, r), m++, a.w(m, d.right + f, r), m++, a.w(m, d.right + f + (b.x - h) / 3, r), m++, a.w(m, d.right + f + 2 * (b.x - h) / 3, r), m++, a.w(m, d.right + f + (b.x - h), r), m++, a.w(m, p.x, r)) : (l && (a.w(m, d.right + f / 2, n.y),
                        m++), a.w(m, d.right + f / 2, r), m++, a.w(m, d.right + f + b.x - (l ? h / 2 : h), r), m++, l && a.w(m, a.l(m - 1).x, p.y))) : 90 === e ? (c.alignment === Zv ? (r = d.right + b.x, 0 === b.x && n.x > q.x + c.rowIndent && (r = Math.min(r, Math.max(n.x, r - aw(c))))) : c.alignment === Yv ? (r = d.left + b.x, 0 === b.x && n.x < q.x - c.rowIndent && (r = Math.max(r, Math.min(n.x, r + aw(c))))) : r = c.vq || c.wq && 1 === c.maxGenerationCount ? d.left - c.Oa.x + b.x : d.x + d.width / 2 + b.x, k ? (a.w(m, r, n.y), m++, a.w(m, r, d.bottom + f), m++, a.w(m, r, d.bottom + f + (b.y - h) / 3), m++, a.w(m, r, d.bottom + f + 2 * (b.y - h) / 3), m++, a.w(m, r, d.bottom +
                        f + (b.y - h)), m++, a.w(m, r, p.y)) : (l && (a.w(m, n.x, d.bottom + f / 2), m++), a.w(m, r, d.bottom + f / 2), m++, a.w(m, r, d.bottom + f + b.y - (l ? h / 2 : h)), m++, l && a.w(m, p.x, a.l(m - 1).y))) : 180 === e ? (c.alignment === Zv ? (r = d.bottom + b.y, 0 === b.y && n.y > q.y + c.rowIndent && (r = Math.min(r, Math.max(n.y, r - aw(c))))) : c.alignment === Yv ? (r = d.top + b.y, 0 === b.y && n.y < q.y - c.rowIndent && (r = Math.max(r, Math.min(n.y, r + aw(c))))) : r = c.vq || c.wq && 1 === c.maxGenerationCount ? d.top - c.Oa.y + b.y : d.y + d.height / 2 + b.y, k ? (a.w(m, n.x, r), m++, a.w(m, d.left - f, r), m++, a.w(m, d.left - f + (b.x +
                        h) / 3, r), m++, a.w(m, d.left - f + 2 * (b.x + h) / 3, r), m++, a.w(m, d.left - f + (b.x + h), r), m++, a.w(m, p.x, r)) : (l && (a.w(m, d.left - f / 2, n.y), m++), a.w(m, d.left - f / 2, r), m++, a.w(m, d.left - f + b.x + (l ? h / 2 : h), r), m++, l && a.w(m, a.l(m - 1).x, p.y))) : 270 === e ? (c.alignment === Zv ? (r = d.right + b.x, 0 === b.x && n.x > q.x + c.rowIndent && (r = Math.min(r, Math.max(n.x, r - aw(c))))) : c.alignment === Yv ? (r = d.left + b.x, 0 === b.x && n.x < q.x - c.rowIndent && (r = Math.max(r, Math.min(n.x, r + aw(c))))) : r = c.vq || c.wq && 1 === c.maxGenerationCount ? d.left - c.Oa.x + b.x : d.x + d.width / 2 + b.x, k ? (a.w(m,
                        r, n.y), m++, a.w(m, r, d.top - f), m++, a.w(m, r, d.top - f + (b.y + h) / 3), m++, a.w(m, r, d.top - f + 2 * (b.y + h) / 3), m++, a.w(m, r, d.top - f + (b.y + h)), m++, a.w(m, r, p.y)) : (l && (a.w(m, n.x, d.top - f / 2), m++), a.w(m, r, d.top - f / 2), m++, a.w(m, r, d.top - f + b.y + (l ? h / 2 : h)), m++, l && a.w(m, p.x, a.l(m - 1).y))) : w.k("Invalid angle " + e);
                    a.qj()
                }
                else e = c, f = d, a = this.link, c = Xv(e), c !== Xv(f) && (b = $v(e), d = e.cb, e = f.cb, 0 === c && e.left - d.right < b + 1 || 90 === c && e.top - d.bottom < b + 1 || 180 === c && d.left - e.right < b + 1 || 270 === c && d.top - e.bottom < b + 1 || (a.eo(), e = a.nf === tj, f = a.ac, h = Ov(this.fromVertex.alignment),
                    a.om(), 0 === c ? (c = d.right + b / 2, e ? 4 === a.qa && (b = a.l(3).y, a.ca(1, c - 20, a.l(1).y), a.w(2, c - 20, b), a.w(3, c, b), a.w(4, c + 20, b), a.ca(5, a.l(5).x, b)) : f ? h ? a.ca(3, a.l(2).x, a.l(4).y) : 6 === a.qa && (a.ca(2, c, a.l(2).y), a.ca(3, c, a.l(3).y)) : 4 === a.qa ? a.w(2, c, a.l(2).y) : 3 === a.qa ? a.ca(1, c, a.l(2).y) : 2 === a.qa && a.w(1, c, a.l(1).y)) : 90 === c ? (b = d.bottom + b / 2, e ? 4 === a.qa && (c = a.l(3).x, a.ca(1, a.l(1).x, b - 20), a.w(2, c, b - 20), a.w(3, c, b), a.w(4, c, b + 20), a.ca(5, c, a.l(5).y)) : f ? h ? a.ca(3, a.l(2).x, a.l(4).y) : 6 === a.qa && (a.ca(2, a.l(2).x, b), a.ca(3, a.l(3).x,
                    b)) : 4 === a.qa ? a.w(2, a.l(2).x, b) : 3 === a.qa ? a.ca(1, a.l(2).x, b) : 2 === a.qa && a.w(1, a.l(1).x, b)) : 180 === c ? (c = d.left - b / 2, e ? 4 === a.qa && (b = a.l(3).y, a.ca(1, c + 20, a.l(1).y), a.w(2, c + 20, b), a.w(3, c, b), a.w(4, c - 20, b), a.ca(5, a.l(5).x, b)) : f ? h ? a.ca(3, a.l(2).x, a.l(4).y) : 6 === a.qa && (a.ca(2, c, a.l(2).y), a.ca(3, c, a.l(3).y)) : 4 === a.qa ? a.w(2, c, a.l(2).y) : 3 === a.qa ? a.ca(1, c, a.l(2).y) : 2 === a.qa && a.w(1, c, a.l(1).y)) : 270 === c && (b = d.top - b / 2, e ? 4 === a.qa && (c = a.l(3).x, a.ca(1, a.l(1).x, b + 20), a.w(2, c, b + 20), a.w(3, c, b), a.w(4, c, b - 20), a.ca(5, c, a.l(5).y)) :
                    f ? h ? a.ca(3, a.l(2).x, a.l(4).y) : 6 === a.qa && (a.ca(2, a.l(2).x, b), a.ca(3, a.l(3).x, b)) : 4 === a.qa ? a.w(2, a.l(2).x, b) : 3 === a.qa ? a.ca(1, a.l(2).x, b) : 2 === a.qa && a.w(1, a.l(1).x, b)), a.qj()))
        }
    };
    w.defineProperty(Zw,
        {
            LL: "relativePoint"
        }, function ()
        {
            return this.Ws
        }, function (a)
        {
            this.Ws.set(a)
        });

    function $w()
    {
        G.call(this);
        this.Ue = null
    }
    w.La($w, G);
    $w.prototype.cloneProtected = function (a)
    {
        G.prototype.cloneProtected.call(this, a);
        a.element = this.Ue.cloneNode(!0)
    };
    $w.prototype.toString = function ()
    {
        return "HTMLHost(" + this.Ue.toString() + ")#" + w.Pd(this)
    };
    $w.prototype.Ik = function (a, b)
    {
        var c = this.Ue;
        if (null !== c)
        {
            var d = this.Ya(Jb);
            d.x -= this.U.width / 2;
            d.y -= this.U.height / 2;
            d.x -= this.U.x;
            d.y -= this.U.y;
            var d = b.Cy(d),
                e = b.tj;
            null === e || e.contains(c) || e.appendChild(c);
            e = this.transform;
            c.style.transform = "matrix(" + e.m11 + "," + e.m12 + "," + e.m21 + "," + e.m22 + "," + e.dx + "," + e.dy + ")";
            c.style.transformOrigin = "0 0";
            e = d.y;
            c.style.left = d.x + "px";
            c.style.top = e + "px"
        }
    };
    $w.prototype.On = function (a, b, c, d)
    {
        var e = this.Ca;
        isFinite(e.width) && (a = e.width);
        isFinite(e.height) && (b = e.height);
        var e = this.Gf,
            f = this.si;
        c = Math.max(c, f.width);
        d = Math.max(d, f.height);
        a = Math.min(e.width, a);
        b = Math.min(e.height, b);
        a = Math.max(c, a);
        b = Math.max(d, b);
        c = this.Ue;
        null !== c && (b = c.getBoundingClientRect(), a = b.width, b = b.height);
        Ua(this.Wc, a, b);
        Eo(this, 0, 0, a, b)
    };
    $w.prototype.pj = function (a, b, c, d)
    {
        Jo(this, a, b, c, d)
    };
    w.u($w,
        {
            Ja: "naturalBounds"
        }, function ()
        {
            return this.Wc
        });
    w.defineProperty($w,
        {
            element: "element"
        }, function ()
        {
            return this.Ue
        }, function (a)
        {
            var b = this.Ue;
            b !== a && (a instanceof HTMLElement || w.k("HTMLHost.element must be an instance of Element."), this.Ue = a, a.className = "HTMLHost", this.h("element", b, a), this.oa())
        });
    ca.version = "1.8.24";
    window && (window.module && "object" === typeof window.module && "object" === typeof window.module.exports ? window.module.exports = ca : window.define && "function" === typeof window.define && window.define.amd ? (window.go = ca, window.define(ca)) : window.go = ca);
    "undefined" !== typeof module && "object" === typeof module.exports && (module.exports = ca);
})(window);